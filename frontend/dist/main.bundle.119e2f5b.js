/*! For license information please see main.bundle.119e2f5b.js.LICENSE.txt */
(()=>{var e={5:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(348));t.default=i.default},8:(e,t,r)=>{"use strict";e.exports=r.p+"2291438f1bcf1c1e5a47.svg"},39:(e,t,r)=>{"use strict";r.d(t,{C3:()=>Se,E3:()=>Te,Jt:()=>ue,KB:()=>K,LQ:()=>D,Nb:()=>Z,PY:()=>u,UF:()=>ee,Y4:()=>se,Y6:()=>J,Zd:()=>te,Zz:()=>l,dC:()=>y,fm:()=>m,jw:()=>W,lR:()=>ke,lV:()=>Y,n0:()=>p,t6:()=>we,yM:()=>X,yq:()=>ae});var n=r(362),i=r(540),a=r(69),s=r(635),o=r(961);function l({context:e,url:t,nonce:r}){"string"==typeof t&&(t=new URL(t));let{manifest:a,routeModules:s,criticalCss:o,serverHandoffString:l}=e,u=(0,n.OW)(a.routes,s,e.future,e.isSpaMode);e.staticHandlerContext.loaderData={...e.staticHandlerContext.loaderData};for(let t of e.staticHandlerContext.matches){let r=t.route.id,i=s[r],a=e.manifest.routes[r];i&&a&&(0,n.vB)(r,i.clientLoader,a.hasLoader,e.isSpaMode)&&(i.HydrateFallback||!a.hasLoader)&&delete e.staticHandlerContext.loaderData[r]}let c=(0,n.KD)(u,e.staticHandlerContext);return i.createElement(i.Fragment,null,i.createElement(n.yL.Provider,{value:{manifest:a,routeModules:s,criticalCss:o,serverHandoffString:l,future:e.future,ssr:e.ssr,isSpaMode:e.isSpaMode,routeDiscovery:e.routeDiscovery,serializeError:e.serializeError,renderMeta:e.renderMeta}},i.createElement(n.aJ,{location:c.state.location},i.createElement(n.je,{router:c,context:e.staticHandlerContext,hydrate:!1}))),e.serverHandoffStream?i.createElement(i.Suspense,null,i.createElement(n.UU,{context:e,identifier:0,reader:e.serverHandoffStream.getReader(),textDecoder:new TextDecoder,nonce:r})):null)}function u(e,t){return function({initialEntries:r,initialIndex:a,hydrationData:s,future:o}){let l=i.useRef(),u=i.useRef();if(null==l.current){u.current={future:{unstable_subResourceIntegrity:!0===o?.unstable_subResourceIntegrity,unstable_middleware:!0===o?.unstable_middleware},manifest:{routes:{},entry:{imports:[],module:""},url:"",version:""},routeModules:{},ssr:!1,isSpaMode:!1,routeDiscovery:{mode:"lazy",manifestPath:"/__manifest"}};let i=c((0,n.R_)(e,e=>e),void 0!==t?t:o?.unstable_middleware?new n.$Y:{},u.current.manifest,u.current.routeModules);l.current=(0,n.bg)(i,{initialEntries:r,initialIndex:a,hydrationData:s})}return i.createElement(n.yL.Provider,{value:u.current},i.createElement(n.pg,{router:l.current}))}}function c(e,t,r,i,a){return e.map(e=>{if(!e.id)throw new Error("Expected a route.id in react-router processRoutes() function");let s={id:e.id,path:e.path,index:e.index,Component:e.Component?(0,n.ux)(e.Component):void 0,HydrateFallback:e.HydrateFallback?(0,n.AX)(e.HydrateFallback):void 0,ErrorBoundary:e.ErrorBoundary?(0,n.Vp)(e.ErrorBoundary):void 0,action:e.action?r=>e.action({...r,context:t}):void 0,loader:e.loader?r=>e.loader({...r,context:t}):void 0,handle:e.handle,shouldRevalidate:e.shouldRevalidate},o={id:e.id,path:e.path,index:e.index,parentId:a,hasAction:null!=e.action,hasLoader:null!=e.loader,hasClientAction:!1,hasClientLoader:!1,hasClientMiddleware:!1,hasErrorBoundary:null!=e.ErrorBoundary,module:"build/stub-path-to-module.js",clientActionModule:void 0,clientLoaderModule:void 0,clientMiddlewareModule:void 0,hydrateFallbackModule:void 0};return r.routes[s.id]=o,i[e.id]={default:s.Component||n.sv,ErrorBoundary:s.ErrorBoundary||void 0,handle:e.handle,links:e.links,meta:e.meta,shouldRevalidate:e.shouldRevalidate},e.children&&(s.children=c(e.children,t,r,i,s.id)),s})}var d=new TextEncoder,f=async(e,t)=>{let r=e.lastIndexOf("."),n=e.slice(0,r),i=e.slice(r+1),a=d.encode(n),s=await h(t,["verify"]);try{let e=function(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(atob(i));return!!await crypto.subtle.verify("HMAC",s,e,a)&&n}catch(e){return!1}},h=async(e,t)=>crypto.subtle.importKey("raw",d.encode(e),{name:"HMAC",hash:"SHA-256"},!1,t),p=(e,t={})=>{let{secrets:r=[],...i}={path:"/",sameSite:"lax",...t};return function(e,t){(0,n.mc)(!t,`The "${e}" cookie has an "expires" property set. This will cause the expires value to not be updated when the session is committed. Instead, you should set the expires value when serializing the cookie. You can use \`commitSession(session, { expires })\` if using a session storage object, or \`cookie.serialize("value", { expires })\` if you're using the cookie directly.`)}(e,i.expires),{get name(){return e},get isSigned(){return r.length>0},get expires(){return void 0!==i.maxAge?new Date(Date.now()+1e3*i.maxAge):i.expires},async parse(t,n){if(!t)return null;let s=(0,a.qg)(t,{...i,...n});if(e in s){let t=s[e];if("string"==typeof t&&""!==t){let e=await async function(e,t){if(t.length>0){for(let r of t){let t=await f(e,r);if(!1!==t)return g(t)}return null}return g(e)}(t,r);return e}return""}return null},serialize:async(t,n)=>(0,a.lK)(e,""===t?"":await async function(e,t){let r=function(e){return btoa(function(e){let t,r,n=e.toString(),i="",a=0;for(;a<n.length;){if(t=n.charAt(a++),"%"===t)if("u"===n.charAt(a)){if(r=n.slice(a+1,a+5),/^[\da-f]{4}$/i.exec(r)){i+=String.fromCharCode(parseInt(r,16)),a+=5;continue}}else if(r=n.slice(a,a+2),/^[\da-f]{2}$/i.exec(r)){i+=String.fromCharCode(parseInt(r,16)),a+=2;continue}i+=t}return i}(encodeURIComponent(JSON.stringify(e))))}(e);return t.length>0&&(r=await(async(e,t)=>{let r=d.encode(e),n=await h(t,["sign"]),i=await crypto.subtle.sign("HMAC",n,r);return e+"."+btoa(String.fromCharCode(...new Uint8Array(i))).replace(/=+$/,"")})(r,t[0])),r}(t,r),{...i,...n})}},m=e=>null!=e&&"string"==typeof e.name&&"boolean"==typeof e.isSigned&&"function"==typeof e.parse&&"function"==typeof e.serialize;function g(e){try{return JSON.parse(decodeURIComponent(function(e){let t,r,n=e.toString(),i="",a=0;for(;a<n.length;)t=n.charAt(a++),/[\w*+\-./@]/.exec(t)?i+=t:(r=t.charCodeAt(0),i+=r<256?"%"+v(r,2):"%u"+v(r,4).toUpperCase());return i}(atob(e))))}catch(e){return{}}}function v(e,t){let r=e.toString(16);for(;r.length<t;)r="0"+r;return r}var y=(e=>(e.Development="development",e.Production="production",e.Test="test",e))(y||{});function E(e,t){if(e instanceof Error&&"development"!==t){let e=new Error("Unexpected Server Error");return e.stack=void 0,e}return e}function b(e,t){return Object.entries(e).reduce((e,[r,n])=>Object.assign(e,{[r]:E(n,t)}),{})}function S(e,t){let r=E(e,t);return{message:r.message,stack:r.stack}}function T(e,t){if(!e)return null;let r=Object.entries(e),i={};for(let[e,a]of r)if((0,n.pX)(a))i[e]={...a,__type:"RouteErrorResponse"};else if(a instanceof Error){let r=E(a,t);i[e]={message:r.message,stack:r.stack,__type:"Error",..."Error"!==r.name?{__subType:r.name}:{}}}else i[e]=a;return i}function w(e,t,r){let i=(0,n.ue)(e,t,r);return i?i.map(e=>({params:e.params,pathname:e.pathname,route:e.route})):null}async function k(e,t){let r=await e({request:L(R(t.request)),params:t.params,context:t.context});if((0,n.YX)(r)&&r.init&&r.init.status&&(0,n.QE)(r.init.status))throw new Response(null,r.init);return r}function R(e){let t=new URL(e.url),r=t.searchParams.getAll("index");t.searchParams.delete("index");let n=[];for(let e of r)e&&n.push(e);for(let e of n)t.searchParams.append("index",e);let i={method:e.method,body:e.body,headers:e.headers,signal:e.signal};return i.body&&(i.duplex="half"),new Request(t.href,i)}function L(e){let t=new URL(e.url);t.searchParams.delete("_routes");let r={method:e.method,body:e.body,headers:e.headers,signal:e.signal};return r.body&&(r.duplex="half"),new Request(t.href,r)}function A(e,t){if(!1===e||null==e)throw console.error("The following error is a bug in React Router; please open an issue! https://github.com/remix-run/react-router/issues/new/choose"),new Error(t)}var _="__reactRouterDevServerHooks";function D(e){globalThis[_]=e}function C(){return globalThis[_]}function I(e,t){if("undefined"!=typeof process)try{if("yes"===process.env?.IS_RR_BUILD_REQUEST)return e.headers.get(t)}catch(e){}return null}function P(e){let t={};return Object.values(e).forEach(e=>{if(e){let r=e.parentId||"";t[r]||(t[r]=[]),t[r].push(e)}}),t}function x(e,t="",r=P(e)){return(r[t]||[]).map(t=>({...t,children:x(e,t.id,r)}))}function O(e,t,r="",i=P(e)){return(i[r]||[]).map(r=>{let a={hasErrorBoundary:"root"===r.id||null!=r.module.ErrorBoundary,id:r.id,path:r.path,unstable_middleware:r.module.unstable_middleware,loader:r.module.loader?async e=>{let t=I(e.request,"X-React-Router-Prerender-Data");if(null!=t){let e=t?decodeURI(t):t;A(e,"Missing prerendered data for route");let i=(new TextEncoder).encode(e),a=new ReadableStream({start(e){e.enqueue(i),e.close()}}),s=(await(0,n.ht)(a,global)).value;if(s&&n.lR in s){let e=s[n.lR],t={status:e.status};throw e.reload?(0,n.Sk)(e.redirect,t):e.replace?(0,n.HC)(e.redirect,t):(0,n.V2)(e.redirect,t)}{A(s&&r.id in s,"Unable to decode prerendered data");let e=s[r.id];return A("data"in e,"Unable to process prerendered data"),e.data}}return await k(r.module.loader,e)}:void 0,action:r.module.action?e=>k(r.module.action,e):void 0,handle:r.module.handle};return r.index?{index:!0,...a}:{caseSensitive:r.caseSensitive,children:O(e,t,r.id,i),...a}})}var M={"&":"\\u0026",">":"\\u003e","<":"\\u003c","\u2028":"\\u2028","\u2029":"\\u2029"},F=/[&><\u2028\u2029]/g;function N(e){return JSON.stringify(e).replace(F,e=>M[e])}function U(e,t){return function(e){let r,n=e.errors?e.matches.findIndex(t=>e.errors[t.route.id]):-1,i=n>=0?e.matches.slice(0,n+1):e.matches;if(n>=0){let{actionHeaders:t,actionData:i,loaderHeaders:a,loaderData:s}=e;e.matches.slice(n).some(e=>{let n=e.route.id;return!t[n]||i&&i.hasOwnProperty(n)?a[n]&&!s.hasOwnProperty(n)&&(r=a[n]):r=t[n],null!=r})}return i.reduce((n,a,s)=>{let{id:o}=a.route,l=e.loaderHeaders[o]||new Headers,u=e.actionHeaders[o]||new Headers,c=null!=r&&s===i.length-1,d=c&&r!==l&&r!==u,f=(e=>{let r=t.routes[e.route.id];return A(r,`Route with id "${e.route.id}" not found in build`),r.module.headers})(a);if(null==f){let e=new Headers(n);return d&&B(r,e),B(u,e),B(l,e),e}let h=new Headers("function"==typeof f?f({loaderHeaders:l,parentHeaders:n,actionHeaders:u,errorHeaders:c?r:void 0}):f);return d&&B(r,h),B(u,h),B(l,h),B(n,h),h},new Headers)}(e)}function B(e,t){let r=e.get("Set-Cookie");if(r){let e=(0,s.splitCookiesString)(r),n=new Set(t.getSetCookie());e.forEach(e=>{n.has(e)||t.append("Set-Cookie",e)})}}var j=new Set([...n.RF,304]);function H(e,t,r,{result:n,headers:i,status:a}){let s=new Headers(i);return s.set("X-Remix-Response","yes"),j.has(a)?new Response(null,{status:a,headers:s}):(s.set("Content-Type","text/x-script"),s.delete("Content-Length"),new Response(z(n,e.signal,t.entry.module.streamTimeout,r),{status:a||200,headers:s}))}function G(e,t,r){let i=t.get("Location");return r&&(i=(0,n.pb)(i,r)||i),{redirect:i,status:e,revalidate:t.has("X-Remix-Revalidate")||t.has("Set-Cookie"),reload:t.has("X-Remix-Reload-Document"),replace:t.has("X-Remix-Replace")}}function z(e,t,r,i){let a=new AbortController,s=setTimeout(()=>a.abort(new Error("Server Timeout")),"number"==typeof r?r:4950);return t.addEventListener("abort",()=>clearTimeout(s)),(0,n.lF)(e,{signal:a.signal,plugins:[e=>{if(e instanceof Error){let{name:t,message:r,stack:n}="production"===i?E(e,i):e;return["SanitizedError",t,r,n]}if(e instanceof n.cj){let{data:t,status:r,statusText:n}=e;return["ErrorResponse",t,r,n]}if(e&&"object"==typeof e&&n.lR in e)return["SingleFetchRedirect",e[n.lR]]}],postPlugins:[e=>{if(e&&"object"==typeof e)return["SingleFetchClassInstance",Object.fromEntries(Object.entries(e))]},()=>["SingleFetchFallback"]]})}function V(e,t){let r=x(e.routes),i=O(e.routes,e.future),a="development"===(s=t)||"production"===s||"test"===s?t:"production";var s;let o=(0,n.d6)(i,{basename:e.basename}),l=e.entry.module.handleError||((e,{request:t})=>{"test"===a||t.signal.aborted||console.error((0,n.pX)(e)&&e.error?e.error:e)});return{routes:r,dataRoutes:i,serverMode:a,staticHandler:o,errorHandler:l}}var K=(e,t)=>{let r,i,a,s,o;return async function(l,u){if(r="function"==typeof e?await e():e,"function"==typeof e){let e=V(r,t);i=e.routes,a=e.serverMode,s=e.staticHandler,o=e.errorHandler}else if(!(i&&a&&s&&o)){let e=V(r,t);i=e.routes,a=e.serverMode,s=e.staticHandler,o=e.errorHandler}let c,d={},f=e=>{"development"===t&&C()?.processRequestError?.(e),o(e,{context:c,params:d,request:l})};if(r.future.unstable_middleware)if(null==u)c=new n.$Y;else try{c=new n.$Y(u)}catch(e){let t=new Error(`Unable to create initial \`unstable_RouterContextProvider\` instance. Please confirm you are returning an instance of \`Map<unstable_routerContext, unknown>\` from your \`getLoadContext\` function.\n\nError: ${e instanceof Error?e.toString():e}`);return f(t),$(t,a)}else c=u||{};let h=new URL(l.url),p=r.basename||"/",m=h.pathname;"/_root.data"===(0,n.pb)(m,p)?m=p:m.endsWith(".data")&&(m=m.replace(/\.data$/,"")),"/"!==(0,n.pb)(m,p)&&m.endsWith("/")&&(m=m.slice(0,-1));let g="yes"===I(l,"X-React-Router-SPA-Mode");if(!r.ssr){let e=decodeURI(m);if(0===r.prerender.length)g=!0;else if(!r.prerender.includes(e)&&!r.prerender.includes(e+"/")){if(h.pathname.endsWith(".data"))return o(new n.cj(404,"Not Found",`Refusing to SSR the path \`${e}\` because \`ssr:false\` is set and the path is not included in the \`prerender\` config, so in production the path will be a 404.`),{context:c,params:d,request:l}),new Response("Not Found",{status:404,statusText:"Not Found"});g=!0}}let v=(0,n.lS)(r.routeDiscovery.manifestPath,p);if(h.pathname===v)try{let e=await async function(e,t,r){if(e.assets.version!==r.searchParams.get("version"))return new Response(null,{status:204,headers:{"X-Remix-Reload-Document":"true"}});let n={};if(r.searchParams.has("p")){let i=new Set;r.searchParams.getAll("p").forEach(e=>{e.startsWith("/")||(e=`/${e}`);let t=e.split("/").slice(1);t.forEach((e,r)=>{let n=t.slice(0,r+1).join("/");i.add(`/${n}`)})});for(let r of i){let i=w(t,r,e.basename);if(i)for(let t of i){let r=t.route.id,i=e.assets.routes[r];i&&(n[r]=i)}}return Response.json(n,{headers:{"Cache-Control":"public, max-age=31536000, immutable"}})}return new Response("Invalid Request",{status:400})}(r,i,h);return e}catch(e){return f(e),new Response("Unknown Server Error",{status:500})}let y,E=w(i,m,r.basename);if(E&&E.length>0&&Object.assign(d,E[0].params),h.pathname.endsWith(".data")){let e=new URL(l.url);e.pathname=m;let t=w(i,e.pathname,r.basename);if(y=await async function(e,t,r,i,a,s,o){let l="GET"!==i.method?await async function(e,t,r,i,a,s,o){try{let l=function(r){let a,s=U(r,e);return(0,n.QE)(r.statusCode)&&s.has("Location")?H(i,e,t,{result:G(r.statusCode,s,e.basename),headers:s,status:n.gI}):(r.errors&&(Object.values(r.errors).forEach(e=>{(0,n.pX)(e)&&!e.error||o(e)}),r.errors=b(r.errors,t)),a=r.errors?{error:Object.values(r.errors)[0]}:{data:Object.values(r.actionData||{})[0]},H(i,e,t,{result:a,headers:s,status:r.statusCode}))},u=new Request(a,{method:i.method,body:i.body,headers:i.headers,signal:i.signal,...i.body?{duplex:"half"}:void 0}),c=await r.query(u,{requestContext:s,skipLoaderErrorBubbling:!0,skipRevalidation:!0,unstable_respond:l});return(0,n.Sv)(c)||(c=l(c)),(0,n.U)(c)?H(i,e,t,{result:G(c.status,c.headers,e.basename),headers:c.headers,status:n.gI}):c}catch(r){return o(r),H(i,e,t,{result:{error:r},headers:new Headers,status:500})}}(t,e,r,i,a,s,o):await async function(e,t,r,i,a,s,o){try{let l=function(r){let a=U(r,e);if((0,n.QE)(r.statusCode)&&a.has("Location"))return H(i,e,t,{result:{[n.lR]:G(r.statusCode,a,e.basename)},headers:a,status:n.gI});r.errors&&(Object.values(r.errors).forEach(e=>{(0,n.pX)(e)&&!e.error||o(e)}),r.errors=b(r.errors,t));let s={},l=new Set(r.matches.filter(e=>d?d.has(e.route.id):null!=e.route.loader).map(e=>e.route.id));if(r.errors)for(let[e,t]of Object.entries(r.errors))s[e]={error:t};for(let[e,t]of Object.entries(r.loaderData))!(e in s)&&l.has(e)&&(s[e]={data:t});return H(i,e,t,{result:s,headers:a,status:r.statusCode})},u=new Request(a,{headers:i.headers,signal:i.signal}),c=new URL(i.url).searchParams.get("_routes"),d=c?new Set(c.split(",")):null,f=await r.query(u,{requestContext:s,filterMatchesToLoad:e=>!d||d.has(e.route.id),skipLoaderErrorBubbling:!0,unstable_respond:l});return(0,n.Sv)(f)||(f=l(f)),(0,n.U)(f)?H(i,e,t,{result:{[n.lR]:G(f.status,f.headers,e.basename)},headers:f.headers,status:n.gI}):f}catch(r){return o(r),H(i,e,t,{result:{root:{error:r}},headers:new Headers,status:500})}}(t,e,r,i,a,s,o);return l}(a,r,s,l,e,c,f),r.entry.module.handleDataRequest&&(y=await r.entry.module.handleDataRequest(y,{context:c,params:t?t[0].params:{},request:l}),(0,n.U)(y))){let e=G(y.status,y.headers,r.basename);"GET"===l.method&&(e={[n.lR]:e});let t=new Headers(y.headers);return t.set("Content-Type","text/x-script"),new Response(z(e,l.signal,r.entry.module.streamTimeout,a),{status:n.gI,headers:t})}}else if(!g&&E&&null==E[E.length-1].route.module.default&&null==E[E.length-1].route.module.ErrorBoundary)y=await async function(e,t,r,i,a,s,o){try{let e=await r.queryRoute(a,{routeId:i,requestContext:s,unstable_respond:t.future.unstable_middleware?e=>e:void 0});return(0,n.Sv)(e)?e:"string"==typeof e?new Response(e):Response.json(e)}catch(t){if((0,n.Sv)(t))return t.headers.set("X-Remix-Catch","yes"),t;if((0,n.pX)(t))return t&&o(t),function(e,t){return Response.json(S(e.error||new Error("Unexpected Server Error"),t),{status:e.status,statusText:e.statusText,headers:{"X-Remix-Error":"yes"}})}(t,e);if(t instanceof Error&&"Expected a response from queryRoute"===t.message){let t=new Error("Expected a Response to be returned from resource route handler");return o(t),$(t,e)}return o(t),$(t,e)}}(a,r,s,E.slice(-1)[0].route.id,l,c,f);else{let e,{pathname:i}=h;r.unstable_getCriticalCss?e=await r.unstable_getCriticalCss({pathname:i}):"development"===t&&C()?.getCriticalCss&&(e=await(C()?.getCriticalCss?.(i))),y=await async function(e,t,r,i,a,s,o,l){try{let e=await r.query(i,{requestContext:a,unstable_respond:t.future.unstable_middleware?e=>u(e,o):void 0});return(0,n.Sv)(e)?e:u(e,o)}catch(e){return s(e),new Response(null,{status:500})}async function u(o,u){if((0,n.Sv)(o))return o;let c=U(o,t);if(j.has(o.statusCode))return new Response(null,{status:o.statusCode,headers:c});o.errors&&(Object.values(o.errors).forEach(e=>{(0,n.pX)(e)&&!e.error||s(e)}),o.errors=b(o.errors,e));let d={loaderData:o.loaderData,actionData:o.actionData,errors:T(o.errors,e)},f={basename:t.basename,future:t.future,routeDiscovery:t.routeDiscovery,ssr:t.ssr,isSpaMode:u},h={manifest:t.assets,routeModules:(m=t.routes,Object.keys(m).reduce((e,t)=>{let r=m[t];return r&&(e[t]=r.module),e},{})),staticHandlerContext:o,criticalCss:l,serverHandoffString:N({...f,criticalCss:l}),serverHandoffStream:z(d,i.signal,t.entry.module.streamTimeout,e),renderMeta:{},future:t.future,ssr:t.ssr,routeDiscovery:t.routeDiscovery,isSpaMode:u,serializeError:t=>S(t,e)},p=t.entry.module.default;var m;try{return await p(i,o.statusCode,c,h,a)}catch(l){s(l);let u=l;if((0,n.Sv)(l))try{let e=await function(e){let t=e.headers.get("Content-Type");return t&&/\bapplication\/json\b/.test(t)?null==e.body?null:e.json():e.text()}(l);u=new n.cj(l.status,l.statusText,e)}catch(e){}(o=(0,n.eF)(r.dataRoutes,o,u)).errors&&(o.errors=b(o.errors,e));let d={loaderData:o.loaderData,actionData:o.actionData,errors:T(o.errors,e)};h={...h,staticHandlerContext:o,serverHandoffString:N(f),serverHandoffStream:z(d,i.signal,t.entry.module.streamTimeout,e),renderMeta:{}};try{return await p(i,o.statusCode,c,h,a)}catch(t){return s(t),$(t,e)}}}}(a,r,s,l,c,f,g,e)}return"HEAD"===l.method?new Response(null,{headers:y.headers,status:y.status,statusText:y.statusText}):y}};function $(e,t){let r="Unexpected Server Error";return"production"!==t&&(r+=`\n\n${String(e)}`),new Response(r,{status:500,headers:{"Content-Type":"text/plain"}})}function q(e){return`__flash_${e}__`}var W=(e={},t="")=>{let r=new Map(Object.entries(e));return{get id(){return t},get data(){return Object.fromEntries(r)},has:e=>r.has(e)||r.has(q(e)),get(e){if(r.has(e))return r.get(e);let t=q(e);if(r.has(t)){let e=r.get(t);return r.delete(t),e}},set(e,t){r.set(e,t)},flash(e,t){r.set(q(e),t)},unset(e){r.delete(e)}}},Y=e=>null!=e&&"string"==typeof e.id&&void 0!==e.data&&"function"==typeof e.has&&"function"==typeof e.get&&"function"==typeof e.set&&"function"==typeof e.flash&&"function"==typeof e.unset;function X({cookie:e,createData:t,readData:r,updateData:n,deleteData:i}){let a=m(e)?e:p(e?.name||"__session",e);return Q(a),{async getSession(e,t){let n=e&&await a.parse(e,t),i=n&&await r(n);return W(i||{},n||"")},async commitSession(e,r){let{id:i,data:s}=e,o=null!=r?.maxAge?new Date(Date.now()+1e3*r.maxAge):null!=r?.expires?r.expires:a.expires;return i?await n(i,s,o):i=await t(s,o),a.serialize(i,r)},destroySession:async(e,t)=>(await i(e.id),a.serialize("",{...t,maxAge:void 0,expires:new Date(0)}))}}function Q(e){(0,n.mc)(e.isSigned,`The "${e.name}" cookie is not signed, but session cookies should be signed to prevent tampering on the client before they are sent back to the server. See https://reactrouter.com/explanation/sessions-and-cookies#signing-cookies for more information.`)}function J({cookie:e}={}){let t=m(e)?e:p(e?.name||"__session",e);return Q(t),{getSession:async(e,r)=>W(e&&await t.parse(e,r)||{}),async commitSession(e,r){let n=await t.serialize(e.data,r);if(n.length>4096)throw new Error("Cookie length will exceed browser maximum. Length: "+n.length);return n},destroySession:async(e,r)=>t.serialize("",{...r,maxAge:void 0,expires:new Date(0)})}}function Z({cookie:e}={}){let t=new Map;return X({cookie:e,async createData(e,r){let n=Math.random().toString(36).substring(2,10);return t.set(n,{data:e,expires:r}),n},async readData(e){if(t.has(e)){let{data:r,expires:n}=t.get(e);if(!n||n>new Date)return r;n&&t.delete(e)}return null},async updateData(e,r,n){t.set(e,{data:r,expires:n})},async deleteData(e){t.delete(e)}})}function ee(e,...t){let r=t[0];return e.split("/").map(t=>{if("*"===t)return r?r["*"]:void 0;const n=t.match(/^:([\w-]+)(\?)?/);if(!n)return t;const i=n[1],a=r?r[i]:void 0;if(void 0===n[2]&&void 0===a)throw Error(`Path '${e}' requires param '${i}' but it was not provided`);return a}).filter(e=>void 0!==e).join("/")}function te(e,t,r,i,a,s){let o={...e,loaderData:{...e.loaderData}},l=(0,n.ue)(t,i,a);if(l)for(let e of l){let t=e.route.id,i=r(t);!(0,n.vB)(t,i.clientLoader,i.hasLoader,s)||!i.hasHydrateFallback&&i.hasLoader?i.hasLoader||(o.loaderData[t]=null):delete o.loaderData[t]}return o}var re=class extends i.Component{constructor(e){super(e),this.state={error:null,location:e.location}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location?{error:null,location:e.location}:{error:t.error,location:t.location}}render(){return this.state.error?i.createElement(ie,{error:this.state.error,renderAppShell:!0}):this.props.children}};function ne({renderAppShell:e,title:t,children:r}){return e?i.createElement("html",{lang:"en"},i.createElement("head",null,i.createElement("meta",{charSet:"utf-8"}),i.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),i.createElement("title",null,t)),i.createElement("body",null,i.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},r))):r}function ie({error:e,renderAppShell:t}){console.error(e);let r,a=i.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "ðŸ’¿ Hey developer ðŸ‘‹. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if((0,n.pX)(e))return i.createElement(ne,{renderAppShell:t,title:"Unhandled Thrown Response!"},i.createElement("h1",{style:{fontSize:"24px"}},e.status," ",e.statusText),n.U2?a:null);if(e instanceof Error)r=e;else{let t=null==e?"Unknown Error":"object"==typeof e&&"toString"in e?e.toString():JSON.stringify(e);r=new Error(t)}return i.createElement(ne,{renderAppShell:t,title:"Application Error!"},i.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),i.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),a)}function ae({hasRootLayout:e}){let t=(0,n.r5)();if(void 0===e)throw new Error("Missing 'hasRootLayout' prop");return i.createElement(ie,{renderAppShell:!e,error:t})}function se({createFromReadableStream:e,createTemporaryReferenceSet:t,encodeReply:r,fetch:n=fetch}){const a=window;let s=0;return async(o,l)=>{let u=a.__routerActionID=(a.__routerActionID??(a.__routerActionID=0))+1;const c=t(),d=await n(new Request(location.href,{body:await r(l,{temporaryReferences:c}),method:"POST",headers:{Accept:"text/x-component","rsc-action-id":o}}));if(!d.body)throw new Error("No response body");const f=await e(d.body,{temporaryReferences:c});if("redirect"===f.type)return f.reload?void(window.location.href=f.location):(a.__router.navigate(f.location,{replace:f.replace}),f.actionResult);if("action"!==f.type)throw new Error("Unexpected payload type");return f.rerender&&i.startTransition(async()=>{const e=await f.rerender;if(e&&s<u&&a.__routerActionID<=u){if(s=u,"redirect"===e.type)return e.reload?void(window.location.href=e.location):void a.__router.navigate(e.location,{replace:e.replace});let t;for(const r of e.matches)a.__router.patchRoutes(t?.id??null,[ce(r)],!0),t=r;window.__router._internalSetStateDoNotUseOrYouWillBreakYourApp({}),i.startTransition(()=>{window.__router._internalSetStateDoNotUseOrYouWillBreakYourApp({loaderData:Object.assign({},a.__router.state.loaderData,e.loaderData),errors:e.errors?Object.assign({},a.__router.state.errors,e.errors):null})})}}),f.actionResult}}var oe=(0,n.Ni)();function le(e,t,r,i,a){let s=(0,n.gQ)(e,e=>{let t=e;return{hasLoader:t.route.hasLoader,hasClientLoader:t.route.hasClientLoader,hasComponent:t.route.hasComponent,hasAction:t.route.hasAction,hasClientAction:t.route.hasClientAction,hasShouldRevalidate:t.route.hasShouldRevalidate}},function(e,t){return async(r,i,a)=>{let{request:s,context:o}=r,l=(0,n.MF)(s.url,i,"rsc");"GET"===s.method&&(l=(0,n.Qd)(l),a&&l.searchParams.set("_routes",a.join(",")));let u=await t(new Request(l,await(0,n.Ul)(s)));if(404===u.status&&!u.headers.has("X-Remix-Response"))throw new n.cj(404,"Not Found",!0);(0,n.V1)(u.body,"No response body to decode");try{const t=await e(u.body,{temporaryReferences:void 0});if("redirect"===t.type)return{status:u.status,data:{redirect:{redirect:t.location,reload:t.reload,replace:t.replace,revalidate:!1,status:t.status}}};if("render"!==t.type)throw new Error("Unexpected payload type");o.get(oe).push(...t.matches);let r={routes:{}};const i=(0,n.jM)(s.method)?"actionData":"loaderData";for(let[e,n]of Object.entries(t[i]||{}))r.routes[e]={data:n};if(t.errors)for(let[e,n]of Object.entries(t.errors))r.routes[e]={error:n};return{status:u.status,data:r}}catch(e){throw new Error("Unable to decode RSC response")}}}(i,a),t,r,e=>{let t=e;return t.route.hasComponent&&!t.route.element});return async e=>e.unstable_runClientMiddleware(async()=>{let t=e.context;t.set(oe,[]);let r=await s(e);const n=new Map;for(const e of t.get(oe))n.has(e.id)||n.set(e.id,[]),n.get(e.id).push(e);for(const t of e.matches){const e=n.get(t.route.id);if(e)for(const t of e)window.__router.patchRoutes(t.parentId??null,[ce(t)],!0)}return r})}function ue({createFromReadableStream:e,fetch:t=fetch,payload:r,routeDiscovery:a="eager",unstable_getContext:s}){if("render"!==r.type)throw new Error("Invalid payload type");let l=i.useMemo(()=>function({fetchImplementation:e,createFromReadableStream:t,unstable_getContext:r,payload:i}){const a=window;if(a.__router)return a.__router;if("render"!==i.type)throw new Error("Invalid payload type");let s=new Map;i.patches?.forEach(e=>{(0,n.V1)(e.parentId,"Invalid patch parentId"),s.has(e.parentId)||s.set(e.parentId,[]),s.get(e.parentId)?.push(e)});let o=i.matches.reduceRight((e,t)=>{const r=ce(t,i);if(e.length>0){r.children=e;let n=s.get(t.id);n&&r.children.push(...n.map(e=>ce(e)))}return[r]},[]);return a.__router=(0,n.aE)({routes:o,unstable_getContext:r,basename:i.basename,history:(0,n.zR)(),hydrationData:te({loaderData:i.loaderData,actionData:i.actionData,errors:i.errors},o,e=>{let t=i.matches.find(t=>t.id===e);return(0,n.V1)(t,"Route not found in payload"),{clientLoader:t.clientLoader,hasLoader:t.hasLoader,hasHydrateFallback:null!=t.hydrateFallbackElement}},i.location,void 0,!1),async patchRoutesOnNavigation({path:r,signal:n}){me.has(r)||await ve([r],t,e,n)},dataStrategy:le(()=>a.__router,!0,i.basename,t,e)}),a.__router.state.initialized?(a.__routerInitialized=!0,a.__router.initialize()):a.__routerInitialized=!1,a.__router.subscribe(({loaderData:e,actionData:t})=>{undefined!==e&&(a.__routerActionID=(a.__routerActionID??(a.__routerActionID=0))+1)}),a.__router}({payload:r,fetchImplementation:t,unstable_getContext:s,createFromReadableStream:e}),[e,r,t,s]);i.useLayoutEffect(()=>{const e=window;e.__routerInitialized||(e.__routerInitialized=!0,e.__router.initialize())},[]);let[u,c]=i.useState(l.state.location);return i.useLayoutEffect(()=>l.subscribe(e=>{e.location!==u&&c(e.location)}),[l,u]),i.useEffect(()=>{if("lazy"===a||!0===window.navigator?.connection?.saveData)return;function r(e){let t="FORM"===e.tagName?e.getAttribute("action"):e.getAttribute("href");if(!t)return;let r="A"===e.tagName?e.pathname:new URL(t,window.location.origin).pathname;me.has(r)||he.add(r)}async function n(){document.querySelectorAll("a[data-discover], form[data-discover]").forEach(r);let n=Array.from(he.keys()).filter(e=>!me.has(e)||(he.delete(e),!1));if(0!==n.length)try{await ve(n,e,t)}catch(e){console.error("Failed to fetch manifest patches",e)}}let i=function(e){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>e(...r),100)}}(n);n(),new MutationObserver(()=>i()).observe(document.documentElement,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["data-discover","href","action"]})},[a,e,t]),i.createElement(n.Bu.Provider,{value:!0},i.createElement(re,{location:u},i.createElement(n.yL.Provider,{value:{future:{unstable_middleware:!1,unstable_subResourceIntegrity:!1},isSpaMode:!0,ssr:!0,criticalCss:"",manifest:{routes:{},version:"1",url:"",entry:{module:"",imports:[]}},routeDiscovery:{mode:"lazy",manifestPath:"/__manifest"},routeModules:{}}},i.createElement(n.pg,{router:l,flushSync:o.flushSync}))))}function ce(e,t){let r=t&&e.id in t.loaderData,i=t?.loaderData[e.id],a=t?.errors&&e.id in t.errors,s=t?.errors?.[e.id],o=!0===e.clientLoader?.hydrate||!e.hasLoader||e.hasComponent&&!e.element,l={id:e.id,element:e.element,errorElement:e.errorElement,handle:e.handle,hasErrorBoundary:e.hasErrorBoundary,hydrateFallbackElement:e.hydrateFallbackElement,index:e.index,loader:e.clientLoader?async(t,n)=>{try{return await e.clientLoader({...t,serverLoader:()=>{if(fe("loader",e.id,e.hasLoader),o){if(r)return i;if(a)throw s}return de(n)}})}finally{o=!1}}:(e,t)=>de(t),action:e.clientAction?(t,r)=>e.clientAction({...t,serverAction:async()=>(fe("action",e.id,e.hasLoader),await de(r))}):e.hasAction?(e,t)=>de(t):()=>{throw(0,n.hA)("action",e.id)},path:e.path,shouldRevalidate:e.shouldRevalidate,hasLoader:!0,hasClientLoader:null!=e.clientLoader,hasAction:e.hasAction,hasClientAction:null!=e.clientAction,hasShouldRevalidate:null!=e.shouldRevalidate};return"function"==typeof l.loader&&(l.loader.hydrate=(0,n.vB)(e.id,e.clientLoader,e.hasLoader,!1)),l}function de(e){return(0,n.V1)("function"==typeof e,"Invalid singleFetch parameter"),e()}function fe(e,t,r){if(!r){let r=`You are trying to call ${"action"===e?"serverAction()":"serverLoader()"} on a route that does not have a server ${e} (routeId: "${t}")`;throw console.error(r),new n.cj(400,"Bad Request",new Error(r),!0)}}var he=new Set,pe=1e3,me=new Set,ge=7680;async function ve(e,t,r,n){let i=function(e){if(0===e.length)return null;if(1===e.length)return new URL(`${e[0]}.manifest`,window.location.origin);let t=(window.__router.basename??"").replace(/^\/|\/$/g,""),r=new URL(`${t}/.manifest`,window.location.origin);return e.sort().forEach(e=>r.searchParams.append("p",e)),r}(e);if(null==i)return;if(i.toString().length>ge)return void he.clear();let a=await r(new Request(i,{signal:n}));if(!a.body||a.status<200||a.status>=300)throw new Error("Unable to fetch new route matches from the server");let s=await t(a.body,{temporaryReferences:void 0});if("manifest"!==s.type)throw new Error("Failed to patch routes");e.forEach(e=>function(e,t){if(t.size>=pe){let e=t.values().next().value;t.delete(e)}t.add(e)}(e,me)),s.patches.forEach(e=>{window.__router.patchRoutes(e.parentId??null,[ce(e)])})}var ye=new TextEncoder,Ee="</body></html>";function be(e,t){var r;t.enqueue(ye.encode(`<script>${r=`(self.__FLIGHT_DATA||=[]).push(${e})`,r.replace(/<!--/g,"<\\!--").replace(/<\/(script)/gi,"</\\$1")}<\/script>`))}async function Se({request:e,fetchServer:t,createFromReadableStream:r,renderHTML:n,hydrate:i=!0}){const a=new URL(e.url),s=function(e){return e.pathname.endsWith(".rsc")}(a),o=s||function(e){return e.pathname.endsWith(".manifest")}(a)||e.headers.has("rsc-action-id"),l=await t(e);if(o||"true"===l.headers.get("React-Router-Resource"))return l;if(!l.body)throw new Error("Missing body in server response");let u=null;i&&(u=l.clone());const c=l.body;let d;const f=async()=>d||(d=r(c),d);try{const e=await n(f),t=new Headers(l.headers);if(t.set("Content-Type","text/html"),!i)return new Response(e,{status:l.status,headers:t});if(!u?.body)throw new Error("Failed to clone server response");const r=e.pipeThrough(function(e){let t,r=new TextDecoder,n=new Promise(e=>t=e),i=!1,a=[],s=null;function o(e){for(let t of a){let n=r.decode(t,{stream:!0});n.endsWith(Ee)&&(n=n.slice(0,-Ee.length)),e.enqueue(ye.encode(n))}a.length=0,s=null}return new TransformStream({transform(r,n){a.push(r),s||(s=setTimeout(async()=>{o(n),i||(i=!0,async function(e,t){let r=new TextDecoder("utf-8",{fatal:!0});const n=e.getReader();try{let e;for(;(e=await n.read())&&!e.done;){const n=e.value;try{be(JSON.stringify(r.decode(n,{stream:!0})),t)}catch(e){be(`Uint8Array.from(atob(${JSON.stringify(btoa(String.fromCodePoint(...n)))}), m => m.codePointAt(0))`,t)}}}finally{n.releaseLock()}let i=r.decode();i.length&&be(JSON.stringify(i),t)}(e,n).catch(e=>n.error(e)).then(t))},0))},async flush(e){await n,s&&(clearTimeout(s),o(e)),e.enqueue(ye.encode("</body></html>"))}})}(u.body));return new Response(r,{status:l.status,headers:t})}catch(e){if(e instanceof Response)return e;throw e}}function Te({getPayload:e}){const t=i.use(e());if("redirect"===t.type)throw new Response(null,{status:t.status,headers:{Location:t.location}});if("render"!==t.type)return null;let r={...t.loaderData};for(const e of t.matches)!(0,n.vB)(e.id,e.clientLoader,e.hasLoader,!1)||!e.hydrateFallbackElement&&e.hasLoader||delete r[e.id];const a={actionData:t.actionData,actionHeaders:{},basename:t.basename,errors:t.errors,loaderData:r,loaderHeaders:{},location:t.location,statusCode:200,matches:t.matches.map(e=>({params:e.params,pathname:e.pathname,pathnameBase:e.pathnameBase,route:{id:e.id,action:e.hasAction||!!e.clientAction,handle:e.handle,hasErrorBoundary:e.hasErrorBoundary,loader:e.hasLoader||!!e.clientLoader,index:e.index,path:e.path,shouldRevalidate:e.shouldRevalidate}}))},s=(0,n.KD)(t.matches.reduceRight((e,t)=>{const r={id:t.id,action:t.hasAction||!!t.clientAction,element:t.element,errorElement:t.errorElement,handle:t.handle,hasErrorBoundary:!!t.errorElement,hydrateFallbackElement:t.hydrateFallbackElement,index:t.index,loader:t.hasLoader||!!t.clientLoader,path:t.path,shouldRevalidate:t.shouldRevalidate};return e.length>0&&(r.children=e),[r]},[]),a);return i.createElement(n.Bu.Provider,{value:!0},i.createElement(re,{location:t.location},i.createElement(n.yL.Provider,{value:{future:{unstable_middleware:!1,unstable_subResourceIntegrity:!1},isSpaMode:!1,ssr:!0,criticalCss:"",manifest:{routes:{},version:"1",url:"",entry:{module:"",imports:[]}},routeDiscovery:{mode:"lazy",manifestPath:"/__manifest"},routeModules:{}}},i.createElement(n.je,{context:a,router:s,hydrate:!1,nonce:t.nonce}))))}function we(){let e=new TextEncoder,t=null,r=new ReadableStream({start(r){if("undefined"==typeof window)return;let n=t=>{"string"==typeof t?r.enqueue(e.encode(t)):r.enqueue(t)};window.__FLIGHT_DATA||(window.__FLIGHT_DATA=[]),window.__FLIGHT_DATA.forEach(n),window.__FLIGHT_DATA.push=e=>(n(e),0),t=r}});return"undefined"!=typeof document&&"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{t?.close()}):t?.close(),r}function ke(e){if(!e)return null;let t=Object.entries(e),r={};for(let[e,i]of t)if(i&&"RouteErrorResponse"===i.__type)r[e]=new n.cj(i.status,i.statusText,i.data,!0===i.internal);else if(i&&"Error"===i.__type){if(i.__subType){let t=window[i.__subType];if("function"==typeof t)try{let n=new t(i.message);n.stack=i.stack,r[e]=n}catch(e){}}if(null==r[e]){let t=new Error(i.message);t.stack=i.stack,r[e]=t}}else r[e]=i;return r}},69:(e,t)=>{"use strict";t.qg=function(e,t){const r=new o,n=e.length;if(n<2)return r;const i=t?.decode||c;let a=0;do{const t=e.indexOf("=",a);if(-1===t)break;const s=e.indexOf(";",a),o=-1===s?n:s;if(t>o){a=e.lastIndexOf(";",t-1)+1;continue}const c=l(e,a,t),d=u(e,t,c),f=e.slice(c,d);if(void 0===r[f]){let n=l(e,t+1,o),a=u(e,o,n);const s=i(e.slice(n,a));r[f]=s}a=o+1}while(a<n);return r},t.lK=function(e,t,o){const l=o?.encode||encodeURIComponent;if(!r.test(e))throw new TypeError(`argument name is invalid: ${e}`);const u=l(t);if(!n.test(u))throw new TypeError(`argument val is invalid: ${t}`);let c=e+"="+u;if(!o)return c;if(void 0!==o.maxAge){if(!Number.isInteger(o.maxAge))throw new TypeError(`option maxAge is invalid: ${o.maxAge}`);c+="; Max-Age="+o.maxAge}if(o.domain){if(!i.test(o.domain))throw new TypeError(`option domain is invalid: ${o.domain}`);c+="; Domain="+o.domain}if(o.path){if(!a.test(o.path))throw new TypeError(`option path is invalid: ${o.path}`);c+="; Path="+o.path}if(o.expires){if(!function(e){return"[object Date]"===s.call(e)}(o.expires)||!Number.isFinite(o.expires.valueOf()))throw new TypeError(`option expires is invalid: ${o.expires}`);c+="; Expires="+o.expires.toUTCString()}if(o.httpOnly&&(c+="; HttpOnly"),o.secure&&(c+="; Secure"),o.partitioned&&(c+="; Partitioned"),o.priority)switch("string"==typeof o.priority?o.priority.toLowerCase():void 0){case"low":c+="; Priority=Low";break;case"medium":c+="; Priority=Medium";break;case"high":c+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${o.priority}`)}if(o.sameSite)switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:case"strict":c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"none":c+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${o.sameSite}`)}return c};const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,n=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,r){do{const r=e.charCodeAt(t);if(32!==r&&9!==r)return t}while(++t<r);return r}function u(e,t,r){for(;t>r;){const r=e.charCodeAt(--t);if(32!==r&&9!==r)return t+1}return r}function c(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},142:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(532));t.default=i.default},154:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDurationToFormat=function(e){const t=[],r=Math.floor(e/86400).toString(),n=Math.floor(e%86400/3600).toString(),i=Math.floor(e%3600/60).toString(),a=Math.floor(e%60).toString();return parseInt(r)>0&&t.push(r.padStart(2,"0")),(parseInt(n)>0||parseInt(r)>0)&&t.push(n.padStart(2,"0")),t.push(i.padStart(2,"0"),a.padStart(2,"0")),t.join(":")}},164:function(e,t,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&i(t,e,r[s]);return a(t,e),t}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=r(848),u=s(r(975)),c=r(540),d=r(976),f=o(r(590));t.default=function(){let e=function(){const{search:e}=(0,d.useLocation)();return(0,c.useMemo)(()=>new URLSearchParams(e),[e])}();const[t,r]=(0,c.useState)(`http://localhost:8080/api/${e.get("q")}/master.m3u8`);return(0,l.jsxs)("div",{className:u.wrapper,children:[(0,l.jsx)("div",{className:u.videoContent,children:(0,l.jsx)(f.default,{videoUrl:t})}),(0,l.jsx)("div",{className:u.otherContent})]})}},165:(e,t,r)=>{"use strict";e.exports=r.p+"97bf89aa2607ec7210c8.svg"},195:(e,t,r)=>{"use strict";e.exports=r.p+"ff5cce05216110093bae.svg"},221:(e,t,r)=>{"use strict";var n=r(540);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(i(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal"),l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.flushSync=function(e){var t=l.T,r=s.p;try{if(l.T=null,s.p=2,e)return e()}finally{l.T=t,s.p=r,s.d.f()}},t.preconnect=function(e,t){"string"==typeof e&&(t=t?"string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"==typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var r=t.as,n=u(r,t.crossOrigin),i="string"==typeof t.integrity?t.integrity:void 0,a="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===r?s.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:n,integrity:i,fetchPriority:a}):"script"===r&&s.d.X(e,{crossOrigin:n,integrity:i,fetchPriority:a,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var r=u(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var r=t.as,n=u(r,t.crossOrigin);s.d.L(e,r,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"==typeof e)if(t){var r=u(t.as,t.crossOrigin);s.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,r){return l.H.useFormState(e,t,r)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},247:(e,t,r)=>{"use strict";var n=r(982),i=r(540),a=r(961);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function u(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function c(e){if(l(e)!==e)throw Error(s(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var f=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),S=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope");var A=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var _=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var D=Symbol.iterator;function C(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=D&&e[D]||e["@@iterator"])?e:null}var I=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===I?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case g:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case w:return"Suspense";case k:return"SuspenseList";case A:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case m:return"Portal";case S:return(e.displayName||"Context")+".Provider";case b:return(e._context.displayName||"Context")+".Consumer";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return P(e(t))}catch(e){}}return null}var x=Array.isArray,O=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},N=[],U=-1;function B(e){return{current:e}}function j(e){0>U||(e.current=N[U],N[U]=null,U--)}function H(e,t){U++,N[U]=e.current,e.current=t}var G=B(null),z=B(null),V=B(null),K=B(null);function $(e,t){switch(H(V,t),H(z,e),H(G,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?id(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=ad(t=id(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}j(G),H(G,e)}function q(){j(G),j(z),j(V)}function W(e){null!==e.memoizedState&&H(K,e);var t=G.current,r=ad(t,e.type);t!==r&&(H(z,e),H(G,r))}function Y(e){z.current===e&&(j(G),j(z)),K.current===e&&(j(K),Wd._currentValue=F)}var X=Object.prototype.hasOwnProperty,Q=n.unstable_scheduleCallback,J=n.unstable_cancelCallback,Z=n.unstable_shouldYield,ee=n.unstable_requestPaint,te=n.unstable_now,re=n.unstable_getCurrentPriorityLevel,ne=n.unstable_ImmediatePriority,ie=n.unstable_UserBlockingPriority,ae=n.unstable_NormalPriority,se=n.unstable_LowPriority,oe=n.unstable_IdlePriority,le=n.log,ue=n.unstable_setDisableYieldValue,ce=null,de=null;function fe(e){if("function"==typeof le&&ue(e),de&&"function"==typeof de.setStrictMode)try{de.setStrictMode(ce,e)}catch(e){}}var he=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(pe(e)/me|0)|0},pe=Math.log,me=Math.LN2,ge=256,ve=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ee(e,t,r){var n=e.pendingLanes;if(0===n)return 0;var i=0,a=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var o=134217727&n;return 0!==o?0!==(n=o&~a)?i=ye(n):0!==(s&=o)?i=ye(s):r||0!==(r=o&~e)&&(i=ye(r)):0!==(o=n&~a)?i=ye(o):0!==s?i=ye(s):r||0!==(r=n&~e)&&(i=ye(r)),0===i?0:0!==t&&t!==i&&0===(t&a)&&((a=i&-i)>=(r=t&-t)||32===a&&4194048&r)?t:i}function be(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Se(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Te(){var e=ge;return!(4194048&(ge<<=1))&&(ge=256),e}function we(){var e=ve;return!(62914560&(ve<<=1))&&(ve=4194304),e}function ke(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Re(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Le(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-he(t);e.entangledLanes|=t,e.entanglements[n]=1073741824|e.entanglements[n]|4194090&r}function Ae(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-he(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}function _e(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function De(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Ce(){var e=M.p;return 0!==e?e:void 0===(e=window.event)?32:cf(e.type)}var Ie=Math.random().toString(36).slice(2),Pe="__reactFiber$"+Ie,xe="__reactProps$"+Ie,Oe="__reactContainer$"+Ie,Me="__reactEvents$"+Ie,Fe="__reactListeners$"+Ie,Ne="__reactHandles$"+Ie,Ue="__reactResources$"+Ie,Be="__reactMarker$"+Ie;function je(e){delete e[Pe],delete e[xe],delete e[Me],delete e[Fe],delete e[Ne]}function He(e){var t=e[Pe];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Oe]||r[Pe]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=Ed(e);null!==e;){if(r=e[Pe])return r;e=Ed(e)}return t}r=(e=r).parentNode}return null}function Ge(e){if(e=e[Pe]||e[Oe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function ze(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function Ve(e){var t=e[Ue];return t||(t=e[Ue]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ke(e){e[Be]=!0}var $e=new Set,qe={};function We(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(qe[e]=t,e=0;e<t.length;e++)$e.add(t[e])}var Xe,Qe,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,r){if(i=t,X.call(et,i)||!X.call(Ze,i)&&(Je.test(i)?et[i]=!0:(Ze[i]=!0,0)))if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var n=t.toLowerCase().slice(0,5);if("data-"!==n&&"aria-"!==n)return void e.removeAttribute(t)}e.setAttribute(t,""+r)}var i}function rt(e,t,r){if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+r)}}function nt(e,t,r,n){if(null===n)e.removeAttribute(r);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(r)}e.setAttributeNS(t,r,""+n)}}function it(e){if(void 0===Xe)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Xe=t&&t[1]||"",Qe=-1<e.stack.indexOf("\n    at")?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Xe+e+Qe}var at=!1;function st(e,t){if(!e||at)return"";at=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var r=function(){throw Error()};if(Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(r,[])}catch(e){var n=e}Reflect.construct(e,[],r)}else{try{r.call()}catch(e){n=e}e.call(r.prototype)}}else{try{throw Error()}catch(e){n=e}(r=e())&&"function"==typeof r.catch&&r.catch(function(){})}}catch(e){if(e&&n&&"string"==typeof e.stack)return[e.stack,n.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=n.DetermineComponentFrameRoot(),s=a[0],o=a[1];if(s&&o){var l=s.split("\n"),u=o.split("\n");for(i=n=0;n<l.length&&!l[n].includes("DetermineComponentFrameRoot");)n++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(n===l.length||i===u.length)for(n=l.length-1,i=u.length-1;1<=n&&0<=i&&l[n]!==u[i];)i--;for(;1<=n&&0<=i;n--,i--)if(l[n]!==u[i]){if(1!==n||1!==i)do{if(n--,0>--i||l[n]!==u[i]){var c="\n"+l[n].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=n&&0<=i);break}}}finally{at=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?it(r):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return st(e.type,!1);case 11:return st(e.type.render,!1);case 1:return st(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ct(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ct(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ft(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ct(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function ht(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function mt(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,r,n,i,a,s,o){e.name="",null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?yt(e,s,ut(t)):null!=r?yt(e,s,ut(r)):null!=n&&e.removeAttribute("value"),null==i&&null!=a&&(e.defaultChecked=!!a),null!=i&&(e.checked=i&&"function"!=typeof i&&"symbol"!=typeof i),null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.name=""+ut(o):e.removeAttribute("name")}function vt(e,t,r,n,i,a,s,o){if(null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.type=a),null!=t||null!=r){if(("submit"===a||"reset"===a)&&null==t)return;r=null!=r?""+ut(r):"",t=null!=t?""+ut(t):r,o||t===e.value||(e.value=t),e.defaultValue=t}n="function"!=typeof(n=null!=n?n:i)&&"symbol"!=typeof n&&!!n,e.checked=o?e.checked:!!n,e.defaultChecked=!!n,null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s&&(e.name=s)}function yt(e,t,r){"number"===t&&ht(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function Et(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ut(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function bt(e,t,r){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=r)?e.defaultValue=null!=r?""+ut(r):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,r,n){if(null==t){if(null!=n){if(null!=r)throw Error(s(92));if(x(n)){if(1<n.length)throw Error(s(93));n=n[0]}r=n}null==r&&(r=""),t=r}r=ut(t),e.defaultValue=r,(n=e.textContent)===r&&""!==n&&null!==n&&(e.value=n)}function Tt(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var wt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kt(e,t,r){var n=0===t.indexOf("--");null==r||"boolean"==typeof r||""===r?n?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":n?e.setProperty(t,r):"number"!=typeof r||0===r||wt.has(t)?"float"===t?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function Rt(e,t,r){if(null!=t&&"object"!=typeof t)throw Error(s(62));if(e=e.style,null!=r){for(var n in r)!r.hasOwnProperty(n)||null!=t&&t.hasOwnProperty(n)||(0===n.indexOf("--")?e.setProperty(n,""):"float"===n?e.cssFloat="":e[n]="");for(var i in t)n=t[i],t.hasOwnProperty(i)&&r[i]!==n&&kt(e,i,n)}else for(var a in t)t.hasOwnProperty(a)&&kt(e,a,t[a])}function Lt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var At=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_t=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Dt(e){return _t.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ct=null;function It(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,xt=null;function Ot(e){var t=Ge(e);if(t&&(e=t.stateNode)){var r=e[xe]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=n[xe]||null;if(!i)throw Error(s(90));gt(n,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<r.length;t++)(n=r[t]).form===e.form&&ft(n)}break e;case"textarea":bt(e,r.value,r.defaultValue);break e;case"select":null!=(t=r.value)&&Et(e,!!r.multiple,t,!1)}}}var Mt=!1;function Ft(e,t,r){if(Mt)return e(t,r);Mt=!0;try{return e(t)}finally{if(Mt=!1,(null!==Pt||null!==xt)&&(Hu(),Pt&&(t=Pt,e=xt,xt=Pt=null,Ot(t),e)))for(t=0;t<e.length;t++)Ot(e[t])}}function Nt(e,t){var r=e.stateNode;if(null===r)return null;var n=r[xe]||null;if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(s(231,t,typeof r));return r}var Ut=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Bt=!1;if(Ut)try{var jt={};Object.defineProperty(jt,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",jt,jt),window.removeEventListener("test",jt,jt)}catch(e){Bt=!1}var Ht=null,Gt=null,zt=null;function Vt(){if(zt)return zt;var e,t,r=Gt,n=r.length,i="value"in Ht?Ht.value:Ht.textContent,a=i.length;for(e=0;e<n&&r[e]===i[e];e++);var s=n-e;for(t=1;t<=s&&r[n-t]===i[a-t];t++);return zt=i.slice(e,1<t?1-t:void 0)}function Kt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function $t(){return!0}function qt(){return!1}function Wt(e){function t(t,r,n,i,a){for(var s in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?$t:qt,this.isPropagationStopped=qt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=$t)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=$t)},persist:function(){},isPersistent:$t}),t}var Yt,Xt,Qt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Wt(Jt),er=f({},Jt,{view:0,detail:0}),tr=Wt(er),rr=f({},er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qt&&(Qt&&"mousemove"===e.type?(Yt=e.screenX-Qt.screenX,Xt=e.screenY-Qt.screenY):Xt=Yt=0,Qt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),nr=Wt(rr),ir=Wt(f({},rr,{dataTransfer:0})),ar=Wt(f({},er,{relatedTarget:0})),sr=Wt(f({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),or=Wt(f({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),lr=Wt(f({},Jt,{data:0})),ur={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=dr[e])&&!!t[e]}function hr(){return fr}var pr=Wt(f({},er,{key:function(e){if(e.key){var t=ur[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Kt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?cr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hr,charCode:function(e){return"keypress"===e.type?Kt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Kt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mr=Wt(f({},rr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),gr=Wt(f({},er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hr})),vr=Wt(f({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),yr=Wt(f({},rr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Er=Wt(f({},Jt,{newState:0,oldState:0})),br=[9,13,27,32],Sr=Ut&&"CompositionEvent"in window,Tr=null;Ut&&"documentMode"in document&&(Tr=document.documentMode);var wr=Ut&&"TextEvent"in window&&!Tr,kr=Ut&&(!Sr||Tr&&8<Tr&&11>=Tr),Rr=String.fromCharCode(32),Lr=!1;function Ar(e,t){switch(e){case"keyup":return-1!==br.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _r(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Dr=!1,Cr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ir(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Cr[e.type]:"textarea"===t}function Pr(e,t,r,n){Pt?xt?xt.push(n):xt=[n]:Pt=n,0<(t=Vc(t,"onChange")).length&&(r=new Zt("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var xr=null,Or=null;function Mr(e){Fc(e,0)}function Fr(e){if(ft(ze(e)))return e}function Nr(e,t){if("change"===e)return t}var Ur=!1;if(Ut){var Br;if(Ut){var jr="oninput"in document;if(!jr){var Hr=document.createElement("div");Hr.setAttribute("oninput","return;"),jr="function"==typeof Hr.oninput}Br=jr}else Br=!1;Ur=Br&&(!document.documentMode||9<document.documentMode)}function Gr(){xr&&(xr.detachEvent("onpropertychange",zr),Or=xr=null)}function zr(e){if("value"===e.propertyName&&Fr(Or)){var t=[];Pr(t,Or,e,It(e)),Ft(Mr,t)}}function Vr(e,t,r){"focusin"===e?(Gr(),Or=r,(xr=t).attachEvent("onpropertychange",zr)):"focusout"===e&&Gr()}function Kr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Fr(Or)}function $r(e,t){if("click"===e)return Fr(t)}function qr(e,t){if("input"===e||"change"===e)return Fr(t)}var Wr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Yr(e,t){if(Wr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!X.call(t,i)||!Wr(e[i],t[i]))return!1}return!0}function Xr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qr(e,t){var r,n=Xr(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xr(n)}}function Jr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Jr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Zr(e){for(var t=ht((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(e){r=!1}if(!r)break;t=ht((e=t.contentWindow).document)}return t}function en(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var tn=Ut&&"documentMode"in document&&11>=document.documentMode,rn=null,nn=null,an=null,sn=!1;function on(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;sn||null==rn||rn!==ht(n)||(n="selectionStart"in(n=rn)&&en(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},an&&Yr(an,n)||(an=n,0<(n=Vc(nn,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=rn)))}function ln(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var un={animationend:ln("Animation","AnimationEnd"),animationiteration:ln("Animation","AnimationIteration"),animationstart:ln("Animation","AnimationStart"),transitionrun:ln("Transition","TransitionRun"),transitionstart:ln("Transition","TransitionStart"),transitioncancel:ln("Transition","TransitionCancel"),transitionend:ln("Transition","TransitionEnd")},cn={},dn={};function fn(e){if(cn[e])return cn[e];if(!un[e])return e;var t,r=un[e];for(t in r)if(r.hasOwnProperty(t)&&t in dn)return cn[e]=r[t];return e}Ut&&(dn=document.createElement("div").style,"AnimationEvent"in window||(delete un.animationend.animation,delete un.animationiteration.animation,delete un.animationstart.animation),"TransitionEvent"in window||delete un.transitionend.transition);var hn=fn("animationend"),pn=fn("animationiteration"),mn=fn("animationstart"),gn=fn("transitionrun"),vn=fn("transitionstart"),yn=fn("transitioncancel"),En=fn("transitionend"),bn=new Map,Sn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tn(e,t){bn.set(e,t),We(t,[e])}Sn.push("scrollEnd");var wn=new WeakMap;function kn(e,t){if("object"==typeof e&&null!==e){var r=wn.get(e);return void 0!==r?r:(t={value:e,source:t,stack:lt(t)},wn.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Rn=[],Ln=0,An=0;function _n(){for(var e=Ln,t=An=Ln=0;t<e;){var r=Rn[t];Rn[t++]=null;var n=Rn[t];Rn[t++]=null;var i=Rn[t];Rn[t++]=null;var a=Rn[t];if(Rn[t++]=null,null!==n&&null!==i){var s=n.pending;null===s?i.next=i:(i.next=s.next,s.next=i),n.pending=i}0!==a&&Pn(r,i,a)}}function Dn(e,t,r,n){Rn[Ln++]=e,Rn[Ln++]=t,Rn[Ln++]=r,Rn[Ln++]=n,An|=n,e.lanes|=n,null!==(e=e.alternate)&&(e.lanes|=n)}function Cn(e,t,r,n){return Dn(e,t,r,n),xn(e)}function In(e,t){return Dn(e,null,null,t),xn(e)}function Pn(e,t,r){e.lanes|=r;var n=e.alternate;null!==n&&(n.lanes|=r);for(var i=!1,a=e.return;null!==a;)a.childLanes|=r,null!==(n=a.alternate)&&(n.childLanes|=r),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(i=!0)),e=a,a=a.return;return 3===e.tag?(a=e.stateNode,i&&null!==t&&(i=31-he(r),null===(n=(e=a.hiddenUpdates)[i])?e[i]=[t]:n.push(t),t.lane=536870912|r),a):null}function xn(e){if(50<Pu)throw Pu=0,xu=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var On={};function Mn(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(e,t,r,n){return new Mn(e,t,r,n)}function Nn(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Un(e,t){var r=e.alternate;return null===r?((r=Fn(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=65011712&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Bn(e,t){e.flags&=65011714;var r=e.alternate;return null===r?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function jn(e,t,r,n,i,a){var o=0;if(n=e,"function"==typeof e)Nn(e)&&(o=1);else if("string"==typeof e)o=function(e,t,r){if(1===r||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,r,G.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case A:return(e=Fn(31,r,t,i)).elementType=A,e.lanes=a,e;case g:return Hn(r.children,i,a,t);case v:o=8,i|=24;break;case y:return(e=Fn(12,r,t,2|i)).elementType=y,e.lanes=a,e;case w:return(e=Fn(13,r,t,i)).elementType=w,e.lanes=a,e;case k:return(e=Fn(19,r,t,i)).elementType=k,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case E:case S:o=10;break e;case b:o=9;break e;case T:o=11;break e;case R:o=14;break e;case L:o=16,n=null;break e}o=29,r=Error(s(130,null===e?"null":typeof e,"")),n=null}return(t=Fn(o,r,t,i)).elementType=e,t.type=n,t.lanes=a,t}function Hn(e,t,r,n){return(e=Fn(7,e,n,t)).lanes=r,e}function Gn(e,t,r){return(e=Fn(6,e,null,t)).lanes=r,e}function zn(e,t,r){return(t=Fn(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vn=[],Kn=0,$n=null,qn=0,Wn=[],Yn=0,Xn=null,Qn=1,Jn="";function Zn(e,t){Vn[Kn++]=qn,Vn[Kn++]=$n,$n=e,qn=t}function ei(e,t,r){Wn[Yn++]=Qn,Wn[Yn++]=Jn,Wn[Yn++]=Xn,Xn=e;var n=Qn;e=Jn;var i=32-he(n)-1;n&=~(1<<i),r+=1;var a=32-he(t)+i;if(30<a){var s=i-i%5;a=(n&(1<<s)-1).toString(32),n>>=s,i-=s,Qn=1<<32-he(t)+i|r<<i|n,Jn=a+e}else Qn=1<<a|r<<i|n,Jn=e}function ti(e){null!==e.return&&(Zn(e,1),ei(e,1,0))}function ri(e){for(;e===$n;)$n=Vn[--Kn],Vn[Kn]=null,qn=Vn[--Kn],Vn[Kn]=null;for(;e===Xn;)Xn=Wn[--Yn],Wn[Yn]=null,Jn=Wn[--Yn],Wn[Yn]=null,Qn=Wn[--Yn],Wn[Yn]=null}var ni=null,ii=null,ai=!1,si=null,oi=!1,li=Error(s(519));function ui(e){throw mi(kn(Error(s(418,"")),e)),li}function ci(e){var t=e.stateNode,r=e.type,n=e.memoizedProps;switch(t[Pe]=e,t[xe]=n,r){case"dialog":Nc("cancel",t),Nc("close",t);break;case"iframe":case"object":case"embed":Nc("load",t);break;case"video":case"audio":for(r=0;r<Oc.length;r++)Nc(Oc[r],t);break;case"source":Nc("error",t);break;case"img":case"image":case"link":Nc("error",t),Nc("load",t);break;case"details":Nc("toggle",t);break;case"input":Nc("invalid",t),vt(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),dt(t);break;case"select":Nc("invalid",t);break;case"textarea":Nc("invalid",t),St(t,n.value,n.defaultValue,n.children),dt(t)}"string"!=typeof(r=n.children)&&"number"!=typeof r&&"bigint"!=typeof r||t.textContent===""+r||!0===n.suppressHydrationWarning||Xc(t.textContent,r)?(null!=n.popover&&(Nc("beforetoggle",t),Nc("toggle",t)),null!=n.onScroll&&Nc("scroll",t),null!=n.onScrollEnd&&Nc("scrollend",t),null!=n.onClick&&(t.onclick=Qc),t=!0):t=!1,t||ui(e)}function di(e){for(ni=e.return;ni;)switch(ni.tag){case 5:case 13:return void(oi=!1);case 27:case 3:return void(oi=!0);default:ni=ni.return}}function fi(e){if(e!==ni)return!1;if(!ai)return di(e),ai=!0,!1;var t,r=e.tag;if((t=3!==r&&27!==r)&&((t=5===r)&&(t=!("form"!==(t=e.type)&&"button"!==t)||sd(e.type,e.memoizedProps)),t=!t),t&&ii&&ui(e),di(e),13===r){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,r=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===r){ii=vd(e.nextSibling);break e}r--}else"$"!==t&&"$!"!==t&&"$?"!==t||r++;e=e.nextSibling}ii=null}}else 27===r?(r=ii,hd(e.type)?(e=yd,yd=null,ii=e):ii=r):ii=ni?vd(e.stateNode.nextSibling):null;return!0}function hi(){ii=ni=null,ai=!1}function pi(){var e=si;return null!==e&&(null===Eu?Eu=e:Eu.push.apply(Eu,e),si=null),e}function mi(e){null===si?si=[e]:si.push(e)}var gi=B(null),vi=null,yi=null;function Ei(e,t,r){H(gi,t._currentValue),t._currentValue=r}function bi(e){e._currentValue=gi.current,j(gi)}function Si(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ti(e,t,r,n){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var a=i.dependencies;if(null!==a){var o=i.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=i;for(var u=0;u<t.length;u++)if(l.context===t[u]){a.lanes|=r,null!==(l=a.alternate)&&(l.lanes|=r),Si(a.return,r,e),n||(o=null);break e}a=l.next}}else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=r,null!==(a=o.alternate)&&(a.lanes|=r),Si(o,r,e),o=null}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function wi(e,t,r,n){e=null;for(var i=t,a=!1;null!==i;){if(!a)if(524288&i.flags)a=!0;else if(262144&i.flags)break;if(10===i.tag){var o=i.alternate;if(null===o)throw Error(s(387));if(null!==(o=o.memoizedProps)){var l=i.type;Wr(i.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(i===K.current){if(null===(o=i.alternate))throw Error(s(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Wd):e=[Wd])}i=i.return}null!==e&&Ti(t,e,r,n),t.flags|=262144}function ki(e){for(e=e.firstContext;null!==e;){if(!Wr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ri(e){vi=e,yi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Li(e){return _i(vi,e)}function Ai(e,t){return null===vi&&Ri(e),_i(e,t)}function _i(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},null===yi){if(null===e)throw Error(s(308));yi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else yi=yi.next=t;return r}var Di="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ci=n.unstable_scheduleCallback,Ii=n.unstable_NormalPriority,Pi={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xi(){return{controller:new Di,data:new Map,refCount:0}}function Oi(e){e.refCount--,0===e.refCount&&Ci(Ii,function(){e.controller.abort()})}var Mi=null,Fi=0,Ni=0,Ui=null;function Bi(){if(0===--Fi&&null!==Mi){null!==Ui&&(Ui.status="fulfilled");var e=Mi;Mi=null,Ni=0,Ui=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var ji=O.S;O.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Mi){var r=Mi=[];Fi=0,Ni=Dc(),Ui={status:"pending",value:void 0,then:function(e){r.push(e)}}}Fi++,t.then(Bi,Bi)}(0,t),null!==ji&&ji(e,t)};var Hi=B(null);function Gi(){var e=Hi.current;return null!==e?e:nu.pooledCache}function zi(e,t){H(Hi,null===t?Hi.current:t.pool)}function Vi(){var e=Gi();return null===e?null:{parent:Pi._currentValue,pool:e}}var Ki=Error(s(460)),$i=Error(s(474)),qi=Error(s(542)),Wi={then:function(){}};function Yi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Xi(){}function Qi(e,t,r){switch(void 0===(r=e[r])?e.push(t):r!==t&&(t.then(Xi,Xi),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw ea(e=t.reason),e;default:if("string"==typeof t.status)t.then(Xi,Xi);else{if(null!==(e=nu)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var r=t;r.status="fulfilled",r.value=e}},function(e){if("pending"===t.status){var r=t;r.status="rejected",r.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ea(e=t.reason),e}throw Ji=t,Ki}}var Ji=null;function Zi(){if(null===Ji)throw Error(s(459));var e=Ji;return Ji=null,e}function ea(e){if(e===Ki||e===qi)throw Error(s(483))}var ta=!1;function ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function na(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ia(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function aa(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,2&ru){var i=n.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),n.pending=t,t=xn(e),Pn(e,null,r),t}return Dn(e,n,t,r),xn(e)}function sa(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Ae(e,r)}}function oa(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,a=null;if(null!==(r=r.firstBaseUpdate)){do{var s={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};null===a?i=a=s:a=a.next=s,r=r.next}while(null!==r);null===a?i=a=t:a=a.next=t}else i=a=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,callbacks:n.callbacks},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var la=!1;function ua(){if(la&&null!==Ui)throw Ui}function ca(e,t,r,n){la=!1;var i=e.updateQueue;ta=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,u=l.next;l.next=null,null===s?a=u:s.next=u,s=l;var c=e.alternate;null!==c&&(o=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l)}if(null!==a){var d=i.baseState;for(s=0,c=u=l=null,o=a;;){var h=-536870913&o.lane,p=h!==o.lane;if(p?(au&h)===h:(n&h)===h){0!==h&&h===Ni&&(la=!0),null!==c&&(c=c.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=e,g=o;h=t;var v=r;switch(g.tag){case 1:if("function"==typeof(m=g.payload)){d=m.call(v,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(h="function"==typeof(m=g.payload)?m.call(v,d,h):m))break e;d=f({},d,h);break e;case 2:ta=!0}}null!==(h=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[h]:p.push(h))}else p={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=p,l=d):c=c.next=p,s|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(p=o).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null===a&&(i.shared.lanes=0),hu|=s,e.lanes=s,e.memoizedState=d}}function da(e,t){if("function"!=typeof e)throw Error(s(191,e));e.call(t)}function fa(e,t){var r=e.callbacks;if(null!==r)for(e.callbacks=null,e=0;e<r.length;e++)da(r[e],t)}var ha=B(null),pa=B(0);function ma(e,t){H(pa,e=du),H(ha,t),du=e|t.baseLanes}function ga(){H(pa,du),H(ha,ha.current)}function va(){du=pa.current,j(ha),j(pa)}var ya=0,Ea=null,ba=null,Sa=null,Ta=!1,wa=!1,ka=!1,Ra=0,La=0,Aa=null,_a=0;function Da(){throw Error(s(321))}function Ca(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Wr(e[r],t[r]))return!1;return!0}function Ia(e,t,r,n,i,a){return ya=a,Ea=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?Ks:$s,ka=!1,a=r(n,i),ka=!1,wa&&(a=xa(t,r,n,i)),Pa(e),a}function Pa(e){O.H=Vs;var t=null!==ba&&null!==ba.next;if(ya=0,Sa=ba=Ea=null,Ta=!1,La=0,Aa=null,t)throw Error(s(300));null===e||Ao||null!==(e=e.dependencies)&&ki(e)&&(Ao=!0)}function xa(e,t,r,n){Ea=e;var i=0;do{if(wa&&(Aa=null),La=0,wa=!1,25<=i)throw Error(s(301));if(i+=1,Sa=ba=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}O.H=qs,a=t(r,n)}while(wa);return a}function Oa(){var e=O.H,t=e.useState()[0];return t="function"==typeof t.then?ja(t):t,e=e.useState()[0],(null!==ba?ba.memoizedState:null)!==e&&(Ea.flags|=1024),t}function Ma(){var e=0!==Ra;return Ra=0,e}function Fa(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function Na(e){if(Ta){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ta=!1}ya=0,Sa=ba=Ea=null,wa=!1,La=Ra=0,Aa=null}function Ua(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Sa?Ea.memoizedState=Sa=e:Sa=Sa.next=e,Sa}function Ba(){if(null===ba){var e=Ea.alternate;e=null!==e?e.memoizedState:null}else e=ba.next;var t=null===Sa?Ea.memoizedState:Sa.next;if(null!==t)Sa=t,ba=e;else{if(null===e){if(null===Ea.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(ba=e).memoizedState,baseState:ba.baseState,baseQueue:ba.baseQueue,queue:ba.queue,next:null},null===Sa?Ea.memoizedState=Sa=e:Sa=Sa.next=e}return Sa}function ja(e){var t=La;return La+=1,null===Aa&&(Aa=[]),e=Qi(Aa,e,t),t=Ea,null===(null===Sa?t.memoizedState:Sa.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?Ks:$s),e}function Ha(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return ja(e);if(e.$$typeof===S)return Li(e)}throw Error(s(438,String(e)))}function Ga(e){var t=null,r=Ea.updateQueue;if(null!==r&&(t=r.memoCache),null==t){var n=Ea.alternate;null!==n&&null!==(n=n.updateQueue)&&null!=(n=n.memoCache)&&(t={data:n.data.map(function(e){return e.slice()}),index:0})}if(null==t&&(t={data:[],index:0}),null===r&&(r={lastEffect:null,events:null,stores:null,memoCache:null},Ea.updateQueue=r),r.memoCache=t,void 0===(r=t.data[t.index]))for(r=t.data[t.index]=Array(e),n=0;n<e;n++)r[n]=_;return t.index++,r}function za(e,t){return"function"==typeof t?t(e):t}function Va(e){return Ka(Ba(),ba,e)}function Ka(e,t,r){var n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=r;var i=e.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}t.baseQueue=i=a,n.pending=null}if(a=e.baseState,null===i)e.memoizedState=a;else{var l=o=null,u=null,c=t=i.next,d=!1;do{var f=-536870913&c.lane;if(f!==c.lane?(au&f)===f:(ya&f)===f){var h=c.revertLane;if(0===h)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),f===Ni&&(d=!0);else{if((ya&h)===h){c=c.next,h===Ni&&(d=!0);continue}f={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=f,o=a):u=u.next=f,Ea.lanes|=h,hu|=h}f=c.action,ka&&r(a,f),a=c.hasEagerState?c.eagerState:r(a,f)}else h={lane:f,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=h,o=a):u=u.next=h,Ea.lanes|=f,hu|=f;c=c.next}while(null!==c&&c!==t);if(null===u?o=a:u.next=l,!Wr(a,e.memoizedState)&&(Ao=!0,d&&null!==(r=Ui)))throw r;e.memoizedState=a,e.baseState=o,e.baseQueue=u,n.lastRenderedState=a}return null===i&&(n.lanes=0),[e.memoizedState,n.dispatch]}function $a(e){var t=Ba(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(null!==i){r.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);Wr(a,t.memoizedState)||(Ao=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function qa(e,t,r){var n=Ea,i=Ba(),a=ai;if(a){if(void 0===r)throw Error(s(407));r=r()}else r=t();var o=!Wr((ba||i).memoizedState,r);if(o&&(i.memoizedState=r,Ao=!0),i=i.queue,gs(2048,8,Xa.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==Sa&&1&Sa.memoizedState.tag){if(n.flags|=2048,hs(9,{destroy:void 0,resource:void 0},Ya.bind(null,n,i,r,t),null),null===nu)throw Error(s(349));a||124&ya||Wa(n,t,r)}return r}function Wa(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=Ea.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Ea.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Ya(e,t,r,n){t.value=r,t.getSnapshot=n,Qa(t)&&Ja(e)}function Xa(e,t,r){return r(function(){Qa(t)&&Ja(e)})}function Qa(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Wr(e,r)}catch(e){return!0}}function Ja(e){var t=In(e,2);null!==t&&Fu(t,0,2)}function Za(e){var t=Ua();if("function"==typeof e){var r=e;if(e=r(),ka){fe(!0);try{r()}finally{fe(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:e},t}function es(e,t,r,n){return e.baseState=r,Ka(e,ba,"function"==typeof n?n:za)}function ts(e,t,r,n,i){if(Hs(e))throw Error(s(485));if(null!==(e=t.action)){var a={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==O.T?r(!0):a.isTransition=!1,n(a),null===(r=t.pending)?(a.next=t.pending=a,rs(t,a)):(a.next=r.next,t.pending=r.next=a)}}function rs(e,t){var r=t.action,n=t.payload,i=e.state;if(t.isTransition){var a=O.T,s={};O.T=s;try{var o=r(i,n),l=O.S;null!==l&&l(s,o),ns(e,t,o)}catch(r){as(e,t,r)}finally{O.T=a}}else try{ns(e,t,a=r(i,n))}catch(r){as(e,t,r)}}function ns(e,t,r){null!==r&&"object"==typeof r&&"function"==typeof r.then?r.then(function(r){is(e,t,r)},function(r){return as(e,t,r)}):is(e,t,r)}function is(e,t,r){t.status="fulfilled",t.value=r,ss(t),e.state=r,null!==(t=e.pending)&&((r=t.next)===t?e.pending=null:(r=r.next,t.next=r,rs(e,r)))}function as(e,t,r){var n=e.pending;if(e.pending=null,null!==n){n=n.next;do{t.status="rejected",t.reason=r,ss(t),t=t.next}while(t!==n)}e.action=null}function ss(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function os(e,t){return t}function ls(e,t){if(ai){var r=nu.formState;if(null!==r){e:{var n=Ea;if(ai){if(ii){t:{for(var i=ii,a=oi;8!==i.nodeType;){if(!a){i=null;break t}if(null===(i=vd(i.nextSibling))){i=null;break t}}i="F!"===(a=i.data)||"F"===a?i:null}if(i){ii=vd(i.nextSibling),n="F!"===i.data;break e}}ui(n)}n=!1}n&&(t=r[0])}}return(r=Ua()).memoizedState=r.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:t},r.queue=n,r=Us.bind(null,Ea,n),n.dispatch=r,n=Za(!1),a=js.bind(null,Ea,!1,n.queue),i={state:t,dispatch:null,action:e,pending:null},(n=Ua()).queue=i,r=ts.bind(null,Ea,i,a,r),i.dispatch=r,n.memoizedState=e,[t,r,!1]}function us(e){return cs(Ba(),ba,e)}function cs(e,t,r){if(t=Ka(e,t,os)[0],e=Va(za)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var n=ja(t)}catch(e){if(e===Ki)throw qi;throw e}else n=t;var i=(t=Ba()).queue,a=i.dispatch;return r!==t.memoizedState&&(Ea.flags|=2048,hs(9,{destroy:void 0,resource:void 0},ds.bind(null,i,r),null)),[n,a,e]}function ds(e,t){e.action=t}function fs(e){var t=Ba(),r=ba;if(null!==r)return cs(t,r,e);Ba(),t=t.memoizedState;var n=(r=Ba()).queue.dispatch;return r.memoizedState=e,[t,n,!1]}function hs(e,t,r,n){return e={tag:e,create:r,deps:n,inst:t,next:null},null===(t=Ea.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Ea.updateQueue=t),null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function ps(){return Ba().memoizedState}function ms(e,t,r,n){var i=Ua();n=void 0===n?null:n,Ea.flags|=e,i.memoizedState=hs(1|t,{destroy:void 0,resource:void 0},r,n)}function gs(e,t,r,n){var i=Ba();n=void 0===n?null:n;var a=i.memoizedState.inst;null!==ba&&null!==n&&Ca(n,ba.memoizedState.deps)?i.memoizedState=hs(t,a,r,n):(Ea.flags|=e,i.memoizedState=hs(1|t,a,r,n))}function vs(e,t){ms(8390656,8,e,t)}function ys(e,t){gs(2048,8,e,t)}function Es(e,t){return gs(4,2,e,t)}function bs(e,t){return gs(4,4,e,t)}function Ss(e,t){if("function"==typeof t){e=e();var r=t(e);return function(){"function"==typeof r?r():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Ts(e,t,r){r=null!=r?r.concat([e]):null,gs(4,4,Ss.bind(null,t,e),r)}function ws(){}function ks(e,t){var r=Ba();t=void 0===t?null:t;var n=r.memoizedState;return null!==t&&Ca(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Rs(e,t){var r=Ba();t=void 0===t?null:t;var n=r.memoizedState;if(null!==t&&Ca(t,n[1]))return n[0];if(n=e(),ka){fe(!0);try{e()}finally{fe(!1)}}return r.memoizedState=[n,t],n}function Ls(e,t,r){return void 0===r||1073741824&ya?e.memoizedState=t:(e.memoizedState=r,e=Mu(),Ea.lanes|=e,hu|=e,r)}function As(e,t,r,n){return Wr(r,t)?r:null!==ha.current?(e=Ls(e,r,n),Wr(e,t)||(Ao=!0),e):42&ya?(e=Mu(),Ea.lanes|=e,hu|=e,t):(Ao=!0,e.memoizedState=r)}function _s(e,t,r,n,i){var a=M.p;M.p=0!==a&&8>a?a:8;var s,o,l,u=O.T,c={};O.T=c,js(e,!1,t,r);try{var d=i(),f=O.S;null!==f&&f(c,d),null!==d&&"object"==typeof d&&"function"==typeof d.then?Bs(e,t,(s=n,o=[],l={status:"pending",value:null,reason:null,then:function(e){o.push(e)}},d.then(function(){l.status="fulfilled",l.value=s;for(var e=0;e<o.length;e++)(0,o[e])(s)},function(e){for(l.status="rejected",l.reason=e,e=0;e<o.length;e++)(0,o[e])(void 0)}),l),Ou()):Bs(e,t,n,Ou())}catch(r){Bs(e,t,{then:function(){},status:"rejected",reason:r},Ou())}finally{M.p=a,O.T=u}}function Ds(){}function Cs(e,t,r,n){if(5!==e.tag)throw Error(s(476));var i=Is(e).queue;_s(e,i,t,F,null===r?Ds:function(){return Ps(e),r(n)})}function Is(e){var t=e.memoizedState;if(null!==t)return t;var r={};return(t={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:F},next:null}).next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:r},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ps(e){Bs(e,Is(e).next.queue,{},Ou())}function xs(){return Li(Wd)}function Os(){return Ba().memoizedState}function Ms(){return Ba().memoizedState}function Fs(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var r=Ou(),n=aa(t,e=ia(r),r);return null!==n&&(Fu(n,0,r),sa(n,t,r)),t={cache:xi()},void(e.payload=t)}t=t.return}}function Ns(e,t,r){var n=Ou();r={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Hs(e)?Gs(t,r):null!==(r=Cn(e,t,r,n))&&(Fu(r,0,n),zs(r,t,n))}function Us(e,t,r){Bs(e,t,r,Ou())}function Bs(e,t,r,n){var i={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Hs(e))Gs(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,r);if(i.hasEagerState=!0,i.eagerState=o,Wr(o,s))return Dn(e,t,i,0),null===nu&&_n(),!1}catch(e){}if(null!==(r=Cn(e,t,i,n)))return Fu(r,0,n),zs(r,t,n),!0}return!1}function js(e,t,r,n){if(n={lane:2,revertLane:Dc(),action:n,hasEagerState:!1,eagerState:null,next:null},Hs(e)){if(t)throw Error(s(479))}else null!==(t=Cn(e,r,n,2))&&Fu(t,0,2)}function Hs(e){var t=e.alternate;return e===Ea||null!==t&&t===Ea}function Gs(e,t){wa=Ta=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function zs(e,t,r){if(4194048&r){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Ae(e,r)}}var Vs={readContext:Li,use:Ha,useCallback:Da,useContext:Da,useEffect:Da,useImperativeHandle:Da,useLayoutEffect:Da,useInsertionEffect:Da,useMemo:Da,useReducer:Da,useRef:Da,useState:Da,useDebugValue:Da,useDeferredValue:Da,useTransition:Da,useSyncExternalStore:Da,useId:Da,useHostTransitionStatus:Da,useFormState:Da,useActionState:Da,useOptimistic:Da,useMemoCache:Da,useCacheRefresh:Da},Ks={readContext:Li,use:Ha,useCallback:function(e,t){return Ua().memoizedState=[e,void 0===t?null:t],e},useContext:Li,useEffect:vs,useImperativeHandle:function(e,t,r){r=null!=r?r.concat([e]):null,ms(4194308,4,Ss.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ms(4194308,4,e,t)},useInsertionEffect:function(e,t){ms(4,2,e,t)},useMemo:function(e,t){var r=Ua();t=void 0===t?null:t;var n=e();if(ka){fe(!0);try{e()}finally{fe(!1)}}return r.memoizedState=[n,t],n},useReducer:function(e,t,r){var n=Ua();if(void 0!==r){var i=r(t);if(ka){fe(!0);try{r(t)}finally{fe(!1)}}}else i=t;return n.memoizedState=n.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},n.queue=e,e=e.dispatch=Ns.bind(null,Ea,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Ua().memoizedState=e},useState:function(e){var t=(e=Za(e)).queue,r=Us.bind(null,Ea,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:ws,useDeferredValue:function(e,t){return Ls(Ua(),e,t)},useTransition:function(){var e=Za(!1);return e=_s.bind(null,Ea,e.queue,!0,!1),Ua().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var n=Ea,i=Ua();if(ai){if(void 0===r)throw Error(s(407));r=r()}else{if(r=t(),null===nu)throw Error(s(349));124&au||Wa(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,vs(Xa.bind(null,n,a,e),[e]),n.flags|=2048,hs(9,{destroy:void 0,resource:void 0},Ya.bind(null,n,a,r,t),null),r},useId:function(){var e=Ua(),t=nu.identifierPrefix;if(ai){var r=Jn;t="Â«"+t+"R"+(r=(Qn&~(1<<32-he(Qn)-1)).toString(32)+r),0<(r=Ra++)&&(t+="H"+r.toString(32)),t+="Â»"}else t="Â«"+t+"r"+(r=_a++).toString(32)+"Â»";return e.memoizedState=t},useHostTransitionStatus:xs,useFormState:ls,useActionState:ls,useOptimistic:function(e){var t=Ua();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=js.bind(null,Ea,!0,r),r.dispatch=t,[e,t]},useMemoCache:Ga,useCacheRefresh:function(){return Ua().memoizedState=Fs.bind(null,Ea)}},$s={readContext:Li,use:Ha,useCallback:ks,useContext:Li,useEffect:ys,useImperativeHandle:Ts,useInsertionEffect:Es,useLayoutEffect:bs,useMemo:Rs,useReducer:Va,useRef:ps,useState:function(){return Va(za)},useDebugValue:ws,useDeferredValue:function(e,t){return As(Ba(),ba.memoizedState,e,t)},useTransition:function(){var e=Va(za)[0],t=Ba().memoizedState;return["boolean"==typeof e?e:ja(e),t]},useSyncExternalStore:qa,useId:Os,useHostTransitionStatus:xs,useFormState:us,useActionState:us,useOptimistic:function(e,t){return es(Ba(),0,e,t)},useMemoCache:Ga,useCacheRefresh:Ms},qs={readContext:Li,use:Ha,useCallback:ks,useContext:Li,useEffect:ys,useImperativeHandle:Ts,useInsertionEffect:Es,useLayoutEffect:bs,useMemo:Rs,useReducer:$a,useRef:ps,useState:function(){return $a(za)},useDebugValue:ws,useDeferredValue:function(e,t){var r=Ba();return null===ba?Ls(r,e,t):As(r,ba.memoizedState,e,t)},useTransition:function(){var e=$a(za)[0],t=Ba().memoizedState;return["boolean"==typeof e?e:ja(e),t]},useSyncExternalStore:qa,useId:Os,useHostTransitionStatus:xs,useFormState:fs,useActionState:fs,useOptimistic:function(e,t){var r=Ba();return null!==ba?es(r,0,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:Ga,useCacheRefresh:Ms},Ws=null,Ys=0;function Xs(e){var t=Ys;return Ys+=1,null===Ws&&(Ws=[]),Qi(Ws,e,t)}function Qs(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Js(e,t){if(t.$$typeof===h)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zs(e){return(0,e._init)(e._payload)}function eo(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Un(e,t)).index=0,e.sibling=null,e}function a(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=67108866,r):n:(t.flags|=67108866,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Gn(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function u(e,t,r,n){var a=r.type;return a===g?d(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===L&&Zs(a)===t.type)?(Qs(t=i(t,r.props),r),t.return=e,t):(Qs(t=jn(r.type,r.key,r.props,null,e.mode,n),r),t.return=e,t)}function c(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=zn(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function d(e,t,r,n,a){return null===t||7!==t.tag?((t=Hn(r,e.mode,n,a)).return=e,t):((t=i(t,r)).return=e,t)}function f(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Gn(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case p:return Qs(r=jn(t.type,t.key,t.props,null,e.mode,r),t),r.return=e,r;case m:return(t=zn(t,e.mode,r)).return=e,t;case L:return f(e,t=(0,t._init)(t._payload),r)}if(x(t)||C(t))return(t=Hn(t,e.mode,r,null)).return=e,t;if("function"==typeof t.then)return f(e,Xs(t),r);if(t.$$typeof===S)return f(e,Ai(e,t),r);Js(e,t)}return null}function h(e,t,r,n){var i=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return null!==i?null:l(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case p:return r.key===i?u(e,t,r,n):null;case m:return r.key===i?c(e,t,r,n):null;case L:return h(e,t,r=(i=r._init)(r._payload),n)}if(x(r)||C(r))return null!==i?null:d(e,t,r,n,null);if("function"==typeof r.then)return h(e,t,Xs(r),n);if(r.$$typeof===S)return h(e,t,Ai(e,r),n);Js(e,r)}return null}function v(e,t,r,n,i){if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return l(t,e=e.get(r)||null,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case p:return u(t,e=e.get(null===n.key?r:n.key)||null,n,i);case m:return c(t,e=e.get(null===n.key?r:n.key)||null,n,i);case L:return v(e,t,r,n=(0,n._init)(n._payload),i)}if(x(n)||C(n))return d(t,e=e.get(r)||null,n,i,null);if("function"==typeof n.then)return v(e,t,r,Xs(n),i);if(n.$$typeof===S)return v(e,t,r,Ai(t,n),i);Js(t,n)}return null}function y(l,u,c,d){if("object"==typeof c&&null!==c&&c.type===g&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case p:e:{for(var E=c.key;null!==u;){if(u.key===E){if((E=c.type)===g){if(7===u.tag){r(l,u.sibling),(d=i(u,c.props.children)).return=l,l=d;break e}}else if(u.elementType===E||"object"==typeof E&&null!==E&&E.$$typeof===L&&Zs(E)===u.type){r(l,u.sibling),Qs(d=i(u,c.props),c),d.return=l,l=d;break e}r(l,u);break}t(l,u),u=u.sibling}c.type===g?((d=Hn(c.props.children,l.mode,d,c.key)).return=l,l=d):(Qs(d=jn(c.type,c.key,c.props,null,l.mode,d),c),d.return=l,l=d)}return o(l);case m:e:{for(E=c.key;null!==u;){if(u.key===E){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){r(l,u.sibling),(d=i(u,c.children||[])).return=l,l=d;break e}r(l,u);break}t(l,u),u=u.sibling}(d=zn(c,l.mode,d)).return=l,l=d}return o(l);case L:return y(l,u,c=(E=c._init)(c._payload),d)}if(x(c))return function(i,s,o,l){for(var u=null,c=null,d=s,p=s=0,m=null;null!==d&&p<o.length;p++){d.index>p?(m=d,d=null):m=d.sibling;var g=h(i,d,o[p],l);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(i,d),s=a(g,s,p),null===c?u=g:c.sibling=g,c=g,d=m}if(p===o.length)return r(i,d),ai&&Zn(i,p),u;if(null===d){for(;p<o.length;p++)null!==(d=f(i,o[p],l))&&(s=a(d,s,p),null===c?u=d:c.sibling=d,c=d);return ai&&Zn(i,p),u}for(d=n(d);p<o.length;p++)null!==(m=v(d,i,p,o[p],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?p:m.key),s=a(m,s,p),null===c?u=m:c.sibling=m,c=m);return e&&d.forEach(function(e){return t(i,e)}),ai&&Zn(i,p),u}(l,u,c,d);if(C(c)){if("function"!=typeof(E=C(c)))throw Error(s(150));return function(i,o,l,u){if(null==l)throw Error(s(151));for(var c=null,d=null,p=o,m=o=0,g=null,y=l.next();null!==p&&!y.done;m++,y=l.next()){p.index>m?(g=p,p=null):g=p.sibling;var E=h(i,p,y.value,u);if(null===E){null===p&&(p=g);break}e&&p&&null===E.alternate&&t(i,p),o=a(E,o,m),null===d?c=E:d.sibling=E,d=E,p=g}if(y.done)return r(i,p),ai&&Zn(i,m),c;if(null===p){for(;!y.done;m++,y=l.next())null!==(y=f(i,y.value,u))&&(o=a(y,o,m),null===d?c=y:d.sibling=y,d=y);return ai&&Zn(i,m),c}for(p=n(p);!y.done;m++,y=l.next())null!==(y=v(p,i,m,y.value,u))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),o=a(y,o,m),null===d?c=y:d.sibling=y,d=y);return e&&p.forEach(function(e){return t(i,e)}),ai&&Zn(i,m),c}(l,u,c=E.call(c),d)}if("function"==typeof c.then)return y(l,u,Xs(c),d);if(c.$$typeof===S)return y(l,u,Ai(l,c),d);Js(l,c)}return"string"==typeof c&&""!==c||"number"==typeof c||"bigint"==typeof c?(c=""+c,null!==u&&6===u.tag?(r(l,u.sibling),(d=i(u,c)).return=l,l=d):(r(l,u),(d=Gn(c,l.mode,d)).return=l,l=d),o(l)):r(l,u)}return function(e,t,r,n){try{Ys=0;var i=y(e,t,r,n);return Ws=null,i}catch(t){if(t===Ki||t===qi)throw t;var a=Fn(29,t,null,e.mode);return a.lanes=n,a.return=e,a}}}var to=eo(!0),ro=eo(!1),no=B(null),io=null;function ao(e){var t=e.alternate;H(uo,1&uo.current),H(no,e),null===io&&(null===t||null!==ha.current||null!==t.memoizedState)&&(io=e)}function so(e){if(22===e.tag){if(H(uo,uo.current),H(no,e),null===io){var t=e.alternate;null!==t&&null!==t.memoizedState&&(io=e)}}else oo()}function oo(){H(uo,uo.current),H(no,no.current)}function lo(e){j(no),io===e&&(io=null),j(uo)}var uo=B(0);function co(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||gd(r)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function fo(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:f({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var ho={enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ou(),i=ia(n);i.payload=t,null!=r&&(i.callback=r),null!==(t=aa(e,i,n))&&(Fu(t,0,n),sa(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ou(),i=ia(n);i.tag=1,i.payload=t,null!=r&&(i.callback=r),null!==(t=aa(e,i,n))&&(Fu(t,0,n),sa(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ou(),n=ia(r);n.tag=2,null!=t&&(n.callback=t),null!==(t=aa(e,n,r))&&(Fu(t,0,r),sa(t,e,r))}};function po(e,t,r,n,i,a,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,a,s):!(t.prototype&&t.prototype.isPureReactComponent&&Yr(r,n)&&Yr(i,a))}function mo(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ho.enqueueReplaceState(t,t.state,null)}function go(e,t){var r=t;if("ref"in t)for(var n in r={},t)"ref"!==n&&(r[n]=t[n]);if(e=e.defaultProps)for(var i in r===t&&(r=f({},r)),e)void 0===r[i]&&(r[i]=e[i]);return r}var vo="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function yo(e){vo(e)}function Eo(e){console.error(e)}function bo(e){vo(e)}function So(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function To(e,t,r){try{(0,e.onCaughtError)(r.value,{componentStack:r.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function wo(e,t,r){return(r=ia(r)).tag=3,r.payload={element:null},r.callback=function(){So(e,t)},r}function ko(e){return(e=ia(e)).tag=3,e}function Ro(e,t,r,n){var i=r.type.getDerivedStateFromError;if("function"==typeof i){var a=n.value;e.payload=function(){return i(a)},e.callback=function(){To(t,r,n)}}var s=r.stateNode;null!==s&&"function"==typeof s.componentDidCatch&&(e.callback=function(){To(t,r,n),"function"!=typeof i&&(null===ku?ku=new Set([this]):ku.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})})}var Lo=Error(s(461)),Ao=!1;function _o(e,t,r,n){t.child=null===e?ro(t,null,r,n):to(t,e.child,r,n)}function Do(e,t,r,n,i){r=r.render;var a=t.ref;if("ref"in n){var s={};for(var o in n)"ref"!==o&&(s[o]=n[o])}else s=n;return Ri(t),n=Ia(e,t,r,s,a,i),o=Ma(),null===e||Ao?(ai&&o&&ti(t),t.flags|=1,_o(e,t,n,i),t.child):(Fa(e,t,i),Yo(e,t,i))}function Co(e,t,r,n,i){if(null===e){var a=r.type;return"function"!=typeof a||Nn(a)||void 0!==a.defaultProps||null!==r.compare?((e=jn(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Io(e,t,a,n,i))}if(a=e.child,!Xo(e,i)){var s=a.memoizedProps;if((r=null!==(r=r.compare)?r:Yr)(s,n)&&e.ref===t.ref)return Yo(e,t,i)}return t.flags|=1,(e=Un(a,n)).ref=t.ref,e.return=t,t.child=e}function Io(e,t,r,n,i){if(null!==e){var a=e.memoizedProps;if(Yr(a,n)&&e.ref===t.ref){if(Ao=!1,t.pendingProps=n=a,!Xo(e,i))return t.lanes=e.lanes,Yo(e,t,i);131072&e.flags&&(Ao=!0)}}return Mo(e,t,r,n,i)}function Po(e,t,r){var n=t.pendingProps,i=n.children,a=null!==e?e.memoizedState:null;if("hidden"===n.mode){if(128&t.flags){if(n=null!==a?a.baseLanes|r:r,null!==e){for(i=t.child=e.child,a=0;null!==i;)a=a|i.lanes|i.childLanes,i=i.sibling;t.childLanes=a&~n}else t.childLanes=0,t.child=null;return xo(e,t,n,r)}if(!(536870912&r))return t.lanes=t.childLanes=536870912,xo(e,t,null!==a?a.baseLanes|r:r,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&zi(0,null!==a?a.cachePool:null),null!==a?ma(t,a):ga(),so(t)}else null!==a?(zi(0,a.cachePool),ma(t,a),oo(),t.memoizedState=null):(null!==e&&zi(0,null),ga(),oo());return _o(e,t,i,r),t.child}function xo(e,t,r,n){var i=Gi();return i=null===i?null:{parent:Pi._currentValue,pool:i},t.memoizedState={baseLanes:r,cachePool:i},null!==e&&zi(0,null),ga(),so(t),null!==e&&wi(e,t,n,!0),null}function Oo(e,t){var r=t.ref;if(null===r)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof r&&"object"!=typeof r)throw Error(s(284));null!==e&&e.ref===r||(t.flags|=4194816)}}function Mo(e,t,r,n,i){return Ri(t),r=Ia(e,t,r,n,void 0,i),n=Ma(),null===e||Ao?(ai&&n&&ti(t),t.flags|=1,_o(e,t,r,i),t.child):(Fa(e,t,i),Yo(e,t,i))}function Fo(e,t,r,n,i,a){return Ri(t),t.updateQueue=null,r=xa(t,n,r,i),Pa(e),n=Ma(),null===e||Ao?(ai&&n&&ti(t),t.flags|=1,_o(e,t,r,a),t.child):(Fa(e,t,a),Yo(e,t,a))}function No(e,t,r,n,i){if(Ri(t),null===t.stateNode){var a=On,s=r.contextType;"object"==typeof s&&null!==s&&(a=Li(s)),a=new r(n,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=ho,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=n,a.state=t.memoizedState,a.refs={},ra(t),s=r.contextType,a.context="object"==typeof s&&null!==s?Li(s):On,a.state=t.memoizedState,"function"==typeof(s=r.getDerivedStateFromProps)&&(fo(t,r,s,n),a.state=t.memoizedState),"function"==typeof r.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(s=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),s!==a.state&&ho.enqueueReplaceState(a,a.state,null),ca(t,n,a,i),ua(),a.state=t.memoizedState),"function"==typeof a.componentDidMount&&(t.flags|=4194308),n=!0}else if(null===e){a=t.stateNode;var o=t.memoizedProps,l=go(r,o);a.props=l;var u=a.context,c=r.contextType;s=On,"object"==typeof c&&null!==c&&(s=Li(c));var d=r.getDerivedStateFromProps;c="function"==typeof d||"function"==typeof a.getSnapshotBeforeUpdate,o=t.pendingProps!==o,c||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o||u!==s)&&mo(t,a,n,s),ta=!1;var f=t.memoizedState;a.state=f,ca(t,n,a,i),ua(),u=t.memoizedState,o||f!==u||ta?("function"==typeof d&&(fo(t,r,d,n),u=t.memoizedState),(l=ta||po(t,r,l,n,f,u,s))?(c||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=u),a.props=n,a.state=u,a.context=s,n=l):("function"==typeof a.componentDidMount&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,na(e,t),c=go(r,s=t.memoizedProps),a.props=c,d=t.pendingProps,f=a.context,u=r.contextType,l=On,"object"==typeof u&&null!==u&&(l=Li(u)),(u="function"==typeof(o=r.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==d||f!==l)&&mo(t,a,n,l),ta=!1,f=t.memoizedState,a.state=f,ca(t,n,a,i),ua();var h=t.memoizedState;s!==d||f!==h||ta||null!==e&&null!==e.dependencies&&ki(e.dependencies)?("function"==typeof o&&(fo(t,r,o,n),h=t.memoizedState),(c=ta||po(t,r,c,n,f,h,l)||null!==e&&null!==e.dependencies&&ki(e.dependencies))?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(n,h,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,h,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=h),a.props=n,a.state=h,a.context=l,n=c):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return a=n,Oo(e,t),n=!!(128&t.flags),a||n?(a=t.stateNode,r=n&&"function"!=typeof r.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&n?(t.child=to(t,e.child,null,i),t.child=to(t,null,r,i)):_o(e,t,r,i),t.memoizedState=a.state,e=t.child):e=Yo(e,t,i),e}function Uo(e,t,r,n){return hi(),t.flags|=256,_o(e,t,r,n),t.child}var Bo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jo(e){return{baseLanes:e,cachePool:Vi()}}function Ho(e,t,r){return e=null!==e?e.childLanes&~r:0,t&&(e|=gu),e}function Go(e,t,r){var n,i=t.pendingProps,a=!1,o=!!(128&t.flags);if((n=o)||(n=(null===e||null!==e.memoizedState)&&!!(2&uo.current)),n&&(a=!0,t.flags&=-129),n=!!(32&t.flags),t.flags&=-33,null===e){if(ai){if(a?ao(t):oo(),ai){var l,u=ii;if(l=u){e:{for(l=u,u=oi;8!==l.nodeType;){if(!u){u=null;break e}if(null===(l=vd(l.nextSibling))){u=null;break e}}u=l}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==Xn?{id:Qn,overflow:Jn}:null,retryLane:536870912,hydrationErrors:null},(l=Fn(18,null,null,0)).stateNode=u,l.return=t,t.child=l,ni=t,ii=null,l=!0):l=!1}l||ui(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return gd(u)?t.lanes=32:t.lanes=536870912,null;lo(t)}return u=i.children,i=i.fallback,a?(oo(),u=Vo({mode:"hidden",children:u},a=t.mode),i=Hn(i,a,r,null),u.return=t,i.return=t,u.sibling=i,t.child=u,(a=t.child).memoizedState=jo(r),a.childLanes=Ho(e,n,r),t.memoizedState=Bo,i):(ao(t),zo(t,u))}if(null!==(l=e.memoizedState)&&null!==(u=l.dehydrated)){if(o)256&t.flags?(ao(t),t.flags&=-257,t=Ko(e,t,r)):null!==t.memoizedState?(oo(),t.child=e.child,t.flags|=128,t=null):(oo(),a=i.fallback,u=t.mode,i=Vo({mode:"visible",children:i.children},u),(a=Hn(a,u,r,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,to(t,e.child,null,r),(i=t.child).memoizedState=jo(r),i.childLanes=Ho(e,n,r),t.memoizedState=Bo,t=a);else if(ao(t),gd(u)){if(n=u.nextSibling&&u.nextSibling.dataset)var c=n.dgst;n=c,(i=Error(s(419))).stack="",i.digest=n,mi({value:i,source:null,stack:null}),t=Ko(e,t,r)}else if(Ao||wi(e,t,r,!1),n=0!==(r&e.childLanes),Ao||n){if(null!==(n=nu)&&0!==(i=0!==((i=42&(i=r&-r)?1:_e(i))&(n.suspendedLanes|r))?0:i)&&i!==l.retryLane)throw l.retryLane=i,In(e,i),Fu(n,0,i),Lo;"$?"===u.data||qu(),t=Ko(e,t,r)}else"$?"===u.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=vd(u.nextSibling),ni=t,ai=!0,si=null,oi=!1,null!==e&&(Wn[Yn++]=Qn,Wn[Yn++]=Jn,Wn[Yn++]=Xn,Qn=e.id,Jn=e.overflow,Xn=t),(t=zo(t,i.children)).flags|=4096);return t}return a?(oo(),a=i.fallback,u=t.mode,c=(l=e.child).sibling,(i=Un(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==c?a=Un(c,a):(a=Hn(a,u,r,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,null===(u=e.child.memoizedState)?u=jo(r):(null!==(l=u.cachePool)?(c=Pi._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=Vi(),u={baseLanes:u.baseLanes|r,cachePool:l}),a.memoizedState=u,a.childLanes=Ho(e,n,r),t.memoizedState=Bo,i):(ao(t),e=(r=e.child).sibling,(r=Un(r,{mode:"visible",children:i.children})).return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r)}function zo(e,t){return(t=Vo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Vo(e,t){return(e=Fn(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ko(e,t,r){return to(t,e.child,null,r),(e=zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function $o(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Si(e.return,t,r)}function qo(e,t,r,n,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function Wo(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(_o(e,t,n.children,r),2&(n=uo.current))n=1&n|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$o(e,r,t);else if(19===e.tag)$o(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(H(uo,n),i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===co(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),qo(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===co(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}qo(t,!0,r,null,a);break;case"together":qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yo(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),hu|=t.lanes,0===(r&t.childLanes)){if(null===e)return null;if(wi(e,t,r,!1),0===(r&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=Un(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Un(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Xo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!ki(e))}function Qo(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ao=!0;else{if(!(Xo(e,r)||128&t.flags))return Ao=!1,function(e,t,r){switch(t.tag){case 3:$(t,t.stateNode.containerInfo),Ei(0,Pi,e.memoizedState.cache),hi();break;case 27:case 5:W(t);break;case 4:$(t,t.stateNode.containerInfo);break;case 10:Ei(0,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(null!==n)return null!==n.dehydrated?(ao(t),t.flags|=128,null):0!==(r&t.child.childLanes)?Go(e,t,r):(ao(t),null!==(e=Yo(e,t,r))?e.sibling:null);ao(t);break;case 19:var i=!!(128&e.flags);if((n=0!==(r&t.childLanes))||(wi(e,t,r,!1),n=0!==(r&t.childLanes)),i){if(n)return Wo(e,t,r);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),H(uo,uo.current),n)break;return null;case 22:case 23:return t.lanes=0,Po(e,t,r);case 24:Ei(0,Pi,e.memoizedState.cache)}return Yo(e,t,r)}(e,t,r);Ao=!!(131072&e.flags)}else Ao=!1,ai&&1048576&t.flags&&ei(t,qn,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,i=n._init;if(n=i(n._payload),t.type=n,"function"!=typeof n){if(null!=n){if((i=n.$$typeof)===T){t.tag=11,t=Do(null,t,n,e,r);break e}if(i===R){t.tag=14,t=Co(null,t,n,e,r);break e}}throw t=P(n)||n,Error(s(306,t,""))}Nn(n)?(e=go(n,e),t.tag=1,t=No(null,t,n,e,r)):(t.tag=0,t=Mo(null,t,n,e,r))}return t;case 0:return Mo(e,t,t.type,t.pendingProps,r);case 1:return No(e,t,n=t.type,i=go(n,t.pendingProps),r);case 3:e:{if($(t,t.stateNode.containerInfo),null===e)throw Error(s(387));n=t.pendingProps;var a=t.memoizedState;i=a.element,na(e,t),ca(t,n,null,r);var o=t.memoizedState;if(n=o.cache,Ei(0,Pi,n),n!==a.cache&&Ti(t,[Pi],r,!0),ua(),n=o.element,a.isDehydrated){if(a={element:n,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Uo(e,t,n,r);break e}if(n!==i){mi(i=kn(Error(s(424)),t)),t=Uo(e,t,n,r);break e}for(e=9===(e=t.stateNode.containerInfo).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,ii=vd(e.firstChild),ni=t,ai=!0,si=null,oi=!0,r=ro(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(hi(),n===i){t=Yo(e,t,r);break e}_o(e,t,n,r)}t=t.child}return t;case 26:return Oo(e,t),null===e?(r=_d(t.type,null,t.pendingProps,null))?t.memoizedState=r:ai||(r=t.type,e=t.pendingProps,(n=nd(V.current).createElement(r))[Pe]=t,n[xe]=e,ed(n,r,e),Ke(n),t.stateNode=n):t.memoizedState=_d(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return W(t),null===e&&ai&&(n=t.stateNode=bd(t.type,t.pendingProps,V.current),ni=t,oi=!0,i=ii,hd(t.type)?(yd=i,ii=vd(n.firstChild)):ii=i),_o(e,t,t.pendingProps.children,r),Oo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ai&&((i=n=ii)&&(null!==(n=function(e,t,r,n){for(;1===e.nodeType;){var i=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(n){if(!e[Be])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(a!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===a)return e}if(null===(e=vd(e.nextSibling)))break}return null}(n,t.type,t.pendingProps,oi))?(t.stateNode=n,ni=t,ii=vd(n.firstChild),oi=!1,i=!0):i=!1),i||ui(t)),W(t),i=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,n=a.children,sd(i,a)?n=null:null!==o&&sd(i,o)&&(t.flags|=32),null!==t.memoizedState&&(i=Ia(e,t,Oa,null,null,r),Wd._currentValue=i),Oo(e,t),_o(e,t,n,r),t.child;case 6:return null===e&&ai&&((e=r=ii)&&(null!==(r=function(e,t,r){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!r)return null;if(null===(e=vd(e.nextSibling)))return null}return e}(r,t.pendingProps,oi))?(t.stateNode=r,ni=t,ii=null,e=!0):e=!1),e||ui(t)),null;case 13:return Go(e,t,r);case 4:return $(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=to(t,null,n,r):_o(e,t,n,r),t.child;case 11:return Do(e,t,t.type,t.pendingProps,r);case 7:return _o(e,t,t.pendingProps,r),t.child;case 8:case 12:return _o(e,t,t.pendingProps.children,r),t.child;case 10:return n=t.pendingProps,Ei(0,t.type,n.value),_o(e,t,n.children,r),t.child;case 9:return i=t.type._context,n=t.pendingProps.children,Ri(t),n=n(i=Li(i)),t.flags|=1,_o(e,t,n,r),t.child;case 14:return Co(e,t,t.type,t.pendingProps,r);case 15:return Io(e,t,t.type,t.pendingProps,r);case 19:return Wo(e,t,r);case 31:return n=t.pendingProps,r=t.mode,n={mode:n.mode,children:n.children},null===e?((r=Vo(n,r)).ref=t.ref,t.child=r,r.return=t,t=r):((r=Un(e.child,n)).ref=t.ref,t.child=r,r.return=t,t=r),t;case 22:return Po(e,t,r);case 24:return Ri(t),n=Li(Pi),null===e?(null===(i=Gi())&&(i=nu,a=xi(),i.pooledCache=a,a.refCount++,null!==a&&(i.pooledCacheLanes|=r),i=a),t.memoizedState={parent:n,cache:i},ra(t),Ei(0,Pi,i)):(0!==(e.lanes&r)&&(na(e,t),ca(t,null,null,r),ua()),i=e.memoizedState,a=t.memoizedState,i.parent!==n?(i={parent:n,cache:n},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),Ei(0,Pi,n)):(n=a.cache,Ei(0,Pi,n),n!==i.cache&&Ti(t,[Pi],r,!0))),_o(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function Jo(e){e.flags|=4}function Zo(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!Hd(t)){if(null!==(t=no.current)&&((4194048&au)===au?null!==io:(62914560&au)!==au&&!(536870912&au)||t!==io))throw Ji=Wi,$i;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?we():536870912,e.lanes|=t,vu|=t)}function tl(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function rl(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=65011712&i.subtreeFlags,n|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function nl(e,t,r){var n=t.pendingProps;switch(ri(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return rl(t),null;case 3:return r=t.stateNode,n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),bi(Pi),q(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fi(t)?Jo(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,pi())),rl(t),null;case 26:return r=t.memoizedState,null===e?(Jo(t),null!==r?(rl(t),Zo(t,r)):(rl(t),t.flags&=-16777217)):r?r!==e.memoizedState?(Jo(t),rl(t),Zo(t,r)):(rl(t),t.flags&=-16777217):(e.memoizedProps!==n&&Jo(t),rl(t),t.flags&=-16777217),null;case 27:Y(t),r=V.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==n&&Jo(t);else{if(!n){if(null===t.stateNode)throw Error(s(166));return rl(t),null}e=G.current,fi(t)?ci(t):(e=bd(i,n,r),t.stateNode=e,Jo(t))}return rl(t),null;case 5:if(Y(t),r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==n&&Jo(t);else{if(!n){if(null===t.stateNode)throw Error(s(166));return rl(t),null}if(e=G.current,fi(t))ci(t);else{switch(i=nd(V.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof n.is?i.createElement("select",{is:n.is}):i.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e="string"==typeof n.is?i.createElement(r,{is:n.is}):i.createElement(r)}}e[Pe]=t,e[xe]=n;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(ed(e,r,n),r){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Jo(t)}}return rl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==n&&Jo(t);else{if("string"!=typeof n&&null===t.stateNode)throw Error(s(166));if(e=V.current,fi(t)){if(e=t.stateNode,r=t.memoizedProps,n=null,null!==(i=ni))switch(i.tag){case 27:case 5:n=i.memoizedProps}e[Pe]=t,(e=!!(e.nodeValue===r||null!==n&&!0===n.suppressHydrationWarning||Xc(e.nodeValue,r)))||ui(t)}else(e=nd(e).createTextNode(n))[Pe]=t,t.stateNode=e}return rl(t),null;case 13:if(n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=fi(t),null!==n&&null!==n.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[Pe]=t}else hi(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;rl(t),i=!1}else i=pi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(lo(t),t):(lo(t),null)}if(lo(t),128&t.flags)return t.lanes=r,t;if(r=null!==n,e=null!==e&&null!==e.memoizedState,r){i=null,null!==(n=t.child).alternate&&null!==n.alternate.memoizedState&&null!==n.alternate.memoizedState.cachePool&&(i=n.alternate.memoizedState.cachePool.pool);var a=null;null!==n.memoizedState&&null!==n.memoizedState.cachePool&&(a=n.memoizedState.cachePool.pool),a!==i&&(n.flags|=2048)}return r!==e&&r&&(t.child.flags|=8192),el(t,t.updateQueue),rl(t),null;case 4:return q(),null===e&&jc(t.stateNode.containerInfo),rl(t),null;case 10:return bi(t.type),rl(t),null;case 19:if(j(uo),null===(i=t.memoizedState))return rl(t),null;if(n=!!(128&t.flags),null===(a=i.rendering))if(n)tl(i,!1);else{if(0!==fu||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(a=co(e))){for(t.flags|=128,tl(i,!1),e=a.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=r,r=t.child;null!==r;)Bn(r,e),r=r.sibling;return H(uo,1&uo.current|2),t.child}e=e.sibling}null!==i.tail&&te()>Tu&&(t.flags|=128,n=!0,tl(i,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=co(a))){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!ai)return rl(t),null}else 2*te()-i.renderingStartTime>Tu&&536870912!==r&&(t.flags|=128,n=!0,tl(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=i.last)?e.sibling=a:t.child=a,i.last=a)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=uo.current,H(uo,n?1&e|2:1&e),t):(rl(t),null);case 22:case 23:return lo(t),va(),n=null!==t.memoizedState,null!==e?null!==e.memoizedState!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?!!(536870912&r)&&!(128&t.flags)&&(rl(t),6&t.subtreeFlags&&(t.flags|=8192)):rl(t),null!==(r=t.updateQueue)&&el(t,r.retryQueue),r=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),n=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),n!==r&&(t.flags|=2048),null!==e&&j(Hi),null;case 24:return r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),bi(Pi),rl(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function il(e,t){switch(ri(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return bi(Pi),q(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(lo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));hi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return j(uo),null;case 4:return q(),null;case 10:return bi(t.type),null;case 22:case 23:return lo(t),va(),null!==e&&j(Hi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return bi(Pi),null;default:return null}}function al(e,t){switch(ri(t),t.tag){case 3:bi(Pi),q();break;case 26:case 27:case 5:Y(t);break;case 4:q();break;case 13:lo(t);break;case 19:j(uo);break;case 10:bi(t.type);break;case 22:case 23:lo(t),va(),null!==e&&j(Hi);break;case 24:bi(Pi)}}function sl(e,t){try{var r=t.updateQueue,n=null!==r?r.lastEffect:null;if(null!==n){var i=n.next;r=i;do{if((r.tag&e)===e){n=void 0;var a=r.create,s=r.inst;n=a(),s.destroy=n}r=r.next}while(r!==i)}}catch(e){cc(t,t.return,e)}}function ol(e,t,r){try{var n=t.updateQueue,i=null!==n?n.lastEffect:null;if(null!==i){var a=i.next;n=a;do{if((n.tag&e)===e){var s=n.inst,o=s.destroy;if(void 0!==o){s.destroy=void 0,i=t;var l=r,u=o;try{u()}catch(e){cc(i,l,e)}}}n=n.next}while(n!==a)}}catch(e){cc(t,t.return,e)}}function ll(e){var t=e.updateQueue;if(null!==t){var r=e.stateNode;try{fa(t,r)}catch(t){cc(e,e.return,t)}}}function ul(e,t,r){r.props=go(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(r){cc(e,t,r)}}function cl(e,t){try{var r=e.ref;if(null!==r){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;default:n=e.stateNode}"function"==typeof r?e.refCleanup=r(n):r.current=n}}catch(r){cc(e,t,r)}}function dl(e,t){var r=e.ref,n=e.refCleanup;if(null!==r)if("function"==typeof n)try{n()}catch(r){cc(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof r)try{r(null)}catch(r){cc(e,t,r)}else r.current=null}function fl(e){var t=e.type,r=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&n.focus();break e;case"img":r.src?n.src=r.src:r.srcSet&&(n.srcset=r.srcSet)}}catch(t){cc(e,e.return,t)}}function hl(e,t,r){try{var n=e.stateNode;!function(e,t,r,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,o=null,l=null,u=null,c=null,d=null;for(p in r){var f=r[p];if(r.hasOwnProperty(p)&&null!=f)switch(p){case"checked":case"value":break;case"defaultValue":u=f;default:n.hasOwnProperty(p)||Jc(e,t,p,null,n,f)}}for(var h in n){var p=n[h];if(f=r[h],n.hasOwnProperty(h)&&(null!=p||null!=f))switch(h){case"type":a=p;break;case"name":i=p;break;case"checked":c=p;break;case"defaultChecked":d=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:p!==f&&Jc(e,t,h,p,n,f)}}return void gt(e,o,l,u,c,d,a,i);case"select":for(a in p=o=l=h=null,r)if(u=r[a],r.hasOwnProperty(a)&&null!=u)switch(a){case"value":break;case"multiple":p=u;default:n.hasOwnProperty(a)||Jc(e,t,a,null,n,u)}for(i in n)if(a=n[i],u=r[i],n.hasOwnProperty(i)&&(null!=a||null!=u))switch(i){case"value":h=a;break;case"defaultValue":l=a;break;case"multiple":o=a;default:a!==u&&Jc(e,t,i,a,n,u)}return t=l,r=o,n=p,void(null!=h?Et(e,!!r,h,!1):!!n!=!!r&&(null!=t?Et(e,!!r,t,!0):Et(e,!!r,r?[]:"",!1)));case"textarea":for(l in p=h=null,r)if(i=r[l],r.hasOwnProperty(l)&&null!=i&&!n.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Jc(e,t,l,null,n,i)}for(o in n)if(i=n[o],a=r[o],n.hasOwnProperty(o)&&(null!=i||null!=a))switch(o){case"value":h=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(s(91));break;default:i!==a&&Jc(e,t,o,i,n,a)}return void bt(e,h,p);case"option":for(var m in r)h=r[m],r.hasOwnProperty(m)&&null!=h&&!n.hasOwnProperty(m)&&("selected"===m?e.selected=!1:Jc(e,t,m,null,n,h));for(u in n)h=n[u],p=r[u],!n.hasOwnProperty(u)||h===p||null==h&&null==p||("selected"===u?e.selected=h&&"function"!=typeof h&&"symbol"!=typeof h:Jc(e,t,u,h,n,p));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in r)h=r[g],r.hasOwnProperty(g)&&null!=h&&!n.hasOwnProperty(g)&&Jc(e,t,g,null,n,h);for(c in n)if(h=n[c],p=r[c],n.hasOwnProperty(c)&&h!==p&&(null!=h||null!=p))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(s(137,t));break;default:Jc(e,t,c,h,n,p)}return;default:if(Lt(t)){for(var v in r)h=r[v],r.hasOwnProperty(v)&&void 0!==h&&!n.hasOwnProperty(v)&&Zc(e,t,v,void 0,n,h);for(d in n)h=n[d],p=r[d],!n.hasOwnProperty(d)||h===p||void 0===h&&void 0===p||Zc(e,t,d,h,n,p);return}}for(var y in r)h=r[y],r.hasOwnProperty(y)&&null!=h&&!n.hasOwnProperty(y)&&Jc(e,t,y,null,n,h);for(f in n)h=n[f],p=r[f],!n.hasOwnProperty(f)||h===p||null==h&&null==p||Jc(e,t,f,h,n,p)}(n,e.type,r,t),n[xe]=t}catch(t){cc(e,e.return,t)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&hd(e.type)||4===e.tag}function ml(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&hd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?(9===r.nodeType?r.body:"HTML"===r.nodeName?r.ownerDocument.body:r).insertBefore(e,t):((t=9===r.nodeType?r.body:"HTML"===r.nodeName?r.ownerDocument.body:r).appendChild(e),null!=(r=r._reactRootContainer)||null!==t.onclick||(t.onclick=Qc));else if(4!==n&&(27===n&&hd(e.type)&&(r=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,r),e=e.sibling;null!==e;)gl(e,t,r),e=e.sibling}function vl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&(27===n&&hd(e.type)&&(r=e.stateNode),null!==(e=e.child)))for(vl(e,t,r),e=e.sibling;null!==e;)vl(e,t,r),e=e.sibling}function yl(e){var t=e.stateNode,r=e.memoizedProps;try{for(var n=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ed(t,n,r),t[Pe]=e,t[xe]=r}catch(t){cc(e,e.return,t)}}var El=!1,bl=!1,Sl=!1,Tl="function"==typeof WeakSet?WeakSet:Set,wl=null;function kl(e,t,r){var n=r.flags;switch(r.tag){case 0:case 11:case 15:Nl(e,r),4&n&&sl(5,r);break;case 1:if(Nl(e,r),4&n)if(e=r.stateNode,null===t)try{e.componentDidMount()}catch(e){cc(r,r.return,e)}else{var i=go(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){cc(r,r.return,e)}}64&n&&ll(r),512&n&&cl(r,r.return);break;case 3:if(Nl(e,r),64&n&&null!==(e=r.updateQueue)){if(t=null,null!==r.child)switch(r.child.tag){case 27:case 5:case 1:t=r.child.stateNode}try{fa(e,t)}catch(e){cc(r,r.return,e)}}break;case 27:null===t&&4&n&&yl(r);case 26:case 5:Nl(e,r),null===t&&4&n&&fl(r),512&n&&cl(r,r.return);break;case 12:Nl(e,r);break;case 13:Nl(e,r),4&n&&Cl(e,r),64&n&&null!==(e=r.memoizedState)&&null!==(e=e.dehydrated)&&function(e,t){var r=e.ownerDocument;if("$?"!==e.data||"complete"===r.readyState)t();else{var n=function(){t(),r.removeEventListener("DOMContentLoaded",n)};r.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}(e,r=pc.bind(null,r));break;case 22:if(!(n=null!==r.memoizedState||El)){t=null!==t&&null!==t.memoizedState||bl,i=El;var a=bl;El=n,(bl=t)&&!a?Bl(e,r,!!(8772&r.subtreeFlags)):Nl(e,r),El=i,bl=a}break;case 30:break;default:Nl(e,r)}}function Rl(e){var t=e.alternate;null!==t&&(e.alternate=null,Rl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&je(t),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ll=null,Al=!1;function _l(e,t,r){for(r=r.child;null!==r;)Dl(e,t,r),r=r.sibling}function Dl(e,t,r){if(de&&"function"==typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ce,r)}catch(e){}switch(r.tag){case 26:bl||dl(r,t),_l(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode).parentNode.removeChild(r);break;case 27:bl||dl(r,t);var n=Ll,i=Al;hd(r.type)&&(Ll=r.stateNode,Al=!1),_l(e,t,r),Sd(r.stateNode),Ll=n,Al=i;break;case 5:bl||dl(r,t);case 6:if(n=Ll,i=Al,Ll=null,_l(e,t,r),Al=i,null!==(Ll=n))if(Al)try{(9===Ll.nodeType?Ll.body:"HTML"===Ll.nodeName?Ll.ownerDocument.body:Ll).removeChild(r.stateNode)}catch(e){cc(r,t,e)}else try{Ll.removeChild(r.stateNode)}catch(e){cc(r,t,e)}break;case 18:null!==Ll&&(Al?(pd(9===(e=Ll).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,r.stateNode),_f(e)):pd(Ll,r.stateNode));break;case 4:n=Ll,i=Al,Ll=r.stateNode.containerInfo,Al=!0,_l(e,t,r),Ll=n,Al=i;break;case 0:case 11:case 14:case 15:bl||ol(2,r,t),bl||ol(4,r,t),_l(e,t,r);break;case 1:bl||(dl(r,t),"function"==typeof(n=r.stateNode).componentWillUnmount&&ul(r,t,n)),_l(e,t,r);break;case 21:_l(e,t,r);break;case 22:bl=(n=bl)||null!==r.memoizedState,_l(e,t,r),bl=n;break;default:_l(e,t,r)}}function Cl(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{_f(e)}catch(e){cc(t,t.return,e)}}function Il(e,t){var r=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Tl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Tl),t;default:throw Error(s(435,e.tag))}}(e);t.forEach(function(t){var n=mc.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}function Pl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n],a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(hd(l.type)){Ll=l.stateNode,Al=!1;break e}break;case 5:Ll=l.stateNode,Al=!1;break e;case 3:case 4:Ll=l.stateNode.containerInfo,Al=!0;break e}l=l.return}if(null===Ll)throw Error(s(160));Dl(a,o,i),Ll=null,Al=!1,null!==(a=i.alternate)&&(a.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ol(t,e),t=t.sibling}var xl=null;function Ol(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pl(t,e),Ml(e),4&n&&(ol(3,e,e.return),sl(3,e),ol(5,e,e.return));break;case 1:Pl(t,e),Ml(e),512&n&&(bl||null===r||dl(r,r.return)),64&n&&El&&null!==(e=e.updateQueue)&&null!==(n=e.callbacks)&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===r?n:r.concat(n));break;case 26:var i=xl;if(Pl(t,e),Ml(e),512&n&&(bl||null===r||dl(r,r.return)),4&n){var a=null!==r?r.memoizedState:null;if(n=e.memoizedState,null===r)if(null===n)if(null===e.stateNode){e:{n=e.type,r=e.memoizedProps,i=i.ownerDocument||i;t:switch(n){case"title":(!(a=i.getElementsByTagName("title")[0])||a[Be]||a[Pe]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=i.createElement(n),i.head.insertBefore(a,i.querySelector("head > title"))),ed(a,n,r),a[Pe]=e,Ke(a),n=a;break e;case"link":var o=Bd("link","href",i).get(n+(r.href||""));if(o)for(var l=0;l<o.length;l++)if((a=o[l]).getAttribute("href")===(null==r.href||""===r.href?null:r.href)&&a.getAttribute("rel")===(null==r.rel?null:r.rel)&&a.getAttribute("title")===(null==r.title?null:r.title)&&a.getAttribute("crossorigin")===(null==r.crossOrigin?null:r.crossOrigin)){o.splice(l,1);break t}ed(a=i.createElement(n),n,r),i.head.appendChild(a);break;case"meta":if(o=Bd("meta","content",i).get(n+(r.content||"")))for(l=0;l<o.length;l++)if((a=o[l]).getAttribute("content")===(null==r.content?null:""+r.content)&&a.getAttribute("name")===(null==r.name?null:r.name)&&a.getAttribute("property")===(null==r.property?null:r.property)&&a.getAttribute("http-equiv")===(null==r.httpEquiv?null:r.httpEquiv)&&a.getAttribute("charset")===(null==r.charSet?null:r.charSet)){o.splice(l,1);break t}ed(a=i.createElement(n),n,r),i.head.appendChild(a);break;default:throw Error(s(468,n))}a[Pe]=e,Ke(a),n=a}e.stateNode=n}else jd(i,e.type,e.stateNode);else e.stateNode=Od(i,n,e.memoizedProps);else a!==n?(null===a?null!==r.stateNode&&(r=r.stateNode).parentNode.removeChild(r):a.count--,null===n?jd(i,e.type,e.stateNode):Od(i,n,e.memoizedProps)):null===n&&null!==e.stateNode&&hl(e,e.memoizedProps,r.memoizedProps)}break;case 27:Pl(t,e),Ml(e),512&n&&(bl||null===r||dl(r,r.return)),null!==r&&4&n&&hl(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Pl(t,e),Ml(e),512&n&&(bl||null===r||dl(r,r.return)),32&e.flags){i=e.stateNode;try{Tt(i,"")}catch(t){cc(e,e.return,t)}}4&n&&null!=e.stateNode&&hl(e,i=e.memoizedProps,null!==r?r.memoizedProps:i),1024&n&&(Sl=!0);break;case 6:if(Pl(t,e),Ml(e),4&n){if(null===e.stateNode)throw Error(s(162));n=e.memoizedProps,r=e.stateNode;try{r.nodeValue=n}catch(t){cc(e,e.return,t)}}break;case 3:if(Ud=null,i=xl,xl=kd(t.containerInfo),Pl(t,e),xl=i,Ml(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{_f(t.containerInfo)}catch(t){cc(e,e.return,t)}Sl&&(Sl=!1,Fl(e));break;case 4:n=xl,xl=kd(e.stateNode.containerInfo),Pl(t,e),Ml(e),xl=n;break;case 12:default:Pl(t,e),Ml(e);break;case 13:Pl(t,e),Ml(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==r&&null!==r.memoizedState)&&(Su=te()),4&n&&null!==(n=e.updateQueue)&&(e.updateQueue=null,Il(e,n));break;case 22:i=null!==e.memoizedState;var u=null!==r&&null!==r.memoizedState,c=El,d=bl;if(El=c||i,bl=d||u,Pl(t,e),bl=d,El=c,Ml(e),8192&n)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===r||u||El||bl||Ul(e)),r=null,t=e;;){if(5===t.tag||26===t.tag){if(null===r){u=r=t;try{if(a=u.stateNode,i)"function"==typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=u.stateNode;var f=u.memoizedProps.style,h=null!=f&&f.hasOwnProperty("display")?f.display:null;l.style.display=null==h||"boolean"==typeof h?"":(""+h).trim()}}catch(e){cc(u,u.return,e)}}}else if(6===t.tag){if(null===r){u=t;try{u.stateNode.nodeValue=i?"":u.memoizedProps}catch(e){cc(u,u.return,e)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}4&n&&null!==(n=e.updateQueue)&&null!==(r=n.retryQueue)&&(n.retryQueue=null,Il(e,r));break;case 19:Pl(t,e),Ml(e),4&n&&null!==(n=e.updateQueue)&&(e.updateQueue=null,Il(e,n));case 30:case 21:}}function Ml(e){var t=e.flags;if(2&t){try{for(var r,n=e.return;null!==n;){if(pl(n)){r=n;break}n=n.return}if(null==r)throw Error(s(160));switch(r.tag){case 27:var i=r.stateNode;vl(e,ml(e),i);break;case 5:var a=r.stateNode;32&r.flags&&(Tt(a,""),r.flags&=-33),vl(e,ml(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;gl(e,ml(e),o);break;default:throw Error(s(161))}}catch(t){cc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Fl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Fl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Nl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)kl(e,t.alternate,t),t=t.sibling}function Ul(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),Ul(t);break;case 1:dl(t,t.return);var r=t.stateNode;"function"==typeof r.componentWillUnmount&&ul(t,t.return,r),Ul(t);break;case 27:Sd(t.stateNode);case 26:case 5:dl(t,t.return),Ul(t);break;case 22:null===t.memoizedState&&Ul(t);break;default:Ul(t)}e=e.sibling}}function Bl(e,t,r){for(r=r&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var n=t.alternate,i=e,a=t,s=a.flags;switch(a.tag){case 0:case 11:case 15:Bl(i,a,r),sl(4,a);break;case 1:if(Bl(i,a,r),"function"==typeof(i=(n=a).stateNode).componentDidMount)try{i.componentDidMount()}catch(e){cc(n,n.return,e)}if(null!==(i=(n=a).updateQueue)){var o=n.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)da(l[i],o)}catch(e){cc(n,n.return,e)}}r&&64&s&&ll(a),cl(a,a.return);break;case 27:yl(a);case 26:case 5:Bl(i,a,r),r&&null===n&&4&s&&fl(a),cl(a,a.return);break;case 12:Bl(i,a,r);break;case 13:Bl(i,a,r),r&&4&s&&Cl(i,a);break;case 22:null===a.memoizedState&&Bl(i,a,r),cl(a,a.return);break;case 30:break;default:Bl(i,a,r)}t=t.sibling}}function jl(e,t){var r=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==r&&(null!=e&&e.refCount++,null!=r&&Oi(r))}function Hl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oi(e))}function Gl(e,t,r,n){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)zl(e,t,r,n),t=t.sibling}function zl(e,t,r,n){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Gl(e,t,r,n),2048&i&&sl(9,t);break;case 1:case 13:default:Gl(e,t,r,n);break;case 3:Gl(e,t,r,n),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oi(e)));break;case 12:if(2048&i){Gl(e,t,r,n),e=t.stateNode;try{var a=t.memoizedProps,s=a.id,o=a.onPostCommit;"function"==typeof o&&o(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(e){cc(t,t.return,e)}}else Gl(e,t,r,n);break;case 23:break;case 22:a=t.stateNode,s=t.alternate,null!==t.memoizedState?2&a._visibility?Gl(e,t,r,n):Kl(e,t):2&a._visibility?Gl(e,t,r,n):(a._visibility|=2,Vl(e,t,r,n,!!(10256&t.subtreeFlags))),2048&i&&jl(s,t);break;case 24:Gl(e,t,r,n),2048&i&&Hl(t.alternate,t)}}function Vl(e,t,r,n,i){for(i=i&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var a=e,s=t,o=r,l=n,u=s.flags;switch(s.tag){case 0:case 11:case 15:Vl(a,s,o,l,i),sl(8,s);break;case 23:break;case 22:var c=s.stateNode;null!==s.memoizedState?2&c._visibility?Vl(a,s,o,l,i):Kl(a,s):(c._visibility|=2,Vl(a,s,o,l,i)),i&&2048&u&&jl(s.alternate,s);break;case 24:Vl(a,s,o,l,i),i&&2048&u&&Hl(s.alternate,s);break;default:Vl(a,s,o,l,i)}t=t.sibling}}function Kl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var r=e,n=t,i=n.flags;switch(n.tag){case 22:Kl(r,n),2048&i&&jl(n.alternate,n);break;case 24:Kl(r,n),2048&i&&Hl(n.alternate,n);break;default:Kl(r,n)}t=t.sibling}}var $l=8192;function ql(e){if(e.subtreeFlags&$l)for(e=e.child;null!==e;)Wl(e),e=e.sibling}function Wl(e){switch(e.tag){case 26:ql(e),e.flags&$l&&null!==e.memoizedState&&function(e,t,r){if(null===Gd)throw Error(s(475));var n=Gd;if(!("stylesheet"!==t.type||"string"==typeof r.media&&!1===matchMedia(r.media).matches||4&t.state.loading)){if(null===t.instance){var i=Dd(r.href),a=e.querySelector(Cd(i));if(a)return null!==(e=a._p)&&"object"==typeof e&&"function"==typeof e.then&&(n.count++,n=Vd.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=a,void Ke(a);a=e.ownerDocument||e,r=Id(r),(i=Td.get(i))&&Fd(r,i),Ke(a=a.createElement("link"));var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),ed(a,"link",r),t.instance=a}null===n.stylesheets&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(n.count++,t=Vd.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}(xl,e.memoizedState,e.memoizedProps);break;case 5:default:ql(e);break;case 3:case 4:var t=xl;xl=kd(e.stateNode.containerInfo),ql(e),xl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=$l,$l=16777216,ql(e),$l=t):ql(e))}}function Yl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Xl(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];wl=n,Zl(n,e)}Yl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Ql(e),e=e.sibling}function Ql(e){switch(e.tag){case 0:case 11:case 15:Xl(e),2048&e.flags&&ol(9,e,e.return);break;case 3:case 12:default:Xl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Jl(e)):Xl(e)}}function Jl(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];wl=n,Zl(n,e)}Yl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ol(8,t,t.return),Jl(t);break;case 22:2&(r=t.stateNode)._visibility&&(r._visibility&=-3,Jl(t));break;default:Jl(t)}e=e.sibling}}function Zl(e,t){for(;null!==wl;){var r=wl;switch(r.tag){case 0:case 11:case 15:ol(8,r,t);break;case 23:case 22:if(null!==r.memoizedState&&null!==r.memoizedState.cachePool){var n=r.memoizedState.cachePool.pool;null!=n&&n.refCount++}break;case 24:Oi(r.memoizedState.cache)}if(null!==(n=r.child))n.return=r,wl=n;else e:for(r=e;null!==wl;){var i=(n=wl).sibling,a=n.return;if(Rl(n),n===r){wl=null;break e}if(null!==i){i.return=a,wl=i;break e}wl=a}}}var eu={getCacheForType:function(e){var t=Li(Pi),r=t.data.get(e);return void 0===r&&(r=e(),t.data.set(e,r)),r}},tu="function"==typeof WeakMap?WeakMap:Map,ru=0,nu=null,iu=null,au=0,su=0,ou=null,lu=!1,uu=!1,cu=!1,du=0,fu=0,hu=0,pu=0,mu=0,gu=0,vu=0,yu=null,Eu=null,bu=!1,Su=0,Tu=1/0,wu=null,ku=null,Ru=0,Lu=null,Au=null,_u=0,Du=0,Cu=null,Iu=null,Pu=0,xu=null;function Ou(){return 2&ru&&0!==au?au&-au:null!==O.T?0!==Ni?Ni:Dc():Ce()}function Mu(){0===gu&&(gu=536870912&au&&!ai?536870912:Te());var e=no.current;return null!==e&&(e.flags|=32),gu}function Fu(e,t,r){(e!==nu||2!==su&&9!==su)&&null===e.cancelPendingCommit||(zu(e,0),ju(e,au,gu,!1)),Re(e,r),2&ru&&e===nu||(e===nu&&(!(2&ru)&&(pu|=r),4===fu&&ju(e,au,gu,!1)),Tc(e))}function Nu(e,t,r){if(6&ru)throw Error(s(327));for(var n=!r&&!(124&t)&&0===(t&e.expiredLanes)||be(e,t),i=n?function(e,t){var r=ru;ru|=2;var n=Ku(),i=$u();nu!==e||au!==t?(wu=null,Tu=te()+500,zu(e,t)):uu=be(e,t);e:for(;;)try{if(0!==su&&null!==iu){t=iu;var a=ou;t:switch(su){case 1:su=0,ou=null,Zu(e,t,a,1);break;case 2:case 9:if(Yi(a)){su=0,ou=null,Ju(t);break}t=function(){2!==su&&9!==su||nu!==e||(su=7),Tc(e)},a.then(t,t);break e;case 3:su=7;break e;case 4:su=5;break e;case 7:Yi(a)?(su=0,ou=null,Ju(t)):(su=0,ou=null,Zu(e,t,a,7));break;case 5:var o=null;switch(iu.tag){case 26:o=iu.memoizedState;case 5:case 27:var l=iu;if(!o||Hd(o)){su=0,ou=null;var u=l.sibling;if(null!==u)iu=u;else{var c=l.return;null!==c?(iu=c,ec(c)):iu=null}break t}}su=0,ou=null,Zu(e,t,a,5);break;case 6:su=0,ou=null,Zu(e,t,a,6);break;case 8:Gu(),fu=6;break e;default:throw Error(s(462))}}Xu();break}catch(t){Vu(e,t)}return yi=vi=null,O.H=n,O.A=i,ru=r,null!==iu?0:(nu=null,au=0,_n(),fu)}(e,t):Wu(e,t,!0),a=n;;){if(0===i){uu&&!n&&ju(e,t,0,!1);break}if(r=e.current.alternate,!a||Bu(r)){if(2===i){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=0!=(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;i=yu;var u=l.current.memoizedState.isDehydrated;if(u&&(zu(l,o).flags|=256),2!==(o=Wu(l,o,!1))){if(cu&&!u){l.errorRecoveryDisabledLanes|=a,pu|=a,i=4;break e}a=Eu,Eu=i,null!==a&&(null===Eu?Eu=a:Eu.push.apply(Eu,a))}i=o}if(a=!1,2!==i)continue}}if(1===i){zu(e,0),ju(e,t,0,!0);break}e:{switch(n=e,a=i){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:ju(n,t,gu,!lu);break e;case 2:Eu=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(i=Su+300-te())){if(ju(n,t,gu,!lu),0!==Ee(n,0,!0))break e;n.timeoutHandle=ld(Uu.bind(null,n,r,Eu,wu,bu,t,gu,pu,vu,lu,a,2,-0,0),i)}else Uu(n,r,Eu,wu,bu,t,gu,pu,vu,lu,a,0,-0,0)}break}i=Wu(e,t,!1),a=!1}Tc(e)}function Uu(e,t,r,n,i,a,o,l,u,c,d,f,h,p){if(e.timeoutHandle=-1,(8192&(f=t.subtreeFlags)||!(16785408&~f))&&(Gd={stylesheets:null,count:0,unsuspend:zd},Wl(t),null!==(f=function(){if(null===Gd)throw Error(s(475));var e=Gd;return e.stylesheets&&0===e.count&&$d(e,e.stylesheets),0<e.count?function(t){var r=setTimeout(function(){if(e.stylesheets&&$d(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(r)}}:null}())))return e.cancelPendingCommit=f(rc.bind(null,e,t,a,r,n,i,o,l,u,d,1,h,p)),void ju(e,a,o,!c);rc(e,t,a,r,n,i,o,l,u)}function Bu(e){for(var t=e;;){var r=t.tag;if((0===r||11===r||15===r)&&16384&t.flags&&null!==(r=t.updateQueue)&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!Wr(a(),i))return!1}catch(e){return!1}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ju(e,t,r,n){t&=~mu,t&=~pu,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var i=t;0<i;){var a=31-he(i),s=1<<a;n[a]=-1,i&=~s}0!==r&&Le(e,r,t)}function Hu(){return!!(6&ru)||(wc(0,!1),!1)}function Gu(){if(null!==iu){if(0===su)var e=iu.return;else yi=vi=null,Na(e=iu),Ws=null,Ys=0,e=iu;for(;null!==e;)al(e.alternate,e),e=e.return;iu=null}}function zu(e,t){var r=e.timeoutHandle;-1!==r&&(e.timeoutHandle=-1,ud(r)),null!==(r=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,r()),Gu(),nu=e,iu=r=Un(e.current,null),au=t,su=0,ou=null,lu=!1,uu=be(e,t),cu=!1,vu=gu=mu=pu=hu=fu=0,Eu=yu=null,bu=!1,8&t&&(t|=32&t);var n=e.entangledLanes;if(0!==n)for(e=e.entanglements,n&=t;0<n;){var i=31-he(n),a=1<<i;t|=e[i],n&=~a}return du=t,_n(),r}function Vu(e,t){Ea=null,O.H=Vs,t===Ki||t===qi?(t=Zi(),su=3):t===$i?(t=Zi(),su=4):su=t===Lo?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,ou=t,null===iu&&(fu=1,So(e,kn(t,e.current)))}function Ku(){var e=O.H;return O.H=Vs,null===e?Vs:e}function $u(){var e=O.A;return O.A=eu,e}function qu(){fu=4,lu||(4194048&au)!==au&&null!==no.current||(uu=!0),!(134217727&hu)&&!(134217727&pu)||null===nu||ju(nu,au,gu,!1)}function Wu(e,t,r){var n=ru;ru|=2;var i=Ku(),a=$u();nu===e&&au===t||(wu=null,zu(e,t)),t=!1;var s=fu;e:for(;;)try{if(0!==su&&null!==iu){var o=iu,l=ou;switch(su){case 8:Gu(),s=6;break e;case 3:case 2:case 9:case 6:null===no.current&&(t=!0);var u=su;if(su=0,ou=null,Zu(e,o,l,u),r&&uu){s=0;break e}break;default:u=su,su=0,ou=null,Zu(e,o,l,u)}}Yu(),s=fu;break}catch(t){Vu(e,t)}return t&&e.shellSuspendCounter++,yi=vi=null,ru=n,O.H=i,O.A=a,null===iu&&(nu=null,au=0,_n()),s}function Yu(){for(;null!==iu;)Qu(iu)}function Xu(){for(;null!==iu&&!Z();)Qu(iu)}function Qu(e){var t=Qo(e.alternate,e,du);e.memoizedProps=e.pendingProps,null===t?ec(e):iu=t}function Ju(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=Fo(r,t,t.pendingProps,t.type,void 0,au);break;case 11:t=Fo(r,t,t.pendingProps,t.type.render,t.ref,au);break;case 5:Na(t);default:al(r,t),t=Qo(r,t=iu=Bn(t,du),du)}e.memoizedProps=e.pendingProps,null===t?ec(e):iu=t}function Zu(e,t,r,n){yi=vi=null,Na(t),Ws=null,Ys=0;var i=t.return;try{if(function(e,t,r,n,i){if(r.flags|=32768,null!==n&&"object"==typeof n&&"function"==typeof n.then){if(null!==(t=r.alternate)&&wi(t,r,i,!0),null!==(r=no.current)){switch(r.tag){case 13:return null===io?qu():null===r.alternate&&0===fu&&(fu=3),r.flags&=-257,r.flags|=65536,r.lanes=i,n===Wi?r.flags|=16384:(null===(t=r.updateQueue)?r.updateQueue=new Set([n]):t.add(n),dc(e,n,i)),!1;case 22:return r.flags|=65536,n===Wi?r.flags|=16384:(null===(t=r.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},r.updateQueue=t):null===(r=t.retryQueue)?t.retryQueue=new Set([n]):r.add(n),dc(e,n,i)),!1}throw Error(s(435,r.tag))}return dc(e,n,i),qu(),!1}if(ai)return null!==(t=no.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,n!==li&&mi(kn(e=Error(s(422),{cause:n}),r))):(n!==li&&mi(kn(t=Error(s(423),{cause:n}),r)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,n=kn(n,r),oa(e,i=wo(e.stateNode,n,i)),4!==fu&&(fu=2)),!1;var a=Error(s(520),{cause:n});if(a=kn(a,r),null===yu?yu=[a]:yu.push(a),4!==fu&&(fu=2),null===t)return!0;n=kn(n,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=i&-i,r.lanes|=e,oa(r,e=wo(r.stateNode,n,e)),!1;case 1:if(t=r.type,a=r.stateNode,!(128&r.flags||"function"!=typeof t.getDerivedStateFromError&&(null===a||"function"!=typeof a.componentDidCatch||null!==ku&&ku.has(a))))return r.flags|=65536,i&=-i,r.lanes|=i,Ro(i=ko(i),e,r,n),oa(r,i),!1}r=r.return}while(null!==r);return!1}(e,i,t,r,au))return fu=1,So(e,kn(r,e.current)),void(iu=null)}catch(t){if(null!==i)throw iu=i,t;return fu=1,So(e,kn(r,e.current)),void(iu=null)}32768&t.flags?(ai||1===n?e=!0:uu||536870912&au?e=!1:(lu=e=!0,(2===n||9===n||3===n||6===n)&&null!==(n=no.current)&&13===n.tag&&(n.flags|=16384)),tc(t,e)):ec(t)}function ec(e){var t=e;do{if(32768&t.flags)return void tc(t,lu);e=t.return;var r=nl(t.alternate,t,du);if(null!==r)return void(iu=r);if(null!==(t=t.sibling))return void(iu=t);iu=t=e}while(null!==t);0===fu&&(fu=5)}function tc(e,t){do{var r=il(e.alternate,e);if(null!==r)return r.flags&=32767,void(iu=r);if(null!==(r=e.return)&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&null!==(e=e.sibling))return void(iu=e);iu=e=r}while(null!==e);fu=6,iu=null}function rc(e,t,r,n,i,a,o,l,u){e.cancelPendingCommit=null;do{oc()}while(0!==Ru);if(6&ru)throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(a=t.lanes|t.childLanes,function(e,t,r,n,i,a){var s=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(r=s&~r;0<r;){var c=31-he(r),d=1<<c;o[c]=0,l[c]=-1;var f=u[c];if(null!==f)for(u[c]=null,c=0;c<f.length;c++){var h=f[c];null!==h&&(h.lane&=-536870913)}r&=~d}0!==n&&Le(e,n,0),0!==a&&0===i&&0!==e.tag&&(e.suspendedLanes|=a&~(s&~t))}(e,r,a|=An,o,l,u),e===nu&&(iu=nu=null,au=0),Au=t,Lu=e,_u=r,Du=a,Cu=i,Iu=n,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,Q(ae,function(){return lc(),null})):(e.callbackNode=null,e.callbackPriority=0),n=!!(13878&t.flags),13878&t.subtreeFlags||n){n=O.T,O.T=null,i=M.p,M.p=2,o=ru,ru|=4;try{!function(e,t){if(e=e.containerInfo,td=rf,en(e=Zr(e))){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch(e){r=null;break e}var o=0,l=-1,u=-1,c=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==r||0!==i&&3!==f.nodeType||(l=o+i),f!==a||0!==n&&3!==f.nodeType||(u=o+n),3===f.nodeType&&(o+=f.nodeValue.length),null!==(p=f.firstChild);)h=f,f=p;for(;;){if(f===e)break t;if(h===r&&++c===i&&(l=o),h===a&&++d===n&&(u=o),null!==(p=f.nextSibling))break;h=(f=h).parentNode}f=p}r=-1===l||-1===u?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(rd={focusedElem:e,selectionRange:r},rf=!1,wl=t;null!==wl;)if(e=(t=wl).child,1024&t.subtreeFlags&&null!==e)e.return=t,wl=e;else for(;null!==wl;){switch(a=(t=wl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==a){e=void 0,r=t,i=a.memoizedProps,a=a.memoizedState,n=r.stateNode;try{var m=go(r.type,i,(r.elementType,r.type));e=n.getSnapshotBeforeUpdate(m,a),n.__reactInternalSnapshotBeforeUpdate=e}catch(e){cc(r,r.return,e)}}break;case 3:if(1024&e)if(9===(r=(e=t.stateNode.containerInfo).nodeType))md(e);else if(1===r)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":md(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,wl=e;break}wl=t.return}}(e,t)}finally{ru=o,M.p=i,O.T=n}}Ru=1,nc(),ic(),ac()}}function nc(){if(1===Ru){Ru=0;var e=Lu,t=Au,r=!!(13878&t.flags);if(13878&t.subtreeFlags||r){r=O.T,O.T=null;var n=M.p;M.p=2;var i=ru;ru|=4;try{Ol(t,e);var a=rd,s=Zr(e.containerInfo),o=a.focusedElem,l=a.selectionRange;if(s!==o&&o&&o.ownerDocument&&Jr(o.ownerDocument.documentElement,o)){if(null!==l&&en(o)){var u=l.start,c=l.end;if(void 0===c&&(c=u),"selectionStart"in o)o.selectionStart=u,o.selectionEnd=Math.min(c,o.value.length);else{var d=o.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var h=f.getSelection(),p=o.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!h.extend&&m>g&&(s=g,g=m,m=s);var v=Qr(o,m),y=Qr(o,g);if(v&&y&&(1!==h.rangeCount||h.anchorNode!==v.node||h.anchorOffset!==v.offset||h.focusNode!==y.node||h.focusOffset!==y.offset)){var E=d.createRange();E.setStart(v.node,v.offset),h.removeAllRanges(),m>g?(h.addRange(E),h.extend(y.node,y.offset)):(E.setEnd(y.node,y.offset),h.addRange(E))}}}}for(d=[],h=o;h=h.parentNode;)1===h.nodeType&&d.push({element:h,left:h.scrollLeft,top:h.scrollTop});for("function"==typeof o.focus&&o.focus(),o=0;o<d.length;o++){var b=d[o];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}rf=!!td,rd=td=null}finally{ru=i,M.p=n,O.T=r}}e.current=t,Ru=2}}function ic(){if(2===Ru){Ru=0;var e=Lu,t=Au,r=!!(8772&t.flags);if(8772&t.subtreeFlags||r){r=O.T,O.T=null;var n=M.p;M.p=2;var i=ru;ru|=4;try{kl(e,t.alternate,t)}finally{ru=i,M.p=n,O.T=r}}Ru=3}}function ac(){if(4===Ru||3===Ru){Ru=0,ee();var e=Lu,t=Au,r=_u,n=Iu;10256&t.subtreeFlags||10256&t.flags?Ru=5:(Ru=0,Au=Lu=null,sc(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(ku=null),De(r),t=t.stateNode,de&&"function"==typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ce,t,void 0,!(128&~t.current.flags))}catch(e){}if(null!==n){t=O.T,i=M.p,M.p=2,O.T=null;try{for(var a=e.onRecoverableError,s=0;s<n.length;s++){var o=n[s];a(o.value,{componentStack:o.stack})}}finally{O.T=t,M.p=i}}3&_u&&oc(),Tc(e),i=e.pendingLanes,4194090&r&&42&i?e===xu?Pu++:(Pu=0,xu=e):Pu=0,wc(0,!1)}}function sc(e,t){0===(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,Oi(t))}function oc(e){return nc(),ic(),ac(),lc()}function lc(){if(5!==Ru)return!1;var e=Lu,t=Du;Du=0;var r=De(_u),n=O.T,i=M.p;try{M.p=32>r?32:r,O.T=null,r=Cu,Cu=null;var a=Lu,o=_u;if(Ru=0,Au=Lu=null,_u=0,6&ru)throw Error(s(331));var l=ru;if(ru|=4,Ql(a.current),zl(a,a.current,o,r),ru=l,wc(0,!1),de&&"function"==typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ce,a)}catch(e){}return!0}finally{M.p=i,O.T=n,sc(e,t)}}function uc(e,t,r){t=kn(r,t),null!==(e=aa(e,t=wo(e.stateNode,t,2),2))&&(Re(e,2),Tc(e))}function cc(e,t,r){if(3===e.tag)uc(e,e,r);else for(;null!==t;){if(3===t.tag){uc(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===ku||!ku.has(n))){e=kn(r,e),null!==(n=aa(t,r=ko(2),2))&&(Ro(r,n,t,e),Re(n,2),Tc(n));break}}t=t.return}}function dc(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new tu;var i=new Set;n.set(t,i)}else void 0===(i=n.get(t))&&(i=new Set,n.set(t,i));i.has(r)||(cu=!0,i.add(r),e=fc.bind(null,e,t,r),t.then(e,e))}function fc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,nu===e&&(au&r)===r&&(4===fu||3===fu&&(62914560&au)===au&&300>te()-Su?!(2&ru)&&zu(e,0):mu|=r,vu===au&&(vu=0)),Tc(e)}function hc(e,t){0===t&&(t=we()),null!==(e=In(e,t))&&(Re(e,t),Tc(e))}function pc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),hc(e,r)}function mc(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==n&&n.delete(t),hc(e,r)}var gc=null,vc=null,yc=!1,Ec=!1,bc=!1,Sc=0;function Tc(e){e!==vc&&null===e.next&&(null===vc?gc=vc=e:vc=vc.next=e),Ec=!0,yc||(yc=!0,dd(function(){6&ru?Q(ne,kc):Rc()}))}function wc(e,t){if(!bc&&Ec){bc=!0;do{for(var r=!1,n=gc;null!==n;){if(!t)if(0!==e){var i=n.pendingLanes;if(0===i)var a=0;else{var s=n.suspendedLanes,o=n.pingedLanes;a=(1<<31-he(42|e)+1)-1,a=201326741&(a&=i&~(s&~o))?201326741&a|1:a?2|a:0}0!==a&&(r=!0,_c(n,a))}else a=au,!(3&(a=Ee(n,n===nu?a:0,null!==n.cancelPendingCommit||-1!==n.timeoutHandle)))||be(n,a)||(r=!0,_c(n,a));n=n.next}}while(r);bc=!1}}function kc(){Rc()}function Rc(){Ec=yc=!1;var e,t=0;0!==Sc&&(((e=window.event)&&"popstate"===e.type?e!==od&&(od=e,!0):(od=null,!1))&&(t=Sc),Sc=0);for(var r=te(),n=null,i=gc;null!==i;){var a=i.next,s=Lc(i,r);0===s?(i.next=null,null===n?gc=a:n.next=a,null===a&&(vc=n)):(n=i,(0!==t||3&s)&&(Ec=!0)),i=a}wc(t,!1)}function Lc(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var s=31-he(a),o=1<<s,l=i[s];-1===l?0!==(o&r)&&0===(o&n)||(i[s]=Se(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}if(r=au,r=Ee(e,e===(t=nu)?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),n=e.callbackNode,0===r||e===t&&(2===su||9===su)||null!==e.cancelPendingCommit)return null!==n&&null!==n&&J(n),e.callbackNode=null,e.callbackPriority=0;if(!(3&r)||be(e,r)){if((t=r&-r)===e.callbackPriority)return t;switch(null!==n&&J(n),De(r)){case 2:case 8:r=ie;break;case 32:default:r=ae;break;case 268435456:r=oe}return n=Ac.bind(null,e),r=Q(r,n),e.callbackPriority=t,e.callbackNode=r,t}return null!==n&&null!==n&&J(n),e.callbackPriority=2,e.callbackNode=null,2}function Ac(e,t){if(0!==Ru&&5!==Ru)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(oc()&&e.callbackNode!==r)return null;var n=au;return 0===(n=Ee(e,e===nu?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Nu(e,n,t),Lc(e,te()),null!=e.callbackNode&&e.callbackNode===r?Ac.bind(null,e):null)}function _c(e,t){if(oc())return null;Nu(e,t,!0)}function Dc(){return 0===Sc&&(Sc=Te()),Sc}function Cc(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Dt(""+e)}function Ic(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}for(var Pc=0;Pc<Sn.length;Pc++){var xc=Sn[Pc];Tn(xc.toLowerCase(),"on"+(xc[0].toUpperCase()+xc.slice(1)))}Tn(hn,"onAnimationEnd"),Tn(pn,"onAnimationIteration"),Tn(mn,"onAnimationStart"),Tn("dblclick","onDoubleClick"),Tn("focusin","onFocus"),Tn("focusout","onBlur"),Tn(gn,"onTransitionRun"),Tn(vn,"onTransitionStart"),Tn(yn,"onTransitionCancel"),Tn(En,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),We("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),We("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),We("onBeforeInput",["compositionend","keypress","textInput","paste"]),We("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),We("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),We("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Oc));function Fc(e,t){t=!!(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var s=n.length-1;0<=s;s--){var o=n[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=u;try{a(i)}catch(e){vo(e)}i.currentTarget=null,a=l}else for(s=0;s<n.length;s++){if(l=(o=n[s]).instance,u=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=u;try{a(i)}catch(e){vo(e)}i.currentTarget=null,a=l}}}}function Nc(e,t){var r=t[Me];void 0===r&&(r=t[Me]=new Set);var n=e+"__bubble";r.has(n)||(Hc(t,e,2,!1),r.add(n))}function Uc(e,t,r){var n=0;t&&(n|=4),Hc(r,e,n,t)}var Bc="_reactListening"+Math.random().toString(36).slice(2);function jc(e){if(!e[Bc]){e[Bc]=!0,$e.forEach(function(t){"selectionchange"!==t&&(Mc.has(t)||Uc(t,!1,e),Uc(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bc]||(t[Bc]=!0,Uc("selectionchange",!1,t))}}function Hc(e,t,r,n){switch(cf(t)){case 2:var i=nf;break;case 8:i=af;break;default:i=sf}r=i.bind(null,t,r,e),i=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Gc(e,t,r,n,i){var a=n;if(!(1&t||2&t||null===n))e:for(;;){if(null===n)return;var s=n.tag;if(3===s||4===s){var o=n.stateNode.containerInfo;if(o===i)break;if(4===s)for(s=n.return;null!==s;){var u=s.tag;if((3===u||4===u)&&s.stateNode.containerInfo===i)return;s=s.return}for(;null!==o;){if(null===(s=He(o)))return;if(5===(u=s.tag)||6===u||26===u||27===u){n=a=s;continue e}o=o.parentNode}}n=n.return}Ft(function(){var n=a,i=It(r),s=[];e:{var o=bn.get(e);if(void 0!==o){var u=Zt,c=e;switch(e){case"keypress":if(0===Kt(r))break e;case"keydown":case"keyup":u=pr;break;case"focusin":c="focus",u=ar;break;case"focusout":c="blur",u=ar;break;case"beforeblur":case"afterblur":u=ar;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=nr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=ir;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=gr;break;case hn:case pn:case mn:u=sr;break;case En:u=vr;break;case"scroll":case"scrollend":u=tr;break;case"wheel":u=yr;break;case"copy":case"cut":case"paste":u=or;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=mr;break;case"toggle":case"beforetoggle":u=Er}var d=!!(4&t),f=!d&&("scroll"===e||"scrollend"===e),h=d?null!==o?o+"Capture":null:o;d=[];for(var p,m=n;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===h||null!=(g=Nt(m,h))&&d.push(zc(m,g,p)),f)break;m=m.return}0<d.length&&(o=new u(o,c,null,r,i),s.push({event:o,listeners:d}))}}if(!(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===Ct||!(c=r.relatedTarget||r.fromElement)||!He(c)&&!c[Oe])&&(u||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,u?(u=n,null!==(c=(c=r.relatedTarget||r.toElement)?He(c):null)&&(f=l(c),d=c.tag,c!==f||5!==d&&27!==d&&6!==d)&&(c=null)):(u=null,c=n),u!==c)){if(d=nr,g="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=mr,g="onPointerLeave",h="onPointerEnter",m="pointer"),f=null==u?o:ze(u),p=null==c?o:ze(c),(o=new d(g,m+"leave",u,r,i)).target=f,o.relatedTarget=p,g=null,He(i)===n&&((d=new d(h,m+"enter",c,r,i)).target=p,d.relatedTarget=f,g=d),f=g,u&&c)e:{for(h=c,m=0,p=d=u;p;p=Kc(p))m++;for(p=0,g=h;g;g=Kc(g))p++;for(;0<m-p;)d=Kc(d),m--;for(;0<p-m;)h=Kc(h),p--;for(;m--;){if(d===h||null!==h&&d===h.alternate)break e;d=Kc(d),h=Kc(h)}d=null}else d=null;null!==u&&$c(s,o,u,d,!1),null!==c&&null!==f&&$c(s,f,c,d,!0)}if("select"===(u=(o=n?ze(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===u&&"file"===o.type)var v=Nr;else if(Ir(o))if(Ur)v=qr;else{v=Kr;var y=Vr}else!(u=o.nodeName)||"input"!==u.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?n&&Lt(n.elementType)&&(v=Nr):v=$r;switch(v&&(v=v(e,n))?Pr(s,v,r,i):(y&&y(e,o,n),"focusout"===e&&n&&"number"===o.type&&null!=n.memoizedProps.value&&yt(o,"number",o.value)),y=n?ze(n):window,e){case"focusin":(Ir(y)||"true"===y.contentEditable)&&(rn=y,nn=n,an=null);break;case"focusout":an=nn=rn=null;break;case"mousedown":sn=!0;break;case"contextmenu":case"mouseup":case"dragend":sn=!1,on(s,r,i);break;case"selectionchange":if(tn)break;case"keydown":case"keyup":on(s,r,i)}var E;if(Sr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Dr?Ar(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(kr&&"ko"!==r.locale&&(Dr||"onCompositionStart"!==b?"onCompositionEnd"===b&&Dr&&(E=Vt()):(Gt="value"in(Ht=i)?Ht.value:Ht.textContent,Dr=!0)),0<(y=Vc(n,b)).length&&(b=new lr(b,e,null,r,i),s.push({event:b,listeners:y}),(E||null!==(E=_r(r)))&&(b.data=E))),(E=wr?function(e,t){switch(e){case"compositionend":return _r(t);case"keypress":return 32!==t.which?null:(Lr=!0,Rr);case"textInput":return(e=t.data)===Rr&&Lr?null:e;default:return null}}(e,r):function(e,t){if(Dr)return"compositionend"===e||!Sr&&Ar(e,t)?(e=Vt(),zt=Gt=Ht=null,Dr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kr&&"ko"!==t.locale?null:t.data}}(e,r))&&0<(b=Vc(n,"onBeforeInput")).length&&(y=new lr("onBeforeInput","beforeinput",null,r,i),s.push({event:y,listeners:b}),y.data=E),function(e,t,r,n,i){if("submit"===t&&r&&r.stateNode===i){var a=Cc((i[xe]||null).action),s=n.submitter;s&&null!==(t=(t=s[xe]||null)?Cc(t.formAction):s.getAttribute("formAction"))&&(a=t,s=null);var o=new Zt("action","action",null,n,i);e.push({event:o,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(0!==Sc){var e=s?Ic(i,s):new FormData(i);Cs(r,{pending:!0,data:e,method:i.method,action:a},null,e)}}else"function"==typeof a&&(o.preventDefault(),e=s?Ic(i,s):new FormData(i),Cs(r,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}(s,e,n,r,i)}Fc(s,t)})}function zc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Vc(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,a=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===a||(null!=(i=Nt(e,r))&&n.unshift(zc(e,i,a)),null!=(i=Nt(e,t))&&n.push(zc(e,i,a))),3===e.tag)return n;e=e.return}return[]}function Kc(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function $c(e,t,r,n,i){for(var a=t._reactName,s=[];null!==r&&r!==n;){var o=r,l=o.alternate,u=o.stateNode;if(o=o.tag,null!==l&&l===n)break;5!==o&&26!==o&&27!==o||null===u||(l=u,i?null!=(u=Nt(r,a))&&s.unshift(zc(r,u,l)):i||null!=(u=Nt(r,a))&&s.push(zc(r,u,l))),r=r.return}0!==s.length&&e.push({event:t,listeners:s})}var qc=/\r\n?/g,Wc=/\u0000|\uFFFD/g;function Yc(e){return("string"==typeof e?e:""+e).replace(qc,"\n").replace(Wc,"")}function Xc(e,t){return t=Yc(t),Yc(e)===t}function Qc(){}function Jc(e,t,r,n,i,a){switch(r){case"children":"string"==typeof n?"body"===t||"textarea"===t&&""===n||Tt(e,n):("number"==typeof n||"bigint"==typeof n)&&"body"!==t&&Tt(e,""+n);break;case"className":rt(e,"class",n);break;case"tabIndex":rt(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":rt(e,r,n);break;case"style":Rt(e,n,a);break;case"data":if("object"!==t){rt(e,"data",n);break}case"src":case"href":if(""===n&&("a"!==t||"href"!==r)){e.removeAttribute(r);break}if(null==n||"function"==typeof n||"symbol"==typeof n||"boolean"==typeof n){e.removeAttribute(r);break}n=Dt(""+n),e.setAttribute(r,n);break;case"action":case"formAction":if("function"==typeof n){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof a&&("formAction"===r?("input"!==t&&Jc(e,t,"name",i.name,i,null),Jc(e,t,"formEncType",i.formEncType,i,null),Jc(e,t,"formMethod",i.formMethod,i,null),Jc(e,t,"formTarget",i.formTarget,i,null)):(Jc(e,t,"encType",i.encType,i,null),Jc(e,t,"method",i.method,i,null),Jc(e,t,"target",i.target,i,null))),null==n||"symbol"==typeof n||"boolean"==typeof n){e.removeAttribute(r);break}n=Dt(""+n),e.setAttribute(r,n);break;case"onClick":null!=n&&(e.onclick=Qc);break;case"onScroll":null!=n&&Nc("scroll",e);break;case"onScrollEnd":null!=n&&Nc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!=typeof n||!("__html"in n))throw Error(s(61));if(null!=(r=n.__html)){if(null!=i.children)throw Error(s(60));e.innerHTML=r}}break;case"multiple":e.multiple=n&&"function"!=typeof n&&"symbol"!=typeof n;break;case"muted":e.muted=n&&"function"!=typeof n&&"symbol"!=typeof n;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==n||"function"==typeof n||"boolean"==typeof n||"symbol"==typeof n){e.removeAttribute("xlink:href");break}r=Dt(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=n&&"function"!=typeof n&&"symbol"!=typeof n?e.setAttribute(r,""+n):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&"function"!=typeof n&&"symbol"!=typeof n?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":!0===n?e.setAttribute(r,""):!1!==n&&null!=n&&"function"!=typeof n&&"symbol"!=typeof n?e.setAttribute(r,n):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":null!=n&&"function"!=typeof n&&"symbol"!=typeof n&&!isNaN(n)&&1<=n?e.setAttribute(r,n):e.removeAttribute(r);break;case"rowSpan":case"start":null==n||"function"==typeof n||"symbol"==typeof n||isNaN(n)?e.removeAttribute(r):e.setAttribute(r,n);break;case"popover":Nc("beforetoggle",e),Nc("toggle",e),tt(e,"popover",n);break;case"xlinkActuate":nt(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":nt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":nt(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":nt(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":nt(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":nt(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":nt(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":nt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":nt(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":tt(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<r.length)||"o"!==r[0]&&"O"!==r[0]||"n"!==r[1]&&"N"!==r[1])&&tt(e,r=At.get(r)||r,n)}}function Zc(e,t,r,n,i,a){switch(r){case"style":Rt(e,n,a);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!=typeof n||!("__html"in n))throw Error(s(61));if(null!=(r=n.__html)){if(null!=i.children)throw Error(s(60));e.innerHTML=r}}break;case"children":"string"==typeof n?Tt(e,n):("number"==typeof n||"bigint"==typeof n)&&Tt(e,""+n);break;case"onScroll":null!=n&&Nc("scroll",e);break;case"onScrollEnd":null!=n&&Nc("scrollend",e);break;case"onClick":null!=n&&(e.onclick=Qc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:qe.hasOwnProperty(r)||("o"!==r[0]||"n"!==r[1]||(i=r.endsWith("Capture"),t=r.slice(2,i?r.length-7:void 0),"function"==typeof(a=null!=(a=e[xe]||null)?a[r]:null)&&e.removeEventListener(t,a,i),"function"!=typeof n)?r in e?e[r]=n:!0===n?e.setAttribute(r,""):tt(e,r,n):("function"!=typeof a&&null!==a&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,n,i)))}}function ed(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nc("error",e),Nc("load",e);var n,i=!1,a=!1;for(n in r)if(r.hasOwnProperty(n)){var o=r[n];if(null!=o)switch(n){case"src":i=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Jc(e,t,n,o,r,null)}}return a&&Jc(e,t,"srcSet",r.srcSet,r,null),void(i&&Jc(e,t,"src",r.src,r,null));case"input":Nc("invalid",e);var l=n=o=a=null,u=null,c=null;for(i in r)if(r.hasOwnProperty(i)){var d=r[i];if(null!=d)switch(i){case"name":a=d;break;case"type":o=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":n=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(s(137,t));break;default:Jc(e,t,i,d,r,null)}}return vt(e,n,l,u,c,o,a,!1),void dt(e);case"select":for(a in Nc("invalid",e),i=o=n=null,r)if(r.hasOwnProperty(a)&&null!=(l=r[a]))switch(a){case"value":n=l;break;case"defaultValue":o=l;break;case"multiple":i=l;default:Jc(e,t,a,l,r,null)}return t=n,r=o,e.multiple=!!i,void(null!=t?Et(e,!!i,t,!1):null!=r&&Et(e,!!i,r,!0));case"textarea":for(o in Nc("invalid",e),n=a=i=null,r)if(r.hasOwnProperty(o)&&null!=(l=r[o]))switch(o){case"value":i=l;break;case"defaultValue":a=l;break;case"children":n=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:Jc(e,t,o,l,r,null)}return St(e,i,a,n),void dt(e);case"option":for(u in r)r.hasOwnProperty(u)&&null!=(i=r[u])&&("selected"===u?e.selected=i&&"function"!=typeof i&&"symbol"!=typeof i:Jc(e,t,u,i,r,null));return;case"dialog":Nc("beforetoggle",e),Nc("toggle",e),Nc("cancel",e),Nc("close",e);break;case"iframe":case"object":Nc("load",e);break;case"video":case"audio":for(i=0;i<Oc.length;i++)Nc(Oc[i],e);break;case"image":Nc("error",e),Nc("load",e);break;case"details":Nc("toggle",e);break;case"embed":case"source":case"link":Nc("error",e),Nc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in r)if(r.hasOwnProperty(c)&&null!=(i=r[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Jc(e,t,c,i,r,null)}return;default:if(Lt(t)){for(d in r)r.hasOwnProperty(d)&&void 0!==(i=r[d])&&Zc(e,t,d,i,r,void 0);return}}for(l in r)r.hasOwnProperty(l)&&null!=(i=r[l])&&Jc(e,t,l,i,r,null)}var td=null,rd=null;function nd(e){return 9===e.nodeType?e:e.ownerDocument}function id(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ad(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function sd(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var od=null,ld="function"==typeof setTimeout?setTimeout:void 0,ud="function"==typeof clearTimeout?clearTimeout:void 0,cd="function"==typeof Promise?Promise:void 0,dd="function"==typeof queueMicrotask?queueMicrotask:void 0!==cd?function(e){return cd.resolve(null).then(e).catch(fd)}:ld;function fd(e){setTimeout(function(){throw e})}function hd(e){return"head"===e}function pd(e,t){var r=t,n=0,i=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType)if("/$"===(r=a.data)){if(0<n&&8>n){r=n;var s=e.ownerDocument;if(1&r&&Sd(s.documentElement),2&r&&Sd(s.body),4&r)for(Sd(r=s.head),s=r.firstChild;s;){var o=s.nextSibling,l=s.nodeName;s[Be]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===s.rel.toLowerCase()||r.removeChild(s),s=o}}if(0===i)return e.removeChild(a),void _f(t);i--}else"$"===r||"$?"===r||"$!"===r?i++:n=r.charCodeAt(0)-48;else n=0;r=a}while(r);_f(t)}function md(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":md(r),je(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===r.rel.toLowerCase())continue}e.removeChild(r)}}function gd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var yd=null;function Ed(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}function bd(e,t,r){switch(t=nd(r),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function Sd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);je(e)}var Td=new Map,wd=new Set;function kd(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Rd=M.d;M.d={f:function(){var e=Rd.f(),t=Hu();return e||t},r:function(e){var t=Ge(e);null!==t&&5===t.tag&&"form"===t.type?Ps(t):Rd.r(e)},D:function(e){Rd.D(e),Ad("dns-prefetch",e,null)},C:function(e,t){Rd.C(e,t),Ad("preconnect",e,t)},L:function(e,t,r){Rd.L(e,t,r);var n=Ld;if(n&&e&&t){var i='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&r&&r.imageSrcSet?(i+='[imagesrcset="'+mt(r.imageSrcSet)+'"]',"string"==typeof r.imageSizes&&(i+='[imagesizes="'+mt(r.imageSizes)+'"]')):i+='[href="'+mt(e)+'"]';var a=i;switch(t){case"style":a=Dd(e);break;case"script":a=Pd(e)}Td.has(a)||(e=f({rel:"preload",href:"image"===t&&r&&r.imageSrcSet?void 0:e,as:t},r),Td.set(a,e),null!==n.querySelector(i)||"style"===t&&n.querySelector(Cd(a))||"script"===t&&n.querySelector(xd(a))||(ed(t=n.createElement("link"),"link",e),Ke(t),n.head.appendChild(t)))}},m:function(e,t){Rd.m(e,t);var r=Ld;if(r&&e){var n=t&&"string"==typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+mt(n)+'"][href="'+mt(e)+'"]',a=i;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Pd(e)}if(!Td.has(a)&&(e=f({rel:"modulepreload",href:e},t),Td.set(a,e),null===r.querySelector(i))){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(xd(a)))return}ed(n=r.createElement("link"),"link",e),Ke(n),r.head.appendChild(n)}}},X:function(e,t){Rd.X(e,t);var r=Ld;if(r&&e){var n=Ve(r).hoistableScripts,i=Pd(e),a=n.get(i);a||((a=r.querySelector(xd(i)))||(e=f({src:e,async:!0},t),(t=Td.get(i))&&Nd(e,t),Ke(a=r.createElement("script")),ed(a,"link",e),r.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},n.set(i,a))}},S:function(e,t,r){Rd.S(e,t,r);var n=Ld;if(n&&e){var i=Ve(n).hoistableStyles,a=Dd(e);t=t||"default";var s=i.get(a);if(!s){var o={loading:0,preload:null};if(s=n.querySelector(Cd(a)))o.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},r),(r=Td.get(a))&&Fd(e,r);var l=s=n.createElement("link");Ke(l),ed(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Md(s,t,n)}s={type:"stylesheet",instance:s,count:1,state:o},i.set(a,s)}}},M:function(e,t){Rd.M(e,t);var r=Ld;if(r&&e){var n=Ve(r).hoistableScripts,i=Pd(e),a=n.get(i);a||((a=r.querySelector(xd(i)))||(e=f({src:e,async:!0,type:"module"},t),(t=Td.get(i))&&Nd(e,t),Ke(a=r.createElement("script")),ed(a,"link",e),r.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},n.set(i,a))}}};var Ld="undefined"==typeof document?null:document;function Ad(e,t,r){var n=Ld;if(n&&"string"==typeof t&&t){var i=mt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"==typeof r&&(i+='[crossorigin="'+r+'"]'),wd.has(i)||(wd.add(i),e={rel:e,crossOrigin:r,href:t},null===n.querySelector(i)&&(ed(t=n.createElement("link"),"link",e),Ke(t),n.head.appendChild(t)))}}function _d(e,t,r,n){var i,a,o,l,u=(u=V.current)?kd(u):null;if(!u)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof r.precedence&&"string"==typeof r.href?(t=Dd(r.href),(n=(r=Ve(u).hoistableStyles).get(t))||(n={type:"style",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===r.rel&&"string"==typeof r.href&&"string"==typeof r.precedence){e=Dd(r.href);var c=Ve(u).hoistableStyles,d=c.get(e);if(d||(u=u.ownerDocument||u,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=u.querySelector(Cd(e)))&&!c._p&&(d.instance=c,d.state.loading=5),Td.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Td.set(e,r),c||(i=u,a=e,o=r,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=i.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),ed(a,"link",o),Ke(a),i.head.appendChild(a))))),t&&null===n)throw Error(s(528,""));return d}if(t&&null!==n)throw Error(s(529,""));return null;case"script":return t=r.async,"string"==typeof(r=r.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Pd(r),(n=(r=Ve(u).hoistableScripts).get(t))||(n={type:"script",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Dd(e){return'href="'+mt(e)+'"'}function Cd(e){return'link[rel="stylesheet"]['+e+"]"}function Id(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Pd(e){return'[src="'+mt(e)+'"]'}function xd(e){return"script[async]"+e}function Od(e,t,r){if(t.count++,null===t.instance)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+mt(r.href)+'"]');if(n)return t.instance=n,Ke(n),n;var i=f({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return Ke(n=(e.ownerDocument||e).createElement("style")),ed(n,"style",i),Md(n,r.precedence,e),t.instance=n;case"stylesheet":i=Dd(r.href);var a=e.querySelector(Cd(i));if(a)return t.state.loading|=4,t.instance=a,Ke(a),a;n=Id(r),(i=Td.get(i))&&Fd(n,i),Ke(a=(e.ownerDocument||e).createElement("link"));var o=a;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),ed(a,"link",n),t.state.loading|=4,Md(a,r.precedence,e),t.instance=a;case"script":return a=Pd(r.src),(i=e.querySelector(xd(a)))?(t.instance=i,Ke(i),i):(n=r,(i=Td.get(a))&&Nd(n=f({},r),i),Ke(i=(e=e.ownerDocument||e).createElement("script")),ed(i,"link",n),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(n=t.instance,t.state.loading|=4,Md(n,r.precedence,e));return t.instance}function Md(e,t,r){for(var n=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=n.length?n[n.length-1]:null,a=i,s=0;s<n.length;s++){var o=n[s];if(o.dataset.precedence===t)a=o;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===r.nodeType?r.head:r).insertBefore(e,t.firstChild)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Nd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ud=null;function Bd(e,t,r){if(null===Ud){var n=new Map,i=Ud=new Map;i.set(r,n)}else(n=(i=Ud).get(r))||(n=new Map,i.set(r,n));if(n.has(e))return n;for(n.set(e,null),r=r.getElementsByTagName(e),i=0;i<r.length;i++){var a=r[i];if(!(a[Be]||a[Pe]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var s=a.getAttribute(t)||"";s=e+s;var o=n.get(s);o?o.push(a):n.set(s,[a])}}return n}function jd(e,t,r){(e=e.ownerDocument||e).head.insertBefore(r,"title"===t?e.querySelector("head > title"):null)}function Hd(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var Gd=null;function zd(){}function Vd(){if(this.count--,0===this.count)if(this.stylesheets)$d(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Kd=null;function $d(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Kd=new Map,t.forEach(qd,e),Kd=null,Vd.call(e))}function qd(e,t){if(!(4&t.state.loading)){var r=Kd.get(e);if(r)var n=r.get(null);else{r=new Map,Kd.set(e,r);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<i.length;a++){var s=i[a];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(r.set(s.dataset.precedence,s),n=s)}n&&r.set(null,n)}s=(i=t.instance).getAttribute("data-precedence"),(a=r.get(s)||n)===n&&r.set(null,i),r.set(s,i),this.count++,n=Vd.bind(this),i.addEventListener("load",n),i.addEventListener("error",n),a?a.parentNode.insertBefore(i,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Wd={$$typeof:S,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function Yd(e,t,r,n,i,a,s,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ke(0),this.hiddenUpdates=ke(null),this.identifierPrefix=n,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Xd(e,t,r,n,i,a,s,o,l,u,c,d){return e=new Yd(e,t,r,s,o,l,u,d),t=1,!0===a&&(t|=24),a=Fn(3,null,null,t),e.current=a,a.stateNode=e,(t=xi()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:n,isDehydrated:r,cache:t},ra(a),e}function Qd(e){return e?e=On:On}function Jd(e,t,r,n,i,a){i=Qd(i),null===n.context?n.context=i:n.pendingContext=i,(n=ia(t)).payload={element:r},null!==(a=void 0===a?null:a)&&(n.callback=a),null!==(r=aa(e,n,t))&&(Fu(r,0,t),sa(r,e,t))}function Zd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function ef(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function tf(e){if(13===e.tag){var t=In(e,67108864);null!==t&&Fu(t,0,67108864),ef(e,67108864)}}var rf=!0;function nf(e,t,r,n){var i=O.T;O.T=null;var a=M.p;try{M.p=2,sf(e,t,r,n)}finally{M.p=a,O.T=i}}function af(e,t,r,n){var i=O.T;O.T=null;var a=M.p;try{M.p=8,sf(e,t,r,n)}finally{M.p=a,O.T=i}}function sf(e,t,r,n){if(rf){var i=of(n);if(null===i)Gc(e,t,n,lf,r),Ef(e,n);else if(function(e,t,r,n,i){switch(t){case"focusin":return ff=bf(ff,e,t,r,n,i),!0;case"dragenter":return hf=bf(hf,e,t,r,n,i),!0;case"mouseover":return pf=bf(pf,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return mf.set(a,bf(mf.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,gf.set(a,bf(gf.get(a)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n))n.stopPropagation();else if(Ef(e,n),4&t&&-1<yf.indexOf(e)){for(;null!==i;){var a=Ge(i);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var s=ye(a.pendingLanes);if(0!==s){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var l=1<<31-he(s);o.entanglements[1]|=l,s&=~l}Tc(a),!(6&ru)&&(Tu=te()+500,wc(0,!1))}}break;case 13:null!==(o=In(a,2))&&Fu(o,0,2),Hu(),ef(a,2)}if(null===(a=of(n))&&Gc(e,t,n,lf,r),a===i)break;i=a}null!==i&&n.stopPropagation()}else Gc(e,t,n,null,r)}}function of(e){return uf(e=It(e))}var lf=null;function uf(e){if(lf=null,null!==(e=He(e))){var t=l(e);if(null===t)e=null;else{var r=t.tag;if(13===r){if(null!==(e=u(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return lf=e,null}function cf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(re()){case ne:return 2;case ie:return 8;case ae:case se:return 32;case oe:return 268435456;default:return 32}default:return 32}}var df=!1,ff=null,hf=null,pf=null,mf=new Map,gf=new Map,vf=[],yf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ef(e,t){switch(e){case"focusin":case"focusout":ff=null;break;case"dragenter":case"dragleave":hf=null;break;case"mouseover":case"mouseout":pf=null;break;case"pointerover":case"pointerout":mf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gf.delete(t.pointerId)}}function bf(e,t,r,n,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},null!==t&&null!==(t=Ge(t))&&tf(t),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Sf(e){var t=He(e.target);if(null!==t){var r=l(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=u(r)))return e.blockedOn=t,void function(e){var t=M.p;try{return M.p=e,function(){if(13===r.tag){var e=Ou();e=_e(e);var t=In(r,e);null!==t&&Fu(t,0,e),ef(r,e)}}()}finally{M.p=t}}(e.priority)}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Tf(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=of(e.nativeEvent);if(null!==r)return null!==(t=Ge(r))&&tf(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);Ct=n,r.target.dispatchEvent(n),Ct=null,t.shift()}return!0}function wf(e,t,r){Tf(e)&&r.delete(t)}function kf(){df=!1,null!==ff&&Tf(ff)&&(ff=null),null!==hf&&Tf(hf)&&(hf=null),null!==pf&&Tf(pf)&&(pf=null),mf.forEach(wf),gf.forEach(wf)}function Rf(e,t){e.blockedOn===t&&(e.blockedOn=null,df||(df=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,kf)))}var Lf=null;function Af(e){Lf!==e&&(Lf=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Lf===e&&(Lf=null);for(var t=0;t<e.length;t+=3){var r=e[t],n=e[t+1],i=e[t+2];if("function"!=typeof n){if(null===uf(n||r))continue;break}var a=Ge(r);null!==a&&(e.splice(t,3),t-=3,Cs(a,{pending:!0,data:i,method:r.method,action:n},n,i))}}))}function _f(e){function t(t){return Rf(t,e)}null!==ff&&Rf(ff,e),null!==hf&&Rf(hf,e),null!==pf&&Rf(pf,e),mf.forEach(t),gf.forEach(t);for(var r=0;r<vf.length;r++){var n=vf[r];n.blockedOn===e&&(n.blockedOn=null)}for(;0<vf.length&&null===(r=vf[0]).blockedOn;)Sf(r),null===r.blockedOn&&vf.shift();if(null!=(r=(e.ownerDocument||e).$$reactFormReplay))for(n=0;n<r.length;n+=3){var i=r[n],a=r[n+1],s=i[xe]||null;if("function"==typeof a)s||Af(r);else if(s){var o=null;if(a&&a.hasAttribute("formAction")){if(i=a,s=a[xe]||null)o=s.formAction;else if(null!==uf(i))continue}else o=s.action;"function"==typeof o?r[n+1]=o:(r.splice(n,3),n-=3),Af(r)}}}function Df(e){this._internalRoot=e}function Cf(e){this._internalRoot=e}Cf.prototype.render=Df.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Jd(t.current,Ou(),e,t,null,null)},Cf.prototype.unmount=Df.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Jd(e.current,2,null,e,null,null),Hu(),t[Oe]=null}},Cf.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ce();e={blockedOn:null,target:e,priority:t};for(var r=0;r<vf.length&&0!==t&&t<vf[r].priority;r++);vf.splice(r,0,e),0===r&&Sf(e)}};var If=i.version;if("19.1.0"!==If)throw Error(s(527,If,"19.1.0"));M.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(n=i.return)){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return c(i),e;if(a===n)return c(i),t;a=a.sibling}throw Error(s(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,u=i.child;u;){if(u===r){o=!0,r=i,n=a;break}if(u===n){o=!0,n=i,r=a;break}u=u.sibling}if(!o){for(u=a.child;u;){if(u===r){o=!0,r=a,n=i;break}if(u===n){o=!0,n=a,r=i;break}u=u.sibling}if(!o)throw Error(s(189))}}if(r.alternate!==n)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(t),null===(e=null!==e?d(e):null)?null:e.stateNode};var Pf={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var xf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xf.isDisabled&&xf.supportsFiber)try{ce=xf.inject(Pf),de=xf}catch(e){}}t.createRoot=function(e,t){if(!o(e))throw Error(s(299));var r=!1,n="",i=yo,a=Eo,l=bo;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Xd(e,1,!1,null,0,r,n,i,a,l,0,null),e[Oe]=t.current,jc(e),new Df(t)},t.hydrateRoot=function(e,t,r){if(!o(e))throw Error(s(299));var n=!1,i="",a=yo,l=Eo,u=bo,c=null;return null!=r&&(!0===r.unstable_strictMode&&(n=!0),void 0!==r.identifierPrefix&&(i=r.identifierPrefix),void 0!==r.onUncaughtError&&(a=r.onUncaughtError),void 0!==r.onCaughtError&&(l=r.onCaughtError),void 0!==r.onRecoverableError&&(u=r.onRecoverableError),void 0!==r.unstable_transitionCallbacks&&r.unstable_transitionCallbacks,void 0!==r.formState&&(c=r.formState)),(t=Xd(e,1,!0,t,0,n,i,a,l,u,0,c)).context=Qd(null),r=t.current,(i=ia(n=_e(n=Ou()))).callback=null,aa(r,i,n),r=n,t.current.lanes=r,Re(t,r),Tc(t),e[Oe]=t.current,jc(e),new Cf(t)},t.version="19.1.0"},305:(e,t,r)=>{"use strict";r.r(t),r.d(t,{header_container:()=>n,header_logo_container:()=>i,logo:()=>a});var n="mwQ2f",i="Wy4zq",a="JsV9U"},308:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(848),i=r(976);t.default=function(){const e=(0,i.useParams)();return console.log(e),(0,n.jsxs)("div",{children:["Hello, ",e.accountId,", from Account page"]})}},338:(e,t,r)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=r(247)},348:function(e,t,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&i(t,e,r[s]);return a(t,e),t}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,o)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const l=r(848),u=s(r(506)),c=r(350),d=r(540);t.default=function(){const[e,t]=(0,d.useState)();return(0,d.useEffect)(()=>{fetch("http://localhost:8080/api/videos").then(e=>o(this,void 0,void 0,function*(){t((yield e.json()).map(e=>Object.assign(Object.assign({},e),{imgUrl:`http://localhost:8080/api/${e.id}/preview.jpg`})))}))},[]),(0,l.jsx)("div",{className:u.wrapper,children:e&&e.map(e=>(0,l.jsx)(c.VideoCard,{video:e},e.id))})}},350:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VideoCard=void 0;const i=n(r(501));t.VideoCard=i.default},362:(e,t,r)=>{"use strict";r.d(t,{$P:()=>Pt,$Y:()=>S,AO:()=>g,AV:()=>Pr,AX:()=>jr,B6:()=>H,BV:()=>_r,Bu:()=>wt,C5:()=>kr,EB:()=>Br,Eu:()=>xr,Ew:()=>sr,FE:()=>ir,G3:()=>me,Ge:()=>Gi,Gy:()=>ra,HC:()=>ie,HW:()=>pe,I9:()=>$i,Ix:()=>Ar,J8:()=>ur,K:()=>pa,KC:()=>Ht,KD:()=>wa,KP:()=>fr,KT:()=>Or,KZ:()=>kt,Kd:()=>Ki,LG:()=>ar,Ls:()=>la,MF:()=>Gn,N_:()=>Yi,Ni:()=>b,OA:()=>Ji,OW:()=>ai,P1:()=>Gt,PI:()=>qr,PM:()=>ga,Pl:()=>Dt,Q2:()=>Fr,QE:()=>dt,QH:()=>Rt,Qd:()=>Hn,RF:()=>Nn,RQ:()=>Ft,RV:()=>ha,R_:()=>R,Ri:()=>xt,Rr:()=>v,SI:()=>ua,Sk:()=>ne,Sv:()=>ct,Tw:()=>Mi,U:()=>ft,U2:()=>It,UU:()=>Un,Ul:()=>_n,V1:()=>f,V2:()=>re,Vp:()=>zr,W8:()=>xi,Wj:()=>yi,YX:()=>ut,Ye:()=>Kt,Ys:()=>Hi,Zp:()=>Bt,_3:()=>At,aD:()=>Bn,aE:()=>Se,aJ:()=>Ni,ay:()=>Tt,bg:()=>Er,cM:()=>Ii,cj:()=>ae,cq:()=>rr,d6:()=>Te,di:()=>_t,eF:()=>we,fS:()=>wr,g:()=>zt,g$:()=>oa,gI:()=>Fn,gQ:()=>jn,hA:()=>li,hf:()=>St,ht:()=>Vn,jC:()=>yr,jD:()=>Dr,jM:()=>pt,je:()=>ya,k2:()=>Xi,kO:()=>va,kc:()=>ma,ks:()=>qi,lF:()=>An,lR:()=>On,lS:()=>bi,lV:()=>Qi,mP:()=>or,mc:()=>gr,nW:()=>vr,o1:()=>K,oI:()=>cr,of:()=>sa,ok:()=>na,ou:()=>si,p:()=>te,p4:()=>Ei,pX:()=>se,pb:()=>V,pg:()=>Sr,pp:()=>Gr,qF:()=>Ci,qI:()=>ui,qh:()=>Lr,r5:()=>lr,rc:()=>o,sv:()=>Rr,tW:()=>j,uD:()=>he,ue:()=>L,ux:()=>Nr,vB:()=>fi,vL:()=>nr,wQ:()=>Mt,x$:()=>Vt,xu:()=>Ta,yL:()=>Ri,zR:()=>c,zy:()=>Ot});var n,i=r(540),a=e=>{throw TypeError(e)},s=(e,t,r)=>(((e,t)=>{t.has(e)||a("Cannot read from private field")})(e,t),r?r.call(e):t.get(e)),o=(e=>(e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE",e))(o||{}),l="popstate";function u(e={}){let t,{initialEntries:r=["/"],initialIndex:n,v5Compat:i=!1}=e;t=r.map((e,t)=>c(e,"string"==typeof e?null:e.state,0===t?"default":void 0));let a=l(null==n?t.length-1:n),s="POP",o=null;function l(e){return Math.min(Math.max(e,0),t.length-1)}function u(){return t[a]}function c(e,r=null,n){let i=m(t?u().pathname:"/",e,r,n);return h("/"===i.pathname.charAt(0),`relative pathnames are not supported in memory history: ${JSON.stringify(e)}`),i}function d(e){return"string"==typeof e?e:g(e)}return{get index(){return a},get action(){return s},get location(){return u()},createHref:d,createURL:e=>new URL(d(e),"http://localhost"),encodeLocation(e){let t="string"==typeof e?v(e):e;return{pathname:t.pathname||"",search:t.search||"",hash:t.hash||""}},push(e,r){s="PUSH";let n=c(e,r);a+=1,t.splice(a,t.length,n),i&&o&&o({action:s,location:n,delta:1})},replace(e,r){s="REPLACE";let n=c(e,r);t[a]=n,i&&o&&o({action:s,location:n,delta:0})},go(e){s="POP";let r=l(a+e),n=t[r];a=r,o&&o({action:s,location:n,delta:e})},listen:e=>(o=e,()=>{o=null})}}function c(e={}){return y(function(e,t){let{pathname:r,search:n,hash:i}=e.location;return m("",{pathname:r,search:n,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:g(t)},null,e)}function d(e={}){return y(function(e,t){let{pathname:r="/",search:n="",hash:i=""}=v(e.location.hash.substring(1));return r.startsWith("/")||r.startsWith(".")||(r="/"+r),m("",{pathname:r,search:n,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let r=e.document.querySelector("base"),n="";if(r&&r.getAttribute("href")){let t=e.location.href,r=t.indexOf("#");n=-1===r?t:t.slice(0,r)}return n+"#"+("string"==typeof t?t:g(t))},function(e,t){h("/"===e.pathname.charAt(0),`relative pathnames are not supported in hash history.push(${JSON.stringify(t)})`)},e)}function f(e,t){if(!1===e||null==e)throw new Error(t)}function h(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}function p(e,t){return{usr:e.state,key:e.key,idx:t}}function m(e,t,r=null,n){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?v(t):t,state:r,key:t&&t.key||n||Math.random().toString(36).substring(2,10)}}function g({pathname:e="/",search:t="",hash:r=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function v(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function y(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:a=!1}=n,s=i.history,o="POP",u=null,c=d();function d(){return(s.state||{idx:null}).idx}function f(){o="POP";let e=d(),t=null==e?null:e-c;c=e,u&&u({action:o,location:g.location,delta:t})}function h(e){return E(e)}null==c&&(c=0,s.replaceState({...s.state,idx:c},""));let g={get action(){return o},get location(){return e(i,s)},listen(e){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(l,f),u=e,()=>{i.removeEventListener(l,f),u=null}},createHref:e=>t(i,e),createURL:h,encodeLocation(e){let t=h(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let n=m(g.location,e,t);r&&r(n,e),c=d()+1;let l=p(n,c),f=g.createHref(n);try{s.pushState(l,"",f)}catch(e){if(e instanceof DOMException&&"DataCloneError"===e.name)throw e;i.location.assign(f)}a&&u&&u({action:o,location:g.location,delta:1})},replace:function(e,t){o="REPLACE";let n=m(g.location,e,t);r&&r(n,e),c=d();let i=p(n,c),l=g.createHref(n);s.replaceState(i,"",l),a&&u&&u({action:o,location:g.location,delta:0})},go:e=>s.go(e)};return g}function E(e,t=!1){let r="http://localhost";"undefined"!=typeof window&&(r="null"!==window.location.origin?window.location.origin:window.location.href),f(r,"No window.location.(origin|href) available to create URL");let n="string"==typeof e?e:g(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function b(e){return{defaultValue:e}}var S=class{constructor(e){var t,r,i;if(t=this,r=n,i=new Map,r.has(t)?a("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(t):r.set(t,i),e)for(let[t,r]of e)this.set(t,r)}get(e){if(s(this,n).has(e))return s(this,n).get(e);if(void 0!==e.defaultValue)return e.defaultValue;throw new Error("No value found for context")}set(e,t){s(this,n).set(e,t)}};n=new WeakMap;var T=new Set(["lazy","caseSensitive","path","id","index","children"]),w=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function k(e){return w.has(e)}function R(e,t,r=[],n={},i=!1){return e.map((e,a)=>{let s=[...r,String(a)],o="string"==typeof e.id?e.id:s.join("-");if(f(!0!==e.index||!e.children,"Cannot specify children on an index route"),f(i||!n[o],`Found a route id collision on id "${o}".  Route id's must be globally unique within Data Router usages`),function(e){return!0===e.index}(e)){let r={...e,...t(e),id:o};return n[o]=r,r}{let r={...e,...t(e),id:o,children:void 0};return n[o]=r,e.children&&(r.children=R(e.children,t,s,n,i)),r}})}function L(e,t,r="/"){return A(e,t,r,!1)}function A(e,t,r,n){let i=V(("string"==typeof t?v(t):t).pathname||"/",r);if(null==i)return null;let a=D(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r])?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let s=null;for(let e=0;null==s&&e<a.length;++e){let t=z(i);s=B(a[e],t,n)}return s}function _(e,t){let{route:r,pathname:n,params:i}=e;return{id:r.id,pathname:n,params:i,data:t[r.id],handle:r.handle}}function D(e,t=[],r=[],n=""){let i=(e,i,a)=>{let s={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(f(s.relativePath.startsWith(n),`Absolute route path "${s.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),s.relativePath=s.relativePath.slice(n.length));let o=X([n,s.relativePath]),l=r.concat(s);e.children&&e.children.length>0&&(f(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${o}".`),D(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:U(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let r of C(e.path))i(e,t,r);else i(e,t)}),t}function C(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(0===n.length)return i?[a,""]:[a];let s=C(n.join("/")),o=[];return o.push(...s.map(e=>""===e?a:[a,e].join("/"))),i&&o.push(...s),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var I=/^:[\w-]+$/,P=3,x=2,O=1,M=10,F=-2,N=e=>"*"===e;function U(e,t){let r=e.split("/"),n=r.length;return r.some(N)&&(n+=F),t&&(n+=x),r.filter(e=>!N(e)).reduce((e,t)=>e+(I.test(t)?P:""===t?O:M),n)}function B(e,t,r=!1){let{routesMeta:n}=e,i={},a="/",s=[];for(let e=0;e<n.length;++e){let o=n[e],l=e===n.length-1,u="/"===a?t:t.slice(a.length)||"/",c=H({path:o.relativePath,caseSensitive:o.caseSensitive,end:l},u),d=o.route;if(!c&&l&&r&&!n[n.length-1].route.index&&(c=H({path:o.relativePath,caseSensitive:o.caseSensitive,end:!1},u)),!c)return null;Object.assign(i,c.params),s.push({params:i,pathname:X([a,c.pathname]),pathnameBase:Q(X([a,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(a=X([a,c.pathnameBase]))}return s}function j(e,t={}){let r=e;r.endsWith("*")&&"*"!==r&&!r.endsWith("/*")&&(h(!1,`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`),r=r.replace(/\*$/,"/*"));const n=r.startsWith("/")?"/":"",i=e=>null==e?"":"string"==typeof e?e:String(e);return n+r.split(/\/+/).map((e,r,n)=>{if(r===n.length-1&&"*"===e)return i(t["*"]);const a=e.match(/^:([\w-]+)(\??)$/);if(a){const[,e,r]=a;let n=t[e];return f("?"===r||null!=n,`Missing ":${e}" param`),i(n)}return e.replace(/\?$/g,"")}).filter(e=>!!e).join("/")}function H(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=G(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((e,{paramName:t,isOptional:r},n)=>{if("*"===t){let e=o[n]||"";s=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const i=o[n];return e[t]=r&&!i?void 0:(i||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:s,pattern:e}}function G(e,t=!1,r=!0){h("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function z(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return h(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function V(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function K(e,t="/"){let{pathname:r,search:n="",hash:i=""}="string"==typeof e?v(e):e,a=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:a,search:J(n),hash:Z(i)}}function $(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function q(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function W(e){let t=q(e);return t.map((e,r)=>r===t.length-1?e.pathname:e.pathnameBase)}function Y(e,t,r,n=!1){let i;"string"==typeof e?i=v(e):(i={...e},f(!i.pathname||!i.pathname.includes("?"),$("?","pathname","search",i)),f(!i.pathname||!i.pathname.includes("#"),$("#","pathname","hash",i)),f(!i.search||!i.search.includes("#"),$("#","search","hash",i)));let a,s=""===e||""===i.pathname,o=s?"/":i.pathname;if(null==o)a=r;else{let e=t.length-1;if(!n&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=K(i,a),u=o&&"/"!==o&&o.endsWith("/"),c=(s||"."===o)&&r.endsWith("/");return l.pathname.endsWith("/")||!u&&!c||(l.pathname+="/"),l}var X=e=>e.join("/").replace(/\/\/+/g,"/"),Q=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),J=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"",ee=class{constructor(e,t){this.type="DataWithResponseInit",this.data=e,this.init=t||null}};function te(e,t){return new ee(e,"number"==typeof t?{status:t}:t)}var re=(e,t=302)=>{let r=t;"number"==typeof r?r={status:r}:void 0===r.status&&(r.status=302);let n=new Headers(r.headers);return n.set("Location",e),new Response(null,{...r,headers:n})},ne=(e,t)=>{let r=re(e,t);return r.headers.set("X-Remix-Reload-Document","true"),r},ie=(e,t)=>{let r=re(e,t);return r.headers.set("X-Remix-Replace","true"),r},ae=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function se(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}var oe=["POST","PUT","PATCH","DELETE"],le=new Set(oe),ue=["GET",...oe],ce=new Set(ue),de=new Set([301,302,303,307,308]),fe=new Set([307,308]),he={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},pe={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},me={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ge=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ve=e=>ge.test(e),ye=e=>({hasErrorBoundary:Boolean(e.hasErrorBoundary)}),Ee="remix-router-transitions",be=Symbol("ResetLoaderData");function Se(e){const t=e.window?e.window:"undefined"!=typeof window?window:void 0,r=void 0!==t&&void 0!==t.document&&void 0!==t.document.createElement;f(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let n,i,a,s=e.hydrationRouteProperties||[],o=e.mapRouteProperties||ye,l={},u=R(e.routes,o,void 0,l),c=e.basename||"/",d=e.dataStrategy||Ue,p={unstable_middleware:!1,...e.future},g=null,v=new Set,y=null,b=null,T=null,w=null!=e.hydrationData,k=L(u,e.history.location,c),D=!1,C=null;if(null!=k||e.patchRoutesOnNavigation)if(k&&!e.hydrationData&&Oe(k,u,e.history.location.pathname).active&&(k=null),k)if(k.some(e=>e.route.lazy))i=!1;else if(k.some(e=>e.route.loader)){let t=e.hydrationData?e.hydrationData.loaderData:null,r=e.hydrationData?e.hydrationData.errors:null;if(r){let e=k.findIndex(e=>void 0!==r[e.route.id]);i=k.slice(0,e+1).every(e=>!_e(e.route,t,r))}else i=k.every(e=>!_e(e.route,t,r))}else i=!0;else{i=!1,k=[];let t=Oe(null,u,e.history.location.pathname);t.active&&t.matches&&(D=!0,k=t.matches)}else{let t=nt(404,{pathname:e.history.location.pathname}),{matches:r,route:n}=rt(u);i=!0,k=r,C={[n.id]:t}}let I,P,x={historyAction:e.history.action,location:e.history.location,matches:k,initialized:i,navigation:he,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||C,fetchers:new Map,blockers:new Map},O="POP",M=!1,F=!1,N=new Map,U=null,B=!1,j=!1,H=new Set,G=new Map,z=0,K=-1,$=new Map,q=new Set,W=new Map,Y=new Map,X=new Set,Q=new Map,J=null;function Z(e,t={}){e.matches&&(e.matches=e.matches.map(e=>{let t=l[e.route.id],r=e.route;return r.element!==t.element||r.errorElement!==t.errorElement||r.hydrateFallbackElement!==t.hydrateFallbackElement?{...e,route:t}:e})),x={...x,...e};let r=[],n=[];x.fetchers.forEach((e,t)=>{"idle"===e.state&&(X.has(t)?r.push(t):n.push(t))}),X.forEach(e=>{x.fetchers.has(e)||G.has(e)||r.push(e)}),[...v].forEach(e=>e(x,{deletedFetchers:r,viewTransitionOpts:t.viewTransitionOpts,flushSync:!0===t.flushSync})),r.forEach(e=>de(e)),n.forEach(e=>x.fetchers.delete(e))}function ee(t,r,{flushSync:i}={}){let a,s=null!=x.actionData&&null!=x.navigation.formMethod&&pt(x.navigation.formMethod)&&"loading"===x.navigation.state&&!0!==t.state?._isRedirect;a=r.actionData?Object.keys(r.actionData).length>0?r.actionData:null:s?x.actionData:null;let o=r.loaderData?Ze(x.loaderData,r.loaderData,r.matches||[],r.errors):x.loaderData,l=x.blockers;l.size>0&&(l=new Map(l),l.forEach((e,t)=>l.set(t,me)));let c,d=!B&&xe(t,r.matches||x.matches),f=!0===M||null!=x.navigation.formMethod&&pt(x.navigation.formMethod)&&!0!==t.state?._isRedirect;if(n&&(u=n,n=void 0),B||"POP"===O||("PUSH"===O?e.history.push(t,t.state):"REPLACE"===O&&e.history.replace(t,t.state)),"POP"===O){let e=N.get(x.location.pathname);e&&e.has(t.pathname)?c={currentLocation:x.location,nextLocation:t}:N.has(t.pathname)&&(c={currentLocation:t,nextLocation:x.location})}else if(F){let e=N.get(x.location.pathname);e?e.add(t.pathname):(e=new Set([t.pathname]),N.set(x.location.pathname,e)),c={currentLocation:x.location,nextLocation:t}}Z({...r,actionData:a,loaderData:o,historyAction:O,location:t,initialized:!0,navigation:he,revalidation:"idle",restoreScrollPosition:d,preventScrollReset:f,blockers:l},{viewTransitionOpts:c,flushSync:!0===i}),O="POP",M=!1,F=!1,B=!1,j=!1,J?.resolve(),J=null}async function te(t,r,i){I&&I.abort(),I=null,O=t,B=!0===(i&&i.startUninterruptedRevalidation),function(e,t){if(y&&T){let r=Pe(e,t);y[r]=T()}}(x.location,x.matches),M=!0===(i&&i.preventScrollReset),F=!0===(i&&i.enableViewTransition);let a=n||u,d=i&&i.overrideNavigation,f=i?.initialHydration&&x.matches&&x.matches.length>0&&!D?x.matches:L(a,r,c),h=!0===(i&&i.flushSync);if(f&&x.initialized&&!j&&(p=x.location,m=r,p.pathname===m.pathname&&p.search===m.search&&(""===p.hash?""!==m.hash:p.hash===m.hash||""!==m.hash))&&!(i&&i.submission&&pt(i.submission.formMethod)))return void ee(r,{matches:f},{flushSync:h});var p,m;let g=Oe(f,a,r.pathname);if(g.active&&g.matches&&(f=g.matches),!f){let{error:e,notFoundMatches:t,route:n}=Ie(r.pathname);return void ee(r,{matches:t,loaderData:{},errors:{[n.id]:e}},{flushSync:h})}I=new AbortController;let v,E=We(e.history,r,I.signal,i&&i.submission),b=new S(e.unstable_getContext?await e.unstable_getContext():void 0);if(i&&i.pendingError)v=[tt(f).route.id,{type:"error",error:i.pendingError}];else if(i&&i.submission&&pt(i.submission.formMethod)){let t=await async function(e,t,r,n,i,a,u,d={}){oe();let f,h=function(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}(t,r);if(Z({navigation:h},{flushSync:!0===d.flushSync}),a){let r=await Me(n,t.pathname,e.signal);if("aborted"===r.type)return{shortCircuited:!0};if("error"===r.type){let e=tt(r.partialMatches).route.id;return{matches:r.partialMatches,pendingActionResult:[e,{type:"error",error:r.error}]}}if(!r.matches){let{notFoundMatches:e,error:r,route:n}=Ie(t.pathname);return{matches:e,pendingActionResult:[n.id,{type:"error",error:r}]}}n=r.matches}let p=gt(n,t);if(p.route.action||p.route.lazy){let t=ze(o,l,e,n,p,u?[]:s,i),r=await ie(e,t,i,null);if(f=r[p.route.id],!f)for(let e of n)if(r[e.route.id]){f=r[e.route.id];break}if(e.signal.aborted)return{shortCircuited:!0}}else f={type:"error",error:nt(405,{method:e.method,pathname:t.pathname,routeId:p.route.id})};if(lt(f)){let t;return t=d&&null!=d.replace?d.replace:qe(f.response.headers.get("Location"),new URL(e.url),c)===x.location.pathname+x.location.search,await ne(e,f,!0,{submission:r,replace:t}),{shortCircuited:!0}}if(ot(f)){let e=tt(n,p.route.id);return!0!==(d&&d.replace)&&(O="PUSH"),{matches:n,pendingActionResult:[e.route.id,f,p.route.id]}}return{matches:n,pendingActionResult:[p.route.id,f]}}(E,r,i.submission,f,b,g.active,i&&!0===i.initialHydration,{replace:i.replace,flushSync:h});if(t.shortCircuited)return;if(t.pendingActionResult){let[e,n]=t.pendingActionResult;if(ot(n)&&se(n.error)&&404===n.error.status)return I=null,void ee(r,{matches:t.matches,loaderData:{},errors:{[e]:n.error}})}f=t.matches||f,v=t.pendingActionResult,d=yt(r,i.submission),h=!1,g.active=!1,E=We(e.history,E.url,E.signal)}let{shortCircuited:w,matches:k,loaderData:R,errors:A}=await async function(t,r,i,a,d,f,h,p,m,g,v,y){let E=f||yt(r,h),b=h||p||vt(E),S=!B&&!g;if(d){if(S){let e=re(y);Z({navigation:E,...void 0!==e?{actionData:e}:{}},{flushSync:v})}let e=await Me(i,r.pathname,t.signal);if("aborted"===e.type)return{shortCircuited:!0};if("error"===e.type){let t=tt(e.partialMatches).route.id;return{matches:e.partialMatches,loaderData:{},errors:{[t]:e.error}}}if(!e.matches){let{error:e,notFoundMatches:t,route:n}=Ie(r.pathname);return{matches:t,loaderData:{},errors:{[n.id]:e}}}i=e.matches}let T=n||u,{dsMatches:w,revalidatingFetchers:k}=Ae(t,a,o,l,e.history,x,i,b,r,g?[]:s,!0===g,j,H,X,W,q,T,c,null!=e.patchRoutesOnNavigation,y);if(K=++z,!e.dataStrategy&&!w.some(e=>e.shouldLoad)&&0===k.length){let e=Se();return ee(r,{matches:i,loaderData:{},errors:y&&ot(y[1])?{[y[0]]:y[1].error}:null,...et(y),...e?{fetchers:new Map(x.fetchers)}:{}},{flushSync:v}),{shortCircuited:!0}}if(S){let e={};if(!d){e.navigation=E;let t=re(y);void 0!==t&&(e.actionData=t)}k.length>0&&(e.fetchers=function(e){return e.forEach(e=>{let t=x.fetchers.get(e.key),r=Et(void 0,t?t.data:void 0);x.fetchers.set(e.key,r)}),new Map(x.fetchers)}(k)),Z(e,{flushSync:v})}k.forEach(e=>{ge(e.key),e.controller&&G.set(e.key,e.controller)});let R=()=>k.forEach(e=>ge(e.key));I&&I.signal.addEventListener("abort",R);let{loaderResults:L,fetcherResults:A}=await ae(w,k,t,a);if(t.signal.aborted)return{shortCircuited:!0};I&&I.signal.removeEventListener("abort",R),k.forEach(e=>G.delete(e.key));let _=it(L);if(_)return await ne(t,_.result,!0,{replace:m}),{shortCircuited:!0};if(_=it(A),_)return q.add(_.key),await ne(t,_.result,!0,{replace:m}),{shortCircuited:!0};let{loaderData:D,errors:C}=Je(x,i,L,y,k,A);g&&x.errors&&(C={...x.errors,...C});let P=Se(),O=Te(K);return{matches:i,loaderData:D,errors:C,...P||O||k.length>0?{fetchers:new Map(x.fetchers)}:{}}}(E,r,f,b,g.active,d,i&&i.submission,i&&i.fetcherSubmission,i&&i.replace,i&&!0===i.initialHydration,h,v);w||(I=null,ee(r,{matches:k||f,...et(v),loaderData:R,errors:A}))}function re(e){return e&&!ot(e[1])?{[e[0]]:e[1].data}:x.actionData?0===Object.keys(x.actionData).length?null:x.actionData:void 0}async function ne(e,n,i,{submission:a,fetcherSubmission:s,preventScrollReset:o,replace:l}={}){n.response.headers.has("X-Remix-Revalidate")&&(j=!0);let u=n.response.headers.get("Location");f(u,"Expected a Location header on the redirect Response"),u=qe(u,new URL(e.url),c);let d=m(x.location,u,{_isRedirect:!0});if(r){let e=!1;if(n.response.headers.has("X-Remix-Reload-Document"))e=!0;else if(ve(u)){const r=E(u,!0);e=r.origin!==t.location.origin||null==V(r.pathname,c)}if(e)return void(l?t.location.replace(u):t.location.assign(u))}I=null;let h=!0===l||n.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:p,formAction:g,formEncType:v}=x.navigation;!a&&!s&&p&&g&&v&&(a=vt(x.navigation));let y=a||s;if(fe.has(n.response.status)&&y&&pt(y.formMethod))await te(h,d,{submission:{...y,formAction:u},preventScrollReset:o||M,enableViewTransition:i?F:void 0});else{let e=yt(d,a);await te(h,d,{overrideNavigation:e,fetcherSubmission:s,preventScrollReset:o||M,enableViewTransition:i?F:void 0})}}async function ie(e,t,r,n){let i,a={};try{i=await Ve(d,e,t,n,r,!1)}catch(e){return t.filter(e=>e.shouldLoad).forEach(t=>{a[t.route.id]={type:"error",error:e}}),a}if(e.signal.aborted)return a;for(let[r,n]of Object.entries(i))if(st(n)){let i=n.result;a[r]={type:"redirect",response:$e(i,e,r,t,c)}}else a[r]=await Ke(n);return a}async function ae(e,t,r,n){let i=ie(r,e,n,null),a=Promise.all(t.map(async e=>{if(e.matches&&e.match&&e.request&&e.controller){let t=(await ie(e.request,e.matches,n,e.key))[e.match.route.id];return{[e.key]:t}}return Promise.resolve({[e.key]:{type:"error",error:nt(404,{pathname:e.path})}})}));return{loaderResults:await i,fetcherResults:(await a).reduce((e,t)=>Object.assign(e,t),{})}}function oe(){j=!0,W.forEach((e,t)=>{G.has(t)&&H.add(t),ge(t)})}function le(e,t,r={}){x.fetchers.set(e,t),Z({fetchers:new Map(x.fetchers)},{flushSync:!0===(r&&r.flushSync)})}function ue(e,t,r,n={}){let i=tt(x.matches,t);de(e),Z({errors:{[i.route.id]:r},fetchers:new Map(x.fetchers)},{flushSync:!0===(n&&n.flushSync)})}function ce(e){return Y.set(e,(Y.get(e)||0)+1),X.has(e)&&X.delete(e),x.fetchers.get(e)||pe}function de(e){let t=x.fetchers.get(e);!G.has(e)||t&&"loading"===t.state&&$.has(e)||ge(e),W.delete(e),$.delete(e),q.delete(e),X.delete(e),H.delete(e),x.fetchers.delete(e)}function ge(e){let t=G.get(e);t&&(t.abort(),G.delete(e))}function be(e){for(let t of e){let e=bt(ce(t).data);x.fetchers.set(t,e)}}function Se(){let e=[],t=!1;for(let r of q){let n=x.fetchers.get(r);f(n,`Expected fetcher: ${r}`),"loading"===n.state&&(q.delete(r),e.push(r),t=!0)}return be(e),t}function Te(e){let t=[];for(let[r,n]of $)if(n<e){let e=x.fetchers.get(r);f(e,`Expected fetcher: ${r}`),"loading"===e.state&&(ge(r),$.delete(r),t.push(r))}return be(t),t.length>0}function we(e){x.blockers.delete(e),Q.delete(e)}function ke(e,t){let r=x.blockers.get(e)||me;f("unblocked"===r.state&&"blocked"===t.state||"blocked"===r.state&&"blocked"===t.state||"blocked"===r.state&&"proceeding"===t.state||"blocked"===r.state&&"unblocked"===t.state||"proceeding"===r.state&&"unblocked"===t.state,`Invalid blocker state transition: ${r.state} -> ${t.state}`);let n=new Map(x.blockers);n.set(e,t),Z({blockers:n})}function De({currentLocation:e,nextLocation:t,historyAction:r}){if(0===Q.size)return;Q.size>1&&h(!1,"A router only supports one blocker at a time");let n=Array.from(Q.entries()),[i,a]=n[n.length-1],s=x.blockers.get(i);return s&&"proceeding"===s.state?void 0:a({currentLocation:e,nextLocation:t,historyAction:r})?i:void 0}function Ie(e){let t=nt(404,{pathname:e}),r=n||u,{matches:i,route:a}=rt(r);return{notFoundMatches:i,route:a,error:t}}function Pe(e,t){return b&&b(e,t.map(e=>_(e,x.loaderData)))||e.key}function xe(e,t){if(y){let r=Pe(e,t),n=y[r];if("number"==typeof n)return n}return null}function Oe(t,r,n){if(e.patchRoutesOnNavigation){if(!t)return{active:!0,matches:A(r,n,c,!0)||[]};if(Object.keys(t[0].params).length>0)return{active:!0,matches:A(r,n,c,!0)}}return{active:!1,matches:null}}async function Me(t,r,i,a){if(!e.patchRoutesOnNavigation)return{type:"success",matches:t};let s=t;for(;;){let t=null==n,d=n||u,f=l;try{await e.patchRoutesOnNavigation({signal:i,path:r,matches:s,fetcherKey:a,patch:(e,t)=>{i.aborted||Ce(e,t,d,f,o,!1)}})}catch(e){return{type:"error",error:e,partialMatches:s}}finally{t&&!i.aborted&&(u=[...u])}if(i.aborted)return{type:"aborted"};let h=L(d,r,c);if(h)return{type:"success",matches:h};let p=A(d,r,c,!0);if(!p||s.length===p.length&&s.every((e,t)=>e.route.id===p[t].route.id))return{type:"success",matches:null};s=p}}return a={get basename(){return c},get future(){return p},get state(){return x},get routes(){return u},get window(){return t},initialize:function(){if(g=e.history.listen(({action:t,location:r,delta:n})=>{if(P)return P(),void(P=void 0);h(0===Q.size||null!=n,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let i=De({currentLocation:x.location,nextLocation:r,historyAction:t});if(i&&null!=n){let t=new Promise(e=>{P=e});return e.history.go(-1*n),void ke(i,{state:"blocked",location:r,proceed(){ke(i,{state:"proceeding",proceed:void 0,reset:void 0,location:r}),t.then(()=>e.history.go(n))},reset(){let e=new Map(x.blockers);e.set(i,me),Z({blockers:e})}})}return te(t,r)}),r){!function(e,t){try{let r=e.sessionStorage.getItem(Ee);if(r){let e=JSON.parse(r);for(let[r,n]of Object.entries(e||{}))n&&Array.isArray(n)&&t.set(r,new Set(n||[]))}}catch(e){}}(t,N);let e=()=>function(e,t){if(t.size>0){let r={};for(let[e,n]of t)r[e]=[...n];try{e.sessionStorage.setItem(Ee,JSON.stringify(r))}catch(e){h(!1,`Failed to save applied view transitions in sessionStorage (${e}).`)}}}(t,N);t.addEventListener("pagehide",e),U=()=>t.removeEventListener("pagehide",e)}return x.initialized||te("POP",x.location,{initialHydration:!0}),a},subscribe:function(e){return v.add(e),()=>v.delete(e)},enableScrollRestoration:function(e,t,r){if(y=e,T=t,b=r||null,!w&&x.navigation===he){w=!0;let e=xe(x.location,x.matches);null!=e&&Z({restoreScrollPosition:e})}return()=>{y=null,T=null,b=null}},navigate:async function t(r,n){if("number"==typeof r)return void e.history.go(r);let i=Re(x.location,x.matches,c,r,n?.fromRouteId,n?.relative),{path:a,submission:s,error:o}=Le(!1,i,n),l=x.location,u=m(x.location,a,n&&n.state);u={...u,...e.history.encodeLocation(u)};let d=n&&null!=n.replace?n.replace:void 0,f="PUSH";!0===d?f="REPLACE":!1===d||null!=s&&pt(s.formMethod)&&s.formAction===x.location.pathname+x.location.search&&(f="REPLACE");let h=n&&"preventScrollReset"in n?!0===n.preventScrollReset:void 0,p=!0===(n&&n.flushSync),g=De({currentLocation:l,nextLocation:u,historyAction:f});g?ke(g,{state:"blocked",location:u,proceed(){ke(g,{state:"proceeding",proceed:void 0,reset:void 0,location:u}),t(r,n)},reset(){let e=new Map(x.blockers);e.set(g,me),Z({blockers:e})}}):await te(f,u,{submission:s,pendingError:o,preventScrollReset:h,replace:n&&n.replace,enableViewTransition:n&&n.viewTransition,flushSync:p})},fetch:async function(t,r,i,a){ge(t);let d=!0===(a&&a.flushSync),h=n||u,p=Re(x.location,x.matches,c,i,r,a?.relative),m=L(h,p,c),g=Oe(m,h,p);if(g.active&&g.matches&&(m=g.matches),!m)return void ue(t,r,nt(404,{pathname:p}),{flushSync:d});let{path:v,submission:y,error:E}=Le(!0,p,a);if(E)return void ue(t,r,E,{flushSync:d});let b=new S(e.unstable_getContext?await e.unstable_getContext():void 0),T=!0===(a&&a.preventScrollReset);y&&pt(y.formMethod)?await async function(t,r,i,a,d,h,p,m,g){oe(),W.delete(t);let v=x.fetchers.get(t);le(t,function(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}(g,v),{flushSync:p});let y=new AbortController,E=We(e.history,i,y.signal,g);if(h){let e=await Me(a,new URL(E.url).pathname,E.signal,t);if("aborted"===e.type)return;if("error"===e.type)return void ue(t,r,e.error,{flushSync:p});if(!e.matches)return void ue(t,r,nt(404,{pathname:i}),{flushSync:p});a=e.matches}let b=gt(a,i);if(!b.route.action&&!b.route.lazy){let e=nt(405,{method:g.formMethod,pathname:i,routeId:r});return void ue(t,r,e,{flushSync:p})}G.set(t,y);let S=z,T=ze(o,l,E,a,b,s,d),w=(await ie(E,T,d,t))[b.route.id];if(E.signal.aborted)return void(G.get(t)===y&&G.delete(t));if(X.has(t)){if(lt(w)||ot(w))return void le(t,bt(void 0))}else{if(lt(w))return G.delete(t),K>S?void le(t,bt(void 0)):(q.add(t),le(t,Et(g)),ne(E,w,!1,{fetcherSubmission:g,preventScrollReset:m}));if(ot(w))return void ue(t,r,w.error)}let k=x.navigation.location||x.location,R=We(e.history,k,y.signal),A=n||u,_="idle"!==x.navigation.state?L(A,x.navigation.location,c):x.matches;f(_,"Didn't find any matches after fetcher action");let D=++z;$.set(t,D);let C=Et(g,w.data);x.fetchers.set(t,C);let{dsMatches:P,revalidatingFetchers:M}=Ae(R,d,o,l,e.history,x,_,g,k,s,!1,j,H,X,W,q,A,c,null!=e.patchRoutesOnNavigation,[b.route.id,w]);M.filter(e=>e.key!==t).forEach(e=>{let t=e.key,r=x.fetchers.get(t),n=Et(void 0,r?r.data:void 0);x.fetchers.set(t,n),ge(t),e.controller&&G.set(t,e.controller)}),Z({fetchers:new Map(x.fetchers)});let F=()=>M.forEach(e=>ge(e.key));y.signal.addEventListener("abort",F);let{loaderResults:N,fetcherResults:U}=await ae(P,M,R,d);if(y.signal.aborted)return;if(y.signal.removeEventListener("abort",F),$.delete(t),G.delete(t),M.forEach(e=>G.delete(e.key)),x.fetchers.has(t)){let e=bt(w.data);x.fetchers.set(t,e)}let B=it(N);if(B)return ne(R,B.result,!1,{preventScrollReset:m});if(B=it(U),B)return q.add(B.key),ne(R,B.result,!1,{preventScrollReset:m});let{loaderData:V,errors:Y}=Je(x,_,N,void 0,M,U);Te(D),"loading"===x.navigation.state&&D>K?(f(O,"Expected pending action"),I&&I.abort(),ee(x.navigation.location,{matches:_,loaderData:V,errors:Y,fetchers:new Map(x.fetchers)})):(Z({errors:Y,loaderData:Ze(x.loaderData,V,_,Y),fetchers:new Map(x.fetchers)}),j=!1)}(t,r,v,m,b,g.active,d,T,y):(W.set(t,{routeId:r,path:v}),await async function(t,r,n,i,a,u,c,d,f){let h=x.fetchers.get(t);le(t,Et(f,h?h.data:void 0),{flushSync:c});let p=new AbortController,m=We(e.history,n,p.signal);if(u){let e=await Me(i,new URL(m.url).pathname,m.signal,t);if("aborted"===e.type)return;if("error"===e.type)return void ue(t,r,e.error,{flushSync:c});if(!e.matches)return void ue(t,r,nt(404,{pathname:n}),{flushSync:c});i=e.matches}let g=gt(i,n);G.set(t,p);let v=z,y=ze(o,l,m,i,g,s,a),E=(await ie(m,y,a,t))[g.route.id];if(G.get(t)===p&&G.delete(t),!m.signal.aborted){if(!X.has(t))return lt(E)?K>v?void le(t,bt(void 0)):(q.add(t),void await ne(m,E,!1,{preventScrollReset:d})):void(ot(E)?ue(t,r,E.error):le(t,bt(E.data)));le(t,bt(void 0))}}(t,r,v,m,b,g.active,d,T,y))},revalidate:function(){J||(J=function(){let e,t,r=new Promise((n,i)=>{e=async e=>{n(e);try{await r}catch(e){}},t=async e=>{i(e);try{await r}catch(e){}}});return{promise:r,resolve:e,reject:t}}()),oe(),Z({revalidation:"loading"});let e=J.promise;return"submitting"===x.navigation.state?e:"idle"===x.navigation.state?(te(x.historyAction,x.location,{startUninterruptedRevalidation:!0}),e):(te(O||x.historyAction,x.navigation.location,{overrideNavigation:x.navigation,enableViewTransition:!0===F}),e)},createHref:t=>e.history.createHref(t),encodeLocation:t=>e.history.encodeLocation(t),getFetcher:ce,deleteFetcher:function(e){let t=(Y.get(e)||0)-1;t<=0?(Y.delete(e),X.add(e)):Y.set(e,t),Z({fetchers:new Map(x.fetchers)})},dispose:function(){g&&g(),U&&U(),v.clear(),I&&I.abort(),x.fetchers.forEach((e,t)=>de(t)),x.blockers.forEach((e,t)=>we(t))},getBlocker:function(e,t){let r=x.blockers.get(e)||me;return Q.get(e)!==t&&Q.set(e,t),r},deleteBlocker:we,patchRoutes:function(e,t,r=!1){let i=null==n;Ce(e,t,n||u,l,o,r),i&&(u=[...u],Z({}))},_internalFetchControllers:G,_internalSetRoutes:function(e){l={},n=R(e,o,void 0,l)},_internalSetStateDoNotUseOrYouWillBreakYourApp(e){Z(e)}},a}function Te(e,t){f(e.length>0,"You must provide a non-empty routes array to createStaticHandler");let r={},n=(t?t.basename:null)||"/",i=t?.mapRouteProperties||ye,a=R(e,i,void 0,r);async function s(e,t,n,a,s,u,c,d,h){f(e.signal,"query()/queryRoute() requests must contain an AbortController signal");try{if(pt(e.method)){let f=await async function(e,t,n,a,s,u,c,d,f){let h;if(n.route.action||n.route.lazy){let o=ze(i,r,e,t,n,[],a);h=(await l(e,o,c,a,s))[n.route.id],e.signal.aborted&&ke(e,c)}else{let t=nt(405,{method:e.method,pathname:new URL(e.url).pathname,routeId:n.route.id});if(c)throw t;h={type:"error",error:t}}if(lt(h))throw new Response(null,{status:h.response.status,headers:{Location:h.response.headers.get("Location")}});if(c){if(ot(h))throw h.error;return{matches:[n],loaderData:{},actionData:{[n.route.id]:h.data},errors:null,statusCode:200,loaderHeaders:{},actionHeaders:{}}}if(f){if(ot(h)){let e=u?n:tt(t,n.route.id);return{statusCode:se(h.error)?h.error.status:null!=h.statusCode?h.statusCode:500,actionData:null,actionHeaders:{...h.headers?{[n.route.id]:h.headers}:{}},matches:t,loaderData:{},errors:{[e.route.id]:h.error},loaderHeaders:{}}}return{actionData:{[n.route.id]:h.data},actionHeaders:h.headers?{[n.route.id]:h.headers}:{},matches:t,loaderData:{},errors:null,statusCode:h.statusCode||200,loaderHeaders:{}}}let p=new Request(e.url,{headers:e.headers,redirect:e.redirect,signal:e.signal});if(ot(h)){let e=u?n:tt(t,n.route.id);return{...await o(p,t,a,s,u,null,d,[e.route.id,h]),statusCode:se(h.error)?h.error.status:null!=h.statusCode?h.statusCode:500,actionData:null,actionHeaders:{...h.headers?{[n.route.id]:h.headers}:{}}}}return{...await o(p,t,a,s,u,null,d),actionData:{[n.route.id]:h.data},...h.statusCode?{statusCode:h.statusCode}:{},actionHeaders:h.headers?{[n.route.id]:h.headers}:{}}}(e,n,c||gt(n,t),a,s,u,null!=c,d,h);return f}let f=await o(e,n,a,s,u,c,d);return ct(f)?f:{...f,actionData:null,actionHeaders:{}}}catch(e){if(null!=(p=e)&&"object"==typeof p&&"type"in p&&"result"in p&&("data"===p.type||"error"===p.type)&&ct(e.result)){if("error"===e.type)throw e.result;return e.result}if(ft(e))return e;throw e}var p}async function o(e,t,n,a,s,o,u,c){let d,f=null!=o;if(f&&!o?.route.loader&&!o?.route.lazy)throw nt(400,{method:e.method,pathname:new URL(e.url).pathname,routeId:o?.route.id});if(o)d=ze(i,r,e,t,o,[],n);else{let a=c&&ot(c[1])?t.findIndex(e=>e.route.id===c[0])-1:void 0;d=t.map((t,s)=>Ge(i,r,e,t,[],n,!(null!=a&&s>a)&&null!=(t.route.loader||t.route.lazy)&&(!u||u(t))))}if(!a&&!d.some(e=>e.shouldLoad))return{matches:t,loaderData:{},errors:c&&ot(c[1])?{[c[0]]:c[1].error}:null,statusCode:200,loaderHeaders:{}};let h=await l(e,d,f,n,a);return e.signal.aborted&&ke(e,f),{...Qe(t,h,c,!0,s),matches:t}}async function l(e,t,r,i,a){let s=await Ve(a||Ne,e,t,null,i,!0),o={};return await Promise.all(t.map(async i=>{if(!(i.route.id in s))return;let a=s[i.route.id];if(st(a))throw $e(a.result,e,i.route.id,t,n);if(ct(a.result)&&r)throw a;o[i.route.id]=await Ke(a)})),o}return{dataRoutes:a,query:async function(e,{requestContext:t,filterMatchesToLoad:o,skipLoaderErrorBubbling:l,skipRevalidation:u,dataStrategy:c,unstable_stream:d,unstable_respond:h}={}){let p=new URL(e.url),v=e.method,y=m("",g(p),null,"default"),E=L(a,y,n);t=null!=t?t:new S;let b=e=>d?d(t,()=>Promise.resolve(e)):h?h(e):e;if(!ht(v)&&"HEAD"!==v){let e=nt(405,{method:v}),{matches:t,route:r}=rt(a),i={basename:n,location:y,matches:t,loaderData:{},actionData:null,errors:{[r.id]:e},statusCode:e.status,loaderHeaders:{},actionHeaders:{}};return b(i)}if(!E){let e=nt(404,{pathname:y.pathname}),{matches:t,route:r}=rt(a),i={basename:n,location:y,matches:t,loaderData:{},actionData:null,errors:{[r.id]:e},statusCode:e.status,loaderHeaders:{},actionHeaders:{}};return b(i)}if(d||h&&E.some(e=>e.route.unstable_middleware||"object"==typeof e.route.lazy&&e.route.lazy.unstable_middleware)){f(t instanceof S,"When using middleware in `staticHandler.query()`, any provided `requestContext` must be an instance of `unstable_RouterContextProvider`");try{let p;await Fe(E,r,i);let m=await Be({request:e,matches:E,params:E[0].params,context:t},!0,async()=>{if(d)return await d(t,async e=>{let r=await s(e,y,E,t,c||null,!0===l,null,o||null,!0===u);return ct(r)?r:{location:y,basename:n,...r}});f(h,"Expected respond to be defined");let r=await s(e,y,E,t,c||null,!0===l,null,o||null,!0===u);return ct(r)?r:(p={location:y,basename:n,...r},await h(p))},async(e,t)=>{if(ct(e))return e;if(p){t in p.loaderData&&(p.loaderData[t]=void 0);let r=we(a,p,e,l?t:tt(E,t).route.id);return b(r)}{let r=l?t:tt(E,E.find(e=>e.route.id===t||e.route.loader)?.route.id||t).route.id,i={matches:E,location:y,basename:n,loaderData:{},actionData:null,errors:{[r]:e},statusCode:se(e)?e.status:500,actionHeaders:{},loaderHeaders:{}};return b(i)}});return f(ct(m),"Expected a response in query()"),m}catch(e){if(ct(e))return e;throw e}}let T=await s(e,y,E,t,c||null,!0===l,null,o||null,!0===u);return ct(T)?T:{location:y,basename:n,...T}},queryRoute:async function(e,{routeId:t,requestContext:o,dataStrategy:l,unstable_respond:u}={}){let c=new URL(e.url),d=e.method,h=m("",g(c),null,"default"),p=L(a,h,n);if(o=null!=o?o:new S,!ht(d)&&"HEAD"!==d&&"OPTIONS"!==d)throw nt(405,{method:d});if(!p)throw nt(404,{pathname:h.pathname});let v=t?p.find(e=>e.route.id===t):gt(p,h);if(t&&!v)throw nt(403,{pathname:h.pathname,routeId:t});if(!v)throw nt(404,{pathname:h.pathname});if(u&&p.some(e=>e.route.unstable_middleware||"object"==typeof e.route.lazy&&e.route.lazy.unstable_middleware))return f(o instanceof S,"When using middleware in `staticHandler.queryRoute()`, any provided `requestContext` must be an instance of `unstable_RouterContextProvider`"),await Fe(p,r,i),await Be({request:e,matches:p,params:p[0].params,context:o},!0,async()=>{let t=await s(e,h,p,o,l||null,!1,v,null,!1);if(ct(t))return u(t);let r=t.errors?Object.values(t.errors)[0]:void 0;if(void 0!==r)throw r;let n=t.actionData?Object.values(t.actionData)[0]:Object.values(t.loaderData)[0];return"string"==typeof n?new Response(n):Response.json(n)},e=>ct(e)?u(e):new Response(String(e),{status:500,statusText:"Unexpected Server Error"}));let y=await s(e,h,p,o,l||null,!1,v,null,!1);if(ct(y))return y;let E=y.errors?Object.values(y.errors)[0]:void 0;if(void 0!==E)throw E;return y.actionData?Object.values(y.actionData)[0]:y.loaderData?Object.values(y.loaderData)[0]:void 0}}}function we(e,t,r,n){let i=n||t._deepestRenderedBoundaryId||e[0].id;return{...t,statusCode:se(r)?r.status:500,errors:{[i]:r}}}function ke(e,t){if(void 0!==e.signal.reason)throw e.signal.reason;throw new Error(`${t?"queryRoute":"query"}() call aborted without an \`AbortSignal.reason\`: ${e.method} ${e.url}`)}function Re(e,t,r,n,i,a){let s,o;if(i){s=[];for(let e of t)if(s.push(e),e.route.id===i){o=e;break}}else s=t,o=t[t.length-1];let l=Y(n||".",W(s),V(e.pathname,r)||e.pathname,"path"===a);if(null==n&&(l.search=e.search,l.hash=e.hash),(null==n||""===n||"."===n)&&o){let e=mt(l.search);if(o.route.index&&!e)l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index";else if(!o.route.index&&e){let e=new URLSearchParams(l.search),t=e.getAll("index");e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let r=e.toString();l.search=r?`?${r}`:""}}return"/"!==r&&(l.pathname=function({basename:e,pathname:t}){return"/"===t?e:X([e,t])}({basename:r,pathname:l.pathname})),g(l)}function Le(e,t,r){if(!r||!function(e){return null!=e&&("formData"in e&&null!=e.formData||"body"in e&&void 0!==e.body)}(r))return{path:t};if(r.formMethod&&!ht(r.formMethod))return{path:t,error:nt(405,{method:r.formMethod})};let n,i,a=()=>({path:t,error:nt(400,{type:"invalid-body"})}),s=(r.formMethod||"get").toUpperCase(),o=at(t);if(void 0!==r.body){if("text/plain"===r.formEncType){if(!pt(s))return a();let e="string"==typeof r.body?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((e,[t,r])=>`${e}${t}=${r}\n`,""):String(r.body);return{path:t,submission:{formMethod:s,formAction:o,formEncType:r.formEncType,formData:void 0,json:void 0,text:e}}}if("application/json"===r.formEncType){if(!pt(s))return a();try{let e="string"==typeof r.body?JSON.parse(r.body):r.body;return{path:t,submission:{formMethod:s,formAction:o,formEncType:r.formEncType,formData:void 0,json:e,text:void 0}}}catch(e){return a()}}}if(f("function"==typeof FormData,"FormData is not available in this environment"),r.formData)n=Ye(r.formData),i=r.formData;else if(r.body instanceof FormData)n=Ye(r.body),i=r.body;else if(r.body instanceof URLSearchParams)n=r.body,i=Xe(n);else if(null==r.body)n=new URLSearchParams,i=new FormData;else try{n=new URLSearchParams(r.body),i=Xe(n)}catch(e){return a()}let l={formMethod:s,formAction:o,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:i,json:void 0,text:void 0};if(pt(l.formMethod))return{path:t,submission:l};let u=v(t);return e&&u.search&&mt(u.search)&&n.append("index",""),u.search=`?${n}`,{path:g(u),submission:l}}function Ae(e,t,r,n,i,a,s,o,l,u,c,d,f,h,p,m,g,v,y,E){let b,S=E?ot(E[1])?E[1].error:E[1].data:void 0,T=i.createURL(a.location),w=i.createURL(l);if(c&&a.errors){let e=Object.keys(a.errors)[0];b=s.findIndex(t=>t.route.id===e)}else if(E&&ot(E[1])){let e=E[0];b=s.findIndex(t=>t.route.id===e)-1}let k=E?E[1].statusCode:void 0,R=k&&k>=400,A={currentUrl:T,currentParams:a.matches[0]?.params||{},nextUrl:w,nextParams:s[0].params,...o,actionResult:S,actionStatus:k},_=s.map((i,s)=>{let{route:o}=i,l=null;if(null!=b&&s>b?l=!1:o.lazy?l=!0:null==o.loader?l=!1:c?l=_e(o,a.loaderData,a.errors):function(e,t,r){let n=!t||r.route.id!==t.route.id,i=!e.hasOwnProperty(r.route.id);return n||i}(a.loaderData,a.matches[s],i)&&(l=!0),null!==l)return Ge(r,n,e,i,u,t,l);let f=!R&&(d||T.pathname+T.search===w.pathname+w.search||T.search!==w.search||function(e,t){let r=e.route.path;return e.pathname!==t.pathname||null!=r&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}(a.matches[s],i)),h={...A,defaultShouldRevalidate:f},p=De(i,h);return Ge(r,n,e,i,u,t,p,h)}),D=[];return p.forEach((e,o)=>{if(c||!s.some(t=>t.route.id===e.routeId)||h.has(o))return;let l=a.fetchers.get(o),p=l&&"idle"!==l.state&&void 0===l.data,E=L(g,e.path,v);if(!E){if(y&&p)return;return void D.push({key:o,routeId:e.routeId,path:e.path,matches:null,match:null,request:null,controller:null})}if(m.has(o))return;let b=gt(E,e.path),S=new AbortController,T=We(i,e.path,S.signal),w=null;if(f.has(o))f.delete(o),w=ze(r,n,T,E,b,u,t);else if(p)d&&(w=ze(r,n,T,E,b,u,t));else{let e={...A,defaultShouldRevalidate:!R&&d};De(b,e)&&(w=ze(r,n,T,E,b,u,t,e))}w&&D.push({key:o,routeId:e.routeId,path:e.path,matches:w,match:b,request:T,controller:S})}),{dsMatches:_,revalidatingFetchers:D}}function _e(e,t,r){if(e.lazy)return!0;if(!e.loader)return!1;let n=null!=t&&e.id in t,i=null!=r&&void 0!==r[e.id];return!(!n&&i)&&("function"==typeof e.loader&&!0===e.loader.hydrate||!n&&!i)}function De(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if("boolean"==typeof r)return r}return t.defaultShouldRevalidate}function Ce(e,t,r,n,i,a){let s;if(e){let t=n[e];f(t,`No route found to patch children into: routeId = ${e}`),t.children||(t.children=[]),s=t.children}else s=r;let o=[],l=[];if(t.forEach(e=>{let t=s.find(t=>Ie(e,t));t?l.push({existingRoute:t,newRoute:e}):o.push(e)}),o.length>0){let t=R(o,i,[e||"_","patch",String(s?.length||"0")],n);s.push(...t)}if(a&&l.length>0)for(let e=0;e<l.length;e++){let{existingRoute:t,newRoute:r}=l[e],n=t,[a]=R([r],i,[],{},!0);Object.assign(n,{element:a.element?a.element:n.element,errorElement:a.errorElement?a.errorElement:n.errorElement,hydrateFallbackElement:a.hydrateFallbackElement?a.hydrateFallbackElement:n.hydrateFallbackElement})}}function Ie(e,t){return"id"in e&&"id"in t&&e.id===t.id||e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive&&(!(e.children&&0!==e.children.length||t.children&&0!==t.children.length)||e.children.every((e,r)=>t.children?.some(t=>Ie(e,t))))}var Pe=new WeakMap,xe=({key:e,route:t,manifest:r,mapRouteProperties:n})=>{let i=r[t.id];if(f(i,"No route found in manifest"),!i.lazy||"object"!=typeof i.lazy)return;let a=i.lazy[e];if(!a)return;let s=Pe.get(i);s||(s={},Pe.set(i,s));let o=s[e];if(o)return o;let l=(async()=>{let t=function(e){return T.has(e)}(e),r=void 0!==i[e]&&"hasErrorBoundary"!==e;if(t)h(!t,"Route property "+e+" is not a supported lazy route property. This property will be ignored."),s[e]=Promise.resolve();else if(r)h(!1,`Route "${i.id}" has a static property "${e}" defined. The lazy property will be ignored.`);else{let t=await a();null!=t&&(Object.assign(i,{[e]:t}),Object.assign(i,n(i)))}"object"==typeof i.lazy&&(i.lazy[e]=void 0,Object.values(i.lazy).every(e=>void 0===e)&&(i.lazy=void 0))})();return s[e]=l,l},Oe=new WeakMap;function Me(e){return void 0!==e}function Fe(e,t,r){let n=e.map(({route:e})=>{if("object"==typeof e.lazy&&e.lazy.unstable_middleware)return xe({key:"unstable_middleware",route:e,manifest:t,mapRouteProperties:r})}).filter(Me);return n.length>0?Promise.all(n):void 0}async function Ne(e){let t=e.matches.filter(e=>e.shouldLoad),r={};return(await Promise.all(t.map(e=>e.resolve()))).forEach((e,n)=>{r[t[n].route.id]=e}),r}async function Ue(e){return e.matches.some(e=>e.route.unstable_middleware)?Be(e,!1,()=>Ne(e),(e,t)=>({[t]:{type:"error",result:e}})):Ne(e)}async function Be(e,t,r,n){let{matches:i,request:a,params:s,context:o}=e,l={handlerResult:void 0};try{let e=i.flatMap(e=>e.route.unstable_middleware?e.route.unstable_middleware.map(t=>[e.route.id,t]):[]),n=await je({request:a,params:s,context:o},e,t,l,r);return t?n:l.handlerResult}catch(e){if(!l.middlewareError)throw e;let r=await n(l.middlewareError.error,l.middlewareError.routeId);return t||!l.handlerResult?r:Object.assign(l.handlerResult,r)}}async function je(e,t,r,n,i,a=0){let{request:s}=e;if(s.signal.aborted){if(s.signal.reason)throw s.signal.reason;throw new Error(`Request aborted without an \`AbortSignal.reason\`: ${s.method} ${s.url}`)}let o=t[a];if(!o)return n.handlerResult=await i(),n.handlerResult;let l,[u,c]=o,d=!1,f=async()=>{if(d)throw new Error("You may only call `next()` once per middleware");d=!0;let s=await je(e,t,r,n,i,a+1);if(r)return l=s,l};try{let t=await c({request:e.request,params:e.params,context:e.context},f);return d?void 0===t?l:t:f()}catch(e){throw n.middlewareError?n.middlewareError.error!==e&&(n.middlewareError={routeId:u,error:e}):n.middlewareError={routeId:u,error:e},e}}function He(e,t,r,n,i){let a=xe({key:"unstable_middleware",route:n.route,manifest:t,mapRouteProperties:e}),s=function(e,t,r,n,i){let a=r[e.id];if(f(a,"No route found in manifest"),!e.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if("function"==typeof e.lazy){let t=Oe.get(a);if(t)return{lazyRoutePromise:t,lazyHandlerPromise:t};let r=(async()=>{f("function"==typeof e.lazy,"No lazy route function found");let t=await e.lazy(),r={};for(let e in t){let n=t[e];if(void 0===n)continue;let i=k(e),s=void 0!==a[e]&&"hasErrorBoundary"!==e;i?h(!i,"Route property "+e+" is not a supported property to be returned from a lazy route function. This property will be ignored."):s?h(!s,`Route "${a.id}" has a static property "${e}" defined but its lazy function is also returning a value for this property. The lazy route property "${e}" will be ignored.`):r[e]=n}Object.assign(a,r),Object.assign(a,{...n(a),lazy:void 0})})();return Oe.set(a,r),r.catch(()=>{}),{lazyRoutePromise:r,lazyHandlerPromise:r}}let s,o=Object.keys(e.lazy),l=[];for(let a of o){if(i&&i.includes(a))continue;let o=xe({key:a,route:e,manifest:r,mapRouteProperties:n});o&&(l.push(o),a===t&&(s=o))}let u=l.length>0?Promise.all(l).then(()=>{}):void 0;return u?.catch(()=>{}),s?.catch(()=>{}),{lazyRoutePromise:u,lazyHandlerPromise:s}}(n.route,pt(r.method)?"action":"loader",t,e,i);return{middleware:a,route:s.lazyRoutePromise,handler:s.lazyHandlerPromise}}function Ge(e,t,r,n,i,a,s,o=null){let l=!1,u=He(e,t,r,n,i);return{...n,_lazyPromises:u,shouldLoad:s,unstable_shouldRevalidateArgs:o,unstable_shouldCallHandler:e=>(l=!0,o?De(n,"boolean"==typeof e?{...o,defaultShouldRevalidate:e}:o):s),resolve:e=>l||s||e&&!pt(r.method)&&(n.route.lazy||n.route.loader)?async function({request:e,match:t,lazyHandlerPromise:r,lazyRoutePromise:n,handlerOverride:i,scopedContext:a}){let s,o,l=pt(e.method),u=l?"action":"loader",c=r=>{let n,s=new Promise((e,t)=>n=t);o=()=>n(),e.signal.addEventListener("abort",o);let l=n=>"function"!=typeof r?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${u}" [routeId: ${t.route.id}]`)):r({request:e,params:t.params,context:a},...void 0!==n?[n]:[]),c=(async()=>{try{return{type:"data",result:await(i?i(e=>l(e)):l())}}catch(e){return{type:"error",result:e}}})();return Promise.race([c,s])};try{let i=l?t.route.action:t.route.loader;if(r||n)if(i){let e,[t]=await Promise.all([c(i).catch(t=>{e=t}),r,n]);if(void 0!==e)throw e;s=t}else{await r;let i=l?t.route.action:t.route.loader;if(!i){if("action"===u){let r=new URL(e.url),n=r.pathname+r.search;throw nt(405,{method:e.method,pathname:n,routeId:t.route.id})}return{type:"data",result:void 0}}[s]=await Promise.all([c(i),n])}else{if(!i){let t=new URL(e.url);throw nt(404,{pathname:t.pathname+t.search})}s=await c(i)}}catch(e){return{type:"error",result:e}}finally{o&&e.signal.removeEventListener("abort",o)}return s}({request:r,match:n,lazyHandlerPromise:u?.handler,lazyRoutePromise:u?.route,handlerOverride:e,scopedContext:a}):Promise.resolve({type:"data",result:void 0})}}function ze(e,t,r,n,i,a,s,o=null){return n.map(n=>n.route.id!==i.route.id?{...n,shouldLoad:!1,unstable_shouldRevalidateArgs:o,unstable_shouldCallHandler:()=>!1,_lazyPromises:He(e,t,r,n,a),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Ge(e,t,r,n,a,s,!0,o))}async function Ve(e,t,r,n,i,a){r.some(e=>e._lazyPromises?.middleware)&&await Promise.all(r.map(e=>e._lazyPromises?.middleware));let s={request:t,params:r[0].params,context:i,matches:r},o=a?()=>{throw new Error("You cannot call `unstable_runClientMiddleware()` from a static handler `dataStrategy`. Middleware is run outside of `dataStrategy` during SSR in order to bubble up the Response.  You can enable middleware via the `respond` API in `query`/`queryRoute`")}:e=>{let t=s;return Be(t,!1,()=>e({...t,fetcherKey:n,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(e,t)=>({[t]:{type:"error",result:e}}))},l=await e({...s,fetcherKey:n,unstable_runClientMiddleware:o});try{await Promise.all(r.flatMap(e=>[e._lazyPromises?.handler,e._lazyPromises?.route]))}catch(e){}return l}async function Ke(e){let{result:t,type:r}=e;if(ct(t)){let e;try{let r=t.headers.get("Content-Type");e=r&&/\bapplication\/json\b/.test(r)?null==t.body?null:await t.json():await t.text()}catch(e){return{type:"error",error:e}}return"error"===r?{type:"error",error:new ae(t.status,t.statusText,e),statusCode:t.status,headers:t.headers}:{type:"data",data:e,statusCode:t.status,headers:t.headers}}return"error"===r?ut(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:t.init?.status,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"error",error:new ae(t.init?.status||500,void 0,t.data),statusCode:se(t)?t.status:void 0,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:se(t)?t.status:void 0}:ut(t)?{type:"data",data:t.data,statusCode:t.init?.status,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function $e(e,t,r,n,i){let a=e.headers.get("Location");if(f(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!ve(a)){let s=n.slice(0,n.findIndex(e=>e.route.id===r)+1);a=Re(new URL(t.url),s,i,a),e.headers.set("Location",a)}return e}function qe(e,t,r){if(ve(e)){let n=e,i=n.startsWith("//")?new URL(t.protocol+n):new URL(n),a=null!=V(i.pathname,r);if(i.origin===t.origin&&a)return i.pathname+i.search+i.hash}return e}function We(e,t,r,n){let i=e.createURL(at(t)).toString(),a={signal:r};if(n&&pt(n.formMethod)){let{formMethod:e,formEncType:t}=n;a.method=e.toUpperCase(),"application/json"===t?(a.headers=new Headers({"Content-Type":t}),a.body=JSON.stringify(n.json)):"text/plain"===t?a.body=n.text:"application/x-www-form-urlencoded"===t&&n.formData?a.body=Ye(n.formData):a.body=n.formData}return new Request(i,a)}function Ye(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,"string"==typeof n?n:n.name);return t}function Xe(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function Qe(e,t,r,n=!1,i=!1){let a,s={},o=null,l=!1,u={},c=r&&ot(r[1])?r[1].error:void 0;return e.forEach(r=>{if(!(r.route.id in t))return;let d=r.route.id,h=t[d];if(f(!lt(h),"Cannot handle redirect results in processLoaderData"),ot(h)){let t=h.error;if(void 0!==c&&(t=c,c=void 0),o=o||{},i)o[d]=t;else{let r=tt(e,d);null==o[r.route.id]&&(o[r.route.id]=t)}n||(s[d]=be),l||(l=!0,a=se(h.error)?h.error.status:500),h.headers&&(u[d]=h.headers)}else s[d]=h.data,h.statusCode&&200!==h.statusCode&&!l&&(a=h.statusCode),h.headers&&(u[d]=h.headers)}),void 0!==c&&r&&(o={[r[0]]:c},r[2]&&(s[r[2]]=void 0)),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:u}}function Je(e,t,r,n,i,a){let{loaderData:s,errors:o}=Qe(t,r,n);return i.filter(e=>!e.matches||e.matches.some(e=>e.shouldLoad)).forEach(t=>{let{key:r,match:n,controller:i}=t,s=a[r];if(f(s,"Did not find corresponding fetcher result"),!i||!i.signal.aborted)if(ot(s)){let t=tt(e.matches,n?.route.id);o&&o[t.route.id]||(o={...o,[t.route.id]:s.error}),e.fetchers.delete(r)}else if(lt(s))f(!1,"Unhandled fetcher revalidation redirect");else{let t=bt(s.data);e.fetchers.set(r,t)}}),{loaderData:s,errors:o}}function Ze(e,t,r,n){let i=Object.entries(t).filter(([,e])=>e!==be).reduce((e,[t,r])=>(e[t]=r,e),{});for(let a of r){let r=a.route.id;if(!t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&a.route.loader&&(i[r]=e[r]),n&&n.hasOwnProperty(r))break}return i}function et(e){return e?ot(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function tt(e,t){return(t?e.slice(0,e.findIndex(e=>e.route.id===t)+1):[...e]).reverse().find(e=>!0===e.route.hasErrorBoundary)||e[0]}function rt(e){let t=1===e.length?e[0]:e.find(e=>e.index||!e.path||"/"===e.path)||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function nt(e,{pathname:t,routeId:r,method:n,type:i,message:a}={}){let s="Unknown Server Error",o="Unknown @remix-run/router error";return 400===e?(s="Bad Request",n&&t&&r?o=`You made a ${n} request to "${t}" but did not provide a \`loader\` for route "${r}", so there is no way to handle the request.`:"invalid-body"===i&&(o="Unable to encode submission body")):403===e?(s="Forbidden",o=`Route "${r}" does not match URL "${t}"`):404===e?(s="Not Found",o=`No route matches URL "${t}"`):405===e&&(s="Method Not Allowed",n&&t&&r?o=`You made a ${n.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${r}", so there is no way to handle the request.`:n&&(o=`Invalid request method "${n.toUpperCase()}"`)),new ae(e||500,s,new Error(o),!0)}function it(e){let t=Object.entries(e);for(let e=t.length-1;e>=0;e--){let[r,n]=t[e];if(lt(n))return{key:r,result:n}}}function at(e){return g({..."string"==typeof e?v(e):e,hash:""})}function st(e){return ct(e.result)&&de.has(e.result.status)}function ot(e){return"error"===e.type}function lt(e){return"redirect"===(e&&e.type)}function ut(e){return"object"==typeof e&&null!=e&&"type"in e&&"data"in e&&"init"in e&&"DataWithResponseInit"===e.type}function ct(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"object"==typeof e.headers&&void 0!==e.body}function dt(e){return de.has(e)}function ft(e){return ct(e)&&dt(e.status)&&e.headers.has("Location")}function ht(e){return ce.has(e.toUpperCase())}function pt(e){return le.has(e.toUpperCase())}function mt(e){return new URLSearchParams(e).getAll("index").some(e=>""===e)}function gt(e,t){let r="string"==typeof t?v(t).search:t.search;if(e[e.length-1].route.index&&mt(r||""))return e[e.length-1];let n=q(e);return n[n.length-1]}function vt(e){let{formMethod:t,formAction:r,formEncType:n,text:i,formData:a,json:s}=e;if(t&&r&&n)return null!=i?{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:i}:null!=a?{formMethod:t,formAction:r,formEncType:n,formData:a,json:void 0,text:void 0}:void 0!==s?{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:s,text:void 0}:void 0}function yt(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Et(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function bt(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}var St=i.createContext(null);St.displayName="DataRouter";var Tt=i.createContext(null);Tt.displayName="DataRouterState";var wt=i.createContext(!1),kt=i.createContext({isTransitioning:!1});kt.displayName="ViewTransition";var Rt=i.createContext(new Map);Rt.displayName="Fetchers";var Lt=i.createContext(null);Lt.displayName="Await";var At=i.createContext(null);At.displayName="Navigation";var _t=i.createContext(null);_t.displayName="Location";var Dt=i.createContext({outlet:null,matches:[],isDataRoute:!1});Dt.displayName="Route";var Ct=i.createContext(null);Ct.displayName="RouteError";var It=!0;function Pt(e,{relative:t}={}){f(xt(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=i.useContext(At),{hash:a,pathname:s,search:o}=Vt(e,{relative:t}),l=s;return"/"!==r&&(l="/"===s?r:X([r,s])),n.createHref({pathname:l,search:o,hash:a})}function xt(){return null!=i.useContext(_t)}function Ot(){return f(xt(),"useLocation() may be used only in the context of a <Router> component."),i.useContext(_t).location}function Mt(){return i.useContext(_t).navigationType}function Ft(e){f(xt(),"useMatch() may be used only in the context of a <Router> component.");let{pathname:t}=Ot();return i.useMemo(()=>H(e,z(t)),[t,e])}var Nt="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ut(e){i.useContext(At).static||i.useLayoutEffect(e)}function Bt(){let{isDataRoute:e}=i.useContext(Dt);return e?function(){let{router:e}=Zt("useNavigate"),t=tr("useNavigate"),r=i.useRef(!1);return Ut(()=>{r.current=!0}),i.useCallback(async(n,i={})=>{h(r.current,Nt),r.current&&("number"==typeof n?e.navigate(n):await e.navigate(n,{fromRouteId:t,...i}))},[e,t])}():function(){f(xt(),"useNavigate() may be used only in the context of a <Router> component.");let e=i.useContext(St),{basename:t,navigator:r}=i.useContext(At),{matches:n}=i.useContext(Dt),{pathname:a}=Ot(),s=JSON.stringify(W(n)),o=i.useRef(!1);return Ut(()=>{o.current=!0}),i.useCallback((n,i={})=>{if(h(o.current,Nt),!o.current)return;if("number"==typeof n)return void r.go(n);let l=Y(n,JSON.parse(s),a,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:X([t,l.pathname])),(i.replace?r.replace:r.push)(l,i.state,i)},[t,r,s,a,e])}()}var jt=i.createContext(null);function Ht(){return i.useContext(jt)}function Gt(e){let t=i.useContext(Dt).outlet;return t?i.createElement(jt.Provider,{value:e},t):t}function zt(){let{matches:e}=i.useContext(Dt),t=e[e.length-1];return t?t.params:{}}function Vt(e,{relative:t}={}){let{matches:r}=i.useContext(Dt),{pathname:n}=Ot(),a=JSON.stringify(W(r));return i.useMemo(()=>Y(e,JSON.parse(a),n,"path"===t),[e,a,n,t])}function Kt(e,t){return $t(e,t)}function $t(e,t,r,n){f(xt(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=i.useContext(At),{matches:s}=i.useContext(Dt),o=s[s.length-1],l=o?o.params:{},u=o?o.pathname:"/",c=o?o.pathnameBase:"/",d=o&&o.route;if(It){let e=d&&d.path||"";pr(u,!d||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let p,m=Ot();if(t){let e="string"==typeof t?v(t):t;f("/"===c||e.pathname?.startsWith(c),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${e.pathname}" was given in the \`location\` prop.`),p=e}else p=m;let g=p.pathname||"/",y=g;if("/"!==c){let e=c.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let E=L(e,{pathname:y});It&&(h(d||null!=E,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),h(null==E||void 0!==E[E.length-1].route.element||void 0!==E[E.length-1].route.Component||void 0!==E[E.length-1].route.lazy,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`));let b=Qt(E&&E.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:X([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:X([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,r,n);return t&&b?i.createElement(_t.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},b):b}function qt(){let e=lr(),t=se(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},o=null;return It&&(console.error("Error handled by React Router default ErrorBoundary:",e),o=i.createElement(i.Fragment,null,i.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),i.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",i.createElement("code",{style:s},"ErrorBoundary")," or"," ",i.createElement("code",{style:s},"errorElement")," prop on your route."))),i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),r?i.createElement("pre",{style:a},r):null,o)}var Wt=i.createElement(qt,null),Yt=class extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(Dt.Provider,{value:this.props.routeContext},i.createElement(Ct.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Xt({routeContext:e,match:t,children:r}){let n=i.useContext(St);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),i.createElement(Dt.Provider,{value:e},r)}function Qt(e,t=[],r=null,n=null){if(null==e){if(!r)return null;if(r.errors)e=r.matches;else{if(0!==t.length||r.initialized||!(r.matches.length>0))return null;e=r.matches}}let a=e,s=r?.errors;if(null!=s){let e=a.findIndex(e=>e.route.id&&void 0!==s?.[e.route.id]);f(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,e+1))}let o=!1,l=-1;if(r)for(let e=0;e<a.length;e++){let t=a[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(l=e),t.route.id){let{loaderData:e,errors:n}=r,i=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!n||void 0===n[t.route.id]);if(t.route.lazy||i){o=!0,a=l>=0?a.slice(0,l+1):[a[0]];break}}}return a.reduceRight((e,n,u)=>{let c,d=!1,f=null,h=null;r&&(c=s&&n.route.id?s[n.route.id]:void 0,f=n.route.errorElement||Wt,o&&(l<0&&0===u?(pr("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,h=null):l===u&&(d=!0,h=n.route.hydrateFallbackElement||null)));let p=t.concat(a.slice(0,u+1)),m=()=>{let t;return t=c?f:d?h:n.route.Component?i.createElement(n.route.Component,null):n.route.element?n.route.element:e,i.createElement(Xt,{match:n,routeContext:{outlet:e,matches:p,isDataRoute:null!=r},children:t})};return r&&(n.route.ErrorBoundary||n.route.errorElement||0===u)?i.createElement(Yt,{location:r.location,revalidation:r.revalidation,component:f,error:c,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}function Jt(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Zt(e){let t=i.useContext(St);return f(t,Jt(e)),t}function er(e){let t=i.useContext(Tt);return f(t,Jt(e)),t}function tr(e){let t=function(e){let t=i.useContext(Dt);return f(t,Jt(e)),t}(e),r=t.matches[t.matches.length-1];return f(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function rr(){return er("useNavigation").navigation}function nr(){let e=Zt("useRevalidator"),t=er("useRevalidator"),r=i.useCallback(async()=>{await e.router.revalidate()},[e.router]);return i.useMemo(()=>({revalidate:r,state:t.revalidation}),[r,t.revalidation])}function ir(){let{matches:e,loaderData:t}=er("useMatches");return i.useMemo(()=>e.map(e=>_(e,t)),[e,t])}function ar(){let e=er("useLoaderData"),t=tr("useLoaderData");return e.loaderData[t]}function sr(e){return er("useRouteLoaderData").loaderData[e]}function or(){let e=er("useActionData"),t=tr("useLoaderData");return e.actionData?e.actionData[t]:void 0}function lr(){let e=i.useContext(Ct),t=er("useRouteError"),r=tr("useRouteError");return void 0!==e?e:t.errors?.[r]}function ur(){let e=i.useContext(Lt);return e?._data}function cr(){let e=i.useContext(Lt);return e?._error}var dr=0;function fr(e){let{router:t,basename:r}=Zt("useBlocker"),n=er("useBlocker"),[a,s]=i.useState(""),o=i.useCallback(t=>{if("function"!=typeof e)return!!e;if("/"===r)return e(t);let{currentLocation:n,nextLocation:i,historyAction:a}=t;return e({currentLocation:{...n,pathname:V(n.pathname,r)||n.pathname},nextLocation:{...i,pathname:V(i.pathname,r)||i.pathname},historyAction:a})},[r,e]);return i.useEffect(()=>{let e=String(++dr);return s(e),()=>t.deleteBlocker(e)},[t]),i.useEffect(()=>{""!==a&&t.getBlocker(a,o)},[t,a,o]),a&&n.blockers.has(a)?n.blockers.get(a):me}var hr={};function pr(e,t,r){t||hr[e]||(hr[e]=!0,h(!1,r))}var mr={};function gr(e,t){e||mr[t]||(mr[t]=!0,console.warn(t))}function vr(e){let t={hasErrorBoundary:e.hasErrorBoundary||null!=e.ErrorBoundary||null!=e.errorElement};return e.Component&&(It&&e.element&&h(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:i.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(It&&e.hydrateFallbackElement&&h(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:i.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(It&&e.errorElement&&h(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:i.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var yr=["HydrateFallback","hydrateFallbackElement"];function Er(e,t){return Se({basename:t?.basename,unstable_getContext:t?.unstable_getContext,future:t?.future,history:u({initialEntries:t?.initialEntries,initialIndex:t?.initialIndex}),hydrationData:t?.hydrationData,routes:e,hydrationRouteProperties:yr,mapRouteProperties:vr,dataStrategy:t?.dataStrategy,patchRoutesOnNavigation:t?.patchRoutesOnNavigation}).initialize()}var br=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=t=>{"pending"===this.status&&(this.status="resolved",e(t))},this.reject=e=>{"pending"===this.status&&(this.status="rejected",t(e))}})}};function Sr({router:e,flushSync:t}){let[r,n]=i.useState(e.state),[a,s]=i.useState(),[o,l]=i.useState({isTransitioning:!1}),[u,c]=i.useState(),[d,f]=i.useState(),[h,p]=i.useState(),m=i.useRef(new Map),g=i.useCallback((r,{deletedFetchers:a,flushSync:o,viewTransitionOpts:h})=>{r.fetchers.forEach((e,t)=>{void 0!==e.data&&m.current.set(t,e.data)}),a.forEach(e=>m.current.delete(e)),gr(!1===o||null!=t,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let g=null!=e.window&&null!=e.window.document&&"function"==typeof e.window.document.startViewTransition;if(gr(null==h||g,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),h&&g){if(t&&o){t(()=>{d&&(u&&u.resolve(),d.skipTransition()),l({isTransitioning:!0,flushSync:!0,currentLocation:h.currentLocation,nextLocation:h.nextLocation})});let i=e.window.document.startViewTransition(()=>{t(()=>n(r))});return i.finished.finally(()=>{t(()=>{c(void 0),f(void 0),s(void 0),l({isTransitioning:!1})})}),void t(()=>f(i))}d?(u&&u.resolve(),d.skipTransition(),p({state:r,currentLocation:h.currentLocation,nextLocation:h.nextLocation})):(s(r),l({isTransitioning:!0,flushSync:!1,currentLocation:h.currentLocation,nextLocation:h.nextLocation}))}else t&&o?t(()=>n(r)):i.startTransition(()=>n(r))},[e.window,t,d,u]);i.useLayoutEffect(()=>e.subscribe(g),[e,g]),i.useEffect(()=>{o.isTransitioning&&!o.flushSync&&c(new br)},[o]),i.useEffect(()=>{if(u&&a&&e.window){let t=a,r=u.promise,o=e.window.document.startViewTransition(async()=>{i.startTransition(()=>n(t)),await r});o.finished.finally(()=>{c(void 0),f(void 0),s(void 0),l({isTransitioning:!1})}),f(o)}},[a,u,e.window]),i.useEffect(()=>{u&&a&&r.location.key===a.location.key&&u.resolve()},[u,d,r.location,a]),i.useEffect(()=>{!o.isTransitioning&&h&&(s(h.state),l({isTransitioning:!0,flushSync:!1,currentLocation:h.currentLocation,nextLocation:h.nextLocation}),p(void 0))},[o.isTransitioning,h]);let v=i.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:t=>e.navigate(t),push:(t,r,n)=>e.navigate(t,{state:r,preventScrollReset:n?.preventScrollReset}),replace:(t,r,n)=>e.navigate(t,{replace:!0,state:r,preventScrollReset:n?.preventScrollReset})}),[e]),y=e.basename||"/",E=i.useMemo(()=>({router:e,navigator:v,static:!1,basename:y}),[e,v,y]);return i.createElement(i.Fragment,null,i.createElement(St.Provider,{value:E},i.createElement(Tt.Provider,{value:r},i.createElement(Rt.Provider,{value:m.current},i.createElement(kt.Provider,{value:o},i.createElement(Ar,{basename:y,location:r.location,navigationType:r.historyAction,navigator:v},i.createElement(Tr,{routes:e.routes,future:e.future,state:r})))))),null)}var Tr=i.memo(function({routes:e,future:t,state:r}){return $t(e,void 0,r,t)});function wr({basename:e,children:t,initialEntries:r,initialIndex:n}){let a=i.useRef();null==a.current&&(a.current=u({initialEntries:r,initialIndex:n,v5Compat:!0}));let s=a.current,[o,l]=i.useState({action:s.action,location:s.location}),c=i.useCallback(e=>{i.startTransition(()=>l(e))},[l]);return i.useLayoutEffect(()=>s.listen(c),[s,c]),i.createElement(Ar,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:s})}function kr({to:e,replace:t,state:r,relative:n}){f(xt(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=i.useContext(At);h(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=i.useContext(Dt),{pathname:o}=Ot(),l=Bt(),u=Y(e,W(s),o,"path"===n),c=JSON.stringify(u);return i.useEffect(()=>{l(JSON.parse(c),{replace:t,state:r,relative:n})},[l,c,n,t,r]),null}function Rr(e){return Gt(e.context)}function Lr(e){f(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ar({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:s=!1}){f(!xt(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=i.useMemo(()=>({basename:o,navigator:a,static:s,future:{}}),[o,a,s]);"string"==typeof r&&(r=v(r));let{pathname:u="/",search:c="",hash:d="",state:p=null,key:m="default"}=r,g=i.useMemo(()=>{let e=V(u,o);return null==e?null:{location:{pathname:e,search:c,hash:d,state:p,key:m},navigationType:n}},[o,u,c,d,p,m,n]);return h(null!=g,`<Router basename="${o}"> is not able to match the URL "${u}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),null==g?null:i.createElement(At.Provider,{value:l},i.createElement(_t.Provider,{children:t,value:g}))}function _r({children:e,location:t}){return Kt(Pr(e),t)}function Dr({children:e,errorElement:t,resolve:r}){return i.createElement(Cr,{resolve:r,errorElement:t},i.createElement(Ir,null,e))}var Cr=class extends i.Component{constructor(e){super(e),this.state={error:null}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){console.error("<Await> caught the following error during render",e,t)}render(){let{children:e,errorElement:t,resolve:r}=this.props,n=null,a=0;if(r instanceof Promise)if(this.state.error){a=2;let e=this.state.error;n=Promise.reject().catch(()=>{}),Object.defineProperty(n,"_tracked",{get:()=>!0}),Object.defineProperty(n,"_error",{get:()=>e})}else r._tracked?(n=r,a="_error"in n?2:"_data"in n?1:0):(a=0,Object.defineProperty(r,"_tracked",{get:()=>!0}),n=r.then(e=>Object.defineProperty(r,"_data",{get:()=>e}),e=>Object.defineProperty(r,"_error",{get:()=>e})));else a=1,n=Promise.resolve(),Object.defineProperty(n,"_tracked",{get:()=>!0}),Object.defineProperty(n,"_data",{get:()=>r});if(2===a&&!t)throw n._error;if(2===a)return i.createElement(Lt.Provider,{value:n,children:t});if(1===a)return i.createElement(Lt.Provider,{value:n,children:e});throw n}};function Ir({children:e}){let t=ur(),r="function"==typeof e?e(t):e;return i.createElement(i.Fragment,null,r)}function Pr(e,t=[]){let r=[];return i.Children.forEach(e,(e,n)=>{if(!i.isValidElement(e))return;let a=[...t,n];if(e.type===i.Fragment)return void r.push.apply(r,Pr(e.props.children,a));f(e.type===Lr,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),f(!e.props.index||!e.props.children,"An index route cannot have child routes.");let s={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=Pr(e.props.children,a)),r.push(s)}),r}var xr=Pr;function Or(e){return Qt(e)}function Mr(){return{params:zt(),loaderData:ar(),actionData:or(),matches:ir()}}function Fr({children:e}){const t=Mr();return i.cloneElement(e,t)}function Nr(e){return function(){const t=Mr();return i.createElement(e,t)}}function Ur(){return{params:zt(),loaderData:ar(),actionData:or()}}function Br({children:e}){const t=Ur();return i.cloneElement(e,t)}function jr(e){return function(){const t=Ur();return i.createElement(e,t)}}function Hr(){return{params:zt(),loaderData:ar(),actionData:or(),error:lr()}}function Gr({children:e}){const t=Hr();return i.cloneElement(e,t)}function zr(e){return function(){const t=Hr();return i.createElement(e,t)}}var Vr="get",Kr="application/x-www-form-urlencoded";function $r(e){return null!=e&&"string"==typeof e.tagName}function qr(e=""){return new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(e=>[r,e]):[[r,n]])},[]))}var Wr=null,Yr=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xr(e){return null==e||Yr.has(e)?e:(h(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Kr}"`),null)}var Qr=-1,Jr=-2,Zr=-3,en=-4,tn=-5,rn=-6,nn=-7,an="B",sn="D",on="E",ln="M",un="N",cn="P",dn="R",fn="S",hn="Y",pn="U",mn="Z",gn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};function vn(e){const{indices:t}=this,r=t.get(e);if(r)return[r];if(void 0===e)return nn;if(null===e)return tn;if(Number.isNaN(e))return Jr;if(e===Number.POSITIVE_INFINITY)return rn;if(e===Number.NEGATIVE_INFINITY)return Zr;if(0===e&&1/e<0)return en;const n=this.index++;return t.set(e,n),yn.call(this,e,n),n}function yn(e,t){const{deferred:r,plugins:n,postPlugins:i}=this,a=this.stringified,s=[[e,t]];for(;s.length>0;){const[e,t]=s.pop(),o=e=>Object.keys(e).map(t=>`"_${vn.call(this,t)}":${vn.call(this,e[t])}`).join(",");let l=null;switch(typeof e){case"boolean":case"number":case"string":a[t]=JSON.stringify(e);break;case"bigint":a[t]=`["${an}","${e}"]`;break;case"symbol":{const r=Symbol.keyFor(e);r?a[t]=`["${hn}",${JSON.stringify(r)}]`:l=new Error("Cannot encode symbol unless created with Symbol.for()");break}case"object":{if(!e){a[t]=`${tn}`;break}const i=Array.isArray(e);let s=!1;if(!i&&n)for(const r of n){const n=r(e);if(Array.isArray(n)){s=!0;const[e,...r]=n;a[t]=`[${JSON.stringify(e)}`,r.length>0&&(a[t]+=`,${r.map(e=>vn.call(this,e)).join(",")}`),a[t]+="]";break}}if(!s){let n=i?"[":"{";if(i){for(let t=0;t<e.length;t++)n+=(t?",":"")+(t in e?vn.call(this,e[t]):Qr);a[t]=`${n}]`}else if(e instanceof Date){const r=e.getTime();a[t]=`["${sn}",${Number.isNaN(r)?JSON.stringify("invalid"):r}]`}else e instanceof URL?a[t]=`["${pn}",${JSON.stringify(e.href)}]`:e instanceof RegExp?a[t]=`["${dn}",${JSON.stringify(e.source)},${JSON.stringify(e.flags)}]`:e instanceof Set?e.size>0?a[t]=`["${fn}",${[...e].map(e=>vn.call(this,e)).join(",")}]`:a[t]=`["${fn}"]`:e instanceof Map?e.size>0?a[t]=`["${ln}",${[...e].flatMap(([e,t])=>[vn.call(this,e),vn.call(this,t)]).join(",")}]`:a[t]=`["${ln}"]`:e instanceof Promise?(a[t]=`["${cn}",${t}]`,r[t]=e):e instanceof Error?(a[t]=`["${on}",${JSON.stringify(e.message)}`,"Error"!==e.name&&(a[t]+=`,${JSON.stringify(e.name)}`),a[t]+="]"):null===Object.getPrototypeOf(e)?a[t]=`["${un}",{${o(e)}}]`:bn(e)?a[t]=`{${o(e)}}`:l=new Error("Cannot encode object with prototype")}break}default:{let r=!1;if(!Array.isArray(e)&&n)for(const i of n){const n=i(e);if(Array.isArray(n)){r=!0;const[e,...i]=n;a[t]=`[${JSON.stringify(e)}`,i.length>0&&(a[t]+=`,${i.map(e=>vn.call(this,e)).join(",")}`),a[t]+="]";break}}r||(l=new Error("Cannot encode function or unexpected type"))}}if(l){let r=!1;if(i)for(const n of i){const i=n(e);if(Array.isArray(i)){r=!0;const[e,...n]=i;a[t]=`[${JSON.stringify(e)}`,n.length>0&&(a[t]+=`,${n.map(e=>vn.call(this,e)).join(",")}`),a[t]+="]";break}}if(!r)throw l}}}var En=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function bn(e){const t=Object.getPrototypeOf(e);return t===Object.prototype||null===t||Object.getOwnPropertyNames(t).sort().join("\0")===En}var Sn="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:void 0;function Tn(e){const{hydrated:t,values:r}=this;if("number"==typeof e)return wn.call(this,e);if(!Array.isArray(e)||!e.length)throw new SyntaxError;const n=r.length;for(const t of e)r.push(t);return t.length=r.length,wn.call(this,n)}function wn(e){const{hydrated:t,values:r,deferred:n,plugins:i}=this;let a;const s=[[e,e=>{a=e}]];let o=[];for(;s.length>0;){const[e,a]=s.pop();switch(e){case nn:a(void 0);continue;case tn:a(null);continue;case Jr:a(NaN);continue;case rn:a(1/0);continue;case Zr:a(-1/0);continue;case en:a(-0);continue}if(t[e]){a(t[e]);continue}const l=r[e];if(l&&"object"==typeof l){if(!Array.isArray(l)){const r={};t[e]=r;for(const e of Object.keys(l).reverse()){const t=[];s.push([l[e],e=>{t[1]=e}]),s.push([Number(e.slice(1)),e=>{t[0]=e}]),o.push(()=>{r[t[0]]=t[1]})}a(r);continue}if("string"!=typeof l[0]){const r=[];t[e]=r;for(let e=0;e<l.length;e++){const t=l[e];t!==Qr&&s.push([t,t=>{r[e]=t}])}a(r);continue}{const[r,u,c]=l;switch(r){case sn:a(t[e]=new Date(u));continue;case pn:a(t[e]=new URL(u));continue;case an:a(t[e]=BigInt(u));continue;case dn:a(t[e]=new RegExp(u,c));continue;case hn:a(t[e]=Symbol.for(u));continue;case fn:const r=new Set;t[e]=r;for(let e=l.length-1;e>0;e--)s.push([l[e],e=>{r.add(e)}]);a(r);continue;case ln:const d=new Map;t[e]=d;for(let e=l.length-2;e>0;e-=2){const t=[];s.push([l[e+1],e=>{t[1]=e}]),s.push([l[e],e=>{t[0]=e}]),o.push(()=>{d.set(t[0],t[1])})}a(d);continue;case un:const f=Object.create(null);t[e]=f;for(const e of Object.keys(u).reverse()){const t=[];s.push([u[e],e=>{t[1]=e}]),s.push([Number(e.slice(1)),e=>{t[0]=e}]),o.push(()=>{f[t[0]]=t[1]})}a(f);continue;case cn:if(t[u])a(t[e]=t[u]);else{const r=new gn;n[u]=r,a(t[e]=r.promise)}continue;case on:const[,h,p]=l;let m=p&&Sn&&Sn[p]?new Sn[p](h):new Error(h);t[e]=m,a(m);continue;case mn:a(t[e]=t[u]);continue;default:if(Array.isArray(i)){const r=[],n=l.slice(1);for(let e=0;e<n.length;e++){const t=n[e];s.push([t,t=>{r[e]=t}])}o.push(()=>{for(const n of i){const i=n(l[0],...r);if(i)return void a(t[e]=i.value)}throw new SyntaxError});continue}throw new SyntaxError}}}else t[e]=l,a(l)}for(;o.length>0;)o.pop()();return a}async function kn(e,t){const{plugins:r}=t??{},n=new gn,i=e.pipeThrough(function(){const e=new TextDecoder;let t="";return new TransformStream({transform(r,n){const i=e.decode(r,{stream:!0}),a=(t+i).split("\n");t=a.pop()||"";for(const e of a)n.enqueue(e)},flush(e){t&&e.enqueue(t)}})}()).getReader(),a={values:[],hydrated:[],deferred:{},plugins:r},s=await Rn.call(a,i);let o=n.promise;return s.done?n.resolve():o=Ln.call(a,i).then(n.resolve).catch(e=>{for(const t of Object.values(a.deferred))t.reject(e);n.reject(e)}),{done:o.then(()=>i.closed),value:s.value}}async function Rn(e){const t=await e.read();if(!t.value)throw new SyntaxError;let r;try{r=JSON.parse(t.value)}catch(e){throw new SyntaxError}return{done:t.done,value:Tn.call(this,r)}}async function Ln(e){let t=await e.read();for(;!t.done;){if(!t.value)continue;const r=t.value;switch(r[0]){case cn:{const e=r.indexOf(":"),t=Number(r.slice(1,e)),n=this.deferred[t];if(!n)throw new Error(`Deferred ID ${t} not found in stream`);const i=r.slice(e+1);let a;try{a=JSON.parse(i)}catch(e){throw new SyntaxError}const s=Tn.call(this,a);n.resolve(s);break}case on:{const e=r.indexOf(":"),t=Number(r.slice(1,e)),n=this.deferred[t];if(!n)throw new Error(`Deferred ID ${t} not found in stream`);const i=r.slice(e+1);let a;try{a=JSON.parse(i)}catch(e){throw new SyntaxError}const s=Tn.call(this,a);n.reject(s);break}default:throw new SyntaxError}t=await e.read()}}function An(e,t){const{plugins:r,postPlugins:n,signal:i}=t??{},a={deferred:{},index:0,indices:new Map,stringified:[],plugins:r,postPlugins:n,signal:i},s=new TextEncoder;let o=0;return new ReadableStream({async start(t){const r=vn.call(a,e);if(Array.isArray(r))throw new Error("This should never happen");r<0?t.enqueue(s.encode(`${r}\n`)):(t.enqueue(s.encode(`[${a.stringified.join(",")}]\n`)),o=a.stringified.length-1);const n=new WeakSet;if(Object.keys(a.deferred).length){let e;const r=new Promise((t,r)=>{if(e=t,i){const e=()=>r(i.reason||new Error("Signal was aborted."));i.aborted?e():i.addEventListener("abort",t=>{e()})}});for(;Object.keys(a.deferred).length>0;){for(const[e,i]of Object.entries(a.deferred))n.has(i)||n.add(a.deferred[Number(e)]=Promise.race([r,i]).then(r=>{const n=vn.call(a,r);if(Array.isArray(n))t.enqueue(s.encode(`${cn}${e}:[["${mn}",${n[0]}]]\n`)),a.index++,o++;else if(n<0)t.enqueue(s.encode(`${cn}${e}:${n}\n`));else{const r=a.stringified.slice(o+1).join(",");t.enqueue(s.encode(`${cn}${e}:[${r}]\n`)),o=a.stringified.length-1}},r=>{r&&"object"==typeof r&&r instanceof Error||(r=new Error("An unknown error occurred"));const n=vn.call(a,r);if(Array.isArray(n))t.enqueue(s.encode(`${on}${e}:[["${mn}",${n[0]}]]\n`)),a.index++,o++;else if(n<0)t.enqueue(s.encode(`${on}${e}:${n}\n`));else{const r=a.stringified.slice(o+1).join(",");t.enqueue(s.encode(`${on}${e}:[${r}]\n`)),o=a.stringified.length-1}}).finally(()=>{delete a.deferred[Number(e)]}));await Promise.race(Object.values(a.deferred))}e()}await Promise.all(Object.values(a.deferred)),t.close()}})}async function _n(e){let t={signal:e.signal};if("GET"!==e.method){t.method=e.method;let r=e.headers.get("Content-Type");r&&/\bapplication\/json\b/.test(r)?(t.headers={"Content-Type":r},t.body=JSON.stringify(await e.json())):r&&/\btext\/plain\b/.test(r)?(t.headers={"Content-Type":r},t.body=await e.text()):r&&/\bapplication\/x-www-form-urlencoded\b/.test(r)?t.body=new URLSearchParams(await e.text()):t.body=await e.formData()}return t}var Dn={"&":"\\u0026",">":"\\u003e","<":"\\u003c","\u2028":"\\u2028","\u2029":"\\u2029"},Cn=/[&><\u2028\u2029]/g;function In(e){return{__html:e}}function Pn(e,t){if(!1===e||null==e)throw new Error(t)}var xn,On=Symbol("SingleFetchRedirect"),Mn=class extends Error{},Fn=202,Nn=new Set([100,101,204,205]);function Un({context:e,identifier:t,reader:r,textDecoder:n,nonce:a}){if(!e.renderMeta||!e.renderMeta.didRenderScripts)return null;e.renderMeta.streamCache||(e.renderMeta.streamCache={});let{streamCache:s}=e.renderMeta,o=s[t];if(o||(o=s[t]=r.read().then(e=>{s[t].result={done:e.done,value:n.decode(e.value,{stream:!0})}}).catch(e=>{s[t].error=e})),o.error)throw o.error;if(void 0===o.result)throw o;let{done:l,value:u}=o.result,c=u?i.createElement("script",{nonce:a,dangerouslySetInnerHTML:{__html:`window.__reactRouterContext.streamController.enqueue(${d=JSON.stringify(u),d.replace(Cn,e=>Dn[e])});`}}):null;var d;return l?i.createElement(i.Fragment,null,c,i.createElement("script",{nonce:a,dangerouslySetInnerHTML:{__html:"window.__reactRouterContext.streamController.close();"}})):i.createElement(i.Fragment,null,c,i.createElement(i.Suspense,null,i.createElement(Un,{context:e,identifier:t+1,reader:r,textDecoder:n,nonce:a})))}function Bn(e,t,r,n,i){let a=jn(e,e=>{let n=t.routes[e.route.id];Pn(n,"Route not found in manifest");let i=r[e.route.id];return{hasLoader:n.hasLoader,hasClientLoader:n.hasClientLoader,hasShouldRevalidate:Boolean(i?.shouldRevalidate)}},zn,n,i);return async e=>e.unstable_runClientMiddleware(a)}function jn(e,t,r,n,i,a=()=>!0){return async s=>{let{request:o,matches:l,fetcherKey:u}=s,c=e();if("GET"!==o.method)return async function(e,t,r){let n=e.matches.find(e=>e.unstable_shouldCallHandler());Pn(n,"No action match found");let i,a=await n.resolve(async a=>await a(async()=>{let{data:a,status:s}=await t(e,r,[n.route.id]);return i=s,Kn(a,n.route.id)}));return ct(a.result)||se(a.result)||ut(a.result)?{[n.route.id]:a}:{[n.route.id]:{type:a.type,result:te(a.result,i)}}}(s,r,i);let d=l.some(e=>{let{hasLoader:r,hasClientLoader:n}=t(e);return e.unstable_shouldCallHandler()&&r&&!n});return n||d?u?async function(e,t,r){let n=e.matches.find(e=>e.unstable_shouldCallHandler());Pn(n,"No fetcher match found");let i=n.route.id,a=await n.resolve(async n=>n(async()=>{let{data:n}=await t(e,r,[i]);return Kn(n,i)}));return{[n.route.id]:a}}(s,r,i):async function(e,t,r,n,i,a,s=()=>!0){let o=new Set,l=!1,u=e.matches.map(()=>$n()),c=$n(),d={},f=Promise.all(e.matches.map(async(t,i)=>t.resolve(async f=>{u[i].resolve();let h=t.route.id,{hasLoader:p,hasClientLoader:m,hasShouldRevalidate:g}=r(t),v=!t.unstable_shouldRevalidateArgs||null==t.unstable_shouldRevalidateArgs.actionStatus||t.unstable_shouldRevalidateArgs.actionStatus<400;if(t.unstable_shouldCallHandler(v))if(s(t)&&m){p&&(l=!0);try{let t=await f(async()=>{let{data:t}=await n(e,a,[h]);return Kn(t,h)});d[h]={type:"data",result:t}}catch(e){d[h]={type:"error",result:e}}}else{p&&o.add(h);try{let e=await f(async()=>Kn(await c.promise,h));d[h]={type:"data",result:e}}catch(e){d[h]={type:"error",result:e}}}else l||(l=null!=t.unstable_shouldRevalidateArgs&&p&&!0===g)})));if(await Promise.all(u.map(e=>e.promise)),!(!t.state.initialized&&"idle"===t.state.navigation.state)&&0!==o.size||window.__reactRouterHdrActive){let t=i&&l&&o.size>0?[...o.keys()]:void 0;try{let r=await n(e,a,t);c.resolve(r.data)}catch(e){c.reject(e)}}else c.resolve({routes:{}});return await f,await async function(e,t,r,n){try{let i,a=await e;if("routes"in a)for(let e of t)if(e.route.id in a.routes){let t=a.routes[e.route.id];if("error"in t){i=t.error;break}}void 0!==i&&Array.from(r.values()).forEach(e=>{n[e].result instanceof Mn&&(n[e].result=i)})}catch(e){}}(c.promise,e.matches,o,d),d}(s,c,t,r,n,i,a):async function(e,t,r,n){let i=e.matches.filter(e=>e.unstable_shouldCallHandler()),a={};return await Promise.all(i.map(i=>i.resolve(async s=>{try{let{hasClientLoader:o}=t(i),l=i.route.id,u=o?await s(async()=>{let{data:t}=await r(e,n,[l]);return Kn(t,l)}):await s();a[i.route.id]={type:"data",result:u}}catch(e){a[i.route.id]={type:"error",result:e}}}))),a}(s,t,r,i)}}function Hn(e){let t=e.searchParams.getAll("index");e.searchParams.delete("index");let r=[];for(let e of t)e&&r.push(e);for(let t of r)e.searchParams.append("index",t);return e}function Gn(e,t,r){let n="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname=`_root.${r}`:t&&"/"===V(n.pathname,t)?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function zn(e,t,r){let{request:n}=e,i=Gn(n.url,t,"data");"GET"===n.method&&(i=Hn(i),r&&i.searchParams.set("_routes",r.join(",")));let a=await fetch(i,await _n(n));if(404===a.status&&!a.headers.has("X-Remix-Response"))throw new ae(404,"Not Found",!0);if(204===a.status&&a.headers.has("X-Remix-Redirect"))return{status:Fn,data:{redirect:{redirect:a.headers.get("X-Remix-Redirect"),status:Number(a.headers.get("X-Remix-Status")||"302"),revalidate:"true"===a.headers.get("X-Remix-Revalidate"),reload:"true"===a.headers.get("X-Remix-Reload-Document"),replace:"true"===a.headers.get("X-Remix-Replace")}}};if(Nn.has(a.status)){let e={};return r&&"GET"!==n.method&&(e[r[0]]={data:void 0}),{status:a.status,data:{routes:e}}}Pn(a.body,"No response body to decode");try{let e,t=await Vn(a.body,window);if("GET"===n.method){let r=t.value;e=On in r?{redirect:r[On]}:{routes:r}}else{let n=t.value,i=r?.[0];Pn(i,"No routeId found for single fetch call decoding"),e="redirect"in n?{redirect:n}:{routes:{[i]:n}}}return{status:a.status,data:e}}catch(e){throw new Error("Unable to decode turbo-stream response")}}function Vn(e,t){return kn(e,{plugins:[(e,...r)=>{if("SanitizedError"===e){let[e,n,i]=r,a=Error;e&&e in t&&"function"==typeof t[e]&&(a=t[e]);let s=new a(n);return s.stack=i,{value:s}}if("ErrorResponse"===e){let[e,t,n]=r;return{value:new ae(t,n,e)}}return"SingleFetchRedirect"===e?{value:{[On]:r[0]}}:"SingleFetchClassInstance"===e?{value:r[0]}:"SingleFetchFallback"===e?{value:void 0}:void 0}]})}function Kn(e,t){if("redirect"in e){let{redirect:t,revalidate:r,reload:n,replace:i,status:a}=e.redirect;throw re(t,{status:a,headers:{...r?{"X-Remix-Revalidate":"yes"}:null,...n?{"X-Remix-Reload-Document":"yes"}:null,...i?{"X-Remix-Replace":"yes"}:null}})}let r=e.routes[t];if(null==r)throw new Mn(`No result found for routeId "${t}"`);if("error"in r)throw r.error;if("data"in r)return r.data;throw new Error(`Invalid response found for routeId "${t}"`)}function $n(){let e,t,r=new Promise((n,i)=>{e=async e=>{n(e);try{await r}catch(e){}},t=async e=>{i(e);try{await r}catch(e){}}});return{promise:r,resolve:e,reject:t}}async function qn(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(t){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Wn(e){return e.css?e.css.map(e=>({rel:"stylesheet",href:e})):[]}async function Yn(e,t){if(!e.css&&!t.links||!function(){if(void 0!==xn)return xn;let e=document.createElement("link");return xn=e.relList.supports("preload"),e=null,xn}())return;let r=[];if(e.css&&r.push(...Wn(e)),t.links&&r.push(...t.links()),0===r.length)return;let n=[];for(let e of r)Qn(e)||"stylesheet"!==e.rel||n.push({...e,rel:"preload",as:"style"});await Promise.all(n.map(Xn))}async function Xn(e){return new Promise(t=>{if(e.media&&!window.matchMedia(e.media).matches||document.querySelector(`link[rel="stylesheet"][href="${e.href}"]`))return t();let r=document.createElement("link");function n(){document.head.contains(r)&&document.head.removeChild(r)}Object.assign(r,e),r.onload=()=>{n(),t()},r.onerror=()=>{n(),t()},document.head.appendChild(r)})}function Qn(e){return null!=e&&"string"==typeof e.page}function Jn(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}function Zn(e,t,r,n,i,a){let s=(e,t)=>!r[t]||e.route.id!==r[t].route.id,o=(e,t)=>r[t].pathname!==e.pathname||r[t].route.path?.endsWith("*")&&r[t].params["*"]!==e.params["*"];return"assets"===a?t.filter((e,t)=>s(e,t)||o(e,t)):"data"===a?t.filter((t,a)=>{let l=n.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(s(t,a)||o(t,a))return!0;if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof n)return n}return!0}):[]}function ei(e,t,{includeHydrateFallback:r}={}){return n=e.map(e=>{let n=t.routes[e.route.id];if(!n)return[];let i=[n.module];return n.clientActionModule&&(i=i.concat(n.clientActionModule)),n.clientLoaderModule&&(i=i.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(i=i.concat(n.hydrateFallbackModule)),n.imports&&(i=i.concat(n.imports)),i}).flat(1),[...new Set(n)];var n}function ti(e,t){let r=new Set,n=new Set(t);return e.reduce((e,i)=>{if(t&&!Qn(i)&&"script"===i.as&&i.href&&n.has(i.href))return e;let a=JSON.stringify(function(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}(i));return r.has(a)||(r.add(a),e.push({key:a,link:i})),e},[])}function ri(){return i.createElement(Bi,{title:"Loading...",renderScripts:!0},It?i.createElement("script",{dangerouslySetInnerHTML:{__html:'\n              console.log(\n                "ðŸ’¿ Hey developer ðŸ‘‹. You can provide a way better UX than this " +\n                "when your app is loading JS modules and/or running `clientLoader` " +\n                "functions. Check out https://reactrouter.com/start/framework/route-module#hydratefallback " +\n                "for more information."\n              );\n            '}}):null)}function ni(e){let t={};return Object.values(e).forEach(e=>{if(e){let r=e.parentId||"";t[r]||(t[r]=[]),t[r].push(e)}}),t}function ii(e,t,r){let n=di(t),a=!t.HydrateFallback||r&&"root"!==e.id?"root"===e.id?ri:void 0:t.HydrateFallback,s=t.ErrorBoundary?t.ErrorBoundary:"root"===e.id?()=>i.createElement(Ui,{error:lr()}):void 0;return"root"===e.id&&t.Layout?{...n?{element:i.createElement(t.Layout,null,i.createElement(n,null))}:{Component:n},...s?{errorElement:i.createElement(t.Layout,null,i.createElement(s,null))}:{ErrorBoundary:s},...a?{hydrateFallbackElement:i.createElement(t.Layout,null,i.createElement(a,null))}:{HydrateFallback:a}}:{Component:n,ErrorBoundary:s,HydrateFallback:a}}function ai(e,t,r,n,i="",a=ni(e),s=Promise.resolve({Component:()=>null})){return(a[i]||[]).map(i=>{let o=t[i.id];Pn(o,"No `routeModule` available to create server routes");let l={...ii(i,o,n),caseSensitive:i.caseSensitive,id:i.id,index:i.index,path:i.path,handle:o.handle,lazy:n?()=>s:void 0,loader:i.hasLoader||i.hasClientLoader?()=>null:void 0},u=ai(e,t,r,n,i.id,a,s);return u.length>0&&(l.children=u),l})}function si(e,t,r,n,i,a){return ui(t,r,n,i,a,"",ni(t),e)}function oi(e,t){if("loader"===e&&!t.hasLoader||"action"===e&&!t.hasAction){let r=`You are trying to call ${"action"===e?"serverAction()":"serverLoader()"} on a route that does not have a server ${e} (routeId: "${t.id}")`;throw console.error(r),new ae(400,"Bad Request",new Error(r),!0)}}function li(e,t){let r="clientAction"===e?"a":"an",n=`Route "${t}" does not have ${r} ${e}, but you are trying to submit to it. To fix this, please add ${r} \`${e}\` function to the route`;throw console.error(n),new ae(405,"Method Not Allowed",new Error(n),!0)}function ui(e,t,r,n,i,a="",s=ni(e),o){return(s[a]||[]).map(a=>{let l=t[a.id];function u(e){return Pn("function"==typeof e,"No single fetch function available for route handler"),e()}function c(e){return a.hasLoader?u(e):Promise.resolve(null)}function d(e){if(!a.hasAction)throw li("action",a.id);return u(e)}function f(e){import(e)}function h(e){e.clientActionModule&&f(e.clientActionModule),e.clientLoaderModule&&f(e.clientLoaderModule)}async function p(e){let r=t[a.id],n=r?Yn(a,r):Promise.resolve();try{return e()}finally{await n}}let m={id:a.id,index:a.index,path:a.path};if(l){Object.assign(m,{...m,...ii(a,l,i),unstable_middleware:l.unstable_clientMiddleware,handle:l.handle,shouldRevalidate:ci(m.path,l,a,n,o)});let v=r&&r.loaderData&&a.id in r.loaderData,y=v?r?.loaderData?.[a.id]:void 0,E=r&&r.errors&&a.id in r.errors,b=E?r?.errors?.[a.id]:void 0,S=null==o&&(!0===l.clientLoader?.hydrate||!a.hasLoader);m.loader=async({request:e,params:t,context:r},n)=>{try{return await p(async()=>(Pn(l,"No `routeModule` available for critical-route loader"),l.clientLoader?l.clientLoader({request:e,params:t,context:r,async serverLoader(){if(oi("loader",a),S){if(v)return y;if(E)throw b}return c(n)}}):c(n)))}finally{S=!1}},m.loader.hydrate=fi(a.id,l.clientLoader,a.hasLoader,i),m.action=({request:e,params:t,context:r},n)=>p(async()=>{if(Pn(l,"No `routeModule` available for critical-route action"),!l.clientAction){if(i)throw li("clientAction",a.id);return d(n)}return l.clientAction({request:e,params:t,context:r,serverAction:async()=>(oi("action",a),d(n))})})}else{let T;async function w(){return T||(T=(async()=>{(a.clientLoaderModule||a.clientActionModule)&&await new Promise(e=>setTimeout(e,0));let e=async function(e,t){let r=qn(e,t),n=async function(e){if(!e.css)return;let t=Wn(e);await Promise.all(t.map(Xn))}(e),i=await r;return await Promise.all([n,Yn(e,i)]),{Component:di(i),ErrorBoundary:i.ErrorBoundary,unstable_clientMiddleware:i.unstable_clientMiddleware,clientAction:i.clientAction,clientLoader:i.clientLoader,handle:i.handle,links:i.links,meta:i.meta,shouldRevalidate:i.shouldRevalidate}}(a,t);return h(a),await e})()),await T}a.hasClientLoader||(m.loader=(e,t)=>p(()=>c(t))),a.hasClientAction||(m.action=(e,t)=>p(()=>{if(i)throw li("clientAction",a.id);return d(t)})),m.lazy={loader:a.hasClientLoader?async()=>{let{clientLoader:e}=a.clientLoaderModule?await import(a.clientLoaderModule):await w();return Pn(e,"No `clientLoader` export found"),(t,r)=>e({...t,serverLoader:async()=>(oi("loader",a),c(r))})}:void 0,action:a.hasClientAction?async()=>{let e=a.clientActionModule?import(a.clientActionModule):w();h(a);let{clientAction:t}=await e;return Pn(t,"No `clientAction` export found"),(e,r)=>t({...e,serverAction:async()=>(oi("action",a),d(r))})}:void 0,unstable_middleware:a.hasClientMiddleware?async()=>{let{unstable_clientMiddleware:e}=a.clientMiddlewareModule?await import(a.clientMiddlewareModule):await w();return Pn(e,"No `unstable_clientMiddleware` export found"),e}:void 0,shouldRevalidate:async()=>{let e=await w();return ci(m.path,e,a,n,o)},handle:async()=>(await w()).handle,Component:async()=>(await w()).Component,ErrorBoundary:a.hasErrorBoundary?async()=>(await w()).ErrorBoundary:void 0}}let g=ui(e,t,r,n,i,a.id,s,o);return g.length>0&&(m.children=g),m})}function ci(e,t,r,n,i){if(i)return function(e,t,r){let n=!1;return i=>n?t?t(i):i.defaultShouldRevalidate:(n=!0,r.has(e))}(r.id,t.shouldRevalidate,i);if(!n&&r.hasLoader&&!r.hasClientLoader){let r=e?G(e)[1].map(e=>e.paramName):[];const n=e=>r.some(t=>e.currentParams[t]!==e.nextParams[t]);if(t.shouldRevalidate){let e=t.shouldRevalidate;return t=>e({...t,defaultShouldRevalidate:n(t)})}return e=>n(e)}if(n&&t.shouldRevalidate){let e=t.shouldRevalidate;return t=>e({...t,defaultShouldRevalidate:!0})}return t.shouldRevalidate}function di(e){if(null!=e.default)return"object"==typeof e.default&&0===Object.keys(e.default).length?void 0:e.default}function fi(e,t,r,n){return n&&"root"!==e||null!=t&&(!0===t.hydrate||!0!==r)}var hi=new Set,pi=1e3,mi=new Set,gi=7680;function vi(e,t){return"lazy"===e.mode&&!0===t}function yi(e,t,r,n,i,a){if(vi(n,r))return async({path:s,patch:o,signal:l,fetcherKey:u})=>{mi.has(s)||await Ti([s],u?window.location.href:s,e,t,r,i,a,n.manifestPath,o,l)}}function Ei(e,t,r,n,a,s){i.useEffect(()=>{if(!vi(a,n)||!0===window.navigator?.connection?.saveData)return;function i(e){let t="FORM"===e.tagName?e.getAttribute("action"):e.getAttribute("href");if(!t)return;let r="A"===e.tagName?e.pathname:new URL(t,window.location.origin).pathname;mi.has(r)||hi.add(r)}async function o(){document.querySelectorAll("a[data-discover], form[data-discover]").forEach(i);let o=Array.from(hi.keys()).filter(e=>!mi.has(e)||(hi.delete(e),!1));if(0!==o.length)try{await Ti(o,null,t,r,n,s,e.basename,a.manifestPath,e.patchRoutes)}catch(e){console.error("Failed to fetch manifest patches",e)}}let l=function(e){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>e(...r),100)}}(o);o();let u=new MutationObserver(()=>l());return u.observe(document.documentElement,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["data-discover","href","action"]}),()=>u.disconnect()},[n,s,t,r,e,a])}function bi(e,t){let r=e||"/__manifest";return null==t?r:`${t}${r}`.replace(/\/+/g,"/")}var Si="react-router-manifest-version";async function Ti(e,t,r,n,i,a,s,o,l,u){let c,d=new URL(bi(o,s),window.location.origin);if(e.sort().forEach(e=>d.searchParams.append("p",e)),d.searchParams.set("version",r.version),d.toString().length>gi)return void hi.clear();try{let e=await fetch(d,{signal:u});if(!e.ok)throw new Error(`${e.status} ${e.statusText}`);if(204===e.status&&e.headers.has("X-Remix-Reload-Document")){if(!t)return void console.warn("Detected a manifest version mismatch during eager route discovery. The next navigation/fetch to an undiscovered route will result in a new document navigation to sync up with the latest manifest.");if(sessionStorage.getItem(Si)===r.version)return void console.error("Unable to discover routes due to manifest version mismatch.");sessionStorage.setItem(Si,r.version),window.location.href=t,console.warn("Detected manifest version mismatch, reloading..."),await new Promise(()=>{})}else if(e.status>=400)throw new Error(await e.text());sessionStorage.removeItem(Si),c=await e.json()}catch(e){if(u?.aborted)return;throw e}let f=new Set(Object.keys(r.routes)),h=Object.values(c).reduce((e,t)=>(t&&!f.has(t.id)&&(e[t.id]=t),e),{});Object.assign(r.routes,h),e.forEach(e=>function(e,t){if(t.size>=pi){let e=t.values().next().value;t.delete(e)}t.add(e)}(e,mi));let p=new Set;Object.values(h).forEach(e=>{!e||e.parentId&&h[e.parentId]||p.add(e.parentId)}),p.forEach(e=>l(e||null,ui(h,n,null,i,a,e)))}function wi(){let e=i.useContext(St);return Pn(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function ki(){let e=i.useContext(Tt);return Pn(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ri=i.createContext(void 0);function Li(){let e=i.useContext(Ri);return Pn(e,"You must render this element inside a <HydratedRouter> element"),e}function Ai(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function _i(e,t,r){if(r&&!Oi)return[e[0]];if(t){let r=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,r+1)}return e}Ri.displayName="FrameworkContext";var Di="data-react-router-critical-css";function Ci(){let{isSpaMode:e,manifest:t,routeModules:r,criticalCss:n}=Li(),{errors:a,matches:s}=ki(),o=_i(s,a,e),l=i.useMemo(()=>function(e,t,r){return ti(e.map(e=>{let n=t[e.route.id],i=r.routes[e.route.id];return[i&&i.css?i.css.map(e=>({rel:"stylesheet",href:e})):[],n?.links?.()||[]]}).flat(2),ei(e,r))}(o,r,t),[o,r,t]);return i.createElement(i.Fragment,null,"string"==typeof n?i.createElement("style",{[Di]:"",dangerouslySetInnerHTML:{__html:n}}):null,"object"==typeof n?i.createElement("link",{[Di]:"",rel:"stylesheet",href:n.href}):null,l.map(({key:e,link:t})=>Qn(t)?i.createElement(Ii,{key:e,...t}):i.createElement("link",{key:e,...t})))}function Ii({page:e,...t}){let{router:r}=wi(),n=i.useMemo(()=>L(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?i.createElement(Pi,{page:e,matches:n,...t}):null}function Pi({page:e,matches:t,...r}){let n=Ot(),{manifest:a,routeModules:s}=Li(),{basename:o}=wi(),{loaderData:l,matches:u}=ki(),c=i.useMemo(()=>Zn(e,t,u,a,n,"data"),[e,t,u,a,n]),d=i.useMemo(()=>Zn(e,t,u,a,n,"assets"),[e,t,u,a,n]),f=i.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let r=new Set,i=!1;if(t.forEach(e=>{let t=a.routes[e.route.id];t&&t.hasLoader&&(!c.some(t=>t.route.id===e.route.id)&&e.route.id in l&&s[e.route.id]?.shouldRevalidate||t.hasClientLoader?i=!0:r.add(e.route.id))}),0===r.size)return[];let u=Gn(e,o,"data");return i&&r.size>0&&u.searchParams.set("_routes",t.filter(e=>r.has(e.route.id)).map(e=>e.route.id).join(",")),[u.pathname+u.search]},[o,l,n,a,c,t,e,s]),h=i.useMemo(()=>ei(d,a),[d,a]),p=function(e){let{manifest:t,routeModules:r}=Li(),[n,a]=i.useState([]);return i.useEffect(()=>{let n=!1;return async function(e,t,r){return ti((await Promise.all(e.map(async e=>{let n=t.routes[e.route.id];if(n){let e=await qn(n,r);return e.links?e.links():[]}return[]}))).flat(1).filter(Jn).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}(e,t,r).then(e=>{n||a(e)}),()=>{n=!0}},[e,t,r]),n}(d);return i.createElement(i.Fragment,null,f.map(e=>i.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...r})),h.map(e=>i.createElement("link",{key:e,rel:"modulepreload",href:e,...r})),p.map(({key:e,link:t})=>i.createElement("link",{key:e,...t})))}function xi(){let{isSpaMode:e,routeModules:t}=Li(),{errors:r,matches:n,loaderData:a}=ki(),s=Ot(),o=_i(n,r,e),l=null;r&&(l=r[o[o.length-1].route.id]);let u=[],c=null,d=[];for(let e=0;e<o.length;e++){let r=o[e],n=r.route.id,i=a[n],f=r.params,h=t[n],p=[],m={id:n,data:i,meta:[],params:r.params,pathname:r.pathname,handle:r.route.handle,error:l};if(d[e]=m,h?.meta?p="function"==typeof h.meta?h.meta({data:i,params:f,location:s,matches:d,error:l}):Array.isArray(h.meta)?[...h.meta]:h.meta:c&&(p=[...c]),p=p||[],!Array.isArray(p))throw new Error("The route at "+r.route.path+" returns an invalid value. All route meta functions must return an array of meta objects.\n\nTo reference the meta function API, see https://remix.run/route/meta");m.meta=p,d[e]=m,u=[...p],c=u}return i.createElement(i.Fragment,null,u.flat().map(e=>{if(!e)return null;if("tagName"in e){let{tagName:t,...r}=e;if(!function(e){return"string"==typeof e&&/^(meta|link)$/.test(e)}(t))return console.warn(`A meta object uses an invalid tagName: ${t}. Expected either 'link' or 'meta'`),null;let n=t;return i.createElement(n,{key:JSON.stringify(r),...r})}if("title"in e)return i.createElement("title",{key:"title"},String(e.title));if("charset"in e&&(e.charSet??(e.charSet=e.charset),delete e.charset),"charSet"in e&&null!=e.charSet)return"string"==typeof e.charSet?i.createElement("meta",{key:"charSet",charSet:e.charSet}):null;if("script:ld+json"in e)try{let t=JSON.stringify(e["script:ld+json"]);return i.createElement("script",{key:`script:ld+json:${t}`,type:"application/ld+json",dangerouslySetInnerHTML:{__html:t}})}catch(e){return null}return i.createElement("meta",{key:JSON.stringify(e),...e})}))}var Oi=!1;function Mi(e){let{manifest:t,serverHandoffString:r,isSpaMode:n,renderMeta:a,routeDiscovery:s,ssr:o}=Li(),{router:l,static:u,staticContext:c}=wi(),{matches:d}=ki(),f=i.useContext(wt),h=vi(s,o);a&&(a.didRenderScripts=!0);let p=_i(d,null,n);i.useEffect(()=>{Oi=!0},[]);let m=i.useMemo(()=>{if(f)return null;let n=c?`window.__reactRouterContext = ${r};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());`:" ",a=u?`${t.hmr?.runtime?`import ${JSON.stringify(t.hmr.runtime)};`:""}${h?"":`import ${JSON.stringify(t.url)}`};\n${p.map((e,r)=>{let n=`route${r}`,i=t.routes[e.route.id];Pn(i,`Route ${e.route.id} not found in manifest`);let{clientActionModule:a,clientLoaderModule:s,clientMiddlewareModule:o,hydrateFallbackModule:l,module:u}=i,c=[...a?[{module:a,varName:`${n}_clientAction`}]:[],...s?[{module:s,varName:`${n}_clientLoader`}]:[],...o?[{module:o,varName:`${n}_clientMiddleware`}]:[],...l?[{module:l,varName:`${n}_HydrateFallback`}]:[],{module:u,varName:`${n}_main`}];return 1===c.length?`import * as ${n} from ${JSON.stringify(u)};`:[c.map(e=>`import * as ${e.varName} from "${e.module}";`).join("\n"),`const ${n} = {${c.map(e=>`...${e.varName}`).join(",")}};`].join("\n")}).join("\n")}\n  ${h?`window.__reactRouterManifest = ${JSON.stringify(function({sri:e,...t},r){let n=new Set(r.state.matches.map(e=>e.route.id)),i=r.state.location.pathname.split("/").filter(Boolean),a=["/"];for(i.pop();i.length>0;)a.push(`/${i.join("/")}`),i.pop();a.forEach(e=>{let t=L(r.routes,e,r.basename);t&&t.forEach(e=>n.add(e.route.id))});let s=[...n].reduce((e,r)=>Object.assign(e,{[r]:t.routes[r]}),{});return{...t,routes:s,sri:!!e||void 0}}(t,l),null,2)};`:""}\n  window.__reactRouterRouteModules = {${p.map((e,t)=>`${JSON.stringify(e.route.id)}:route${t}`).join(",")}};\n\nimport(${JSON.stringify(t.entry.module)});`:" ";return i.createElement(i.Fragment,null,i.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:In(n),type:void 0}),i.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:In(a),type:"module",async:!0}))},[]),g=Oi||f?[]:(v=t.entry.imports.concat(ei(p,t,{includeHydrateFallback:!0})),[...new Set(v)]);var v;let y="object"==typeof t.sri?t.sri:{};return gr(!f,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),Oi||f?null:i.createElement(i.Fragment,null,"object"==typeof t.sri?i.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:y})}}):null,h?null:i.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:y[t.url],suppressHydrationWarning:!0}),i.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:y[t.entry.module],suppressHydrationWarning:!0}),g.map(t=>i.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:y[t],suppressHydrationWarning:!0})),m)}function Fi(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}var Ni=class extends i.Component{constructor(e){super(e),this.state={error:e.error||null,location:e.location}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location?{error:e.error||null,location:e.location}:{error:e.error||t.error,location:t.location}}render(){return this.state.error?i.createElement(Ui,{error:this.state.error,isOutsideRemixApp:!0}):this.props.children}};function Ui({error:e,isOutsideRemixApp:t}){console.error(e);let r,n=i.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "ðŸ’¿ Hey developer ðŸ‘‹. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(se(e))return i.createElement(Bi,{title:"Unhandled Thrown Response!"},i.createElement("h1",{style:{fontSize:"24px"}},e.status," ",e.statusText),It?n:null);if(e instanceof Error)r=e;else{let t=null==e?"Unknown Error":"object"==typeof e&&"toString"in e?e.toString():JSON.stringify(e);r=new Error(t)}return i.createElement(Bi,{title:"Application Error!",isOutsideRemixApp:t},i.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),i.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),n)}function Bi({title:e,renderScripts:t,isOutsideRemixApp:r,children:n}){let{routeModules:a}=Li();return a.root?.Layout&&!r?n:i.createElement("html",{lang:"en"},i.createElement("head",null,i.createElement("meta",{charSet:"utf-8"}),i.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),i.createElement("title",null,e)),i.createElement("body",null,i.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},n,t?i.createElement(Mi,null):null)))}var ji="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{ji&&(window.__reactRouterVersion="7.7.0")}catch(e){}function Hi(e,t){return Se({basename:t?.basename,unstable_getContext:t?.unstable_getContext,future:t?.future,history:c({window:t?.window}),hydrationData:t?.hydrationData||zi(),routes:e,mapRouteProperties:vr,hydrationRouteProperties:yr,dataStrategy:t?.dataStrategy,patchRoutesOnNavigation:t?.patchRoutesOnNavigation,window:t?.window}).initialize()}function Gi(e,t){return Se({basename:t?.basename,unstable_getContext:t?.unstable_getContext,future:t?.future,history:d({window:t?.window}),hydrationData:t?.hydrationData||zi(),routes:e,mapRouteProperties:vr,hydrationRouteProperties:yr,dataStrategy:t?.dataStrategy,patchRoutesOnNavigation:t?.patchRoutesOnNavigation,window:t?.window}).initialize()}function zi(){let e=window?.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:Vi(e.errors)}),e}function Vi(e){if(!e)return null;let t=Object.entries(e),r={};for(let[e,n]of t)if(n&&"RouteErrorResponse"===n.__type)r[e]=new ae(n.status,n.statusText,n.data,!0===n.internal);else if(n&&"Error"===n.__type){if(n.__subType){let t=window[n.__subType];if("function"==typeof t)try{let i=new t(n.message);i.stack="",r[e]=i}catch(e){}}if(null==r[e]){let t=new Error(n.message);t.stack="",r[e]=t}}else r[e]=n;return r}function Ki({basename:e,children:t,window:r}){let n=i.useRef();null==n.current&&(n.current=c({window:r,v5Compat:!0}));let a=n.current,[s,o]=i.useState({action:a.action,location:a.location}),l=i.useCallback(e=>{i.startTransition(()=>o(e))},[o]);return i.useLayoutEffect(()=>a.listen(l),[a,l]),i.createElement(Ar,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:a})}function $i({basename:e,children:t,window:r}){let n=i.useRef();null==n.current&&(n.current=d({window:r,v5Compat:!0}));let a=n.current,[s,o]=i.useState({action:a.action,location:a.location}),l=i.useCallback(e=>{i.startTransition(()=>o(e))},[o]);return i.useLayoutEffect(()=>a.listen(l),[a,l]),i.createElement(Ar,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:a})}function qi({basename:e,children:t,history:r}){let[n,a]=i.useState({action:r.action,location:r.location}),s=i.useCallback(e=>{i.startTransition(()=>a(e))},[a]);return i.useLayoutEffect(()=>r.listen(s),[r,s]),i.createElement(Ar,{basename:e,children:t,location:n.location,navigationType:n.action,navigator:r})}qi.displayName="unstable_HistoryRouter";var Wi=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yi=i.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:n,reloadDocument:a,replace:s,state:o,target:l,to:u,preventScrollReset:c,viewTransition:d,...f},p){let m,{basename:g}=i.useContext(At),v="string"==typeof u&&Wi.test(u),y=!1;if("string"==typeof u&&v&&(m=u,ji))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),r=V(t.pathname,g);t.origin===e.origin&&null!=r?u=r+t.search+t.hash:y=!0}catch(e){h(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=Pt(u,{relative:n}),[b,S,T]=function(e,t){let r=i.useContext(Ri),[n,a]=i.useState(!1),[s,o]=i.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:c,onMouseLeave:d,onTouchStart:f}=t,h=i.useRef(null);i.useEffect(()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return h.current&&e.observe(h.current),()=>{e.disconnect()}}},[e]),i.useEffect(()=>{if(n){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[n]);let p=()=>{a(!0)},m=()=>{a(!1),o(!1)};return r?"intent"!==e?[s,h,{}]:[s,h,{onFocus:Ai(l,p),onBlur:Ai(u,m),onMouseEnter:Ai(c,p),onMouseLeave:Ai(d,m),onTouchStart:Ai(f,p)}]:[!1,h,{}]}(r,f),w=ra(u,{replace:s,state:o,target:l,preventScrollReset:c,relative:n,viewTransition:d}),k=i.createElement("a",{...f,...T,href:m||E,onClick:y||a?e:function(t){e&&e(t),t.defaultPrevented||w(t)},ref:Fi(p,S),target:l,"data-discover":v||"render"!==t?void 0:"true"});return b&&!v?i.createElement(i.Fragment,null,k,i.createElement(Ii,{page:E})):k});Yi.displayName="Link";var Xi=i.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:n=!1,style:a,to:s,viewTransition:o,children:l,...u},c){let d=Vt(s,{relative:u.relative}),f=Ot(),h=i.useContext(Tt),{navigator:p,basename:m}=i.useContext(At),g=null!=h&&ga(d)&&!0===o,v=p.encodeLocation?p.encodeLocation(d).pathname:d.pathname,y=f.pathname,E=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;t||(y=y.toLowerCase(),E=E?E.toLowerCase():null,v=v.toLowerCase()),E&&m&&(E=V(E,m)||E);const b="/"!==v&&v.endsWith("/")?v.length-1:v.length;let S,T=y===v||!n&&y.startsWith(v)&&"/"===y.charAt(b),w=null!=E&&(E===v||!n&&E.startsWith(v)&&"/"===E.charAt(v.length)),k={isActive:T,isPending:w,isTransitioning:g},R=T?e:void 0;S="function"==typeof r?r(k):[r,T?"active":null,w?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let L="function"==typeof a?a(k):a;return i.createElement(Yi,{...u,"aria-current":R,className:S,ref:c,style:L,to:s,viewTransition:o},"function"==typeof l?l(k):l)});Xi.displayName="NavLink";var Qi=i.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:s,method:o=Vr,action:l,onSubmit:u,relative:c,preventScrollReset:d,viewTransition:f,...h},p)=>{let m=sa(),g=oa(l,{relative:c}),v="get"===o.toLowerCase()?"get":"post",y="string"==typeof l&&Wi.test(l);return i.createElement("form",{ref:p,method:v,action:g,onSubmit:n?u:e=>{if(u&&u(e),e.defaultPrevented)return;e.preventDefault();let n=e.nativeEvent.submitter,i=n?.getAttribute("formmethod")||o;m(n||e.currentTarget,{fetcherKey:t,method:i,navigate:r,replace:a,state:s,relative:c,preventScrollReset:d,viewTransition:f})},...h,"data-discover":y||"render"!==e?void 0:"true"})});function Ji({getKey:e,storageKey:t,...r}){let n=i.useContext(Ri),{basename:a}=i.useContext(At),s=Ot(),o=ir();ha({getKey:e,storageKey:t});let l=i.useMemo(()=>{if(!n||!e)return null;let t=fa(s,o,a,e);return t!==s.key?t:null},[]);if(!n||n.isSpaMode)return null;let u=((e,t)=>{if(!window.history.state||!window.history.state.key){let e=Math.random().toString(32).slice(2);window.history.replaceState({key:e},"")}try{let r=JSON.parse(sessionStorage.getItem(e)||"{}")[t||window.history.state.key];"number"==typeof r&&window.scrollTo(0,r)}catch(t){console.error(t),sessionStorage.removeItem(e)}}).toString();return i.createElement("script",{...r,suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:`(${u})(${JSON.stringify(t||ca)}, ${JSON.stringify(l)})`}})}function Zi(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ea(e){let t=i.useContext(St);return f(t,Zi(e)),t}function ta(e){let t=i.useContext(Tt);return f(t,Zi(e)),t}function ra(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:s,viewTransition:o}={}){let l=Bt(),u=Ot(),c=Vt(e,{relative:s});return i.useCallback(i=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(i,t)){i.preventDefault();let t=void 0!==r?r:g(u)===g(c);l(e,{replace:t,state:n,preventScrollReset:a,relative:s,viewTransition:o})}},[u,l,c,r,n,t,e,a,s,o])}function na(e){h("undefined"!=typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=i.useRef(qr(e)),r=i.useRef(!1),n=Ot(),a=i.useMemo(()=>function(e,t){let r=qr(e);return t&&t.forEach((e,n)=>{r.has(n)||t.getAll(n).forEach(e=>{r.append(n,e)})}),r}(n.search,r.current?null:t.current),[n.search]),s=Bt(),o=i.useCallback((e,t)=>{const n=qr("function"==typeof e?e(new URLSearchParams(a)):e);r.current=!0,s("?"+n,t)},[s,a]);return[a,o]}Qi.displayName="Form",Ji.displayName="ScrollRestoration";var ia=0,aa=()=>`__${String(++ia)}__`;function sa(){let{router:e}=ea("useSubmit"),{basename:t}=i.useContext(At),r=tr("useRouteId");return i.useCallback(async(n,i={})=>{let{action:a,method:s,encType:o,formData:l,body:u}=function(e,t){let r,n,i,a,s;if($r(o=e)&&"form"===o.tagName.toLowerCase()){let s=e.getAttribute("action");n=s?V(s,t):null,r=e.getAttribute("method")||Vr,i=Xr(e.getAttribute("enctype"))||Kr,a=new FormData(e)}else if(function(e){return $r(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return $r(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||s.getAttribute("action");if(n=o?V(o,t):null,r=e.getAttribute("formmethod")||s.getAttribute("method")||Vr,i=Xr(e.getAttribute("formenctype"))||Xr(s.getAttribute("enctype"))||Kr,a=new FormData(s,e),!function(){if(null===Wr)try{new FormData(document.createElement("form"),0),Wr=!1}catch(e){Wr=!0}return Wr}()){let{name:t,type:r,value:n}=e;if("image"===r){let e=t?`${t}.`:"";a.append(`${e}x`,"0"),a.append(`${e}y`,"0")}else t&&a.append(t,n)}}else{if($r(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Vr,n=null,i=Kr,s=e}var o;return a&&"text/plain"===i&&(s=a,a=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:a,body:s}}(n,t);if(!1===i.navigate){let t=i.fetcherKey||aa();await e.fetch(t,r,i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||o,flushSync:i.flushSync})}else await e.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,r])}function oa(e,{relative:t}={}){let{basename:r}=i.useContext(At),n=i.useContext(Dt);f(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),s={...Vt(e||".",{relative:t})},o=Ot();if(null==e){s.search=o.search;let e=new URLSearchParams(s.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let r=e.toString();s.search=r?`?${r}`:""}}return e&&"."!==e||!a.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),"/"!==r&&(s.pathname="/"===s.pathname?r:X([r,s.pathname])),g(s)}function la({key:e}={}){let{router:t}=ea("useFetcher"),r=ta("useFetcher"),n=i.useContext(Rt),a=i.useContext(Dt),s=a.matches[a.matches.length-1]?.route.id;f(n,"useFetcher must be used inside a FetchersContext"),f(a,"useFetcher must be used inside a RouteContext"),f(null!=s,'useFetcher can only be used on routes that contain a unique "id"');let o=i.useId(),[l,u]=i.useState(e||o);e&&e!==l&&u(e),i.useEffect(()=>(t.getFetcher(l),()=>t.deleteFetcher(l)),[t,l]);let c=i.useCallback(async(e,r)=>{f(s,"No routeId available for fetcher.load()"),await t.fetch(l,s,e,r)},[l,s,t]),d=sa(),h=i.useCallback(async(e,t)=>{await d(e,{...t,navigate:!1,fetcherKey:l})},[l,d]),p=i.useMemo(()=>{let e=i.forwardRef((e,t)=>i.createElement(Qi,{...e,navigate:!1,fetcherKey:l,ref:t}));return e.displayName="fetcher.Form",e},[l]),m=r.fetchers.get(l)||pe,g=n.get(l);return i.useMemo(()=>({Form:p,submit:h,load:c,...m,data:g}),[p,h,c,m,g])}function ua(){let e=ta("useFetchers");return Array.from(e.fetchers.entries()).map(([e,t])=>({...t,key:e}))}var ca="react-router-scroll-positions",da={};function fa(e,t,r,n){let i=null;return n&&(i=n("/"!==r?{...e,pathname:V(e.pathname,r)||e.pathname}:e,t)),null==i&&(i=e.key),i}function ha({getKey:e,storageKey:t}={}){let{router:r}=ea("useScrollRestoration"),{restoreScrollPosition:n,preventScrollReset:a}=ta("useScrollRestoration"),{basename:s}=i.useContext(At),o=Ot(),l=ir(),u=rr();i.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),function(e){let{capture:t}={};i.useEffect(()=>{let r=null!=t?{capture:t}:void 0;return window.addEventListener("pagehide",e,r),()=>{window.removeEventListener("pagehide",e,r)}},[e,t])}(i.useCallback(()=>{if("idle"===u.state){let t=fa(o,l,s,e);da[t]=window.scrollY}try{sessionStorage.setItem(t||ca,JSON.stringify(da))}catch(e){h(!1,`Failed to save scroll positions in sessionStorage, <ScrollRestoration /> will not work properly (${e}).`)}window.history.scrollRestoration="auto"},[u.state,e,s,o,l,t])),"undefined"!=typeof document&&(i.useLayoutEffect(()=>{try{let e=sessionStorage.getItem(t||ca);e&&(da=JSON.parse(e))}catch(e){}},[t]),i.useLayoutEffect(()=>{let t=r?.enableScrollRestoration(da,()=>window.scrollY,e?(t,r)=>fa(t,r,s,e):void 0);return()=>t&&t()},[r,s,e]),i.useLayoutEffect(()=>{if(!1!==n)if("number"!=typeof n){try{if(o.hash){let e=document.getElementById(decodeURIComponent(o.hash.slice(1)));if(e)return void e.scrollIntoView()}}catch{h(!1,`"${o.hash.slice(1)}" is not a decodable element ID. The view will not scroll to it.`)}!0!==a&&window.scrollTo(0,0)}else window.scrollTo(0,n)},[o,n,a]))}function pa(e,t){let{capture:r}=t||{};i.useEffect(()=>{let t=null!=r?{capture:r}:void 0;return window.addEventListener("beforeunload",e,t),()=>{window.removeEventListener("beforeunload",e,t)}},[e,r])}function ma({when:e,message:t}){let r=fr(e);i.useEffect(()=>{"blocked"===r.state&&(window.confirm(t)?setTimeout(r.proceed,0):r.reset())},[r,t]),i.useEffect(()=>{"blocked"!==r.state||e||r.reset()},[r,e])}function ga(e,t={}){let r=i.useContext(kt);f(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=ea("useViewTransitionState"),a=Vt(e,{relative:t.relative});if(!r.isTransitioning)return!1;let s=V(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=V(r.nextLocation.pathname,n)||r.nextLocation.pathname;return null!=H(a.pathname,o)||null!=H(a.pathname,s)}function va({basename:e,children:t,location:r="/"}){"string"==typeof r&&(r=v(r));let n={pathname:r.pathname||"/",search:r.search||"",hash:r.hash||"",state:null!=r.state?r.state:null,key:r.key||"default"},a=Sa();return i.createElement(Ar,{basename:e,children:t,location:n,navigationType:"POP",navigator:a,static:!0})}function ya({context:e,router:t,hydrate:r=!0,nonce:n}){f(t&&e,"You must provide `router` and `context` to <StaticRouterProvider>");let a={router:t,navigator:Sa(),static:!0,staticContext:e,basename:e.basename||"/"},s=new Map,o="";if(!1!==r){let t={loaderData:e.loaderData,actionData:e.actionData,errors:ba(e.errors)};o=`window.__staticRouterHydrationData = JSON.parse(${JSON.stringify(JSON.stringify(t)).replace(_a,e=>Aa[e])});`}let{state:l}=a.router;return i.createElement(i.Fragment,null,i.createElement(St.Provider,{value:a},i.createElement(Tt.Provider,{value:l},i.createElement(Rt.Provider,{value:s},i.createElement(kt.Provider,{value:{isTransitioning:!1}},i.createElement(Ar,{basename:a.basename,location:l.location,navigationType:l.historyAction,navigator:a.navigator,static:a.static},i.createElement(Ea,{routes:t.routes,future:t.future,state:l})))))),o?i.createElement("script",{suppressHydrationWarning:!0,nonce:n,dangerouslySetInnerHTML:{__html:o}}):null)}function Ea({routes:e,future:t,state:r}){return $t(e,void 0,r,t)}function ba(e){if(!e)return null;let t=Object.entries(e),r={};for(let[e,n]of t)se(n)?r[e]={...n,__type:"RouteErrorResponse"}:n instanceof Error?r[e]={message:n.message,__type:"Error",..."Error"!==n.name?{__subType:n.name}:{}}:r[e]=n;return r}function Sa(){return{createHref:ka,encodeLocation:Ra,push(e){throw new Error(`You cannot use navigator.push() on the server because it is a stateless environment. This error was probably triggered when you did a \`navigate(${JSON.stringify(e)})\` somewhere in your app.`)},replace(e){throw new Error(`You cannot use navigator.replace() on the server because it is a stateless environment. This error was probably triggered when you did a \`navigate(${JSON.stringify(e)}, { replace: true })\` somewhere in your app.`)},go(e){throw new Error(`You cannot use navigator.go() on the server because it is a stateless environment. This error was probably triggered when you did a \`navigate(${e})\` somewhere in your app.`)},back(){throw new Error("You cannot use navigator.back() on the server because it is a stateless environment.")},forward(){throw new Error("You cannot use navigator.forward() on the server because it is a stateless environment.")}}}function Ta(e,t){return Te(e,{...t,mapRouteProperties:vr})}function wa(e,t,r={}){let n={},i=R(e,vr,void 0,n),a=t.matches.map(e=>{let t=n[e.route.id]||e.route;return{...e,route:t}}),s=e=>`You cannot use router.${e}() on the server because it is a stateless environment`;return{get basename(){return t.basename},get future(){return{unstable_middleware:!1,...r?.future}},get state(){return{historyAction:"POP",location:t.location,matches:a,loaderData:t.loaderData,actionData:t.actionData,errors:t.errors,initialized:!0,navigation:he,restoreScrollPosition:null,preventScrollReset:!1,revalidation:"idle",fetchers:new Map,blockers:new Map}},get routes(){return i},get window(){},initialize(){throw s("initialize")},subscribe(){throw s("subscribe")},enableScrollRestoration(){throw s("enableScrollRestoration")},navigate(){throw s("navigate")},fetch(){throw s("fetch")},revalidate(){throw s("revalidate")},createHref:ka,encodeLocation:Ra,getFetcher:()=>pe,deleteFetcher(){throw s("deleteFetcher")},dispose(){throw s("dispose")},getBlocker:()=>me,deleteBlocker(){throw s("deleteBlocker")},patchRoutes(){throw s("patchRoutes")},_internalFetchControllers:new Map,_internalSetRoutes(){throw s("_internalSetRoutes")},_internalSetStateDoNotUseOrYouWillBreakYourApp(){throw s("_internalSetStateDoNotUseOrYouWillBreakYourApp")}}}function ka(e){return"string"==typeof e?e:g(e)}function Ra(e){let t="string"==typeof e?e:g(e);t=t.replace(/ $/,"%20");let r=La.test(t)?new URL(t):new URL(t,"http://localhost");return{pathname:r.pathname,search:r.search,hash:r.hash}}var La=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Aa={"&":"\\u0026",">":"\\u003e","<":"\\u003c","\u2028":"\\u2028","\u2029":"\\u2029"},_a=/[&><\u2028\u2029]/g},473:e=>{!function t(r){e.exports=function(){"use strict";function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function n(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(null,arguments)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,d(e,t)}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){i(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function f(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function h(e){var t="function"==typeof Map?new Map:void 0;return h=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(l())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var i=new(e.bind.apply(e,n));return r&&d(i,r.prototype),i}(e,arguments,s(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,e)},h(e)}function p(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var m,g={exports:{}};var v,y=p((m||(m=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,n,a,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new i(n,a||e,s),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,s=new Array(a);i<a;i++)s[i]=n[i].fn;return s},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,i,a,s){var o=r?r+e:e;if(!this._events[o])return!1;var l,u,c=this._events[o],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,a),!0;case 6:return c.fn.call(c.context,t,n,i,a,s),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var f,h=c.length;for(u=0;u<h;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,n);break;case 4:c[u].fn.call(c[u].context,t,n,i);break;default:if(!l)for(f=1,l=new Array(d-1);f<d;f++)l[f-1]=arguments[f];c[u].fn.apply(c[u].context,l)}}return!0},o.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||s(this,a);else{for(var l=0,u=[],c=o.length;l<c;l++)(o[l].fn!==t||i&&!o[l].once||n&&o[l].context!==n)&&u.push(o[l]);u.length?this._events[a]=1===u.length?u[0]:u:s(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(g)),g.exports)),E={exports:{}};var b=(v||(v=1,function(e){var t,r,n,i,a;t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,i=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=a.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=a.normalizePath(i.path),a.buildURLFromParts(i)}var s=a.parseURL(t);if(!s)throw new Error("Error trying to parse relative URL.");if(s.scheme)return n.alwaysNormalize?(s.path=a.normalizePath(s.path),a.buildURLFromParts(s)):t;var o=a.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=r.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};if(!s.netLoc&&(u.netLoc=o.netLoc,"/"!==s.path[0]))if(s.path){var c=o.path,d=c.substring(0,c.lastIndexOf("/")+1)+s.path;u.path=a.normalizePath(d)}else u.path=o.path,s.params||(u.params=o.params,s.query||(u.query=o.query));return null===u.path&&(u.path=n.alwaysNormalize?a.normalizePath(s.path):s.path),a.buildURLFromParts(u)},parseURL:function(e){var r=t.exec(e);return r?{scheme:r[1]||"",netLoc:r[2]||"",path:r[3]||"",params:r[4]||"",query:r[5]||"",fragment:r[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(i,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=a}(E)),E.exports),S=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},T=Number.isSafeInteger||function(e){return"number"==typeof e&&Math.abs(e)<=w},w=Number.MAX_SAFE_INTEGER||9007199254740991,k=function(e){return e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError",e}({}),R=function(e){return e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",e.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",e.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_PARSING_ERROR="levelParsingError",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.FRAG_GAP="fragGap",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.ASSET_LIST_LOAD_ERROR="assetListLoadError",e.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",e.ASSET_LIST_PARSING_ERROR="assetListParsingError",e.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.ATTACH_MEDIA_ERROR="attachMediaError",e.UNKNOWN="unknown",e}({}),L=function(e){return e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.MEDIA_ENDED="hlsMediaEnded",e.STALL_RESOLVED="hlsStallResolved",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFERED_TO_END="hlsBufferedToEnd",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached",e.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",e.ASSET_LIST_LOADING="hlsAssetListLoading",e.ASSET_LIST_LOADED="hlsAssetListLoaded",e.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",e.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",e.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",e.INTERSTITIAL_STARTED="hlsInterstitialStarted",e.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",e.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",e.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",e.INTERSTITIAL_ENDED="hlsInterstitialEnded",e.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",e.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",e.EVENT_CUE_ENTER="hlsEventCueEnter",e}({}),A="manifest",_="level",D="audioTrack",C="subtitleTrack",I="main",P="audio",x="subtitle",O=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=r}var t=e.prototype;return t.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_},e}(),M=function(){function e(e,t,r,n){void 0===n&&(n=100),this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new O(e),this.fast_=new O(t),this.defaultTTFB_=n,this.ttfb_=new O(e)}var t=e.prototype;return t.update=function(e,t){var r=this.slow_,n=this.fast_,i=this.ttfb_;r.halfLife!==e&&(this.slow_=new O(e,r.getEstimate(),r.getTotalWeight())),n.halfLife!==t&&(this.fast_=new O(t,n.getEstimate(),n.getTotalWeight())),i.halfLife!==e&&(this.ttfb_=new O(e,i.getEstimate(),i.getTotalWeight()))},t.sample=function(e,t){var r=(e=Math.max(e,this.minDelayMs_))/1e3,n=8*t/r;this.fast_.sample(r,n),this.slow_.sample(r,n)},t.sampleTTFB=function(e){var t=e/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(r,Math.max(e,5))},t.canEstimate=function(){return this.fast_.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.getEstimateTTFB=function(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_},t.destroy=function(){},n(e,[{key:"defaultEstimate",get:function(){return this.defaultEstimate_}}])}(),F=function(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;var r="["+e+"]:";this.trace=N,this.debug=t.debug.bind(null,r),this.log=t.log.bind(null,r),this.warn=t.warn.bind(null,r),this.info=t.info.bind(null,r),this.error=t.error.bind(null,r)},N=function(){},U={trace:N,debug:N,log:N,warn:N,info:N,error:N};function B(){return a({},U)}function j(e,t,r){return t[e]?t[e].bind(t):function(e,t){var r=self.console[e];return r?r.bind(self.console,(t?"["+t+"] ":"")+"["+e+"] >"):N}(e,r)}var H=B();function G(e,t,r){var n=B();if("object"==typeof console&&!0===e||"object"==typeof e){var i=["debug","log","info","warn","error"];i.forEach(function(t){n[t]=j(t,e,r)});try{n.log('Debug logs enabled for "'+t+'" in hls.js version 1.6.7')}catch(e){return B()}i.forEach(function(t){H[t]=j(t,e)})}else a(H,n);return n}var z=H;function V(e){if(void 0===e&&(e=!0),"undefined"!=typeof self)return(e||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function K(e,t){var r=Object.keys(e),n=Object.keys(t),i=r.length,a=n.length;return!i||!a||i===a&&!r.some(function(e){return-1===n.indexOf(e)})}function $(e,t){if(void 0===t&&(t=!1),"undefined"!=typeof TextDecoder){var r=new TextDecoder("utf-8").decode(e);if(t){var n=r.indexOf("\0");return-1!==n?r.substring(0,n):r}return r.replace(/\0/g,"")}for(var i,a,s,o=e.length,l="",u=0;u<o;){if(0===(i=e[u++])&&t)return l;if(0!==i&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(i);break;case 12:case 13:a=e[u++],l+=String.fromCharCode((31&i)<<6|63&a);break;case 14:a=e[u++],s=e[u++],l+=String.fromCharCode((15&i)<<12|(63&a)<<6|63&s)}}return l}var q=function(e){for(var t="",r=0;r<e.length;r++){var n=e[r].toString(16);n.length<2&&(n="0"+n),t+=n}return t};function W(e){return Uint8Array.from(e.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}var Y=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}},X="audio",Q="video",J="audiovideo",Z=function(){function e(e){var t,r,n;this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,"string"==typeof e&&(e={url:e}),this.base=e,(n=ne(t=this,r="stats"))&&(n.enumerable=!0,Object.defineProperty(t,r,n))}var t=e.prototype;return t.setByteRange=function(e,t){var r,n=e.split("@",2);r=1===n.length?(null==t?void 0:t.byteRangeEndOffset)||0:parseInt(n[1]),this._byteRange=[r,parseInt(n[0])+r]},t.clearElementaryStreamInfo=function(){var e=this.elementaryStreams;e[X]=null,e[Q]=null,e[J]=null},n(e,[{key:"baseurl",get:function(){return this.base.url}},{key:"byteRange",get:function(){return null===this._byteRange?[]:this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"elementaryStreams",get:function(){var e;return null===this._streams&&(this._streams=((e={})[X]=null,e[Q]=null,e[J]=null,e)),this._streams},set:function(e){this._streams=e}},{key:"hasStats",get:function(){return null!==this._stats}},{key:"hasStreams",get:function(){return null!==this._streams}},{key:"stats",get:function(){return null===this._stats&&(this._stats=new Y),this._stats},set:function(e){this._stats=e}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=b.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(e){this._url=e}}])}();function ee(e){return"initSegment"!==e.sn}var te=function(e){function t(t,r){var n;return(n=e.call(this,r)||this)._decryptdata=null,n._programDateTime=null,n._ref=null,n._bitrate=void 0,n.rawProgramDateTime=null,n.tagList=[],n.duration=0,n.sn=0,n.levelkeys=void 0,n.type=void 0,n.loader=null,n.keyLoader=null,n.level=-1,n.cc=0,n.startPTS=void 0,n.endPTS=void 0,n.startDTS=void 0,n.endDTS=void 0,n.start=0,n.playlistOffset=0,n.deltaPTS=void 0,n.maxStartPTS=void 0,n.minEndPTS=void 0,n.data=void 0,n.bitrateTest=!1,n.title=null,n.initSegment=null,n.endList=void 0,n.gap=void 0,n.urlId=0,n.type=t,n}o(t,e);var r=t.prototype;return r.addStart=function(e){this.setStart(this.start+e)},r.setStart=function(e){this.start=e,this._ref&&(this._ref.start=e)},r.setDuration=function(e){this.duration=e,this._ref&&(this._ref.duration=e)},r.setKeyFormat=function(e){if(this.levelkeys){var t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}},r.abortRequests=function(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()},r.setElementaryStreamInfo=function(e,t,r,n,i,a){void 0===a&&(a=!1);var s=this.elementaryStreams,o=s[e];o?(o.startPTS=Math.min(o.startPTS,t),o.endPTS=Math.max(o.endPTS,r),o.startDTS=Math.min(o.startDTS,n),o.endDTS=Math.max(o.endDTS,i)):s[e]={startPTS:t,endPTS:r,startDTS:n,endDTS:i,partial:a}},n(t,[{key:"byteLength",get:function(){if(this.hasStats){var e=this.stats.total;if(e)return e}if(this.byteRange){var t=this.byteRange[0],r=this.byteRange[1];if(S(t)&&S(r))return r-t}return null}},{key:"bitrate",get:function(){return this.byteLength?8*this.byteLength/this.duration:this._bitrate?this._bitrate:null},set:function(e){this._bitrate=e}},{key:"decryptdata",get:function(){if(!this.levelkeys&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{var t=Object.keys(this.levelkeys);if(1===t.length)return this._decryptdata=this.levelkeys[t[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;var e=S(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){var t=Object.keys(this.levelkeys),r=t.length;if(r>1||1===r&&this.levelkeys[t[0]].encrypted)return!0}return!1}},{key:"programDateTime",get:function(){return null===this._programDateTime&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime},set:function(e){S(e)?this._programDateTime=e:this._programDateTime=this.rawProgramDateTime=null}},{key:"ref",get:function(){return ee(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}}])}(Z),re=function(e){function t(t,r,n,i,a){var s;(s=e.call(this,n)||this).fragOffset=0,s.duration=0,s.gap=!1,s.independent=!1,s.relurl=void 0,s.fragment=void 0,s.index=void 0,s.duration=t.decimalFloatingPoint("DURATION"),s.gap=t.bool("GAP"),s.independent=t.bool("INDEPENDENT"),s.relurl=t.enumeratedString("URI"),s.fragment=r,s.index=i;var o=t.enumeratedString("BYTERANGE");return o&&s.setByteRange(o,a),a&&(s.fragOffset=a.fragOffset+a.duration),s}return o(t,e),n(t,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var e=this.elementaryStreams;return!!(e.audio||e.video||e.audiovideo)}}])}(Z);function ne(e,t){var r=Object.getPrototypeOf(e);if(r)return Object.getOwnPropertyDescriptor(r,t)||ne(r,t)}var ie=Math.pow(2,32)-1,ae=[].push,se={video:1,audio:2,id3:3,text:4};function oe(e){return String.fromCharCode.apply(null,e)}function le(e,t){var r=e[t]<<8|e[t+1];return r<0?65536+r:r}function ue(e,t){var r=de(e,t);return r<0?4294967296+r:r}function ce(e,t){var r=ue(e,t);return(r*=Math.pow(2,32))+ue(e,t+4)}function de(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function fe(e,t){var r=[];if(!t.length)return r;for(var n=e.byteLength,i=0;i<n;){var a=ue(e,i),s=a>1?i+a:n;if(oe(e.subarray(i+4,i+8))===t[0])if(1===t.length)r.push(e.subarray(i+8,s));else{var o=fe(e.subarray(i+8,s),t.slice(1));o.length&&ae.apply(r,o)}i=s}return r}function he(e){var t=[],r=e[0],n=8,i=ue(e,n);n+=4;var a=0,s=0;0===r?(a=ue(e,n),s=ue(e,n+4),n+=8):(a=ce(e,n),s=ce(e,n+8),n+=16),n+=2;var o=e.length+s,l=le(e,n);n+=2;for(var u=0;u<l;u++){var c=n,d=ue(e,c);c+=4;var f=2147483647&d;if(1==(2147483648&d)>>>31)return z.warn("SIDX has hierarchical references (not supported)"),null;var h=ue(e,c);c+=4,t.push({referenceSize:f,subsegmentDuration:h,info:{duration:h/i,start:o,end:o+f-1}}),o+=f,n=c+=4}return{earliestPresentationTime:a,timescale:i,version:r,referencesCount:l,references:t}}function pe(e){for(var t=[],r=fe(e,["moov","trak"]),n=0;n<r.length;n++){var i=r[n],a=fe(i,["tkhd"])[0];if(a){var s=a[0],o=ue(a,0===s?12:20),l=fe(i,["mdia","mdhd"])[0];if(l){var u=ue(l,0===(s=l[0])?12:20),d=fe(i,["mdia","hdlr"])[0];if(d){var f=oe(d.subarray(8,12)),h={soun:X,vide:Q}[f],p=me(fe(i,["mdia","minf","stbl","stsd"])[0]);h?(t[o]={timescale:u,type:h,stsd:p},t[h]=c({timescale:u,id:o},p)):t[o]={timescale:u,type:f,stsd:p}}}}}return fe(e,["moov","mvex","trex"]).forEach(function(e){var r=ue(e,4),n=t[r];n&&(n.default={duration:ue(e,12),flags:ue(e,20)})}),t}function me(e){var t,r=e.subarray(8),n=r.subarray(86),i=oe(r.subarray(4,8)),a=i,s="enca"===i||"encv"===i;if(s){var o=fe(r,[i])[0];fe(o.subarray("enca"===i?28:78),["sinf"]).forEach(function(e){var t=fe(e,["schm"])[0];if(t){var r=oe(t.subarray(4,8));if("cbcs"===r||"cenc"===r){var n=fe(e,["frma"])[0];n&&(a=oe(n))}}})}var l=a;switch(a){case"avc1":case"avc2":case"avc3":case"avc4":var u=fe(n,["avcC"])[0];u&&u.length>3&&(a+="."+ye(u[1])+ye(u[2])+ye(u[3]),t=ge("avc1"===l?"dva1":"dvav",n));break;case"mp4a":var c=fe(r,[i])[0],d=fe(c.subarray(28),["esds"])[0];if(d&&d.length>7){var f=4;if(3!==d[f++])break;f=ve(d,f),f+=2;var h=d[f++];if(128&h&&(f+=2),64&h&&(f+=d[f++]),4!==d[f++])break;f=ve(d,f);var p=d[f++];if(64!==p)break;if(a+="."+ye(p),f+=12,5!==d[f++])break;f=ve(d,f);var m=d[f++],g=(248&m)>>3;31===g&&(g+=1+((7&m)<<3)+((224&d[f])>>5)),a+="."+g}break;case"hvc1":case"hev1":var v=fe(n,["hvcC"])[0];if(v&&v.length>12){var y=v[1],E=["","A","B","C"][y>>6],b=31&y,S=ue(v,2),T=(32&y)>>5?"H":"L",w=v[12],k=v.subarray(6,12);a+="."+E+b,a+="."+function(e){for(var t=0,r=0;r<32;r++)t|=(e>>r&1)<<31-r;return t>>>0}(S).toString(16).toUpperCase(),a+="."+T+w;for(var R="",L=k.length;L--;){var A=k[L];(A||R)&&(R="."+A.toString(16).toUpperCase()+R)}a+=R}t=ge("hev1"==l?"dvhe":"dvh1",n);break;case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":a=ge(a,n)||a;break;case"vp09":var _=fe(n,["vpcC"])[0];if(_&&_.length>6){var D=_[4],C=_[5],I=_[6]>>4&15;a+="."+Ee(D)+"."+Ee(C)+"."+Ee(I)}break;case"av01":var P=fe(n,["av1C"])[0];if(P&&P.length>2){var x=P[1]>>>5,O=31&P[1],M=P[2]>>>7?"H":"M",F=(64&P[2])>>6,N=(32&P[2])>>5,U=2===x&&F?N?12:10:F?10:8,B=(16&P[2])>>4,j=(8&P[2])>>3,H=(4&P[2])>>2,G=3&P[2];a+="."+x+"."+Ee(O)+M+"."+Ee(U)+"."+B+"."+j+H+G+"."+Ee(1)+"."+Ee(1)+"."+Ee(1)+".0",t=ge("dav1",n)}}return{codec:a,encrypted:s,supplemental:t}}function ge(e,t){var r=fe(t,["dvvC"]),n=r.length?r[0]:fe(t,["dvcC"])[0];if(n){var i=n[2]>>1&127,a=n[2]<<5&32|n[3]>>3&31;return e+"."+Ee(i)+"."+Ee(a)}}function ve(e,t){for(var r=t+5;128&e[t++]&&t<r;);return t}function ye(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function Ee(e){return(e<10?"0":"")+e}function be(e,t){if(!e||!t)return e;var r=t.keyId;return r&&t.isCommonEncryption&&fe(e,["moov","trak"]).forEach(function(e){var t=fe(e,["mdia","minf","stbl","stsd"])[0].subarray(8),n=fe(t,["enca"]),i=n.length>0;i||(n=fe(t,["encv"])),n.forEach(function(e){fe(i?e.subarray(28):e.subarray(78),["sinf"]).forEach(function(e){var t=function(e){var t=fe(e,["schm"])[0];if(t){var r=oe(t.subarray(4,8));if("cbcs"===r||"cenc"===r)return fe(e,["schi","tenc"])[0]}return null}(e);if(t){var n=t.subarray(8,24);n.some(function(e){return 0!==e})||(z.log("[eme] Patching keyId in 'enc"+(i?"a":"v")+">sinf>>tenc' box: "+q(n)+" -> "+q(r)),t.set(r,8))}})})}),e}function Se(e,t){var r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function Te(e,t){var r=[],n=t.samples,i=t.timescale,a=t.id,s=!1;return fe(n,["moof"]).map(function(o){var l=o.byteOffset-8;fe(o,["traf"]).map(function(o){var u=fe(o,["tfdt"]).map(function(e){var t=e[0],r=ue(e,4);return 1===t&&(r*=Math.pow(2,32),r+=ue(e,8)),r/i})[0];return void 0!==u&&(e=u),fe(o,["tfhd"]).map(function(u){var c=ue(u,4),d=16777215&ue(u,0),f=0,h=!!(16&d),p=0,m=!!(32&d),g=8;c===a&&(!!(1&d)&&(g+=8),!!(2&d)&&(g+=4),!!(8&d)&&(f=ue(u,g),g+=4),h&&(p=ue(u,g),g+=4),m&&(g+=4),"video"===t.type&&(s=we(t.codec)),fe(o,["trun"]).map(function(a){var o=a[0],u=16777215&ue(a,0),c=!!(1&u),d=0,h=!!(4&u),m=!!(256&u),g=0,v=!!(512&u),y=0,E=!!(1024&u),b=!!(2048&u),S=0,T=ue(a,4),w=8;c&&(d=ue(a,w),w+=4),h&&(w+=4);for(var k=d+l,R=0;R<T;R++){if(m?(g=ue(a,w),w+=4):g=f,v?(y=ue(a,w),w+=4):y=p,E&&(w+=4),b&&(S=0===o?ue(a,w):de(a,w),w+=4),t.type===Q)for(var L=0;L<y;){var A=ue(n,k);ke(s,n[k+=4])&&Re(n.subarray(k,k+A),s?2:1,e+S/i,r),k+=A,L+=A+4}e+=g/i}}))})})}),r}function we(e){if(!e)return!1;var t=e.substring(0,4);return"hvc1"===t||"hev1"===t||"dvh1"===t||"dvhe"===t}function ke(e,t){if(e){var r=t>>1&63;return 39===r||40===r}return 6==(31&t)}function Re(e,t,r,n){var i=Le(e),a=0;a+=t;for(var s=0,o=0,l=0;a<i.length;){s=0;do{if(a>=i.length)break;s+=l=i[a++]}while(255===l);o=0;do{if(a>=i.length)break;o+=l=i[a++]}while(255===l);var u=i.length-a,c=a;if(o<u)a+=o;else if(o>u){z.error("Malformed SEI payload. "+o+" is too small, only "+u+" bytes left to parse.");break}if(4===s){if(181===i[c++]){var d=le(i,c);if(c+=2,49===d){var f=ue(i,c);if(c+=4,1195456820===f){var h=i[c++];if(3===h){var p=i[c++],m=64&p,g=m?2+3*(31&p):0,v=new Uint8Array(g);if(m){v[0]=p;for(var y=1;y<g;y++)v[y]=i[c++]}n.push({type:h,payloadType:s,pts:r,bytes:v})}}}}}else if(5===s&&o>16){for(var E=[],b=0;b<16;b++){var S=i[c++].toString(16);E.push(1==S.length?"0"+S:S),3!==b&&5!==b&&7!==b&&9!==b||E.push("-")}for(var T=o-16,w=new Uint8Array(T),k=0;k<T;k++)w[k]=i[c++];n.push({payloadType:s,pts:r,uuid:E.join(""),userData:$(w),userDataBytes:w})}}}function Le(e){for(var t=e.byteLength,r=[],n=1;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(r.push(n+2),n+=2):n++;if(0===r.length)return e;var i=t-r.length,a=new Uint8Array(i),s=0;for(n=0;n<i;s++,n++)s===r[0]&&(s++,r.shift()),a[n]=e[s];return a}function Ae(e,t,r){if(16!==e.byteLength)throw new RangeError("Invalid system id");var n,i;n=new Uint8Array,i=new Uint8Array;var a=new Uint8Array(4);return r&&r.byteLength>0&&new DataView(a.buffer).setUint32(0,r.byteLength,!1),function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var i=r.length,a=8,s=i;s--;)a+=r[s].byteLength;var o=new Uint8Array(a);for(o[0]=a>>24&255,o[1]=a>>16&255,o[2]=a>>8&255,o[3]=255&a,o.set(e,4),s=0,a=8;s<i;s++)o.set(r[s],a),a+=r[s].byteLength;return o}([112,115,115,104],new Uint8Array([0,0,0,0]),e,i,n,a,r||new Uint8Array)}var _e=function(){return/\(Windows.+Firefox\//i.test(navigator.userAgent)},De={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function Ce(e,t){var r=De[t];return!!r&&!!r[e.slice(0,4)]}function Ie(e,t,r){return void 0===r&&(r=!0),!e.split(",").some(function(e){return!Pe(e,t,r)})}function Pe(e,t,r){var n;void 0===r&&(r=!0);var i=V(r);return null!=(n=null==i?void 0:i.isTypeSupported(xe(e,t)))&&n}function xe(e,t){return t+"/mp4;codecs="+e}function Oe(e){if(e){var t=e.substring(0,4);return De.video[t]}return 2}function Me(e){var t=_e();return e.split(",").reduce(function(e,r){var n=t&&we(r)?9:De.video[r];return n?(2*n+e)/(e?3:2):(De.audio[r]+e)/(e?2:1)},0)}var Fe={};var Ne=/flac|opus|mp4a\.40\.34/i;function Ue(e,t){return void 0===t&&(t=!0),e.replace(Ne,function(e){return function(e,t){if(void 0===t&&(t=!0),Fe[e])return Fe[e];for(var r={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[e],n=0;n<r.length;n++){var i;if(Pe(r[n],"audio",t))return Fe[e]=r[n],r[n];if("mp3"===r[n]&&null!=(i=V(t))&&i.isTypeSupported("audio/mpeg"))return""}return e}(e.toLowerCase(),t)})}function Be(e,t){if(e&&(e.length>4||-1!==["ac-3","ec-3","alac","fLaC","Opus"].indexOf(e))&&(je(e,"audio")||je(e,"video")))return e;if(t){var r=t.split(",");if(r.length>1){if(e)for(var n=r.length;n--;)if(r[n].substring(0,4)===e.substring(0,4))return r[n];return r[0]}}return t||e}function je(e,t){return Ce(e,t)&&Pe(e,t)}function He(e){if(e.startsWith("av01.")){for(var t=e.split("."),r=["0","111","01","01","01","0"],n=t.length;n>4&&n<10;n++)t[n]=r[n-4];return t.join(".")}return e}function Ge(e){var t=V(e)||{isTypeSupported:function(){return!1}};return{mpeg:t.isTypeSupported("audio/mpeg"),mp3:t.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:t.isTypeSupported('audio/mp4; codecs="ac-3"')}}function ze(e){return e.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}var Ve={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function Ke(e,t){return{supported:!1,configurations:t,decodingInfoResults:[{supported:!1,smooth:!1,powerEfficient:!1}],error:e}}function $e(e,t,r,n){void 0===n&&(n={});var i=e.videoCodec;if(!i&&!e.audioCodec||!r)return Promise.resolve(Ve);for(var a=[],s=function(e){var t,r=null==(t=e.videoCodec)?void 0:t.split(","),n=We(e),i=e.width||640,a=e.height||480,s=e.frameRate||30,o=e.videoRange.toLowerCase();return r?r.map(function(e){var t={contentType:xe(He(e),"video"),width:i,height:a,bitrate:n,framerate:s};return"sdr"!==o&&(t.transferFunction=o),t}):[]}(e),o=s.length,l=function(e,t,r){var n,i=null==(n=e.audioCodec)?void 0:n.split(","),a=We(e);return i&&e.audioGroups?e.audioGroups.reduce(function(e,n){var s,o=n?null==(s=t.groups[n])?void 0:s.tracks:null;return o?o.reduce(function(e,t){if(t.groupId===n){var s=parseFloat(t.channels||"");i.forEach(function(t){var n={contentType:xe(t,"audio"),bitrate:r?qe(t,a):a};s&&(n.channels=""+s),e.push(n)})}return e},e):e},[]):[]}(e,t,o>0),u=l.length,c=o||1*u||1;c--;){var d={type:"media-source"};if(o&&(d.video=s[c%o]),u){d.audio=l[c%u];var f=d.audio.bitrate;d.video&&f&&(d.video.bitrate-=f)}a.push(d)}if(i){var h=navigator.userAgent;if(i.split(",").some(function(e){return we(e)})&&_e())return Promise.resolve(Ke(new Error("Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: ("+h+")"),a))}return Promise.all(a.map(function(e){var t,i,a,s,o=(i="",a=(t=e).audio,(s=t.video)&&(i+=ze(s.contentType)+"_r"+s.height+"x"+s.width+"f"+Math.ceil(s.framerate)+(s.transferFunction||"sd")+"_"+Math.ceil(s.bitrate/1e5)),a&&(i+=(s?"_":"")+ze(a.contentType)+"_c"+a.channels),i);return n[o]||(n[o]=r.decodingInfo(e))})).then(function(e){return{supported:!e.some(function(e){return!e.supported}),configurations:a,decodingInfoResults:e}}).catch(function(e){return{supported:!1,configurations:a,decodingInfoResults:[],error:e}})}function qe(e,t){if(t<=1)return 1;var r=128e3;return"ec-3"===e?r=768e3:"ac-3"===e&&(r=64e4),Math.min(t/2,r)}function We(e){return 1e3*Math.ceil(Math.max(.9*e.bitrate,e.averageBitrate)/1e3)||1}var Ye=["NONE","TYPE-0","TYPE-1",null];var Xe=["SDR","PQ","HLG"];var Qe="",Je="YES",Ze="v2";function et(e){var t=e.canSkipUntil,r=e.canSkipDateRanges,n=e.age;return t&&n<t/2?r?Ze:Je:Qe}var tt=function(){function e(e,t,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=r}return e.prototype.addDirectives=function(e){var t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href},e}(),rt=function(){function e(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(function(e){return!!e}).map(function(e){return e.substring(0,4)}).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;var r=null==(t=e.supplemental)?void 0:t.videoCodec;r&&r!==e.videoCodec&&(this.codecSet+=","+r.substring(0,4))}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}var t=e.prototype;return t.hasAudioGroup=function(e){return nt(this._audioGroups,e)},t.hasSubtitleGroup=function(e){return nt(this._subtitleGroups,e)},t.addGroupId=function(e,t){if(t)if("audio"===e){var r=this._audioGroups;r||(r=this._audioGroups=[]),-1===r.indexOf(t)&&r.push(t)}else if("text"===e){var n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),-1===n.indexOf(t)&&n.push(t)}},t.addFallback=function(){},n(e,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"averageBitrate",get:function(){return this._avgBitrate||this.realBitrate||this.bitrate}},{key:"attrs",get:function(){return this._attrs[0]}},{key:"codecs",get:function(){return this.attrs.CODECS||""}},{key:"pathwayId",get:function(){return this.attrs["PATHWAY-ID"]||"."}},{key:"videoRange",get:function(){return this.attrs["VIDEO-RANGE"]||"SDR"}},{key:"score",get:function(){return this.attrs.optionalFloat("SCORE",0)}},{key:"uri",get:function(){return this.url[0]||""}},{key:"audioGroups",get:function(){return this._audioGroups}},{key:"subtitleGroups",get:function(){return this._subtitleGroups}},{key:"urlId",get:function(){return 0},set:function(e){}},{key:"audioGroupIds",get:function(){return this.audioGroups?[this.audioGroupId]:void 0}},{key:"textGroupIds",get:function(){return this.subtitleGroups?[this.textGroupId]:void 0}},{key:"audioGroupId",get:function(){var e;return null==(e=this.audioGroups)?void 0:e[0]}},{key:"textGroupId",get:function(){var e;return null==(e=this.subtitleGroups)?void 0:e[0]}}])}();function nt(e,t){return!(!t||!e)&&-1!==e.indexOf(t)}function it(e,t){var r=!1,n=[];if(e&&(r="SDR"!==e,n=[e]),t){var i="SDR"!==(n=t.allowedVideoRanges||Xe.slice(0)).join("")&&!t.videoCodec;(r=void 0!==t.preferHDR?t.preferHDR:i&&function(){if("function"==typeof matchMedia){var e=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(e.media!==t.media)return!0===e.matches}return!1}())||(n=["SDR"])}return{preferHDR:r,allowedVideoRanges:n}}var at=function(e,t){return JSON.stringify(e,function(e){var t=new WeakSet;return function(r,n){if(e&&(n=e(r,n)),"object"==typeof n&&null!==n){if(t.has(n))return;t.add(n)}return n}}(t))};function st(e,t){z.log('[abr] start candidates with "'+e+'" ignored because '+t)}function ot(e){return e.reduce(function(e,t){var r=e.groups[t.groupId];r||(r=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),r.tracks.push(t);var n=t.channels||"2";return r.channels[n]=(r.channels[n]||0)+1,r.hasDefault=r.hasDefault||t.default,r.hasAutoSelect=r.hasAutoSelect||t.autoselect,r.hasDefault&&(e.hasDefaultAudio=!0),r.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function lt(e){if(!e)return e;var t=e;return{lang:t.lang,assocLang:t.assocLang,characteristics:t.characteristics,channels:t.channels,audioCodec:t.audioCodec}}function ut(e,t,r){if("attrs"in e){var n=t.indexOf(e);if(-1!==n)return n}for(var i=0;i<t.length;i++)if(ct(e,t[i],r))return i;return-1}function ct(e,t,r){var n,i,a=e.groupId,s=e.name,o=e.lang,l=e.assocLang,u=e.default,c=e.forced;return(void 0===a||t.groupId===a)&&(void 0===s||t.name===s)&&(void 0===o||(n=o,void 0===(i=t.lang)&&(i="--"),n.length===i.length?n===i:n.startsWith(i)||i.startsWith(n)))&&(void 0===o||t.assocLang===l)&&(void 0===u||t.default===u)&&(void 0===c||t.forced===c)&&(!("characteristics"in e)||function(e,t){void 0===t&&(t="");var r=e.split(","),n=t.split(",");return r.length===n.length&&!r.some(function(e){return-1===n.indexOf(e)})}(e.characteristics||"",t.characteristics))&&(void 0===r||r(e,t))}function dt(e,t){var r=e.audioCodec,n=e.channels;return!(void 0!==r&&(t.audioCodec||"").substring(0,4)!==r.substring(0,4)||void 0!==n&&n!==(t.channels||"2"))}function ft(e,t,r){for(var n=t;n>-1;n--)if(r(e[n]))return n;for(var i=t+1;i<e.length;i++)if(r(e[i]))return i;return-1}function ht(e,t){var r;return!!e&&e!==(null==(r=t.loadLevelObj)?void 0:r.uri)}var pt=function(e){function t(t){var r;return(r=e.call(this,"abr",t.logger)||this).hls=void 0,r.lastLevelLoadSec=0,r.lastLoadedFragLevel=-1,r.firstSelection=-1,r._nextAutoLevel=-1,r.nextAutoLevelKey="",r.audioTracksByGroup=null,r.codecTiers=null,r.timer=-1,r.fragCurrent=null,r.partCurrent=null,r.bitrateTestDelay=0,r.rebufferNotice=-1,r.supportedCache={},r.bwEstimator=void 0,r._abandonRulesCheck=function(e){var t,n=r,i=n.fragCurrent,a=n.partCurrent,s=n.hls,o=s.autoLevelEnabled,l=s.media;if(i&&l){var u=performance.now(),c=a?a.stats:i.stats,d=a?a.duration:i.duration,f=u-c.loading.start,h=s.minAutoLevel,p=i.level,m=r._nextAutoLevel;if(c.aborted||c.loaded&&c.loaded===c.total||p<=h)return r.clearTimer(),void(r._nextAutoLevel=-1);if(o){var g=m>-1&&m!==p,v=!!e||g;if(v||!l.paused&&l.playbackRate&&l.readyState){var y=s.mainForwardBufferInfo;if(v||null!==y){var E=r.bwEstimator.getEstimateTTFB(),b=Math.abs(l.playbackRate);if(!(f<=Math.max(E,d/(2*b)*1e3))){var T=y?y.len/b:0,w=c.loading.first?c.loading.first-c.loading.start:-1,k=c.loaded&&w>-1,R=r.getBwEstimate(),A=s.levels,_=A[p],D=Math.max(c.loaded,Math.round(d*(i.bitrate||_.averageBitrate)/8)),C=k?f-w:f;C<1&&k&&(C=Math.min(f,8*c.loaded/R));var I=k?1e3*c.loaded/C:0,P=E/1e3,x=I?(D-c.loaded)/I:8*D/R+P;if(!(x<=T)){var O,M=I?8*I:R,F=!0===(null==(t=(null==e?void 0:e.details)||r.hls.latestLevelDetails)?void 0:t.live),N=r.hls.config.abrBandWidthUpFactor,U=Number.POSITIVE_INFINITY;for(O=p-1;O>h;O--){var B=A[O].maxBitrate,j=!A[O].details||F;if((U=r.getTimeToLoadFrag(P,M,d*B,j))<Math.min(T,d+P))break}if(!(U>=x||U>10*d)){k?r.bwEstimator.sample(f-Math.min(E,w),c.loaded):r.bwEstimator.sampleTTFB(f);var H=A[O].maxBitrate;r.getBwEstimate()*N>H&&r.resetEstimator(H);var G=r.findBestLevel(H,h,O,0,T,1,1);G>-1&&(O=G),r.warn("Fragment "+i.sn+(a?" part "+a.index:"")+" of level "+p+" is loading too slowly;\n      Fragment duration: "+i.duration.toFixed(3)+"\n      Time to underbuffer: "+T.toFixed(3)+" s\n      Estimated load time for current fragment: "+x.toFixed(3)+" s\n      Estimated load time for down switch fragment: "+U.toFixed(3)+" s\n      TTFB estimate: "+(0|w)+" ms\n      Current BW estimate: "+(S(R)?0|R:"Unknown")+" bps\n      New BW estimate: "+(0|r.getBwEstimate())+" bps\n      Switching to level "+O+" @ "+(0|H)+" bps"),s.nextLoadLevel=s.nextAutoLevel=O,r.clearTimer();var z=function(){if(r.clearTimer(),r.fragCurrent===i&&r.hls.loadLevel===O&&O>0){var e=r.getStarvationDelay();if(r.warn("Aborting inflight request "+(O>0?"and switching down":"")+"\n      Fragment duration: "+i.duration.toFixed(3)+" s\n      Time to underbuffer: "+e.toFixed(3)+" s"),i.abortRequests(),r.fragCurrent=r.partCurrent=null,O>h){var t=r.findBestLevel(r.hls.levels[h].bitrate,h,O,0,e,1,1);-1===t&&(t=h),r.hls.nextLoadLevel=r.hls.nextAutoLevel=t,r.resetEstimator(r.hls.levels[t].bitrate)}}};g||x>2*U?z():r.timer=self.setInterval(z,1e3*U),s.trigger(L.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,part:a,stats:c})}}}}}}}},r.hls=t,r.bwEstimator=r.initEstimator(),r.registerListeners(),r}o(t,e);var r=t.prototype;return r.resetEstimator=function(e){e&&(this.log("setting initial bwe to "+e),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()},r.initEstimator=function(){var e=this.hls.config;return new M(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)},r.registerListeners=function(){var e=this.hls;e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.FRAG_LOADING,this.onFragLoading,this),e.on(L.FRAG_LOADED,this.onFragLoaded,this),e.on(L.FRAG_BUFFERED,this.onFragBuffered,this),e.on(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(L.LEVEL_LOADED,this.onLevelLoaded,this),e.on(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(L.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(L.ERROR,this.onError,this)},r.unregisterListeners=function(){var e=this.hls;e&&(e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.FRAG_LOADING,this.onFragLoading,this),e.off(L.FRAG_LOADED,this.onFragLoaded,this),e.off(L.FRAG_BUFFERED,this.onFragBuffered,this),e.off(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(L.LEVEL_LOADED,this.onLevelLoaded,this),e.off(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(L.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(L.ERROR,this.onError,this))},r.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null},r.onManifestLoading=function(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()},r.onLevelsUpdated=function(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null},r.onMaxAutoLevelUpdated=function(){this.firstSelection=-1,this.nextAutoLevelKey=""},r.onFragLoading=function(e,t){var r,n=t.frag;this.ignoreFragment(n)||(n.bitrateTest||(this.fragCurrent=n,this.partCurrent=null!=(r=t.part)?r:null),this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100))},r.onLevelSwitching=function(e,t){this.clearTimer()},r.onError=function(e,t){if(!t.fatal)switch(t.details){case R.BUFFER_ADD_CODEC_ERROR:case R.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case R.FRAG_LOAD_TIMEOUT:var r=t.frag,n=this.fragCurrent,i=this.partCurrent;if(r&&n&&r.sn===n.sn&&r.level===n.level){var a=performance.now(),s=i?i.stats:r.stats,o=a-s.loading.start,l=s.loading.first?s.loading.first-s.loading.start:-1;if(s.loaded&&l>-1){var u=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(o-Math.min(u,l),s.loaded)}else this.bwEstimator.sampleTTFB(o)}}},r.getTimeToLoadFrag=function(e,t,r,n){return e+r/t+(n?e+this.lastLevelLoadSec:0)},r.onLevelLoaded=function(e,t){var r=this.hls.config,n=t.stats.loading,i=n.end-n.first;S(i)&&(this.lastLevelLoadSec=i/1e3),t.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)},r.onFragLoaded=function(e,t){var r=t.frag,n=t.part,i=n?n.stats:r.stats;if(r.type===I&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(r)){if(this.clearTimer(),r.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){var a=n?n.duration:r.duration,s=this.hls.levels[r.level],o=(s.loaded?s.loaded.bytes:0)+i.loaded,l=(s.loaded?s.loaded.duration:0)+a;s.loaded={bytes:o,duration:l},s.realBitrate=Math.round(8*o/l)}if(r.bitrateTest){var u={stats:i,frag:r,part:n,id:r.type};this.onFragBuffered(L.FRAG_BUFFERED,u),r.bitrateTest=!1}else this.lastLoadedFragLevel=r.level}},r.onFragBuffered=function(e,t){var r=t.frag,n=t.part,i=null!=n&&n.stats.loaded?n.stats:r.stats;if(!i.aborted&&!this.ignoreFragment(r)){var a=i.parsing.end-i.loading.start-Math.min(i.loading.first-i.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,i.loaded),i.bwEstimate=this.getBwEstimate(),r.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}},r.ignoreFragment=function(e){return e.type!==I||"initSegment"===e.sn},r.clearTimer=function(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)},r.getAutoLevelKey=function(){return this.getBwEstimate()+"_"+this.getStarvationDelay().toFixed(2)},r.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,r=this.hls;if(r.levels.length<=1)return r.loadLevel;var n=r.maxAutoLevel,i=r.config,a=r.minAutoLevel,s=t?t.duration:e?e.duration:0,o=this.getBwEstimate(),l=this.getStarvationDelay(),u=i.abrBandWidthFactor,c=i.abrBandWidthUpFactor;if(l){var d=this.findBestLevel(o,a,n,l,0,u,c);if(d>=0)return this.rebufferNotice=-1,d}var f=s?Math.min(s,i.maxStarvationDelay):i.maxStarvationDelay;if(!l){var h=this.bitrateTestDelay;h&&(f=(s?Math.min(s,i.maxLoadingDelay):i.maxLoadingDelay)-h,this.info("bitrate test took "+Math.round(1e3*h)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*f)+" ms"),u=c=1)}var p=this.findBestLevel(o,a,n,l,f,u,c);if(this.rebufferNotice!==p&&(this.rebufferNotice=p,this.info((l?"rebuffering expected":"buffer is empty")+", optimal quality level "+p)),p>-1)return p;var m=r.levels[a],g=r.loadLevelObj;return g&&(null==m?void 0:m.bitrate)<g.bitrate?a:r.loadLevel},r.getStarvationDelay=function(){var e=this.hls,t=e.media;if(!t)return 1/0;var r=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,n=e.mainForwardBufferInfo;return(n?n.len:0)/r},r.getBwEstimate=function(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate},r.findBestLevel=function(e,t,r,n,i,a,s){var o,l=this,u=n+i,c=this.lastLoadedFragLevel,d=-1===c?this.hls.firstLevel:c,f=this.fragCurrent,h=this.partCurrent,p=this.hls,m=p.levels,g=p.allAudioTracks,v=p.loadLevel,y=p.config;if(1===m.length)return 0;var E,b=m[d],T=!(null==(o=this.hls.latestLevelDetails)||!o.live),w=-1===v||-1===c,k="SDR",R=(null==b?void 0:b.frameRate)||0,L=y.audioPreference,A=y.videoPreference,_=this.audioTracksByGroup||(this.audioTracksByGroup=ot(g)),D=-1;if(w){if(-1!==this.firstSelection)return this.firstSelection;var C=function(e,t,r,n,i){for(var a=Object.keys(e),s=null==n?void 0:n.channels,o=null==n?void 0:n.audioCodec,l=null==i?void 0:i.videoCodec,u=s&&2===parseInt(s),c=!1,d=!1,f=1/0,h=1/0,p=1/0,m=1/0,g=0,v=[],y=it(t,i),E=y.preferHDR,b=y.allowedVideoRanges,T=function(){var t=e[a[w]];c||(c=t.channels[2]>0),f=Math.min(f,t.minHeight),h=Math.min(h,t.minFramerate),p=Math.min(p,t.minBitrate),b.filter(function(e){return t.videoRanges[e]>0}).length>0&&(d=!0)},w=a.length;w--;)T();f=S(f)?f:0,h=S(h)?h:0;var k=Math.max(1080,f),R=Math.max(30,h);p=S(p)?p:r,r=Math.max(p,r),d||(t=void 0);var L=a.length>1;return{codecSet:a.reduce(function(t,n){var i=e[n];if(n===t)return t;if(v=d?b.filter(function(e){return i.videoRanges[e]>0}):[],L){if(i.minBitrate>r)return st(n,"min bitrate of "+i.minBitrate+" > current estimate of "+r),t;if(!i.hasDefaultAudio)return st(n,"no renditions with default or auto-select sound found"),t;if(o&&n.indexOf(o.substring(0,4))%5!=0)return st(n,'audio codec preference "'+o+'" not found'),t;if(s&&!u){if(!i.channels[s])return st(n,"no renditions with "+s+" channel sound found (channels options: "+Object.keys(i.channels)+")"),t}else if((!o||u)&&c&&0===i.channels[2])return st(n,"no renditions with stereo sound found"),t;if(i.minHeight>k)return st(n,"min resolution of "+i.minHeight+" > maximum of "+k),t;if(i.minFramerate>R)return st(n,"min framerate of "+i.minFramerate+" > maximum of "+R),t;if(!v.some(function(e){return i.videoRanges[e]>0}))return st(n,"no variants with VIDEO-RANGE of "+at(v)+" found"),t;if(l&&n.indexOf(l.substring(0,4))%5!=0)return st(n,'video codec preference "'+l+'" not found'),t;if(i.maxScore<g)return st(n,"max score of "+i.maxScore+" < selected max of "+g),t}return t&&(Me(n)>=Me(t)||i.fragmentError>e[t].fragmentError)?t:(m=i.minIndex,g=i.maxScore,n)},void 0),videoRanges:v,preferHDR:E,minFramerate:h,minBitrate:p,minIndex:m}}(this.codecTiers||(this.codecTiers=function(e,t,r,n){return e.slice(r,n+1).reduce(function(e,r,n){if(!r.codecSet)return e;var i=r.audioGroups,a=e[r.codecSet];a||(e[r.codecSet]=a={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:n,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!i,fragmentError:0}),a.minBitrate=Math.min(a.minBitrate,r.bitrate);var s=Math.min(r.height,r.width);return a.minHeight=Math.min(a.minHeight,s),a.minFramerate=Math.min(a.minFramerate,r.frameRate),a.minIndex=Math.min(a.minIndex,n),a.maxScore=Math.max(a.maxScore,r.score),a.fragmentError+=r.fragmentError,a.videoRanges[r.videoRange]=(a.videoRanges[r.videoRange]||0)+1,i&&i.forEach(function(e){if(e){var r=t.groups[e];r&&(a.hasDefaultAudio=a.hasDefaultAudio||t.hasDefaultAudio?r.hasDefault:r.hasAutoSelect||!t.hasDefaultAudio&&!t.hasAutoSelectAudio,Object.keys(r.channels).forEach(function(e){a.channels[e]=(a.channels[e]||0)+r.channels[e]}))}}),e},{})}(m,_,t,r)),k,e,L,A),I=C.codecSet,P=C.videoRanges,x=C.minFramerate,O=C.minBitrate,M=C.minIndex,F=C.preferHDR;D=M,E=I,k=F?P[P.length-1]:P[0],R=x,e=Math.max(e,O),this.log("picked start tier "+at(C))}else E=null==b?void 0:b.codecSet,k=null==b?void 0:b.videoRange;for(var N,U=h?h.duration:f?f.duration:0,B=this.bwEstimator.getEstimateTTFB()/1e3,j=[],H=function(){var t,o,f=m[G],p=G>d;if(!f)return 0;if(y.useMediaCapabilities&&!f.supportedResult&&!f.supportedPromise){var g=navigator.mediaCapabilities;"function"==typeof(null==g?void 0:g.decodingInfo)&&function(e,t,r,n,i,a){var s=e.videoCodec,o=e.audioCodec?e.audioGroups:null,l=null==a?void 0:a.audioCodec,u=null==a?void 0:a.channels,c=u?parseInt(u):l?1/0:2,d=null;if(null!=o&&o.length)try{d=1===o.length&&o[0]?t.groups[o[0]].channels:o.reduce(function(e,r){if(r){var n=t.groups[r];if(!n)throw new Error("Audio track group "+r+" not found");Object.keys(n.channels).forEach(function(t){e[t]=(e[t]||0)+n.channels[t]})}return e},{2:0})}catch(e){return!0}return void 0!==s&&(s.split(",").some(function(e){return we(e)})||e.width>1920&&e.height>1088||e.height>1920&&e.width>1088||e.frameRate>Math.max(n,30)||"SDR"!==e.videoRange&&e.videoRange!==r||e.bitrate>Math.max(i,8e6))||!!d&&S(c)&&Object.keys(d).some(function(e){return parseInt(e)>c})}(f,_,k,R,e,L)?(f.supportedPromise=$e(f,_,g,l.supportedCache),f.supportedPromise.then(function(e){if(l.hls){f.supportedResult=e;var t=l.hls.levels,r=t.indexOf(f);e.error?l.warn('MediaCapabilities decodingInfo error: "'+e.error+'" for level '+r+" "+at(e)):e.supported?e.decodingInfoResults.some(function(e){return!1===e.smooth||!1===e.powerEfficient})&&l.log("MediaCapabilities decodingInfo for level "+r+" not smooth or powerEfficient: "+at(e)):(l.warn("Unsupported MediaCapabilities decodingInfo result for level "+r+" "+at(e)),r>-1&&t.length>1&&(l.log("Removing unsupported level "+r),l.hls.removeLevel(r),-1===l.hls.loadLevel&&(l.hls.nextLoadLevel=0)))}})):f.supportedResult=Ve}if((E&&f.codecSet!==E||k&&f.videoRange!==k||p&&R>f.frameRate||!p&&R>0&&R<f.frameRate||null!=(t=f.supportedResult)&&null!=(o=t.decodingInfoResults)&&o.some(function(e){return!1===e.smooth}))&&(!w||G!==D))return j.push(G),0;var b,A=f.details,C=(h?null==A?void 0:A.partTarget:null==A?void 0:A.averagetargetduration)||U;b=p?s*e:a*e;var I=U&&n>=2*U&&0===i?f.averageBitrate:f.maxBitrate,P=l.getTimeToLoadFrag(B,b,I*C,void 0===A);if(b>=I&&(G===c||0===f.loadError&&0===f.fragmentError)&&(P<=B||!S(P)||T&&!l.bitrateTestDelay||P<u)){var x=l.forcedAutoLevel;return G===v||-1!==x&&x===v||(j.length&&l.trace("Skipped level(s) "+j.join(",")+" of "+r+' max with CODECS and VIDEO-RANGE:"'+m[j[0]].codecs+'" '+m[j[0]].videoRange+'; not compatible with "'+E+'" '+k),l.info("switch candidate:"+d+"->"+G+" adjustedbw("+Math.round(b)+")-bitrate="+Math.round(b-I)+" ttfb:"+B.toFixed(1)+" avgDuration:"+C.toFixed(1)+" maxFetchDuration:"+u.toFixed(1)+" fetchDuration:"+P.toFixed(1)+" firstSelection:"+w+" codecSet:"+f.codecSet+" videoRange:"+f.videoRange+" hls.loadLevel:"+v)),w&&(l.firstSelection=G),{v:G}}},G=r;G>=t;G--)if(0!==(N=H())&&N)return N.v;return-1},r.deriveNextAutoLevel=function(e){var t=this.hls,r=t.maxAutoLevel,n=t.minAutoLevel;return Math.min(Math.max(e,n),r)},n(t,[{key:"firstAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.minAutoLevel,n=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,a=this.findBestLevel(n,r,t,0,i,1,1);if(a>-1)return a;var s=this.hls.firstLevel,o=Math.min(Math.max(s,r),t);return this.warn("Could not find best starting auto level. Defaulting to first in playlist "+s+" clamped to "+o),o}},{key:"forcedAutoLevel",get:function(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}},{key:"nextAutoLevel",get:function(){var e=this.forcedAutoLevel,t=this.bwEstimator.canEstimate(),r=this.lastLoadedFragLevel>-1;if(!(-1===e||t&&r&&this.nextAutoLevelKey!==this.getAutoLevelKey()))return e;var n=t&&r?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==e){var i=this.hls.levels;if(i.length>Math.max(e,n)&&i[e].loadError<=i[n].loadError)return e}return this._nextAutoLevel=n,this.nextAutoLevelKey=this.getAutoLevelKey(),n},set:function(e){var t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}}])}(F),mt=function(e,t){for(var r=0,n=e.length-1,i=null,a=null;r<=n;){var s=t(a=e[i=(r+n)/2|0]);if(s>0)r=i+1;else{if(!(s<0))return a;n=i-1}}return null};function gt(e,t,r,n,i){void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=.005);var a=null;if(e){a=t[1+e.sn-t[0].sn]||null;var s=e.endDTS-r;s>0&&s<15e-7&&(r+=15e-7),a&&e.level!==a.level&&a.end<=e.end&&(a=t[2+e.sn-t[0].sn]||null)}else 0===r&&0===t[0].start&&(a=t[0]);if(a&&((!e||e.level===a.level)&&0===vt(r,n,a)||function(e,t,r){if(t&&0===t.start&&t.level<e.level&&(t.endPTS||0)>0){var n=t.tagList.reduce(function(e,t){return"INF"===t[0]&&(e+=parseFloat(t[1])),e},r);return e.start<=n}return!1}(a,e,Math.min(i,n))))return a;var o=mt(t,vt.bind(null,r,n));return!o||o===e&&a?a:o}function vt(e,t,r){if(void 0===e&&(e=0),void 0===t&&(t=0),r.start<=e&&r.start+r.duration>e)return 0;var n=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=e?1:r.start-n>e&&r.start?-1:0}function yt(e,t,r){var n=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-n>e}function Et(e,t,r){if(e&&e.startCC<=t&&e.endCC>=t){var n,i=e.fragments,a=e.fragmentHint;return a&&(i=i.concat(a)),mt(i,function(e){return e.cc<t?1:e.cc>t?-1:(n=e,e.end<=r?1:e.start>r?-1:0)}),n||null}return null}function bt(e){switch(e.details){case R.FRAG_LOAD_TIMEOUT:case R.KEY_LOAD_TIMEOUT:case R.LEVEL_LOAD_TIMEOUT:case R.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function St(e,t){var r=bt(t);return e.default[(r?"timeout":"error")+"Retry"]}function Tt(e,t){var r="linear"===e.backoff?1:Math.pow(2,t);return Math.min(r*e.retryDelayMs,e.maxRetryDelayMs)}function wt(e){return c(c({},e),{errorRetry:null,timeoutRetry:null})}function kt(e,t,r,n){if(!e)return!1;var i=null==n?void 0:n.code,a=t<e.maxNumRetry&&(function(e){return 0===e&&!1===navigator.onLine||!!e&&(e<400||e>499)}(i)||!!r);return e.shouldRetry?e.shouldRetry(e,t,r,n,a):a}var Rt=0,Lt=2,At=3,_t=5,Dt=0,Ct=1,It=2,Pt=function(e){function t(t){var r;return(r=e.call(this,"error-controller",t.logger)||this).hls=void 0,r.playlistError=0,r.penalizedRenditions={},r.hls=t,r.registerListeners(),r}o(t,e);var r=t.prototype;return r.registerListeners=function(){var e=this.hls;e.on(L.ERROR,this.onError,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.LEVEL_UPDATED,this.onLevelUpdated,this)},r.unregisterListeners=function(){var e=this.hls;e&&(e.off(L.ERROR,this.onError,this),e.off(L.ERROR,this.onErrorOut,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.LEVEL_UPDATED,this.onLevelUpdated,this))},r.destroy=function(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}},r.startLoad=function(e){},r.stopLoad=function(){this.playlistError=0},r.getVariantLevelIndex=function(e){return(null==e?void 0:e.type)===I?e.level:this.hls.loadLevel},r.onManifestLoading=function(){this.playlistError=0,this.penalizedRenditions={}},r.onLevelUpdated=function(){this.playlistError=0},r.onError=function(e,t){var r;if(!t.fatal){var n=this.hls,i=t.context;switch(t.details){case R.FRAG_LOAD_ERROR:case R.FRAG_LOAD_TIMEOUT:case R.KEY_LOAD_ERROR:case R.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case R.FRAG_PARSING_ERROR:if(null!=(r=t.frag)&&r.gap)return void(t.errorAction=xt());case R.FRAG_GAP:case R.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=Lt);case R.LEVEL_EMPTY_ERROR:case R.LEVEL_PARSING_ERROR:var a,s,o=t.parent===I?t.level:n.loadLevel;return void(t.details===R.LEVEL_EMPTY_ERROR&&null!=(a=t.context)&&null!=(s=a.levelDetails)&&s.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,o):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,o)));case R.LEVEL_LOAD_ERROR:case R.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==i?void 0:i.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.level)));case R.AUDIO_TRACK_LOAD_ERROR:case R.AUDIO_TRACK_LOAD_TIMEOUT:case R.SUBTITLE_LOAD_ERROR:case R.SUBTITLE_TRACK_LOAD_TIMEOUT:if(i){var l=n.loadLevelObj;if(l&&(i.type===D&&l.hasAudioGroup(i.groupId)||i.type===C&&l.hasSubtitleGroup(i.groupId)))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,n.loadLevel),t.errorAction.action=Lt,void(t.errorAction.flags=Ct)}return;case R.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var u=n.loadLevelObj,c=null==u?void 0:u.attrs["HDCP-LEVEL"];return void(c?t.errorAction={action:Lt,flags:It,hdcpLevel:c}:this.keySystemError(t));case R.BUFFER_ADD_CODEC_ERROR:case R.REMUX_ALLOC_ERROR:case R.BUFFER_APPEND_ERROR:var d;return void(t.errorAction||(t.errorAction=this.getLevelSwitchAction(t,null!=(d=t.level)?d:n.loadLevel)));case R.INTERNAL_EXCEPTION:case R.BUFFER_APPENDING_ERROR:case R.BUFFER_FULL_ERROR:case R.LEVEL_SWITCH_ERROR:case R.BUFFER_STALLED_ERROR:case R.BUFFER_SEEK_OVER_HOLE:case R.BUFFER_NUDGE_ON_STALL:return void(t.errorAction=xt())}t.type===k.KEY_SYSTEM_ERROR&&this.keySystemError(t)}},r.keySystemError=function(e){var t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)},r.getPlaylistRetryOrSwitchAction=function(e,t){var r=St(this.hls.config.playlistLoadPolicy,e),n=this.playlistError++;if(kt(r,n,bt(e),e.response))return{action:_t,flags:Dt,retryConfig:r,retryCount:n};var i=this.getLevelSwitchAction(e,t);return r&&(i.retryConfig=r,i.retryCount=n),i},r.getFragRetryOrSwitchAction=function(e){var t=this.hls,r=this.getVariantLevelIndex(e.frag),n=t.levels[r],i=t.config,a=i.fragLoadPolicy,s=i.keyLoadPolicy,o=St(e.details.startsWith("key")?s:a,e),l=t.levels.reduce(function(e,t){return e+t.fragmentError},0);if(n&&(e.details!==R.FRAG_GAP&&n.fragmentError++,kt(o,l,bt(e),e.response)))return{action:_t,flags:Dt,retryConfig:o,retryCount:l};var u=this.getLevelSwitchAction(e,r);return o&&(u.retryConfig=o,u.retryCount=l),u},r.getLevelSwitchAction=function(e,t){var r=this.hls;null==t&&(t=r.loadLevel);var n=this.hls.levels[t];if(n){var i,a,s=e.details;n.loadError++,s===R.BUFFER_APPEND_ERROR&&n.fragmentError++;var o=-1,l=r.levels,u=r.loadLevel,c=r.minAutoLevel,d=r.maxAutoLevel;r.autoLevelEnabled||r.config.preserveManualLevelOnError||(r.loadLevel=-1);for(var f,h=null==(i=e.frag)?void 0:i.type,p=(h===P&&s===R.FRAG_PARSING_ERROR||"audio"===e.sourceBufferName&&(s===R.BUFFER_ADD_CODEC_ERROR||s===R.BUFFER_APPEND_ERROR))&&l.some(function(e){var t=e.audioCodec;return n.audioCodec!==t}),m="video"===e.sourceBufferName&&(s===R.BUFFER_ADD_CODEC_ERROR||s===R.BUFFER_APPEND_ERROR)&&l.some(function(e){var t=e.codecSet,r=e.audioCodec;return n.codecSet!==t&&n.audioCodec===r}),g=null!=(a=e.context)?a:{},v=g.type,y=g.groupId,E=function(){var t=(b+u)%l.length;if(t!==u&&t>=c&&t<=d&&0===l[t].loadError){var r,i,a=l[t];if(s===R.FRAG_GAP&&h===I&&e.frag){var f=l[t].details;if(f){var g=gt(e.frag,f.fragments,e.frag.start);if(null!=g&&g.gap)return 0}}else{if(v===D&&a.hasAudioGroup(y)||v===C&&a.hasSubtitleGroup(y))return 0;if(h===P&&null!=(r=n.audioGroups)&&r.some(function(e){return a.hasAudioGroup(e)})||h===x&&null!=(i=n.subtitleGroups)&&i.some(function(e){return a.hasSubtitleGroup(e)})||p&&n.audioCodec===a.audioCodec||!p&&n.audioCodec!==a.audioCodec||m&&n.codecSet===a.codecSet)return 0}return o=t,1}},b=l.length;b--&&(0===(f=E())||1!==f););if(o>-1&&r.loadLevel!==o)return e.levelRetry=!0,this.playlistError=0,{action:Lt,flags:Dt,nextAutoLevel:o}}return{action:Lt,flags:Ct}},r.onErrorOut=function(e,t){var r;switch(null==(r=t.errorAction)?void 0:r.action){case Rt:break;case Lt:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===R.FRAG_GAP?/MediaSource readyState: ended/.test(t.error.message)&&(this.warn('MediaSource ended after "'+t.sourceBufferName+'" sourceBuffer append error. Attempting to recover from media error.'),this.hls.recoverMediaError()):t.fatal=!0}t.fatal&&this.hls.stopLoad()},r.sendAlternateToPenaltyBox=function(e){var t=this.hls,r=e.errorAction;if(r){var n=r.flags,i=r.hdcpLevel,a=r.nextAutoLevel;switch(n){case Dt:this.switchLevel(e,a);break;case It:i&&(t.maxHdcpLevel=Ye[Ye.indexOf(i)-1],r.resolved=!0),this.warn('Restricting playback to HDCP-LEVEL of "'+t.maxHdcpLevel+'" or lower')}r.resolved||this.switchLevel(e,a)}},r.switchLevel=function(e,t){if(void 0!==t&&e.errorAction&&(this.warn("switching to level "+t+" after "+e.details),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===R.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&"audiovideo"!==e.sourceBufferName))for(var r=ze(e.mimeType),n=this.hls.levels,i=n.length;i--;)n[i][e.sourceBufferName+"Codec"]===r&&this.hls.removeLevel(i)},t}(F);function xt(e){var t={action:Rt,flags:Dt};return e&&(t.resolved=!0),t}var Ot="NOT_LOADED",Mt="APPENDING",Ft="PARTIAL",Nt="OK",Ut=function(){function e(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}var t=e.prototype;return t._registerListeners=function(){var e=this.hls;e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.BUFFER_APPENDED,this.onBufferAppended,this),e.on(L.FRAG_BUFFERED,this.onFragBuffered,this),e.on(L.FRAG_LOADED,this.onFragLoaded,this)},t._unregisterListeners=function(){var e=this.hls;e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.BUFFER_APPENDED,this.onBufferAppended,this),e.off(L.FRAG_BUFFERED,this.onFragBuffered,this),e.off(L.FRAG_LOADED,this.onFragLoaded,this)},t.destroy=function(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null},t.getAppendedFrag=function(e,t){var r=this.activePartLists[t];if(r)for(var n=r.length;n--;){var i=r[n];if(!i)break;var a=i.end;if(i.start<=e&&null!==a&&e<=a)return i}return this.getBufferedFrag(e,t)},t.getBufferedFrag=function(e,t){return this.getFragAtPos(e,t,!0)},t.getFragAtPos=function(e,t,r){for(var n=this.fragments,i=Object.keys(n),a=i.length;a--;){var s=n[i[a]];if((null==s?void 0:s.body.type)===t&&(!r||s.buffered)){var o=s.body;if(o.start<=e&&e<=o.end)return o}}return null},t.detectEvictedFragments=function(e,t,r,n,i){var a=this;this.timeRanges&&(this.timeRanges[e]=t);var s=(null==n?void 0:n.fragment.sn)||-1;Object.keys(this.fragments).forEach(function(n){var o=a.fragments[n];if(o&&!(s>=o.body.sn))if(o.buffered||o.loaded&&!i){var l=o.range[e];l&&(0!==l.time.length?l.time.some(function(e){var r=!a.isTimeBuffered(e.startPTS,e.endPTS,t);return r&&a.removeFragment(o.body),r}):a.removeFragment(o.body))}else o.body.type===r&&a.removeFragment(o.body)})},t.detectPartialFragments=function(e){var t=this,r=this.timeRanges;if(r&&"initSegment"!==e.frag.sn){var n=e.frag,i=jt(n),a=this.fragments[i];if(!(!a||a.buffered&&n.gap)){var s=!n.relurl;Object.keys(r).forEach(function(i){var o=n.elementaryStreams[i];if(o){var l=r[i],u=s||!0===o.partial;a.range[i]=t.getBufferedTimes(n,e.part,u,l)}}),a.loaded=null,Object.keys(a.range).length?(a.buffered=!0,(a.body.endList=n.endList||a.body.endList)&&(this.endListFragments[a.body.type]=a),Bt(a)||this.removeParts(n.sn-1,n.type)):this.removeFragment(a.body)}}},t.removeParts=function(e,t){var r=this.activePartLists[t];r&&(this.activePartLists[t]=Ht(r,function(t){return t.fragment.sn>=e}))},t.fragBuffered=function(e,t){var r=jt(e),n=this.fragments[r];!n&&t&&(n=this.fragments[r]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),n&&(n.loaded=null,n.buffered=!0)},t.getBufferedTimes=function(e,t,r,n){for(var i={time:[],partial:r},a=e.start,s=e.end,o=e.minEndPTS||s,l=e.maxStartPTS||a,u=0;u<n.length;u++){var c=n.start(u)-this.bufferPadding,d=n.end(u)+this.bufferPadding;if(l>=c&&o<=d){i.time.push({startPTS:Math.max(a,n.start(u)),endPTS:Math.min(s,n.end(u))});break}if(a<d&&s>c){var f=Math.max(a,n.start(u)),h=Math.min(s,n.end(u));h>f&&(i.partial=!0,i.time.push({startPTS:f,endPTS:h}))}else if(s<=c)break}return i},t.getPartialFragment=function(e){var t,r,n,i=null,a=0,s=this.bufferPadding,o=this.fragments;return Object.keys(o).forEach(function(l){var u=o[l];u&&Bt(u)&&(r=u.body.start-s,n=u.body.end+s,e>=r&&e<=n&&(t=Math.min(e-r,n-e),a<=t&&(i=u.body,a=t)))}),i},t.isEndListAppended=function(e){var t=this.endListFragments[e];return void 0!==t&&(t.buffered||Bt(t))},t.getState=function(e){var t=jt(e),r=this.fragments[t];return r?r.buffered?Bt(r)?Ft:Nt:Mt:Ot},t.isTimeBuffered=function(e,t,r){for(var n,i,a=0;a<r.length;a++){if(n=r.start(a)-this.bufferPadding,i=r.end(a)+this.bufferPadding,e>=n&&t<=i)return!0;if(t<=n)return!1}return!1},t.onManifestLoading=function(){this.removeAllFragments()},t.onFragLoaded=function(e,t){if("initSegment"!==t.frag.sn&&!t.frag.bitrateTest){var r=t.frag,n=t.part?null:t,i=jt(r);this.fragments[i]={body:r,appendedPTS:null,loaded:n,buffered:!1,range:Object.create(null)}}},t.onBufferAppended=function(e,t){var r=t.frag,n=t.part,i=t.timeRanges,a=t.type;if("initSegment"!==r.sn){var s=r.type;if(n){var o=this.activePartLists[s];o||(this.activePartLists[s]=o=[]),o.push(n)}this.timeRanges=i;var l=i[a];this.detectEvictedFragments(a,l,s,n)}},t.onFragBuffered=function(e,t){this.detectPartialFragments(t)},t.hasFragment=function(e){var t=jt(e);return!!this.fragments[t]},t.hasFragments=function(e){var t=this.fragments,r=Object.keys(t);if(!e)return r.length>0;for(var n=r.length;n--;){var i=t[r[n]];if((null==i?void 0:i.body.type)===e)return!0}return!1},t.hasParts=function(e){var t;return!(null==(t=this.activePartLists[e])||!t.length)},t.removeFragmentsInRange=function(e,t,r,n,i){var a=this;n&&!this.hasGaps||Object.keys(this.fragments).forEach(function(s){var o=a.fragments[s];if(o){var l=o.body;l.type!==r||n&&!l.gap||l.start<t&&l.end>e&&(o.buffered||i)&&a.removeFragment(l)}})},t.removeFragment=function(e){var t=jt(e);e.clearElementaryStreamInfo();var r=this.activePartLists[e.type];if(r){var n=e.sn;this.activePartLists[e.type]=Ht(r,function(e){return e.fragment.sn!==n})}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]},t.removeAllFragments=function(){var e,t;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;var r=null==(e=this.hls)||null==(t=e.latestLevelDetails)?void 0:t.partList;r&&r.forEach(function(e){return e.clearElementaryStreamInfo()})},e}();function Bt(e){var t,r,n;return e.buffered&&(e.body.gap||(null==(t=e.range.video)?void 0:t.partial)||(null==(r=e.range.audio)?void 0:r.partial)||(null==(n=e.range.audiovideo)?void 0:n.partial))}function jt(e){return e.type+"_"+e.level+"_"+e.sn}function Ht(e,t){return e.filter(function(e){var r=t(e);return r||e.clearElementaryStreamInfo(),r})}var Gt=0,zt=1,Vt=function(){function e(e,t,r){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=r}return e.prototype.decrypt=function(e,t){switch(this.aesMode){case Gt:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case zt:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error("[AESCrypto] invalid aes mode "+this.aesMode)}},e}();var Kt=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n<4;n++)r[n]=t.getUint32(4*n);return r},t.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],i=r[1],a=r[2],s=r[3],o=this.invSubMix,l=o[0],u=o[1],c=o[2],d=o[3],f=new Uint32Array(256),h=0,p=0,m=0;for(m=0;m<256;m++)f[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){var g=p^p<<1^p<<2^p<<3^p<<4;g=g>>>8^255&g^99,e[h]=g,t[g]=h;var v=f[h],y=f[v],E=f[y],b=257*f[g]^16843008*g;n[h]=b<<24|b>>>8,i[h]=b<<16|b>>>16,a[h]=b<<8|b>>>24,s[h]=b,b=16843009*E^65537*y^257*v^16843008*h,l[g]=b<<24|b>>>8,u[g]=b<<16|b>>>16,c[g]=b<<8|b>>>24,d[g]=b,h?(h=v^f[f[f[E^v]]],p^=f[f[p]]):h=p=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;n<t.length&&r;)r=t[n]===this.key[n],n++;if(!r){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a,s,o,l,u=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),f=this.sBox,h=this.rcon,p=this.invSubMix,m=p[0],g=p[1],v=p[2],y=p[3];for(a=0;a<u;a++)a<i?o=c[a]=t[a]:(l=o,a%i===0?(l=f[(l=l<<8|l>>>24)>>>24]<<24|f[l>>>16&255]<<16|f[l>>>8&255]<<8|f[255&l],l^=h[a/i|0]<<24):i>6&&a%i===4&&(l=f[l>>>24]<<24|f[l>>>16&255]<<16|f[l>>>8&255]<<8|f[255&l]),c[a]=o=(c[a-i]^l)>>>0);for(s=0;s<u;s++)a=u-s,l=3&s?c[a]:c[a-4],d[s]=s<4||a<=4?l:m[f[l>>>24]]^g[f[l>>>16&255]]^v[f[l>>>8&255]]^y[f[255&l]],d[s]=d[s]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,r){for(var n,i,a,s,o,l,u,c,d,f,h,p,m,g,v=this.keySize+6,y=this.invKeySchedule,E=this.invSBox,b=this.invSubMix,S=b[0],T=b[1],w=b[2],k=b[3],R=this.uint8ArrayToUint32Array_(r),L=R[0],A=R[1],_=R[2],D=R[3],C=new Int32Array(e),I=new Int32Array(C.length),P=this.networkToHostOrderSwap;t<C.length;){for(d=P(C[t]),f=P(C[t+1]),h=P(C[t+2]),p=P(C[t+3]),o=d^y[0],l=p^y[1],u=h^y[2],c=f^y[3],m=4,g=1;g<v;g++)n=S[o>>>24]^T[l>>16&255]^w[u>>8&255]^k[255&c]^y[m],i=S[l>>>24]^T[u>>16&255]^w[c>>8&255]^k[255&o]^y[m+1],a=S[u>>>24]^T[c>>16&255]^w[o>>8&255]^k[255&l]^y[m+2],s=S[c>>>24]^T[o>>16&255]^w[l>>8&255]^k[255&u]^y[m+3],o=n,l=i,u=a,c=s,m+=4;n=E[o>>>24]<<24^E[l>>16&255]<<16^E[u>>8&255]<<8^E[255&c]^y[m],i=E[l>>>24]<<24^E[u>>16&255]<<16^E[c>>8&255]<<8^E[255&o]^y[m+1],a=E[u>>>24]<<24^E[c>>16&255]<<16^E[o>>8&255]<<8^E[255&l]^y[m+2],s=E[c>>>24]<<24^E[o>>16&255]<<16^E[l>>8&255]<<8^E[255&u]^y[m+3],I[t]=P(n^L),I[t+1]=P(s^A),I[t+2]=P(a^_),I[t+3]=P(i^D),L=d,A=f,_=h,D=p,t+=4}return I.buffer},e}(),$t=function(){function e(e,t,r){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=r}return e.prototype.expandKey=function(){var e=function(e){switch(e){case Gt:return"AES-CBC";case zt:return"AES-CTR";default:throw new Error("[FastAESKey] invalid aes mode "+e)}}(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])},e}();var qt=function(){function e(e,t){var r=(void 0===t?{}:t).removePKCS7Padding,n=void 0===r||r;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=n,n)try{var i=self.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch(e){}this.useSoftware=!this.subtle}var t=e.prototype;return t.destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},t.isSync=function(){return this.useSoftware},t.flush=function(){var e=this.currentResult,t=this.remainderData;if(!e||t)return this.reset(),null;var r,n,i,a=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?(n=(r=a).byteLength,(i=n&&new DataView(r.buffer).getUint8(n-1))?r.slice(0,n-i):r):a},t.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},t.decrypt=function(e,t,r,n){var i=this;return this.useSoftware?new Promise(function(a,s){var o=ArrayBuffer.isView(e)?e:new Uint8Array(e);i.softwareDecrypt(o,t,r,n);var l=i.flush();l?a(l.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,r,n)},t.softwareDecrypt=function(e,t,r,n){var i=this.currentIV,a=this.currentResult,s=this.remainderData;if(n!==Gt||16!==t.byteLength)return z.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),s&&(e=Se(s,e),this.remainderData=null);var o=this.getValidChunk(e);if(!o.length)return null;i&&(r=i);var l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new Kt),l.expandKey(t);var u=a;return this.currentResult=l.decrypt(o.buffer,0,r),this.currentIV=o.slice(-16).buffer,u||null},t.webCryptoDecrypt=function(e,t,r,n){var i=this;if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,r,n));this.key=t,this.fastAesKey=new $t(this.subtle,t,n)}return this.fastAesKey.expandKey().then(function(t){return i.subtle?(i.logOnce("WebCrypto AES decrypt"),new Vt(i.subtle,new Uint8Array(r),n).decrypt(e.buffer,t)):Promise.reject(new Error("web crypto not initialized"))}).catch(function(a){return z.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+a.name+": "+a.message),i.onWebCryptoError(e,t,r,n)})},t.onWebCryptoError=function(e,t,r,n){var i=this.enableSoftwareAES;if(i){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,r,n);var a=this.flush();if(a)return a.buffer}throw new Error("WebCrypto"+(i?" and softwareDecrypt":"")+": failed to decrypt data")},t.getValidChunk=function(e){var t=e,r=e.length-e.length%16;return r!==e.length&&(t=e.slice(0,r),this.remainderData=e.slice(r)),t},t.logOnce=function(e){this.logEnabled&&(z.log("[decrypter]: "+e),this.logEnabled=!1)},e}(),Wt=Math.pow(2,17),Yt=function(){function e(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}var t=e.prototype;return t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.abort=function(){this.loader&&this.loader.abort()},t.load=function(e,t){var r=this,n=e.url;if(!n)return Promise.reject(new Jt({type:k.NETWORK_ERROR,details:R.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a "+(n?"part list":"url")),networkDetails:null}));this.abort();var i=this.config,a=i.fLoader,s=i.loader;return new Promise(function(o,l){if(r.loader&&r.loader.destroy(),e.gap){if(e.tagList.some(function(e){return"GAP"===e[0]}))return void l(Qt(e));e.gap=!1}var u=r.loader=a?new a(i):new s(i),d=Xt(e);e.loader=u;var f=wt(i.fragLoadPolicy.default),h={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:Wt};e.stats=u.stats;var p={onSuccess:function(t,n,i,a){r.resetLoader(e,u);var s=t.data;i.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(s.slice(0,16)),s=s.slice(16)),o({frag:e,part:null,payload:s,networkDetails:a})},onError:function(t,i,a,s){r.resetLoader(e,u),l(new Jt({type:k.NETWORK_ERROR,details:R.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:c({url:n,data:void 0},t),error:new Error("HTTP Error "+t.code+" "+t.text),networkDetails:a,stats:s}))},onAbort:function(t,n,i){r.resetLoader(e,u),l(new Jt({type:k.NETWORK_ERROR,details:R.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:i,stats:t}))},onTimeout:function(t,n,i){r.resetLoader(e,u),l(new Jt({type:k.NETWORK_ERROR,details:R.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error("Timeout after "+h.timeout+"ms"),networkDetails:i,stats:t}))}};t&&(p.onProgress=function(r,n,i,a){return t({frag:e,part:null,payload:i,networkDetails:a})}),u.load(d,h,p)})},t.loadPart=function(e,t,r){var n=this;this.abort();var i=this.config,a=i.fLoader,s=i.loader;return new Promise(function(o,l){if(n.loader&&n.loader.destroy(),e.gap||t.gap)l(Qt(e,t));else{var u=n.loader=a?new a(i):new s(i),d=Xt(e,t);e.loader=u;var f=wt(i.fragLoadPolicy.default),h={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:Wt};t.stats=u.stats,u.load(d,h,{onSuccess:function(i,a,s,l){n.resetLoader(e,u),n.updateStatsFromPart(e,t);var c={frag:e,part:t,payload:i.data,networkDetails:l};r(c),o(c)},onError:function(r,i,a,s){n.resetLoader(e,u),l(new Jt({type:k.NETWORK_ERROR,details:R.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:c({url:d.url,data:void 0},r),error:new Error("HTTP Error "+r.code+" "+r.text),networkDetails:a,stats:s}))},onAbort:function(r,i,a){e.stats.aborted=t.stats.aborted,n.resetLoader(e,u),l(new Jt({type:k.NETWORK_ERROR,details:R.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:a,stats:r}))},onTimeout:function(r,i,a){n.resetLoader(e,u),l(new Jt({type:k.NETWORK_ERROR,details:R.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error("Timeout after "+h.timeout+"ms"),networkDetails:a,stats:r}))}})}})},t.updateStatsFromPart=function(e,t){var r=e.stats,n=t.stats,i=n.total;if(r.loaded+=n.loaded,i){var a=Math.round(e.duration/t.duration),s=Math.min(Math.round(r.loaded/i),a),o=(a-s)*Math.round(r.loaded/s);r.total=r.loaded+o}else r.total=Math.max(r.loaded,r.total);var l=r.loading,u=n.loading;l.start?l.first+=u.first-u.start:(l.start=u.start,l.first=u.first),l.end=u.end},t.resetLoader=function(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()},e}();function Xt(e,t){void 0===t&&(t=null);var r,n=t||e,i={frag:e,part:t,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},a=n.byteRangeStartOffset,s=n.byteRangeEndOffset;if(S(a)&&S(s)){var o,l=a,u=s;if("initSegment"===e.sn&&("AES-128"===(r=null==(o=e.decryptdata)?void 0:o.method)||"AES-256"===r)){var c=s-a;c%16&&(u=s+(16-c%16)),0!==a&&(i.resetIV=!0,l=a-16)}i.rangeStart=l,i.rangeEnd=u}return i}function Qt(e,t){var r=new Error("GAP "+(e.gap?"tag":"attribute")+" found"),n={type:k.MEDIA_ERROR,details:R.FRAG_GAP,fatal:!1,frag:e,error:r,networkDetails:null};return t&&(n.part=t),(t||e).stats.aborted=!0,new Jt(n)}var Jt=function(e){function t(t){var r;return(r=e.call(this,t.error.message)||this).data=void 0,r.data=t,r}return o(t,e),t}(h(Error)),Zt=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this)._boundTick=void 0,n._tickTimer=null,n._tickInterval=null,n._tickCallCount=0,n._boundTick=n.tick.bind(n),n}o(t,e);var r=t.prototype;return r.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},r.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},r.onHandlerDestroyed=function(){},r.hasInterval=function(){return!!this._tickInterval},r.hasNextTick=function(){return!!this._tickTimer},r.setInterval=function(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)},r.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},r.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},r.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},r.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},r.doTick=function(){},t}(F),er=function(e,t,r,n,i,a){void 0===n&&(n=0),void 0===i&&(i=-1),void 0===a&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=r,this.size=n,this.part=i,this.partial=a};var tr={length:0,start:function(){return 0},end:function(){return 0}},rr=function(){function e(){}return e.isBuffered=function(t,r){if(t)for(var n=e.getBuffered(t),i=n.length;i--;)if(r>=n.start(i)&&r<=n.end(i))return!0;return!1},e.bufferedRanges=function(t){if(t){var r=e.getBuffered(t);return e.timeRangesToArray(r)}return[]},e.timeRangesToArray=function(e){for(var t=[],r=0;r<e.length;r++)t.push({start:e.start(r),end:e.end(r)});return t},e.bufferInfo=function(t,r,n){if(t){var i=e.bufferedRanges(t);if(i.length)return e.bufferedInfo(i,r,n)}return{len:0,start:r,end:r,bufferedIndex:-1}},e.bufferedInfo=function(e,t,r){t=Math.max(0,t),e.length>1&&e.sort(function(e,t){return e.start-t.start||t.end-e.end});var n=-1,i=[];if(r)for(var a=0;a<e.length;a++){t>=e[a].start&&t<=e[a].end&&(n=a);var s=i.length;if(s){var o=i[s-1].end;e[a].start-o<r?e[a].end>o&&(i[s-1].end=e[a].end):i.push(e[a])}else i.push(e[a])}else i=e;for(var l,u=0,c=t,d=t,f=0;f<i.length;f++){var h=i[f].start,p=i[f].end;if(-1===n&&t>=h&&t<=p&&(n=f),t+r>=h&&t<p)c=h,u=(d=p)-t;else if(t+r<h){l=h;break}}return{len:u,start:c||0,end:d||0,nextStart:l,buffered:e,bufferedIndex:n}},e.getBuffered=function(e){try{return e.buffered||tr}catch(e){return z.log("failed to get media.buffered",e),tr}},e}(),nr=/\{\$([a-zA-Z0-9-_]+)\}/g;function ir(e){return nr.test(e)}function ar(e,t){if(null!==e.variableList||e.hasVariableRefs){var r=e.variableList;return t.replace(nr,function(t){var n=t.substring(2,t.length-1),i=null==r?void 0:r[n];return void 0===i?(e.playlistParsingError||(e.playlistParsingError=new Error('Missing preceding EXT-X-DEFINE tag for Variable Reference: "'+n+'"')),t):i})}return t}function sr(e,t,r){var n,i,a=e.variableList;if(a||(e.variableList=a={}),"QUERYPARAM"in t){n=t.QUERYPARAM;try{var s=new self.URL(r).searchParams;if(!s.has(n))throw new Error('"'+n+'" does not match any query parameter in URI: "'+r+'"');i=s.get(n)}catch(t){e.playlistParsingError||(e.playlistParsingError=new Error("EXT-X-DEFINE QUERYPARAM: "+t.message))}}else n=t.NAME,i=t.VALUE;n in a?e.playlistParsingError||(e.playlistParsingError=new Error('EXT-X-DEFINE duplicate Variable Name declarations: "'+n+'"')):a[n]=i||""}function or(e,t,r){var n=t.IMPORT;if(r&&n in r){var i=e.variableList;i||(e.variableList=i={}),i[n]=r[n]}else e.playlistParsingError||(e.playlistParsingError=new Error('EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "'+n+'"'))}var lr=/^(\d+)x(\d+)$/,ur=/(.+?)=(".*?"|.*?)(?:,|$)/g,cr=function(){function e(t,r){"string"==typeof t&&(t=e.parseAttrList(t,r)),a(this,t)}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)r[n]=parseInt(t.slice(2*n,2*n+2),16);return r}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.optionalFloat=function(e,t){var r=this[e];return r?parseFloat(r):t},t.enumeratedString=function(e){return this[e]},t.enumeratedStringList=function(e,t){var r=this[e];return(r?r.split(/[ ,]+/):[]).reduce(function(e,t){return e[t.toLowerCase()]=!0,e},t)},t.bool=function(e){return"YES"===this[e]},t.decimalResolution=function(e){var t=lr.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e,t){var r,n={};for(ur.lastIndex=0;null!==(r=ur.exec(e));){var i=r[1].trim(),a=r[2],s=0===a.indexOf('"')&&a.lastIndexOf('"')===a.length-1,o=!1;if(s)a=a.slice(1,-1);else switch(i){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":o=!0}if(t&&(s||o))a=ar(t,a);else if(!o&&!s)switch(i){case"CLOSED-CAPTIONS":if("NONE"===a)break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":z.warn(e+": attribute "+i+" is missing quotes")}n[i]=a}return n},n(e,[{key:"clientAttrs",get:function(){return Object.keys(this).filter(function(e){return"X-"===e.substring(0,2)})}}])}();function dr(e){return"ID"!==e&&"CLASS"!==e&&"CUE"!==e&&"START-DATE"!==e&&"DURATION"!==e&&"END-DATE"!==e&&"END-ON-NEXT"!==e}function fr(e){return"SCTE35-OUT"===e||"SCTE35-IN"===e||"SCTE35-CMD"===e}var hr=function(){return n(function(e,t,r){var n;if(void 0===r&&(r=0),this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(null==t?void 0:t.tagAnchor)||null,this.tagOrder=null!=(n=null==t?void 0:t.tagOrder)?n:r,t){var i=t.attr;for(var s in i)if(Object.prototype.hasOwnProperty.call(e,s)&&e[s]!==i[s]){z.warn('DATERANGE tag attribute: "'+s+'" does not match for tags with ID: "'+e.ID+'"'),this._badValueForSameId=s;break}e=a(new cr({}),i,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){var o=(null==t?void 0:t.endDate)||new Date(this.attr["END-DATE"]);S(o.getTime())&&(this._endDate=o)}},[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"cue",get:function(){var e=this._cue;return void 0===e?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}},{key:"startTime",get:function(){var e=this.tagAnchor;return null===e||null===e.programDateTime?(z.warn('Expected tagAnchor Fragment with PDT set for DateRange "'+this.id+'": '+e),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){var e=this._endDate||this._dateAtEnd;if(e)return e;var t=this.duration;return null!==t?this._dateAtEnd=new Date(this._startDate.getTime()+1e3*t):null}},{key:"duration",get:function(){if("DURATION"in this.attr){var e=this.attr.decimalFloatingPoint("DURATION");if(S(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}},{key:"endOnNext",get:function(){return this.attr.bool("END-ON-NEXT")}},{key:"isInterstitial",get:function(){return"com.apple.hls.interstitial"===this.class}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&S(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}])}(),pr=function(){function e(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}return e.prototype.reloaded=function(e){if(!e)return this.advanced=!0,void(this.updated=!0);var t=this.lastPartSn-e.lastPartSn,r=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!r||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||0===t&&r>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1},n(e,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&S(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var e=this.driftEndTime-this.driftStartTime;return e>0?1e3*(this.driftEnd-this.driftStart)/e:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}},{key:"fragmentStart",get:function(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[0].start:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}},{key:"maxPartIndex",get:function(){var e=this.partList;if(e){var t=this.lastPartIndex;if(-1!==t){for(var r=e.length;r--;)if(e[r].index>t)return e[r].index;return t}}return 0}},{key:"lastPartSn",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}},{key:"expired",get:function(){if(this.live&&this.age&&this.misses<3){var e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}])}();function mr(e){return"AES-128"===e||"AES-256"===e||"AES-256-CTR"===e}function gr(e){switch(e){case"AES-128":case"AES-256":return Gt;case"AES-256-CTR":return zt;default:throw new Error("invalid full segment method "+e)}}function vr(e){return Uint8Array.from(atob(e),function(e){return e.charCodeAt(0)})}function yr(e){return Uint8Array.from(unescape(encodeURIComponent(e)),function(e){return e.charCodeAt(0)})}function Er(e){var t,r,n=e.split(":"),i=null;if("data"===n[0]&&2===n.length){var a=n[1].split(";"),s=a[a.length-1].split(",");if(2===s.length){var o="base64"===s[0],l=s[1];o?(a.splice(-1,1),i=vr(l)):(t=yr(l).subarray(0,16),(r=new Uint8Array(16)).set(t,16-t.length),i=r)}}return i}var br="undefined"!=typeof self?self:void 0,Sr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Tr="org.w3.clearkey",wr="com.apple.streamingkeydelivery",kr="com.microsoft.playready",Rr="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function Lr(e){switch(e){case wr:return Sr.FAIRPLAY;case kr:return Sr.PLAYREADY;case Rr:return Sr.WIDEVINE;case Tr:return Sr.CLEARKEY}}function Ar(e){switch(e){case Sr.FAIRPLAY:return wr;case Sr.PLAYREADY:return kr;case Sr.WIDEVINE:return Rr;case Sr.CLEARKEY:return Tr}}function _r(e){var t=e.drmSystems,r=e.widevineLicenseUrl,n=t?[Sr.FAIRPLAY,Sr.WIDEVINE,Sr.PLAYREADY,Sr.CLEARKEY].filter(function(e){return!!t[e]}):[];return!n[Sr.WIDEVINE]&&r&&n.push(Sr.WIDEVINE),n}var Dr,Cr=null!=br&&null!=(Dr=br.navigator)&&Dr.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;var Ir={},Pr=function(){function e(e,t,r,n,i,a){void 0===n&&(n=[1]),void 0===i&&(i=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=r,this.keyFormatVersions=n,this.iv=i,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&!mr(e),null!=a&&a.startsWith("0x")&&(this.keyId=new Uint8Array(W(a)))}e.clearKeyUriToKeyIdMap=function(){Ir={}};var t=e.prototype;return t.matches=function(e){var t,r;return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&e.keyFormatVersions.join(",")===this.keyFormatVersions.join(",")&&(null==(t=e.iv)?void 0:t.join(","))===(null==(r=this.iv)?void 0:r.join(","))},t.isSupported=function(){if(this.method){if(mr(this.method)||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case wr:case Rr:case kr:case Tr:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1},t.getDecryptData=function(t){if(!this.encrypted||!this.uri)return null;if(mr(this.method)&&this.uri&&!this.iv){"number"!=typeof t&&(z.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),t=0);var r=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t}(t);return new e(this.method,this.uri,"identity",this.keyFormatVersions,r)}if(this.pssh&&this.keyId)return this;var n=Er(this.uri);if(n)switch(this.keyFormat){case Rr:if(this.pssh=n,!this.keyId&&n.length>=22){var i=n.length-22;this.keyId=n.subarray(i,i+16)}break;case kr:var a=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=Ae(a,0,n),this.keyId=function(e){var t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),r=String.fromCharCode.apply(null,Array.from(t)),n=r.substring(r.indexOf("<"),r.length),i=(new DOMParser).parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(i){var a=i.childNodes[0]?i.childNodes[0].nodeValue:i.getAttribute("VALUE");if(a){var s=vr(a).subarray(0,16);return function(e){var t=function(e,t,r){var n=e[t];e[t]=e[r],e[r]=n};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}(s),s}}return null}(n);break;default:var s=n.subarray(0,16);if(16!==s.length){var o=new Uint8Array(16);o.set(s,16-s.length),s=o}this.keyId=s}if(!this.keyId||16!==this.keyId.byteLength){var l=Ir[this.uri];if(!l){var u=Object.keys(Ir).length%Number.MAX_SAFE_INTEGER;l=new Uint8Array(16),new DataView(l.buffer,12,4).setUint32(0,u),Ir[this.uri]=l}this.keyId=l}return this},e}();var xr=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,Or=/#EXT-X-MEDIA:(.*)/g,Mr=/^#EXT(?:INF|-X-TARGETDURATION):/m,Fr=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),Nr=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),Ur=function(){function e(){}return e.findGroup=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n.id===t)return n}},e.resolve=function(e,t){return b.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.isMediaPlaylist=function(e){return Mr.test(e)},e.parseMasterPlaylist=function(t,r){var n,i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:ir(t)},a=[];for(xr.lastIndex=0;null!=(n=xr.exec(t));)if(n[1]){var s,o=new cr(n[1],i),l=ar(i,n[2]),u={attrs:o,bitrate:o.decimalInteger("BANDWIDTH")||o.decimalInteger("AVERAGE-BANDWIDTH"),name:o.NAME,url:e.resolve(l,r)},c=o.decimalResolution("RESOLUTION");c&&(u.width=c.width,u.height=c.height),zr(o.CODECS,u);var d=o["SUPPLEMENTAL-CODECS"];d&&(u.supplemental={},zr(d,u.supplemental)),null!=(s=u.unknownCodecs)&&s.length||a.push(u),i.levels.push(u)}else if(n[3]){var f=n[3],h=n[4];switch(f){case"SESSION-DATA":var p=new cr(h,i),m=p["DATA-ID"];m&&(null===i.sessionData&&(i.sessionData={}),i.sessionData[m]=p);break;case"SESSION-KEY":var g=Hr(h,r,i);g.encrypted&&g.isSupported()?(null===i.sessionKeys&&(i.sessionKeys=[]),i.sessionKeys.push(g)):z.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+h+'"');break;case"DEFINE":sr(i,new cr(h,i),r);break;case"CONTENT-STEERING":var v=new cr(h,i);i.contentSteering={uri:e.resolve(v["SERVER-URI"],r),pathwayId:v["PATHWAY-ID"]||"."};break;case"START":i.startTimeOffset=Gr(h)}}var y=a.length>0&&a.length<i.levels.length;return i.levels=y?a:i.levels,0===i.levels.length&&(i.playlistParsingError=new Error("no levels found in manifest")),i},e.parseMasterPlaylistMedia=function(t,r,n){var i,a={},s=n.levels,o={AUDIO:s.map(function(e){return{id:e.attrs.AUDIO,audioCodec:e.audioCodec}}),SUBTITLES:s.map(function(e){return{id:e.attrs.SUBTITLES,textCodec:e.textCodec}}),"CLOSED-CAPTIONS":[]},l=0;for(Or.lastIndex=0;null!==(i=Or.exec(t));){var u=new cr(i[1],n),c=u.TYPE;if(c){var d=o[c],f=a[c]||[];a[c]=f;var h=u.LANGUAGE,p=u["ASSOC-LANGUAGE"],m=u.CHANNELS,g=u.CHARACTERISTICS,v=u["INSTREAM-ID"],y={attrs:u,bitrate:0,id:l++,groupId:u["GROUP-ID"]||"",name:u.NAME||h||"",type:c,default:u.bool("DEFAULT"),autoselect:u.bool("AUTOSELECT"),forced:u.bool("FORCED"),lang:h,url:u.URI?e.resolve(u.URI,r):""};if(p&&(y.assocLang=p),m&&(y.channels=m),g&&(y.characteristics=g),v&&(y.instreamId=v),null!=d&&d.length){var E=e.findGroup(d,y.groupId)||d[0];Vr(y,E,"audioCodec"),Vr(y,E,"textCodec")}f.push(y)}}return a},e.parseLevelPlaylist=function(e,t,r,n,i,s){var o,l,u,c,d,f={url:t},h=new pr(t),p=h.fragments,m=[],g=null,v=0,y=0,E=0,b=0,T=0,w=null,k=new te(n,f),R=-1,L=!1,A=null;if(Fr.lastIndex=0,h.m3u8=e,h.hasVariableRefs=ir(e),"#EXTM3U"!==(null==(o=Fr.exec(e))?void 0:o[0]))return h.playlistParsingError=new Error("Missing format identifier #EXTM3U"),h;for(;null!==(l=Fr.exec(e));){L&&(L=!1,(k=new te(n,f)).playlistOffset=E,k.start=E,k.sn=v,k.cc=b,T&&(k.bitrate=T),k.level=r,g&&(k.initSegment=g,g.rawProgramDateTime&&(k.rawProgramDateTime=g.rawProgramDateTime,g.rawProgramDateTime=null),A&&(k.setByteRange(A),A=null)));var _=l[1];if(_){k.duration=parseFloat(_);var D=(" "+l[2]).slice(1);k.title=D||null,k.tagList.push(D?["INF",_,D]:["INF",_])}else if(l[3]){if(S(k.duration)){k.playlistOffset=E,k.start=E,c&&qr(k,c,h),k.sn=v,k.level=r,k.cc=b,p.push(k);var C=(" "+l[3]).slice(1);k.relurl=ar(h,C),Kr(k,w,m),w=k,E+=k.duration,v++,y=0,L=!0}}else{if(!(l=l[0].match(Nr))){z.warn("No matches on slow regex match for level playlist!");continue}for(u=1;u<l.length&&void 0===l[u];u++);var I=(" "+l[u]).slice(1),P=(" "+l[u+1]).slice(1),x=l[u+2]?(" "+l[u+2]).slice(1):null;switch(I){case"BYTERANGE":w?k.setByteRange(P,w):k.setByteRange(P);break;case"PROGRAM-DATE-TIME":k.rawProgramDateTime=P,k.tagList.push(["PROGRAM-DATE-TIME",P]),-1===R&&(R=p.length);break;case"PLAYLIST-TYPE":h.type&&Wr(h,I,l),h.type=P.toUpperCase();break;case"MEDIA-SEQUENCE":0!==h.startSN?Wr(h,I,l):p.length>0&&Yr(h,I,l),v=h.startSN=parseInt(P);break;case"SKIP":h.skippedSegments&&Wr(h,I,l);var O=new cr(P,h),M=O.decimalInteger("SKIPPED-SEGMENTS");if(S(M)){h.skippedSegments+=M;for(var F=M;F--;)p.push(null);v+=M}var N=O.enumeratedString("RECENTLY-REMOVED-DATERANGES");N&&(h.recentlyRemovedDateranges=(h.recentlyRemovedDateranges||[]).concat(N.split("\t")));break;case"TARGETDURATION":0!==h.targetduration&&Wr(h,I,l),h.targetduration=Math.max(parseInt(P),1);break;case"VERSION":null!==h.version&&Wr(h,I,l),h.version=parseInt(P);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":h.live||Wr(h,I,l),h.live=!1;break;case"#":(P||x)&&k.tagList.push(x?[P,x]:[P]);break;case"DISCONTINUITY":b++,k.tagList.push(["DIS"]);break;case"GAP":k.gap=!0,k.tagList.push([I]);break;case"BITRATE":k.tagList.push([I,P]),T=1e3*parseInt(P),S(T)?k.bitrate=T:T=0;break;case"DATERANGE":var U=new cr(P,h),B=new hr(U,h.dateRanges[U.ID],h.dateRangeTagCount);h.dateRangeTagCount++,B.isValid||h.skippedSegments?h.dateRanges[B.id]=B:z.warn('Ignoring invalid DATERANGE tag: "'+P+'"'),k.tagList.push(["EXT-X-DATERANGE",P]);break;case"DEFINE":var j=new cr(P,h);"IMPORT"in j?or(h,j,s):sr(h,j,t);break;case"DISCONTINUITY-SEQUENCE":0!==h.startCC?Wr(h,I,l):p.length>0&&Yr(h,I,l),h.startCC=b=parseInt(P);break;case"KEY":var H=Hr(P,t,h);if(H.isSupported()){if("NONE"===H.method){c=void 0;break}c||(c={});var G=c[H.keyFormat];null!=G&&G.matches(H)||(G&&(c=a({},c)),c[H.keyFormat]=H)}else z.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+P+'"');break;case"START":h.startTimeOffset=Gr(P);break;case"MAP":var V=new cr(P,h);if(k.duration){var K=new te(n,f);$r(K,V,r,c),g=K,k.initSegment=g,g.rawProgramDateTime&&!k.rawProgramDateTime&&(k.rawProgramDateTime=g.rawProgramDateTime)}else{var $=k.byteRangeEndOffset;if($){var q=k.byteRangeStartOffset;A=$-q+"@"+q}else A=null;$r(k,V,r,c),g=k,L=!0}g.cc=b;break;case"SERVER-CONTROL":d&&Wr(h,I,l),d=new cr(P),h.canBlockReload=d.bool("CAN-BLOCK-RELOAD"),h.canSkipUntil=d.optionalFloat("CAN-SKIP-UNTIL",0),h.canSkipDateRanges=h.canSkipUntil>0&&d.bool("CAN-SKIP-DATERANGES"),h.partHoldBack=d.optionalFloat("PART-HOLD-BACK",0),h.holdBack=d.optionalFloat("HOLD-BACK",0);break;case"PART-INF":h.partTarget&&Wr(h,I,l);var W=new cr(P);h.partTarget=W.decimalFloatingPoint("PART-TARGET");break;case"PART":var Y=h.partList;Y||(Y=h.partList=[]);var X=y>0?Y[Y.length-1]:void 0,Q=y++,J=new cr(P,h),Z=new re(J,k,f,Q,X);Y.push(Z),k.duration+=Z.duration;break;case"PRELOAD-HINT":var ee=new cr(P,h);h.preloadHint=ee;break;case"RENDITION-REPORT":var ne=new cr(P,h);h.renditionReports=h.renditionReports||[],h.renditionReports.push(ne);break;default:z.warn("line parsed but not handled: "+l)}}}w&&!w.relurl?(p.pop(),E-=w.duration,h.partList&&(h.fragmentHint=w)):h.partList&&(Kr(k,w,m),k.cc=b,h.fragmentHint=k,c&&qr(k,c,h)),h.targetduration||(h.playlistParsingError=new Error("#EXT-X-TARGETDURATION is required"));var ie=p.length,ae=p[0],se=p[ie-1];if((E+=h.skippedSegments*h.targetduration)>0&&ie&&se){h.averagetargetduration=E/ie;var oe=se.sn;h.endSN="initSegment"!==oe?oe:0,h.live||(se.endList=!0),ae&&void 0===h.startCC&&(h.startCC=ae.cc),R>0&&(function(e,t){for(var r=e[t],n=t;n--;){var i=e[n];if(!i)return;i.programDateTime=r.programDateTime-1e3*i.duration,r=i}}(p,R),ae&&m.unshift(ae))}else h.endSN=0,h.startCC=0;return h.fragmentHint&&(E+=h.fragmentHint.duration),h.totalduration=E,m.length&&h.dateRangeTagCount&&ae&&Br(m,h),h.endCC=b,h},e}();function Br(e,t){var r=e.length;if(r)for(var n=e[r-1],i=t.live?1/0:t.totalduration,a=Object.keys(t.dateRanges),s=a.length;s--;){var o=t.dateRanges[a[s]],l=o.startDate.getTime();o.tagAnchor=n.ref;for(var u=r;u--;){var c=jr(t,l,e,u,i);if(-1!==c){o.tagAnchor=t.fragments[c].ref;break}}}}function jr(e,t,r,n,i){var a=r[n];if(a){var s,o=a.programDateTime;if((t>=o||0===n)&&t<=o+1e3*(((null==(s=r[n+1])?void 0:s.start)||i)-a.start)){var l=r[n].sn-e.startSN,u=e.fragments;if(u.length>r.length)for(var c=(r[n+1]||u[u.length-1]).sn-e.startSN;c>l;c--){var d=u[c].programDateTime;if(t>=d&&t<d+1e3*u[c].duration)return c}return l}}return-1}function Hr(e,t,r){var n,i,a=new cr(e,r),s=null!=(n=a.METHOD)?n:"",o=a.URI,l=a.hexadecimalInteger("IV"),u=a.KEYFORMATVERSIONS,c=null!=(i=a.KEYFORMAT)?i:"identity";o&&a.IV&&!l&&z.error("Invalid IV: "+a.IV);var d=o?Ur.resolve(o,t):"",f=(u||"1").split("/").map(Number).filter(Number.isFinite);return new Pr(s,d,c,f,l,a.KEYID)}function Gr(e){var t=new cr(e).decimalFloatingPoint("TIME-OFFSET");return S(t)?t:null}function zr(e,t){var r=(e||"").split(/[ ,]+/).filter(function(e){return e});["video","audio","text"].forEach(function(e){var n=r.filter(function(t){return Ce(t,e)});n.length&&(t[e+"Codec"]=n.map(function(e){return e.split("/")[0]}).join(","),r=r.filter(function(e){return-1===n.indexOf(e)}))}),t.unknownCodecs=r}function Vr(e,t,r){var n=t[r];n&&(e[r]=n)}function Kr(e,t,r){e.rawProgramDateTime?r.push(e):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime)}function $r(e,t,r,n){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=r,e.sn="initSegment",n&&(e.levelkeys=n),e.initSegment=null}function qr(e,t,r){e.levelkeys=t;var n=r.encryptedFragments;n.length&&n[n.length-1].levelkeys===t||!Object.keys(t).some(function(e){return t[e].isCommonEncryption})||n.push(e)}function Wr(e,t,r){e.playlistParsingError=new Error("#EXT-X-"+t+" must not appear more than once ("+r[0]+")")}function Yr(e,t,r){e.playlistParsingError=new Error("#EXT-X-"+t+" must appear before the first Media Segment ("+r[0]+")")}function Xr(e,t){var r=t.startPTS;if(S(r)){var n,i=0;t.sn>e.sn?(i=r-e.start,n=e):(i=e.start-r,n=t),n.duration!==i&&n.setDuration(i)}else t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.setStart(e.start+(e.minEndPTS-e.start)):t.setStart(e.start+e.duration):t.setStart(Math.max(e.start-t.duration,0))}function Qr(e,t,r,n,i,a){n-r<=0&&(z.warn("Fragment should have a positive duration",t),n=r+t.duration,a=i+t.duration);var s=r,o=n,l=t.startPTS,u=t.endPTS;if(S(l)){var c=Math.abs(l-r);S(t.deltaPTS)?t.deltaPTS=Math.max(c,t.deltaPTS):t.deltaPTS=c,s=Math.max(r,l),r=Math.min(r,l),i=Math.min(i,t.startDTS),o=Math.min(n,u),n=Math.max(n,u),a=Math.max(a,t.endDTS)}var d=r-t.start;0!==t.start&&t.setStart(r),t.setDuration(n-t.start),t.startPTS=r,t.maxStartPTS=s,t.startDTS=i,t.endPTS=n,t.minEndPTS=o,t.endDTS=a;var f,h=t.sn;if(!e||h<e.startSN||h>e.endSN)return 0;var p=h-e.startSN,m=e.fragments;for(m[p]=t,f=p;f>0;f--)Xr(m[f],m[f-1]);for(f=p;f<m.length-1;f++)Xr(m[f],m[f+1]);return e.fragmentHint&&Xr(m[m.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,d}function Jr(e,t){if(e!==t){for(var r,n=null,i=e.fragments,s=i.length-1;s>=0;s--){var o=i[s].initSegment;if(o){n=o;break}}e.fragmentHint&&delete e.fragmentHint.endPTS,function(e,t,r){for(var n=t.skippedSegments,i=Math.max(e.startSN,t.startSN)-t.startSN,a=(e.fragmentHint?1:0)+(n?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,s=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=i;u<=a;u++){var c=l[s+u],d=o[u];if(n&&!d&&c&&(d=t.fragments[u]=c),c&&d){if(r(c,d,u,o),c.url&&c.url!==d.url)return void(t.playlistParsingError=Zr("media sequence mismatch "+d.sn+":",e,t,0,d));if(c.cc!==d.cc)return void(t.playlistParsingError=Zr("discontinuity sequence mismatch ("+c.cc+"!="+d.cc+")",e,t,0,d))}}}(e,t,function(e,i,a,s){if((!t.startCC||t.skippedSegments)&&i.cc!==e.cc){for(var o=e.cc-i.cc,l=a;l<s.length;l++)s[l].cc+=o;t.endCC=s[s.length-1].cc}S(e.startPTS)&&S(e.endPTS)&&(i.setStart(i.startPTS=e.startPTS),i.startDTS=e.startDTS,i.maxStartPTS=e.maxStartPTS,i.endPTS=e.endPTS,i.endDTS=e.endDTS,i.minEndPTS=e.minEndPTS,i.setDuration(e.endPTS-e.startPTS),i.duration&&(r=i),t.PTSKnown=t.alignedSliding=!0),e.hasStreams&&(i.elementaryStreams=e.elementaryStreams),i.loader=e.loader,e.hasStats&&(i.stats=e.stats),e.initSegment&&(i.initSegment=e.initSegment,n=e.initSegment)});var l=t.fragments,u=t.fragmentHint?l.concat(t.fragmentHint):l;if(n&&u.forEach(function(e){var t;!e||e.initSegment&&e.initSegment.relurl!==(null==(t=n)?void 0:t.relurl)||(e.initSegment=n)}),t.skippedSegments){if(t.deltaUpdateFailed=l.some(function(e){return!e}),t.deltaUpdateFailed){z.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var c=t.skippedSegments;c--;)l.shift();t.startSN=l[0].sn}else{t.canSkipDateRanges&&(t.dateRanges=function(e,t){var r=t.dateRanges,n=t.recentlyRemovedDateranges,i=a({},e);n&&n.forEach(function(e){delete i[e]});var s=Object.keys(i).length;return s&&Object.keys(r).forEach(function(e){var t=i[e],n=new hr(r[e].attr,t);n.isValid?(i[e]=n,t||(n.tagOrder+=s)):z.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+at(r[e].attr)+'"')}),i}(e.dateRanges,t));var d=e.fragments.filter(function(e){return e.rawProgramDateTime});if(e.hasProgramDateTime&&!t.hasProgramDateTime)for(var f=1;f<u.length;f++)null===u[f].programDateTime&&Kr(u[f],u[f-1],d);Br(d,t)}t.endCC=l[l.length-1].cc}if(!t.startCC){var h,p=nn(e,t.startSN-1);t.startCC=null!=(h=null==p?void 0:p.cc)?h:l[0].cc}(function(e,t,r){if(e&&t)for(var n=0,i=0,a=e.length;i<=a;i++){var s=e[i],o=t[i+n];s&&o&&s.index===o.index&&s.fragment.sn===o.fragment.sn?r(s,o):n--}})(e.partList,t.partList,function(e,t){t.elementaryStreams=e.elementaryStreams,t.stats=e.stats}),r?Qr(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):en(e,t),l.length&&(t.totalduration=t.edge-l[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;var m=t.advancedDateTime;if(t.advanced&&m){var g=t.edge;t.driftStart||(t.driftStartTime=m,t.driftStart=g),t.driftEndTime=m,t.driftEnd=g}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime;-1===t.requestScheduled&&(t.requestScheduled=e.requestScheduled)}}function Zr(e,t,r,n,i){return new Error(e+" "+i.url+"\nPlaylist starting @"+t.startSN+"\n"+t.m3u8+"\n\nPlaylist starting @"+r.startSN+"\n"+r.m3u8)}function en(e,t,r){void 0===r&&(r=!0);var n=t.startSN+t.skippedSegments-e.startSN,i=e.fragments,a=n>=0,s=0;if(a&&n<i.length)s=i[n].start;else if(a&&t.startSN===e.endSN+1)s=e.fragmentEnd;else if(a&&r)s=e.fragmentStart+n*t.levelTargetDuration;else{if(t.skippedSegments||0!==t.fragmentStart)return;s=e.fragmentStart}tn(t,s)}function tn(e,t){if(t){for(var r=e.fragments,n=e.skippedSegments;n<r.length;n++)r[n].addStart(t);e.fragmentHint&&e.fragmentHint.addStart(t)}}function rn(e,t){void 0===t&&(t=1/0);var r=1e3*e.targetduration;if(e.updated){var n=e.fragments;if(n.length&&4*r>t){var i=1e3*n[n.length-1].duration;i<r&&(r=i)}}else r/=2;return Math.round(r)}function nn(e,t,r){if(!e)return null;var n=e.fragments[t-e.startSN];return n||((n=e.fragmentHint)&&n.sn===t?n:t<e.startSN&&r&&r.sn===t?r:null)}function an(e,t,r){return e?sn(e.partList,t,r):null}function sn(e,t,r){if(e)for(var n=e.length;n--;){var i=e[n];if(i.index===r&&i.fragment.sn===t)return i}return null}function on(e){e.forEach(function(e,t){var r;null==(r=e.details)||r.fragments.forEach(function(e){e.level=t,e.initSegment&&(e.initSegment.level=t)})})}function ln(e,t){for(var r=0,n=e.length;r<n;r++){var i;if((null==(i=e[r])?void 0:i.cc)===t)return e[r]}return null}function un(e,t){if(e){var r=e.start+t;e.start=e.startPTS=r,e.endPTS=r+e.duration}}function cn(e,t){for(var r=t.fragments,n=0,i=r.length;n<i;n++)un(r[n],e);t.fragmentHint&&un(t.fragmentHint,e),t.alignedSliding=!0}function dn(e,t){if(function(e,t){return!!(e&&t.startCC<e.endCC&&t.endCC>e.startCC)}(t,e)){var r=Math.min(t.endCC,e.endCC),n=ln(t.fragments,r),i=ln(e.fragments,r);n&&i&&(z.log("Aligning playlist at start of dicontinuity sequence "+r),cn(n.start-i.start,e))}}function fn(e,t){if(e.hasProgramDateTime&&t.hasProgramDateTime){var r=e.fragments,n=t.fragments;if(r.length&&n.length){var i,a,s=Math.min(t.endCC,e.endCC);t.startCC<s&&e.startCC<s&&(i=ln(n,s),a=ln(r,s)),i&&a||(a=ln(r,(i=n[Math.floor(n.length/2)]).cc)||r[Math.floor(r.length/2)]);var o=i.programDateTime,l=a.programDateTime;o&&l&&cn((l-o)/1e3-(a.start-i.start),e)}}}var hn=function(e){for(var t="",r=e.length,n=0;n<r;n++)t+="["+e.start(n).toFixed(3)+"-"+e.end(n).toFixed(3)+"]";return t},pn="STOPPED",mn="IDLE",gn="KEY_LOADING",vn="FRAG_LOADING",yn="FRAG_LOADING_WAITING_RETRY",En="WAITING_TRACK",bn="PARSING",Sn="PARSED",Tn="ENDED",wn="ERROR",kn="WAITING_INIT_PTS",Rn="WAITING_LEVEL",Ln=function(e){function t(t,r,n,i,a){var s;return(s=e.call(this,i,t.logger)||this).hls=void 0,s.fragPrevious=null,s.fragCurrent=null,s.fragmentTracker=void 0,s.transmuxer=null,s._state=pn,s.playlistType=void 0,s.media=null,s.mediaBuffer=null,s.config=void 0,s.bitrateTest=!1,s.lastCurrentTime=0,s.nextLoadPosition=0,s.startPosition=0,s.startTimeOffset=null,s.retryDate=0,s.levels=null,s.fragmentLoader=void 0,s.keyLoader=void 0,s.levelLastLoaded=null,s.startFragRequested=!1,s.decrypter=void 0,s.initPTS=[],s.buffering=!0,s.loadingParts=!1,s.loopSn=void 0,s.onMediaSeeking=function(){var e=s,t=e.config,r=e.fragCurrent,n=e.media,i=e.mediaBuffer,a=e.state,o=n?n.currentTime:0,l=rr.bufferInfo(i||n,o,t.maxBufferHole),u=!l.len;if(s.log("Media seeking to "+(S(o)?o.toFixed(3):o)+", state: "+a+", "+(u?"out of":"in")+" buffer"),s.state===Tn)s.resetLoadingState();else if(r){var c=t.maxFragLookUpTolerance,d=r.start-c,f=r.start+r.duration+c;if(u||f<l.start||d>l.end){var h=o>f;(o<d||h)&&(h&&r.loader&&(s.log("Cancelling fragment load for seek (sn: "+r.sn+")"),r.abortRequests(),s.resetLoadingState()),s.fragPrevious=null)}}if(n&&(s.fragmentTracker.removeFragmentsInRange(o,1/0,s.playlistType,!0),o>s.lastCurrentTime&&(s.lastCurrentTime=o),!s.loadingParts)){var p=Math.max(l.end,o),m=s.shouldLoadParts(s.getLevelDetails(),p);m&&(s.log("LL-Part loading ON after seeking to "+o.toFixed(2)+" with buffer @"+p.toFixed(2)),s.loadingParts=m)}s.hls.hasEnoughToStart||(s.log("Setting "+(u?"startPosition":"nextLoadPosition")+" to "+o+" for seek without enough to start"),s.nextLoadPosition=o,u&&(s.startPosition=o)),s.tickImmediate()},s.onMediaEnded=function(){s.log("setting startPosition to 0 because media ended"),s.startPosition=s.lastCurrentTime=0},s.playlistType=a,s.hls=t,s.fragmentLoader=new Yt(t.config),s.keyLoader=n,s.fragmentTracker=r,s.config=t.config,s.decrypter=new qt(t.config),s}o(t,e);var r=t.prototype;return r.registerListeners=function(){var e=this.hls;e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(L.ERROR,this.onError,this)},r.unregisterListeners=function(){var e=this.hls;e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(L.ERROR,this.onError,this)},r.doTick=function(){this.onTickEnd()},r.onTickEnd=function(){},r.startLoad=function(e){},r.stopLoad=function(){if(this.state!==pn){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);var e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=pn}},r.pauseBuffering=function(){this.buffering=!1},r.resumeBuffering=function(){this.buffering=!0},r._streamEnded=function(e,t){if(t.live||!this.media)return!1;var r=e.end||0,n=this.config.timelineOffset||0;if(r<=n)return!1;var i=e.buffered;this.config.maxBufferHole&&i&&i.length>1&&(e=rr.bufferedInfo(i,e.start,0));var a=e.nextStart;if(a&&a>n&&a<t.edge)return!1;if(this.media.currentTime<e.start)return!1;var s=t.partList;if(null!=s&&s.length){var o=s[s.length-1];return rr.isBuffered(this.media,o.start+o.duration/2)}var l=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(l)},r.getLevelDetails=function(){var e;if(this.levels&&null!==this.levelLastLoaded)return null==(e=this.levelLastLoaded)?void 0:e.details},r.onMediaAttached=function(e,t){var r=this.media=this.mediaBuffer=t.media;r.removeEventListener("seeking",this.onMediaSeeking),r.removeEventListener("ended",this.onMediaEnded),r.addEventListener("seeking",this.onMediaSeeking),r.addEventListener("ended",this.onMediaEnded);var n=this.config;this.levels&&n.autoStartLoad&&this.state===pn&&this.startLoad(n.startPosition)},r.onMediaDetaching=function(e,t){var r=!!t.transferMedia,n=this.media;if(null!==n){if(n.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),n.removeEventListener("seeking",this.onMediaSeeking),n.removeEventListener("ended",this.onMediaEnded),this.keyLoader&&!r&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,r)return this.resetLoadingState(),void this.resetTransmuxer();this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}},r.onManifestLoading=function(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1},r.onError=function(e,t){},r.onManifestLoaded=function(e,t){this.startTimeOffset=t.startTimeOffset},r.onHandlerDestroying=function(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),e.prototype.onHandlerDestroying.call(this),this.hls=this.onMediaSeeking=this.onMediaEnded=null},r.onHandlerDestroyed=function(){this.state=pn,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,e.prototype.onHandlerDestroyed.call(this)},r.loadFragment=function(e,t,r){this.startFragRequested=!0,this._loadFragForPlayback(e,t,r)},r._loadFragForPlayback=function(e,t,r){var n=this;this._doFragLoad(e,t,r,function(e){var t=e.frag;if(n.fragContextChanged(t))return n.warn(t.type+" sn: "+t.sn+(e.part?" part: "+e.part.index:"")+" of "+n.fragInfo(t,!1,e.part)+") was dropped during download."),void n.fragmentTracker.removeFragment(t);t.stats.chunkCount++,n._handleFragmentLoadProgress(e)}).then(function(e){if(e){var t=n.state,r=e.frag;n.fragContextChanged(r)?(t===vn||!n.fragCurrent&&t===bn)&&(n.fragmentTracker.removeFragment(r),n.state=mn):("payload"in e&&(n.log("Loaded "+r.type+" sn: "+r.sn+" of "+n.playlistLabel()+" "+r.level),n.hls.trigger(L.FRAG_LOADED,e)),n._handleFragmentLoadComplete(e))}}).catch(function(t){n.state!==pn&&n.state!==wn&&(n.warn("Frag error: "+((null==t?void 0:t.message)||t)),n.resetFragmentLoading(e))})},r.clearTrackerIfNeeded=function(e){var t,r=this.fragmentTracker;if(r.getState(e)===Mt){var n=e.type,i=this.getFwdBufferInfo(this.mediaBuffer,n),a=Math.max(e.duration,i?i.len:this.config.maxBufferLength),s=this.backtrackFragment;(1===(s?e.sn-s.sn:0)||this.reduceMaxBufferLength(a,e.duration))&&r.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?r.removeAllFragments():r.hasParts(e.type)&&(r.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),r.getState(e)===Ft&&r.removeFragment(e))},r.checkLiveUpdate=function(e){if(e.updated&&!e.live){var t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)},r.waitForLive=function(e){var t=e.details;return(null==t?void 0:t.live)&&"EVENT"!==t.type&&(this.levelLastLoaded!==e||t.expired)},r.flushMainBuffer=function(e,t,r){if(void 0===r&&(r=null),e-t){var n={startOffset:e,endOffset:t,type:r};this.hls.trigger(L.BUFFER_FLUSHING,n)}},r._loadInitSegment=function(e,t){var r=this;this._doFragLoad(e,t).then(function(e){var t=null==e?void 0:e.frag;if(!t||r.fragContextChanged(t)||!r.levels)throw new Error("init load aborted");return e}).then(function(e){var t=r.hls,n=e.frag,i=e.payload,a=n.decryptdata;if(i&&i.byteLength>0&&null!=a&&a.key&&a.iv&&mr(a.method)){var s=self.performance.now();return r.decrypter.decrypt(new Uint8Array(i),a.key.buffer,a.iv.buffer,gr(a.method)).catch(function(e){throw t.trigger(L.ERROR,{type:k.MEDIA_ERROR,details:R.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:n}),e}).then(function(i){var a=self.performance.now();return t.trigger(L.FRAG_DECRYPTED,{frag:n,payload:i,stats:{tstart:s,tdecrypt:a}}),e.payload=i,r.completeInitSegmentLoad(e)})}return r.completeInitSegmentLoad(e)}).catch(function(t){r.state!==pn&&r.state!==wn&&(r.warn(t),r.resetFragmentLoading(e))})},r.completeInitSegmentLoad=function(e){if(!this.levels)throw new Error("init load aborted, missing levels");var t=e.frag.stats;this.state!==pn&&(this.state=mn),e.frag.data=new Uint8Array(e.payload),t.parsing.start=t.buffering.start=self.performance.now(),t.parsing.end=t.buffering.end=self.performance.now(),this.tick()},r.fragContextChanged=function(e){var t=this.fragCurrent;return!e||!t||e.sn!==t.sn||e.level!==t.level},r.fragBufferedComplete=function(e,t){var r=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log("Buffered "+e.type+" sn: "+e.sn+(t?" part: "+t.index:"")+" of "+this.fragInfo(e,!1,t)+" > buffer:"+(r?hn(rr.getBuffered(r)):"(detached)")+")"),ee(e)){var n;if(e.type!==x){var i=e.elementaryStreams;if(!Object.keys(i).some(function(e){return!!i[e]}))return void(this.state=mn)}var a=null==(n=this.levels)?void 0:n[e.level];null!=a&&a.fragmentError&&(this.log("Resetting level fragment error count of "+a.fragmentError+" on frag buffered"),a.fragmentError=0)}this.state=mn},r._handleFragmentLoadComplete=function(e){var t=this.transmuxer;if(t){var r=e.frag,n=e.part,i=e.partsLoaded,a=!i||0===i.length||i.some(function(e){return!e}),s=new er(r.level,r.sn,r.stats.chunkCount+1,0,n?n.index:-1,!a);t.flush(s)}},r._handleFragmentLoadProgress=function(e){},r._doFragLoad=function(e,t,r,n){var i,a=this;void 0===r&&(r=null),this.fragCurrent=e;var s=null==t?void 0:t.details;if(!this.levels||!s)throw new Error("frag load aborted, missing level"+(s?"":" detail")+"s");var o=null;!e.encrypted||null!=(i=e.decryptdata)&&i.key?e.encrypted||(o=this.keyLoader.loadClear(e,s.encryptedFragments,this.startFragRequested))&&this.log("[eme] blocking frag load until media-keys acquired"):(this.log("Loading key for "+e.sn+" of ["+s.startSN+"-"+s.endSN+"], "+this.playlistLabel()+" "+e.level),this.state=gn,this.fragCurrent=e,o=this.keyLoader.load(e).then(function(e){if(!a.fragContextChanged(e.frag))return a.hls.trigger(L.KEY_LOADED,e),a.state===gn&&(a.state=mn),e}),this.hls.trigger(L.KEY_LOADING,{frag:e}),null===this.fragCurrent&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING"))));var l=this.fragPrevious;if(ee(e)&&(!l||e.sn!==l.sn)){var u=this.shouldLoadParts(t.details,e.end);u!==this.loadingParts&&(this.log("LL-Part loading "+(u?"ON":"OFF")+" loading sn "+(null==l?void 0:l.sn)+"->"+e.sn),this.loadingParts=u)}if(r=Math.max(e.start,r||0),this.loadingParts&&ee(e)){var c=s.partList;if(c&&n){r>e.end&&s.fragmentHint&&(e=s.fragmentHint);var d=this.getNextPart(c,e,r);if(d>-1){var f,h=c[d];return e=this.fragCurrent=h.fragment,this.log("Loading "+e.type+" sn: "+e.sn+" part: "+h.index+" ("+d+"/"+(c.length-1)+") of "+this.fragInfo(e,!1,h)+") cc: "+e.cc+" ["+s.startSN+"-"+s.endSN+"], target: "+parseFloat(r.toFixed(3))),this.nextLoadPosition=h.start+h.duration,this.state=vn,f=o?o.then(function(r){return!r||a.fragContextChanged(r.frag)?null:a.doFragPartsLoad(e,h,t,n)}).catch(function(e){return a.handleFragLoadError(e)}):this.doFragPartsLoad(e,h,t,n).catch(function(e){return a.handleFragLoadError(e)}),this.hls.trigger(L.FRAG_LOADING,{frag:e,part:h,targetBufferTime:r}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):f}if(!e.url||this.loadedEndOfParts(c,r))return Promise.resolve(null)}}if(ee(e)&&this.loadingParts)this.log("LL-Part loading OFF after next part miss @"+r.toFixed(2)),this.loadingParts=!1;else if(!e.url)return Promise.resolve(null);this.log("Loading "+e.type+" sn: "+e.sn+" of "+this.fragInfo(e,!1)+") cc: "+e.cc+" "+(s?"["+s.startSN+"-"+s.endSN+"]":"")+", target: "+parseFloat(r.toFixed(3))),S(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=vn;var p,m=this.config.progressive;return p=m&&o?o.then(function(t){return!t||a.fragContextChanged(null==t?void 0:t.frag)?null:a.fragmentLoader.load(e,n)}).catch(function(e){return a.handleFragLoadError(e)}):Promise.all([this.fragmentLoader.load(e,m?n:void 0),o]).then(function(e){var t=e[0];return!m&&t&&n&&n(t),t}).catch(function(e){return a.handleFragLoadError(e)}),this.hls.trigger(L.FRAG_LOADING,{frag:e,targetBufferTime:r}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):p},r.doFragPartsLoad=function(e,t,r,n){var i=this;return new Promise(function(a,s){var o,l=[],u=null==(o=r.details)?void 0:o.partList,c=function(t){i.fragmentLoader.loadPart(e,t,n).then(function(n){l[t.index]=n;var s=n.part;i.hls.trigger(L.FRAG_LOADED,n);var o=an(r.details,e.sn,t.index+1)||sn(u,e.sn,t.index+1);if(!o)return a({frag:e,part:s,partsLoaded:l});c(o)}).catch(s)};c(t)})},r.handleFragLoadError=function(e){if("data"in e){var t=e.data;e.data&&t.details===R.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(L.ERROR,t)}else this.hls.trigger(L.ERROR,{type:k.OTHER_ERROR,details:R.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null},r._handleTransmuxerFlush=function(e){var t=this.getCurrentContext(e);if(t&&this.state===bn){var r=t.frag,n=t.part,i=t.level,a=self.performance.now();r.stats.parsing.end=a,n&&(n.stats.parsing.end=a);var s=this.getLevelDetails(),o=s&&r.sn>s.endSN||this.shouldLoadParts(s,r.end);o!==this.loadingParts&&(this.log("LL-Part loading "+(o?"ON":"OFF")+" after parsing segment ending @"+r.end.toFixed(2)),this.loadingParts=o),this.updateLevelTiming(r,n,i,e.partial)}else this.fragCurrent||this.state===pn||this.state===wn||(this.state=mn)},r.shouldLoadParts=function(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(null!=e&&e.partList){var r,n,i=e.partList[0];if(t>=i.end+((null==(r=e.fragmentHint)?void 0:r.duration)||0)&&(this.hls.hasEnoughToStart?(null==(n=this.media)?void 0:n.currentTime)||this.lastCurrentTime:this.getLoadPosition())>i.start-i.fragment.duration)return!0}}return!1},r.getCurrentContext=function(e){var t=this.levels,r=this.fragCurrent,n=e.level,i=e.sn,a=e.part;if(null==t||!t[n])return this.warn("Levels object was unset while buffering fragment "+i+" of "+this.playlistLabel()+" "+n+". The current chunk will not be buffered."),null;var s=t[n],o=s.details,l=a>-1?an(o,i,a):null,u=l?l.fragment:nn(o,i,r);return u?(r&&r!==u&&(u.stats=r.stats),{frag:u,part:l,level:s}):null},r.bufferFragmentData=function(e,t,r,n,i){var a;if(e&&this.state===bn){var s=e.data1,o=e.data2,l=s;if(s&&o&&(l=Se(s,o)),null!=(a=l)&&a.length){var u=this.initPTS[t.cc],c=u?-u.baseTime/u.timescale:void 0,d={type:e.type,frag:t,part:r,chunkMeta:n,offset:c,parent:t.type,data:l};if(this.hls.trigger(L.BUFFER_APPENDING,d),e.dropped&&e.independent&&!r){if(i)return;this.flushBufferGap(t)}}}},r.flushBufferGap=function(e){var t=this.media;if(t)if(rr.isBuffered(t,t.currentTime)){var r=t.currentTime,n=rr.bufferInfo(t,r,0),i=e.duration,a=Math.min(2*this.config.maxFragLookUpTolerance,.25*i),s=Math.max(Math.min(e.start-a,n.end-a),r+a);e.start-s>a&&this.flushMainBuffer(s,e.start)}else this.flushMainBuffer(0,e.start)},r.getFwdBufferInfo=function(e,t){var r,n=this.getLoadPosition();if(!S(n))return null;var i=this.lastCurrentTime>n||null!=(r=this.media)&&r.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,n,t,i)},r.getFwdBufferInfoAtPos=function(e,t,r,n){var i=rr.bufferInfo(e,t,n);if(0===i.len&&void 0!==i.nextStart){var a=this.fragmentTracker.getBufferedFrag(t,r);if(a&&(i.nextStart<=a.end||a.gap)){var s=Math.max(Math.min(i.nextStart,a.end)-t,n);return rr.bufferInfo(e,t,s)}}return i},r.getMaxBufferLength=function(e){var t,r=this.config;return t=e?Math.max(8*r.maxBufferSize/e,r.maxBufferLength):r.maxBufferLength,Math.min(t,r.maxMaxBufferLength)},r.reduceMaxBufferLength=function(e,t){var r=this.config,n=Math.max(Math.min(e-t,r.maxBufferLength),t),i=Math.max(e-3*t,r.maxMaxBufferLength/2,n);return i>=n&&(r.maxMaxBufferLength=i,this.warn("Reduce max buffer length to "+i+"s"),!0)},r.getAppendedFrag=function(e,t){var r;void 0===t&&(t=I);var n=null==(r=this.fragmentTracker)?void 0:r.getAppendedFrag(e,t);return n&&"fragment"in n?n.fragment:n},r.getNextFragment=function(e,t){var r=t.fragments,n=r.length;if(!n)return null;var i=this.config,a=r[0].start,s=i.lowLatencyMode&&!!t.partList,o=null;if(t.live){var l=i.initialLiveManifestSize;if(n<l)return this.warn("Not enough fragments to start playback (have: "+n+", need: "+l+")"),null;if(!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||e<a){var u;s&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),o=this.getInitialLiveFragment(t);var c=this.hls.startPosition,d=this.hls.liveSyncPosition,f=o?(-1!==c&&c>=a?c:d)||o.start:e;this.log("Setting startPosition to "+f+" to match start frag at live edge. mainStart: "+c+" liveSyncPosition: "+d+" frag.start: "+(null==(u=o)?void 0:u.start)),this.startPosition=this.nextLoadPosition=f}}else e<=a&&(o=r[0]);if(!o){var h=this.loadingParts?t.partEnd:t.fragmentEnd;o=this.getFragmentAtPosition(e,h,t)}var p=this.filterReplacedPrimary(o,t);if(!p&&o){var m=o.sn-t.startSN;p=this.filterReplacedPrimary(r[m+1]||null,t)}return this.mapToInitFragWhenRequired(p)},r.isLoopLoading=function(e,t){var r=this.fragmentTracker.getState(e);return(r===Nt||r===Ft&&!!e.gap)&&this.nextLoadPosition>t},r.getNextFragmentLoopLoading=function(e,t,r,n,i){var a=null;if(e.gap&&(a=this.getNextFragment(this.nextLoadPosition,t))&&!a.gap&&r.nextStart){var s=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,n,0);if(null!==s&&r.len+s.len>=i){var o=a.sn;return this.loopSn!==o&&(this.log('buffer full after gaps in "'+n+'" playlist starting at sn: '+o),this.loopSn=o),null}}return this.loopSn=void 0,a},r.filterReplacedPrimary=function(e,t){if(!e)return e;if(An(this.hls.config)&&e.type!==x){var r=this.hls.interstitialsManager,n=null==r?void 0:r.bufferingItem;if(n){var i=n.event;if(i){if(i.appendInPlace||Math.abs(e.start-n.start)>1||0===n.start)return null}else{if(e.end<=n.start&&!1===(null==t?void 0:t.live))return null;if(e.start>n.end&&n.nextEvent&&(n.nextEvent.appendInPlace||e.start-n.end>1))return null}}var a=null==r?void 0:r.playerQueue;if(a)for(var s=a.length;s--;){var o=a[s].interstitial;if(o.appendInPlace&&e.start>=o.startTime&&e.end<=o.resumeTime)return null}}return e},r.mapToInitFragWhenRequired=function(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment},r.getNextPart=function(e,t,r){for(var n=-1,i=!1,a=!0,s=0,o=e.length;s<o;s++){var l=e[s];if(a=a&&!l.independent,n>-1&&r<l.start)break;var u=l.loaded;u?n=-1:(i||l.independent||a)&&l.fragment===t&&(n=s),i=u}return n},r.loadedEndOfParts=function(e,t){var r=e[e.length-1];return r&&t>r.start&&r.loaded},r.getInitialLiveFragment=function(e){var t=e.fragments,r=this.fragPrevious,n=null;if(r){if(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),n=function(e,t,r){if(null===t||!Array.isArray(e)||!e.length||!S(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;for(var n=0;n<e.length;++n){var i=e[n];if(yt(t,r,i))return i}return null}(t,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!n){var i=r.sn+1;if(i>=e.startSN&&i<=e.endSN){var a=t[i-e.startSN];r.cc===a.cc&&(n=a,this.log("Live playlist, switching playlist, load frag with next SN: "+n.sn))}n||(n=Et(e,r.cc,r.end))&&this.log("Live playlist, switching playlist, load frag with same CC: "+n.sn)}}else{var s=this.hls.liveSyncPosition;null!==s&&(n=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return n},r.getFragmentAtPosition=function(e,t,r){var n,i,a=this.config,s=this.fragPrevious,o=r.fragments,l=r.endSN,u=r.fragmentHint,c=a.maxFragLookUpTolerance,d=r.partList,f=!!(this.loadingParts&&null!=d&&d.length&&u);if(f&&u&&!this.bitrateTest&&d[d.length-1].fragment.sn===u.sn&&(o=o.concat(u),l=u.sn),n=e<t?gt(s,o,e,e<this.lastCurrentTime||e>t-c||null!=(i=this.media)&&i.paused||!this.startFragRequested?0:c):o[o.length-1]){var h=n.sn-r.startSN,p=this.fragmentTracker.getState(n);if((p===Nt||p===Ft&&n.gap)&&(s=n),s&&n.sn===s.sn&&(!f||d[0].fragment.sn>n.sn||!r.live&&!f)&&s&&n.level===s.level){var m=o[h+1];n=n.sn<l&&this.fragmentTracker.getState(m)!==Nt?m:null}}return n},r.alignPlaylists=function(e,t,r){var n=e.fragments.length;if(!n)return this.warn("No fragments in live playlist"),0;var i=e.fragmentStart,a=!t,s=e.alignedSliding&&S(i);if(a||!s&&!i){!function(e,t){e&&(dn(t,e),!t.alignedSliding&&e&&fn(t,e),t.alignedSliding||!e||t.skippedSegments||en(e,t,!1))}(r,e);var o=e.fragmentStart;return this.log("Live playlist sliding: "+o.toFixed(2)+" start-sn: "+(t?t.startSN:"na")+"->"+e.startSN+" fragments: "+n),o}return i},r.waitForCdnTuneIn=function(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)},r.setStartPosition=function(e,t){var r=this.startPosition;r<t&&(r=-1);var n=this.timelineOffset;if(-1===r){var i=null!==this.startTimeOffset,a=i?this.startTimeOffset:e.startTimeOffset;null!==a&&S(a)?(r=t+a,a<0&&(r+=e.edge),r=Math.min(Math.max(t,r),t+e.totalduration),this.log("Setting startPosition to "+r+" for start time offset "+a+" found in "+(i?"multivariant":"media")+" playlist"),this.startPosition=r):e.live?(r=this.hls.liveSyncPosition||t,this.log("Setting startPosition to -1 to start at live edge "+r),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=r=0),this.lastCurrentTime=r+n}this.nextLoadPosition=r+n},r.getLoadPosition=function(){var e,t=this.media,r=0;return null!=(e=this.hls)&&e.hasEnoughToStart&&t?r=t.currentTime:this.nextLoadPosition>=0&&(r=this.nextLoadPosition),r},r.handleFragLoadAborted=function(e,t){this.transmuxer&&e.type===this.playlistType&&ee(e)&&e.stats.aborted&&(this.log("Fragment "+e.sn+(t?" part "+t.index:"")+" of "+this.playlistLabel()+" "+e.level+" was aborted"),this.resetFragmentLoading(e))},r.resetFragmentLoading=function(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===yn)||(this.state=mn)},r.onFragmentOrKeyLoadError=function(e,t){if(t.chunkMeta&&!t.frag){var r=this.getCurrentContext(t.chunkMeta);r&&(t.frag=r.frag)}var n=t.frag;if(n&&n.type===e&&this.levels)if(this.fragContextChanged(n)){var i;this.warn("Frag load error must match current frag to retry "+n.url+" > "+(null==(i=this.fragCurrent)?void 0:i.url))}else{var a=t.details===R.FRAG_GAP;a&&this.fragmentTracker.fragBuffered(n,!0);var s=t.errorAction,o=s||{},l=o.action,u=o.flags,c=o.retryCount,d=void 0===c?0:c,f=o.retryConfig,h=!!s&&!!f,p=h&&l===_t,m=h&&!s.resolved&&u===Ct;if(!p&&m&&ee(n)&&!n.endList)this.resetFragmentErrors(e),this.treatAsGap(n),s.resolved=!0;else if((p||m)&&d<f.maxNumRetry){this.resetStartWhenNotLoaded(this.levelLastLoaded);var g=Tt(f,d);this.warn("Fragment "+n.sn+" of "+e+" "+n.level+" errored with "+t.details+", retrying loading "+(d+1)+"/"+f.maxNumRetry+" in "+g+"ms"),s.resolved=!0,this.retryDate=self.performance.now()+g,this.state=yn}else if(f&&s){if(this.resetFragmentErrors(e),!(d<f.maxNumRetry))return void this.warn(t.details+" reached or exceeded max retry ("+d+")");a||l===At||(s.resolved=!0)}else this.state=l===Lt?Rn:wn;this.tickImmediate()}},r.reduceLengthAndFlushBuffer=function(e){if(this.state===bn||this.state===Sn){var t=e.frag,r=e.parent,n=this.getFwdBufferInfo(this.mediaBuffer,r),i=n&&n.len>.5;i&&this.reduceMaxBufferLength(n.len,(null==t?void 0:t.duration)||10);var a=!i;return a&&this.warn("Buffer full error while media.currentTime is not buffered, flush "+r+" buffer"),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),a}return!1},r.resetFragmentErrors=function(e){e===P&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==pn&&(this.state=mn)},r.afterBufferFlushed=function(e,t,r){if(e){var n=rr.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,n,r),this.state===Tn&&this.resetLoadingState()}},r.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==pn&&(this.state=mn)},r.resetStartWhenNotLoaded=function(e){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;var t=e?e.details:null;null!=t&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},r.resetWhenMissingContext=function(e){this.warn("The loading context changed while buffering fragment "+e.sn+" of "+this.playlistLabel()+" "+e.level+". This chunk will not be buffered."),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()},r.removeUnbufferedFrags=function(e){void 0===e&&(e=0),this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)},r.updateLevelTiming=function(e,t,r,n){var i=this,a=r.details;if(a){var s;if(!Object.keys(e.elementaryStreams).reduce(function(t,s){var o=e.elementaryStreams[s];if(o){var l=o.endPTS-o.startPTS;if(l<=0)return i.warn("Could not parse fragment "+e.sn+" "+s+" duration reliably ("+l+")"),t||!1;var u=n?0:Qr(a,e,o.startPTS,o.endPTS,o.startDTS,o.endDTS);return i.hls.trigger(L.LEVEL_PTS_UPDATED,{details:a,level:r,drift:u,type:s,frag:e,start:o.startPTS,end:o.endPTS}),!0}return t},!1)&&(0===r.fragmentError&&this.treatAsGap(e,r),null===(null==(s=this.transmuxer)?void 0:s.error))){var o=new Error("Found no media in fragment "+e.sn+" of "+this.playlistLabel()+" "+e.level+" resetting transmuxer to fallback to playlist timing");if(this.warn(o.message),this.hls.trigger(L.ERROR,{type:k.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,fatal:!1,error:o,frag:e,reason:"Found no media in msn "+e.sn+" of "+this.playlistLabel()+' "'+r.url+'"'}),!this.hls)return;this.resetTransmuxer()}this.state=Sn,this.log("Parsed "+e.type+" sn: "+e.sn+(t?" part: "+t.index:"")+" of "+this.fragInfo(e,!1,t)+")"),this.hls.trigger(L.FRAG_PARSED,{frag:e,part:t})}else this.warn("level.details undefined")},r.playlistLabel=function(){return this.playlistType===I?"level":"track"},r.fragInfo=function(e,t,r){var n,i;return void 0===t&&(t=!0),this.playlistLabel()+" "+e.level+" ("+(r?"part":"frag")+":["+(null!=(n=t&&!r?e.startPTS:(r||e).start)?n:NaN).toFixed(3)+"-"+(null!=(i=t&&!r?e.endPTS:(r||e).end)?i:NaN).toFixed(3)+"]"+(r&&"main"===e.type?"INDEPENDENT="+(r.independent?"YES":"NO"):"")},r.treatAsGap=function(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)},r.resetTransmuxer=function(){var e;null==(e=this.transmuxer)||e.reset()},r.recoverWorkerError=function(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())},n(t,[{key:"startPositionValue",get:function(){var e=this.nextLoadPosition,t=this.startPosition;return-1===t&&e?e:t}},{key:"bufferingEnabled",get:function(){return this.buffering}},{key:"inFlightFrag",get:function(){return{frag:this.fragCurrent,state:this.state}}},{key:"timelineOffset",get:function(){var e,t=this.config.timelineOffset;return t?(null==(e=this.getLevelDetails())?void 0:e.appliedTimelineOffset)||t:0}},{key:"primaryPrefetch",get:function(){var e,t;return!(!An(this.hls.config)||!(null==(e=this.hls.interstitialsManager)||null==(t=e.playingItem)?void 0:t.event))}},{key:"state",get:function(){return this._state},set:function(e){var t=this._state;t!==e&&(this._state=e,this.log(t+"->"+e))}}])}(Zt);function An(e){return!!e.interstitialsController&&!1!==e.enableInterstitialPlayback}var _n=function(){function e(){this.chunks=[],this.dataLength=0}var t=e.prototype;return t.push=function(e){this.chunks.push(e),this.dataLength+=e.length},t.flush=function(){var e,t=this.chunks,r=this.dataLength;return t.length?(e=1===t.length?t[0]:function(e,t){for(var r=new Uint8Array(t),n=0,i=0;i<e.length;i++){var a=e[i];r.set(a,n),n+=a.length}return r}(t,r),this.reset(),e):new Uint8Array(0)},t.reset=function(){this.chunks.length=0,this.dataLength=0},e}();function Dn(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Cn(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function In(e,t){var r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,(r|=(127&e[t+2])<<7)|127&e[t+3]}function Pn(e,t){for(var r=t,n=0;Cn(e,t);)n+=10,n+=In(e,t+6),Dn(e,t+10)&&(n+=10),t+=n;if(n>0)return e.subarray(r,r+n)}function xn(e,t){return 255===e[t]&&240==(246&e[t+1])}function On(e,t){return 1&e[t+1]?7:9}function Mn(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function Fn(e,t){return t+1<e.length&&xn(e,t)}function Nn(e,t){if(Fn(e,t)){var r=On(e,t);if(t+r>=e.length)return!1;var n=Mn(e,t);if(n<=r)return!1;var i=t+n;return i===e.length||Fn(e,i)}return!1}function Un(e,t,r,n,i){if(!e.samplerate){var s=function(e,t,r,n){var i=t[r+2],a=i>>2&15;if(!(a>12)){var s=1+(i>>6&3),o=t[r+3]>>6&3|(1&i)<<2,l="mp4a.40."+s,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350][a],c=a;5!==s&&29!==s||(c-=3);var d=[s<<3|(14&c)>>1,(1&c)<<7|o<<3];return z.log("manifest codec:"+n+", parsed codec:"+l+", channels:"+o+", rate:"+u+" (ADTS object type:"+s+" sampling index:"+a+")"),{config:d,samplerate:u,channelCount:o,codec:l,parsedCodec:l,manifestCodec:n}}var f=new Error("invalid ADTS sampling index:"+a);e.emit(L.ERROR,L.ERROR,{type:k.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,fatal:!0,error:f,reason:f.message})}(t,r,n,i);if(!s)return;a(e,s)}}function Bn(e){return 9216e4/e}function jn(e,t,r,n,i){var a,s=n+i*Bn(e.samplerate),o=function(e,t){var r=On(e,t);if(t+r<=e.length){var n=Mn(e,t)-r;if(n>0)return{headerLength:r,frameLength:n}}}(t,r);if(o){var l=o.frameLength,u=o.headerLength,c=u+l,d=Math.max(0,r+c-t.length);d?(a=new Uint8Array(c-u)).set(t.subarray(r+u,t.length),0):a=t.subarray(r+u,r+c);var f={unit:a,pts:s};return d||e.samples.push(f),{sample:f,length:c,missing:d}}var h=t.length-r;return(a=new Uint8Array(h)).set(t.subarray(r,t.length),0),{sample:{unit:a,pts:s},length:h,missing:-1}}function Hn(e,t){return Cn(e,t)&&In(e,t+6)+10<=e.length-t}function Gn(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=1/0),function(e,t,r,n){var i=function(e){return e instanceof ArrayBuffer?e:e.buffer}(e),a=1;"BYTES_PER_ELEMENT"in n&&(a=n.BYTES_PER_ELEMENT);var s=(c=e,c&&c.buffer instanceof ArrayBuffer&&void 0!==c.byteLength&&void 0!==c.byteOffset?e.byteOffset:0),o=(s+e.byteLength)/a,l=(s+t)/a,u=Math.floor(Math.max(0,Math.min(l,o)));var c;return new n(i,u,Math.floor(Math.min(u+Math.max(r,0),o))-u)}(e,t,r,Uint8Array)}function zn(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(!(e.size<2))if(3===e.data[0]){var r=e.data.subarray(1).indexOf(0);if(-1!==r){var n=$(Gn(e.data,1,r)),i=e.data[2+r],a=e.data.subarray(3+r).indexOf(0);if(-1!==a){var s,o=$(Gn(e.data,3+r,a));return s="--\x3e"===n?$(Gn(e.data,4+r+a)):function(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}(e.data.subarray(4+r+a)),t.mimeType=n,t.pictureType=i,t.description=o,t.data=s,t}}}else console.log("Ignore frame with unrecognized character encoding")}function Vn(e){return"PRIV"===e.type?function(e){if(!(e.size<2)){var t=$(e.data,!0),r=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:r.buffer}}}(e):"W"===e.type[0]?function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,r=$(e.data.subarray(t),!0);t+=r.length+1;var n=$(e.data.subarray(t));return{key:e.type,info:r,data:n}}var i=$(e.data);return{key:e.type,info:"",data:i}}(e):"APIC"===e.type?zn(e):function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,r=$(e.data.subarray(t),!0);t+=r.length+1;var n=$(e.data.subarray(t));return{key:e.type,info:r,data:n}}var i=$(e.data.subarray(1));return{key:e.type,info:"",data:i}}}(e)}function Kn(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),r=In(e,4);return{type:t,size:r,data:e.subarray(10,10+r)}}function $n(e){for(var t=0,r=[];Cn(e,t);){var n=In(e,t+6);e[t+5]>>6&1&&(t+=10);for(var i=(t+=10)+n;t+10<i;){var a=Kn(e.subarray(t)),s=Vn(a);s&&r.push(s),t+=a.size+10}Dn(e,t)&&(t+=10)}return r}function qn(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info}function Wn(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}}function Yn(e){for(var t=$n(e),r=0;r<t.length;r++){var n=t[r];if(qn(n))return Wn(n)}}var Xn=function(e){return e.audioId3="org.id3",e.dateRange="com.apple.quicktime.HLS",e.emsg="https://aomedia.org/emsg/ID3",e.misbklv="urn:misb:KLV:bin:1910.1",e}({});function Qn(e,t){return void 0===e&&(e=""),void 0===t&&(t=9e4),{type:e,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}var Jn=function(){function e(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var t=e.prototype;return t.resetInitSegment=function(e,t,r,n){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},t.resetTimeStamp=function(e){this.initPTS=e,this.resetContiguity()},t.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},t.canParse=function(e,t){return!1},t.appendFrame=function(e,t,r){},t.demux=function(e,t){this.cachedData&&(e=Se(this.cachedData,e),this.cachedData=null);var r,n=Pn(e,0),i=n?n.length:0,a=this._audioTrack,s=this._id3Track,o=n?Yn(n):void 0,l=e.length;for((null===this.basePTS||0===this.frameIndex&&S(o))&&(this.basePTS=Zn(o,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),n&&n.length>0&&s.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:Xn.audioId3,duration:Number.POSITIVE_INFINITY});i<l;){if(this.canParse(e,i)){var u=this.appendFrame(a,e,i);u?(this.frameIndex++,this.lastPTS=u.sample.pts,r=i+=u.length):i=l}else Hn(e,i)?(n=Pn(e,i),s.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:Xn.audioId3,duration:Number.POSITIVE_INFINITY}),r=i+=n.length):i++;if(i===l&&r!==l){var c=e.slice(r);this.cachedData?this.cachedData=Se(this.cachedData,c):this.cachedData=c}}return{audioTrack:a,videoTrack:Qn(),id3Track:s,textTrack:Qn()}},t.demuxSampleAes=function(e,t,r){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},t.flush=function(e){var t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:Qn(),id3Track:this._id3Track,textTrack:Qn()}},t.destroy=function(){this.cachedData=null,this._audioTrack=this._id3Track=void 0},e}(),Zn=function(e,t,r){return S(e)?90*e:9e4*t+(r?9e4*r.baseTime/r.timescale:0)},ei=null,ti=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],ri=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],ni=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],ii=[0,1,1,4];function ai(e,t,r,n,i){if(!(r+24>t.length)){var a=si(t,r);if(a&&r+a.frameLength<=t.length){var s=n+i*(9e4*a.samplesPerFrame/a.sampleRate),o={unit:t.subarray(r,r+a.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(o),{sample:o,length:a.frameLength,missing:0}}}}function si(e,t){var r=e[t+1]>>3&3,n=e[t+1]>>1&3,i=e[t+2]>>4&15,a=e[t+2]>>2&3;if(1!==r&&0!==i&&15!==i&&3!==a){var s=e[t+2]>>1&1,o=e[t+3]>>6,l=1e3*ti[14*(3===r?3-n:3===n?3:4)+i-1],u=ri[3*(3===r?0:2===r?1:2)+a],c=3===o?1:2,d=ni[r][n],f=ii[n],h=8*d*f,p=Math.floor(d*l/u+s)*f;if(null===ei){var m=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);ei=m?parseInt(m[1]):0}return!!ei&&ei<=87&&2===n&&l>=224e3&&0===o&&(e[t+3]=128|e[t+3]),{sampleRate:u,channelCount:c,frameLength:p,samplesPerFrame:h}}}function oi(e,t){return!(255!==e[t]||224&~e[t+1]||!(6&e[t+1]))}function li(e,t){return t+1<e.length&&oi(e,t)}function ui(e,t){if(t+1<e.length&&oi(e,t)){var r=si(e,t),n=4;null!=r&&r.frameLength&&(n=r.frameLength);var i=t+n;return i===e.length||li(e,i)}return!1}var ci=function(e){function t(t,r){var n;return(n=e.call(this)||this).observer=void 0,n.config=void 0,n.observer=t,n.config=r,n}o(t,e);var r=t.prototype;return r.resetInitSegment=function(t,r,n,i){e.prototype.resetInitSegment.call(this,t,r,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:r,duration:i,inputTimeScale:9e4,dropped:0}},t.probe=function(e,t){if(!e)return!1;var r=Pn(e,0),n=(null==r?void 0:r.length)||0;if(ui(e,n))return!1;for(var i=e.length;n<i;n++)if(Nn(e,n))return t.log("ADTS sync word found !"),!0;return!1},r.canParse=function(e,t){return function(e,t){return function(e,t){return t+5<e.length}(e,t)&&xn(e,t)&&Mn(e,t)<=e.length-t}(e,t)},r.appendFrame=function(e,t,r){Un(e,this.observer,t,r,e.manifestCodec);var n=jn(e,t,r,this.basePTS,this.frameIndex);if(n&&0===n.missing)return n},t}(Jn),di=function(e,t){var r=0,n=5;t+=n;for(var i=new Uint32Array(1),a=new Uint32Array(1),s=new Uint8Array(1);n>0;){s[0]=e[t];var o=Math.min(n,8),l=8-o;a[0]=4278190080>>>24+l<<l,i[0]=(s[0]&a[0])>>l,r=r?r<<o|i[0]:i[0],t+=1,n-=o}return r},fi=function(e){function t(t){var r;return(r=e.call(this)||this).observer=void 0,r.observer=t,r}o(t,e);var r=t.prototype;return r.resetInitSegment=function(t,r,n,i){e.prototype.resetInitSegment.call(this,t,r,n,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:r,duration:i,inputTimeScale:9e4,dropped:0}},r.canParse=function(e,t){return t+64<e.length},r.appendFrame=function(e,t,r){var n=hi(e,t,r,this.basePTS,this.frameIndex);if(-1!==n)return{sample:e.samples[e.samples.length-1],length:n,missing:0}},t.probe=function(e){if(!e)return!1;var t=Pn(e,0);if(!t)return!1;var r=t.length;return 11===e[r]&&119===e[r+1]&&void 0!==Yn(t)&&di(e,r)<16},t}(Jn);function hi(e,t,r,n,i){if(r+8>t.length)return-1;if(11!==t[r]||119!==t[r+1])return-1;var a=t[r+4]>>6;if(a>=3)return-1;var s=[48e3,44100,32e3][a],o=63&t[r+4],l=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*o+a];if(r+l>t.length)return-1;var u=t[r+6]>>5,c=0;2===u?c+=2:(1&u&&1!==u&&(c+=2),4&u&&(c+=2));var d=(t[r+6]<<8|t[r+7])>>12-c&1,f=[2,1,2,3,3,4,4,5][u]+d,h=t[r+5]>>3,p=7&t[r+5],m=new Uint8Array([a<<6|h<<1|p>>2,(3&p)<<6|u<<3|d<<2|o>>4,o<<4&224]),g=n+i*(1536/s*9e4),v=t.subarray(r,r+l);return e.config=m,e.channelCount=f,e.samplerate=s,e.samples.push({unit:v,pts:g}),l}var pi=function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var r=t.prototype;return r.resetInitSegment=function(t,r,n,i){e.prototype.resetInitSegment.call(this,t,r,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:r,duration:i,inputTimeScale:9e4,dropped:0}},t.probe=function(e){if(!e)return!1;var t=Pn(e,0),r=(null==t?void 0:t.length)||0;if(t&&11===e[r]&&119===e[r+1]&&void 0!==Yn(t)&&di(e,r)<=16)return!1;for(var n=e.length;r<n;r++)if(ui(e,r))return z.log("MPEG Audio sync word found !"),!0;return!1},r.canParse=function(e,t){return function(e,t){return oi(e,t)&&4<=e.length-t}(e,t)},r.appendFrame=function(e,t,r){if(null!==this.basePTS)return ai(e,t,r,this.basePTS,this.frameIndex)},t}(Jn),mi=/\/emsg[-/]ID3/i,gi=function(){function e(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}var t=e.prototype;return t.resetTimeStamp=function(){},t.resetInitSegment=function(e,t,r,n){var i=this.videoTrack=Qn("video",1),a=this.audioTrack=Qn("audio",1),s=this.txtTrack=Qn("text",1);if(this.id3Track=Qn("id3",1),this.timeOffset=0,null!=e&&e.byteLength){var o=pe(e);if(o.video){var l=o.video,u=l.id,c=l.timescale,d=l.codec,f=l.supplemental;i.id=u,i.timescale=s.timescale=c,i.codec=d,i.supplemental=f}if(o.audio){var h=o.audio,p=h.id,m=h.timescale,g=h.codec;a.id=p,a.timescale=m,a.codec=g}s.id=se.text,i.sampleDuration=0,i.duration=a.duration=n}},t.resetContiguity=function(){this.remainderData=null},e.probe=function(e){return function(e){for(var t=e.byteLength,r=0;r<t;){var n=ue(e,r);if(n>8&&109===e[r+4]&&111===e[r+5]&&111===e[r+6]&&102===e[r+7])return!0;r=n>1?r+n:t}return!1}(e)},t.demux=function(e,t){this.timeOffset=t;var r=e,n=this.videoTrack,i=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=Se(this.remainderData,e));var a=function(e){var t={valid:null,remainder:null},r=fe(e,["moof"]);if(r.length<2)return t.remainder=e,t;var n=r[r.length-1];return t.valid=e.slice(0,n.byteOffset-8),t.remainder=e.slice(n.byteOffset-8),t}(r);this.remainderData=a.remainder,n.samples=a.valid||new Uint8Array}else n.samples=r;var s=this.extractID3Track(n,t);return i.samples=Te(t,n),{videoTrack:n,audioTrack:this.audioTrack,id3Track:s,textTrack:this.txtTrack}},t.flush=function(){var e=this.timeOffset,t=this.videoTrack,r=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;var n=this.extractID3Track(t,this.timeOffset);return r.samples=Te(e,t),{videoTrack:t,audioTrack:Qn(),id3Track:n,textTrack:Qn()}},t.extractID3Track=function(e,t){var r=this,n=this.id3Track;if(e.samples.length){var i=fe(e.samples,["emsg"]);i&&i.forEach(function(e){var i=function(e){var t=e[0],r="",n="",i=0,a=0,s=0,o=0,l=0,u=0;if(0===t){for(;"\0"!==oe(e.subarray(u,u+1));)r+=oe(e.subarray(u,u+1)),u+=1;for(r+=oe(e.subarray(u,u+1)),u+=1;"\0"!==oe(e.subarray(u,u+1));)n+=oe(e.subarray(u,u+1)),u+=1;n+=oe(e.subarray(u,u+1)),u+=1,i=ue(e,12),a=ue(e,16),o=ue(e,20),l=ue(e,24),u=28}else if(1===t){i=ue(e,u+=4);var c=ue(e,u+=4),d=ue(e,u+=4);for(u+=4,s=Math.pow(2,32)*c+d,T(s)||(s=Number.MAX_SAFE_INTEGER,z.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=ue(e,u),l=ue(e,u+=4),u+=4;"\0"!==oe(e.subarray(u,u+1));)r+=oe(e.subarray(u,u+1)),u+=1;for(r+=oe(e.subarray(u,u+1)),u+=1;"\0"!==oe(e.subarray(u,u+1));)n+=oe(e.subarray(u,u+1)),u+=1;n+=oe(e.subarray(u,u+1)),u+=1}return{schemeIdUri:r,value:n,timeScale:i,presentationTime:s,presentationTimeDelta:a,eventDuration:o,id:l,payload:e.subarray(u,e.byteLength)}}(e);if(mi.test(i.schemeIdUri)){var a=vi(i,t),s=4294967295===i.eventDuration?Number.POSITIVE_INFINITY:i.eventDuration/i.timeScale;s<=.001&&(s=Number.POSITIVE_INFINITY);var o=i.payload;n.samples.push({data:o,len:o.byteLength,dts:a,pts:a,type:Xn.emsg,duration:s})}else if(r.config.enableEmsgKLVMetadata&&i.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){var l=vi(i,t);n.samples.push({data:i.payload,len:i.payload.byteLength,dts:l,pts:l,type:Xn.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n},t.demuxSampleAes=function(e,t,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},t.destroy=function(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0},e}();function vi(e,t){return S(e.presentationTime)?e.presentationTime/e.timeScale:t+e.presentationTimeDelta/e.timeScale}var yi=function(){function e(e,t,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new qt(t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,Gt)},t.decryptAacSample=function(e,t,r){var n=this,i=e[t].unit;if(!(i.length<=16)){var a=i.subarray(16,i.length-i.length%16),s=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);this.decryptBuffer(s).then(function(a){var s=new Uint8Array(a);i.set(s,16),n.decrypter.isSync()||n.decryptAacSamples(e,t+1,r)})}},t.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32||(this.decryptAacSample(e,t,r),this.decrypter.isSync())))return}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),n=0,i=32;i<e.length-16;i+=160,n+=16)r.set(e.subarray(i,i+16),n);return r},t.getAvcDecryptedUnit=function(e,t){for(var r=new Uint8Array(t),n=0,i=32;i<e.length-16;i+=160,n+=16)e.set(r.subarray(n,n+16),i);return e},t.decryptAvcSample=function(e,t,r,n,i){var a=this,s=Le(i.data),o=this.getAvcEncryptedData(s);this.decryptBuffer(o.buffer).then(function(o){i.data=a.getAvcDecryptedUnit(s,o),a.decrypter.isSync()||a.decryptAvcSamples(e,t,r+1,n)})},t.decryptAvcSamples=function(e,t,r,n){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,r=0){if(t>=e.length)return void n();for(var i=e[t].units;!(r>=i.length);r++){var a=i[r];if(!(a.data.length<=48||1!==a.type&&5!==a.type||(this.decryptAvcSample(e,t,r,n,a),this.decrypter.isSync())))return}}},e}(),Ei=function(){function e(){this.VideoSample=null}var t=e.prototype;return t.createVideoSample=function(e,t,r){return{key:e,frame:!1,pts:t,dts:r,units:[],length:0}},t.getLastNalUnit=function(e){var t,r,n=this.VideoSample;if(n&&0!==n.units.length||(n=e[e.length-1]),null!=(t=n)&&t.units){var i=n.units;r=i[i.length-1]}return r},t.pushAccessUnit=function(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){var r=t.samples,n=r.length;if(!n)return void t.dropped++;var i=r[n-1];e.pts=i.pts,e.dts=i.dts}t.samples.push(e)}},t.parseNALu=function(e,t,r){var n,i,a=t.byteLength,s=e.naluState||0,o=s,l=[],u=0,c=-1,d=0;for(-1===s&&(c=0,d=this.getNALuType(t,0),s=0,u=1);u<a;)if(n=t[u++],s)if(1!==s)if(n)if(1===n){if(i=u-s-1,c>=0){var f={data:t.subarray(c,i),type:d};l.push(f)}else{var h=this.getLastNalUnit(e.samples);h&&(o&&u<=4-o&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-o)),i>0&&(h.data=Se(h.data,t.subarray(0,i)),h.state=0))}u<a?(c=u,d=this.getNALuType(t,u),s=0):s=-1}else s=0;else s=3;else s=n?0:2;else s=n?0:1;if(c>=0&&s>=0){var p={data:t.subarray(c,a),type:d,state:s};l.push(p)}if(0===l.length){var m=this.getLastNalUnit(e.samples);m&&(m.data=Se(m.data,t))}return e.naluState=s,l},e}(),bi=function(){function e(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");n.set(e.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},t.skipBits=function(e){var t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;if(e>32&&z.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return(t=e-t)>0&&this.bitsAvailable?r<<t|this.readBits(t):r},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},e}(),Si=function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var r=t.prototype;return r.parsePES=function(e,t,r,n){var i,a=this,s=this.parseNALu(e,r.data,n),o=this.VideoSample,l=!1;r.data=null,o&&s.length&&!e.audFound&&(this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),s.forEach(function(n){var s,u;switch(n.type){case 1:var c=!1;i=!0;var d,f=n.data;if(l&&f.length>4){var h=a.readSliceType(f);2!==h&&4!==h&&7!==h&&9!==h||(c=!0)}c&&null!=(d=o)&&d.frame&&!o.key&&(a.pushAccessUnit(o,e),o=a.VideoSample=null),o||(o=a.VideoSample=a.createVideoSample(!0,r.pts,r.dts)),o.frame=!0,o.key=c;break;case 5:i=!0,null!=(s=o)&&s.frame&&!o.key&&(a.pushAccessUnit(o,e),o=a.VideoSample=null),o||(o=a.VideoSample=a.createVideoSample(!0,r.pts,r.dts)),o.key=!0,o.frame=!0;break;case 6:i=!0,Re(n.data,1,r.pts,t.samples);break;case 7:var p,m;i=!0,l=!0;var g=n.data,v=a.readSPS(g);if(!e.sps||e.width!==v.width||e.height!==v.height||(null==(p=e.pixelRatio)?void 0:p[0])!==v.pixelRatio[0]||(null==(m=e.pixelRatio)?void 0:m[1])!==v.pixelRatio[1]){e.width=v.width,e.height=v.height,e.pixelRatio=v.pixelRatio,e.sps=[g];for(var y=g.subarray(1,4),E="avc1.",b=0;b<3;b++){var S=y[b].toString(16);S.length<2&&(S="0"+S),E+=S}e.codec=E}break;case 8:i=!0,e.pps=[n.data];break;case 9:i=!0,e.audFound=!0,null!=(u=o)&&u.frame&&(a.pushAccessUnit(o,e),o=null),o||(o=a.VideoSample=a.createVideoSample(!1,r.pts,r.dts));break;case 12:i=!0;break;default:i=!1}o&&i&&o.units.push(n)}),n&&o&&(this.pushAccessUnit(o,e),this.VideoSample=null)},r.getNALuType=function(e,t){return 31&e[t]},r.readSliceType=function(e){var t=new bi(e);return t.readUByte(),t.readUEG(),t.readUEG()},r.skipScalingList=function(e,t){for(var r=8,n=8,i=0;i<e;i++)0!==n&&(n=(r+t.readEG()+256)%256),r=0===n?r:n},r.readSPS=function(e){var t,r,n,i=new bi(e),a=0,s=0,o=0,l=0,u=i.readUByte.bind(i),c=i.readBits.bind(i),d=i.readUEG.bind(i),f=i.readBoolean.bind(i),h=i.skipBits.bind(i),p=i.skipEG.bind(i),m=i.skipUEG.bind(i),g=this.skipScalingList.bind(this);u();var v=u();if(c(5),h(3),u(),m(),100===v||110===v||122===v||244===v||44===v||83===v||86===v||118===v||128===v){var y=d();if(3===y&&h(1),m(),m(),h(1),f())for(r=3!==y?8:12,n=0;n<r;n++)f()&&g(n<6?16:64,i)}m();var E=d();if(0===E)d();else if(1===E)for(h(1),p(),p(),t=d(),n=0;n<t;n++)p();m(),h(1);var b=d(),S=d(),T=c(1);0===T&&h(1),h(1),f()&&(a=d(),s=d(),o=d(),l=d());var w=[1,1];if(f()&&f())switch(u()){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:w=[u()<<8|u(),u()<<8|u()]}return{width:Math.ceil(16*(b+1)-2*a-2*s),height:(2-T)*(S+1)*16-(T?2:4)*(o+l),pixelRatio:w}},t}(Ei),Ti=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).initVPS=null,t}o(t,e);var r=t.prototype;return r.parsePES=function(e,t,r,n){var i,s=this,o=this.parseNALu(e,r.data,n),l=this.VideoSample,u=!1;r.data=null,l&&o.length&&!e.audFound&&(this.pushAccessUnit(l,e),l=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),o.forEach(function(n){var o,c;switch(n.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:l||(l=s.VideoSample=s.createVideoSample(!1,r.pts,r.dts)),l.frame=!0,i=!0;break;case 16:case 17:case 18:case 21:var d;i=!0,u&&null!=(d=l)&&d.frame&&!l.key&&(s.pushAccessUnit(l,e),l=s.VideoSample=null),l||(l=s.VideoSample=s.createVideoSample(!0,r.pts,r.dts)),l.key=!0,l.frame=!0;break;case 19:case 20:i=!0,null!=(o=l)&&o.frame&&!l.key&&(s.pushAccessUnit(l,e),l=s.VideoSample=null),l||(l=s.VideoSample=s.createVideoSample(!0,r.pts,r.dts)),l.key=!0,l.frame=!0;break;case 39:i=!0,Re(n.data,2,r.pts,t.samples);break;case 32:i=!0,e.vps||("object"!=typeof e.params&&(e.params={}),e.params=a(e.params,s.readVPS(n.data)),s.initVPS=n.data),e.vps=[n.data];break;case 33:if(i=!0,u=!0,void 0===e.vps||e.vps[0]===s.initVPS||void 0===e.sps||s.matchSPS(e.sps[0],n.data)||(s.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){var f=s.readSPS(n.data);for(var h in e.width=f.width,e.height=f.height,e.pixelRatio=f.pixelRatio,e.codec=f.codecString,e.sps=[],"object"!=typeof e.params&&(e.params={}),f.params)e.params[h]=f.params[h]}s.pushParameterSet(e.sps,n.data,e.vps),l||(l=s.VideoSample=s.createVideoSample(!0,r.pts,r.dts)),l.key=!0;break;case 34:if(i=!0,"object"==typeof e.params){if(!e.pps){e.pps=[];var p=s.readPPS(n.data);for(var m in p)e.params[m]=p[m]}s.pushParameterSet(e.pps,n.data,e.vps)}break;case 35:i=!0,e.audFound=!0,null!=(c=l)&&c.frame&&(s.pushAccessUnit(l,e),l=null),l||(l=s.VideoSample=s.createVideoSample(!1,r.pts,r.dts));break;default:i=!1}l&&i&&l.units.push(n)}),n&&l&&(this.pushAccessUnit(l,e),this.VideoSample=null)},r.pushParameterSet=function(e,t,r){(r&&r[0]===this.initVPS||!r&&!e.length)&&e.push(t)},r.getNALuType=function(e,t){return(126&e[t])>>>1},r.ebsp2rbsp=function(e){for(var t=new Uint8Array(e.byteLength),r=0,n=0;n<e.byteLength;n++)n>=2&&3===e[n]&&0===e[n-1]&&0===e[n-2]||(t[r]=e[n],r++);return new Uint8Array(t.buffer,0,r)},r.pushAccessUnit=function(t,r){e.prototype.pushAccessUnit.call(this,t,r),this.initVPS&&(this.initVPS=null)},r.readVPS=function(e){var t=new bi(e);return t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6),{numTemporalLayers:t.readBits(3)+1,temporalIdNested:t.readBoolean()}},r.readSPS=function(e){var t=new bi(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);var r=t.readBits(3);t.readBoolean();for(var n=t.readBits(2),i=t.readBoolean(),a=t.readBits(5),s=t.readUByte(),o=t.readUByte(),l=t.readUByte(),u=t.readUByte(),c=t.readUByte(),d=t.readUByte(),f=t.readUByte(),h=t.readUByte(),p=t.readUByte(),m=t.readUByte(),g=t.readUByte(),v=[],y=[],E=0;E<r;E++)v.push(t.readBoolean()),y.push(t.readBoolean());if(r>0)for(var b=r;b<8;b++)t.readBits(2);for(var S=0;S<r;S++)v[S]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),y[S]&&t.readUByte();t.readUEG();var T=t.readUEG();3==T&&t.skipBits(1);var w=t.readUEG(),k=t.readUEG(),R=t.readBoolean(),L=0,A=0,_=0,D=0;R&&(L+=t.readUEG(),A+=t.readUEG(),_+=t.readUEG(),D+=t.readUEG());for(var C=t.readUEG(),I=t.readUEG(),P=t.readUEG(),x=t.readBoolean()?0:r;x<=r;x++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(var O=0;O<4;O++)for(var M=0;M<(3===O?2:6);M++)if(t.readBoolean()){var F=Math.min(64,1<<4+(O<<1));O>1&&t.readEG();for(var N=0;N<F;N++)t.readEG()}else t.readUEG();t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());for(var U=t.readUEG(),B=0,j=0;j<U;j++){var H=!1;if(0!==j&&(H=t.readBoolean()),H){j===U&&t.readUEG(),t.readBoolean(),t.readUEG();for(var G=0,z=0;z<=B;z++){var V=t.readBoolean(),K=!1;V||(K=t.readBoolean()),(V||K)&&G++}B=G}else{var $=t.readUEG(),q=t.readUEG();B=$+q;for(var W=0;W<$;W++)t.readUEG(),t.readBoolean();for(var Y=0;Y<q;Y++)t.readUEG(),t.readBoolean()}}if(t.readBoolean())for(var X=t.readUEG(),Q=0;Q<X;Q++){for(var J=0;J<P+4;J++)t.readBits(1);t.readBits(1)}var Z=0,ee=1,te=1,re=!0,ne=1,ie=0;t.readBoolean(),t.readBoolean();var ae=!1;if(t.readBoolean()){if(t.readBoolean()){var se=t.readUByte();se>0&&se<16?(ee=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][se-1],te=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][se-1]):255===se&&(ee=t.readBits(16),te=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),(ae=t.readBoolean())&&(L+=t.readUEG(),A+=t.readUEG(),_+=t.readUEG(),D+=t.readUEG()),t.readBoolean()&&(ne=t.readBits(32),ie=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){var oe=t.readBoolean(),le=t.readBoolean(),ue=!1;(oe||le)&&((ue=t.readBoolean())&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),ue&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(var ce=0;ce<=r;ce++){var de=!1;(re=t.readBoolean())||t.readBoolean()?t.readEG():de=t.readBoolean();var fe=de?1:t.readUEG()+1;if(oe)for(var he=0;he<fe;he++)t.readUEG(),t.readUEG(),ue&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(le)for(var pe=0;pe<fe;pe++)t.readUEG(),t.readUEG(),ue&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),Z=t.readUEG())}var me=w,ge=k;if(R||ae){var ve=1,ye=1;1===T?ve=ye=2:2==T&&(ve=2),me=w-ve*A-ve*L,ge=k-ye*D-ye*_}for(var Ee=n?["A","B","C"][n]:"",be=s<<24|o<<16|l<<8|u,Se=0,Te=0;Te<32;Te++)Se=(Se|(be>>Te&1)<<31-Te)>>>0;var we=Se.toString(16);return 1===a&&"2"===we&&(we="6"),{codecString:"hvc1."+Ee+a+"."+we+"."+(i?"H":"L")+g+".B0",params:{general_tier_flag:i,general_profile_idc:a,general_profile_space:n,general_profile_compatibility_flags:[s,o,l,u],general_constraint_indicator_flags:[c,d,f,h,p,m],general_level_idc:g,bit_depth:C+8,bit_depth_luma_minus8:C,bit_depth_chroma_minus8:I,min_spatial_segmentation_idc:Z,chroma_format_idc:T,frame_rate:{fixed:re,fps:ie/ne}},width:me,height:ge,pixelRatio:[ee,te]}},r.readPPS=function(e){var t=new bi(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);var r=t.readBoolean(),n=t.readBoolean(),i=1;return n&&r?i=0:n?i=3:r&&(i=2),{parallelismType:i}},r.matchSPS=function(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)},t}(Ei),wi=188,ki=function(){function e(e,t,r,n){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=r,this.logger=n,this.videoParser=null}e.probe=function(t,r){var n=e.syncOffset(t);return n>0&&r.warn("MPEG2-TS detected but first sync word found @ offset "+n),-1!==n},e.syncOffset=function(e){for(var t=e.length,r=Math.min(940,t-wi)+1,n=0;n<r;){for(var i=!1,a=-1,s=0,o=n;o<t;o+=wi){if(71!==e[o]||t-o!==wi&&71!==e[o+wi]){if(s)return-1;break}if(s++,-1===a&&0!==(a=o)&&(r=Math.min(a+18612,e.length-wi)+1),i||(i=0===Ri(e,o)),i&&s>1&&(0===a&&s>2||o+wi>r))return a}n++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:se[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}};var t=e.prototype;return t.resetInitSegment=function(t,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=e.createTrack("video"),this._videoTrack.duration=i,this._audioTrack=e.createTrack("audio",i),this._id3Track=e.createTrack("id3"),this._txtTrack=e.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=r,this.videoCodec=n},t.resetTimeStamp=function(){},t.resetContiguity=function(){var e=this._audioTrack,t=this._videoTrack,r=this._id3Track;e&&(e.pesData=null),t&&(t.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.remainderData=null},t.demux=function(t,r,n,i){var a;void 0===n&&(n=!1),void 0===i&&(i=!1),n||(this.sampleAes=null);var s=this._videoTrack,o=this._audioTrack,l=this._id3Track,u=this._txtTrack,c=s.pid,d=s.pesData,f=o.pid,h=l.pid,p=o.pesData,m=l.pesData,g=null,v=this.pmtParsed,y=this._pmtId,E=t.length;if(this.remainderData&&(E=(t=Se(this.remainderData,t)).length,this.remainderData=null),E<wi&&!i)return this.remainderData=t,{audioTrack:o,videoTrack:s,id3Track:l,textTrack:u};var b=Math.max(0,e.syncOffset(t));(E-=(E-b)%wi)<t.byteLength&&!i&&(this.remainderData=new Uint8Array(t.buffer,E,t.buffer.byteLength-E));for(var S=0,T=b;T<E;T+=wi)if(71===t[T]){var w=!!(64&t[T+1]),k=Ri(t,T),R=void 0;if((48&t[T+3])>>4>1){if((R=T+5+t[T+4])===T+wi)continue}else R=T+4;switch(k){case c:if(w){if(d&&(a=Ci(d,this.logger))){if(null===this.videoParser)switch(s.segmentCodec){case"avc":this.videoParser=new Si;break;case"hevc":this.videoParser=new Ti}null!==this.videoParser&&this.videoParser.parsePES(s,u,a,!1)}d={data:[],size:0}}d&&(d.data.push(t.subarray(R,T+wi)),d.size+=T+wi-R);break;case f:if(w){if(p&&(a=Ci(p,this.logger)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,a);break;case"mp3":this.parseMPEGPES(o,a);break;case"ac3":this.parseAC3PES(o,a)}p={data:[],size:0}}p&&(p.data.push(t.subarray(R,T+wi)),p.size+=T+wi-R);break;case h:w&&(m&&(a=Ci(m,this.logger))&&this.parseID3PES(l,a),m={data:[],size:0}),m&&(m.data.push(t.subarray(R,T+wi)),m.size+=T+wi-R);break;case 0:w&&(R+=t[R]+1),y=this._pmtId=Li(t,R);break;case y:w&&(R+=t[R]+1);var L=Ai(t,R,this.typeSupported,n,this.observer,this.logger);(c=L.videoPid)>0&&(s.pid=c,s.segmentCodec=L.segmentVideoCodec),(f=L.audioPid)>0&&(o.pid=f,o.segmentCodec=L.segmentAudioCodec),(h=L.id3Pid)>0&&(l.pid=h),null===g||v||(this.logger.warn("MPEG-TS PMT found at "+T+" after unknown PID '"+g+"'. Backtracking to sync byte @"+b+" to parse all TS packets."),g=null,T=b-188),v=this.pmtParsed=!0;break;case 17:case 8191:break;default:g=k}}else S++;S>0&&_i(this.observer,new Error("Found "+S+" TS packet/s that do not start with 0x47"),void 0,this.logger),s.pesData=d,o.pesData=p,l.pesData=m;var A={audioTrack:o,videoTrack:s,id3Track:l,textTrack:u};return i&&this.extractRemainingSamples(A),A},t.flush=function(){var e,t=this.remainderData;return this.remainderData=null,e=t?this.demux(t,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e},t.extractRemainingSamples=function(e){var t,r=e.audioTrack,n=e.videoTrack,i=e.id3Track,a=e.textTrack,s=n.pesData,o=r.pesData,l=i.pesData;if(s&&(t=Ci(s,this.logger))){if(null===this.videoParser)switch(n.segmentCodec){case"avc":this.videoParser=new Si;break;case"hevc":this.videoParser=new Ti}null!==this.videoParser&&(this.videoParser.parsePES(n,a,t,!0),n.pesData=null)}else n.pesData=s;if(o&&(t=Ci(o,this.logger))){switch(r.segmentCodec){case"aac":this.parseAACPES(r,t);break;case"mp3":this.parseMPEGPES(r,t);break;case"ac3":this.parseAC3PES(r,t)}r.pesData=null}else null!=o&&o.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=o;l&&(t=Ci(l,this.logger))?(this.parseID3PES(i,t),i.pesData=null):i.pesData=l},t.demuxSampleAes=function(e,t,r){var n=this.demux(e,r,!0,!this.config.progressive),i=this.sampleAes=new yi(this.observer,this.config,t);return this.decrypt(n,i)},t.decrypt=function(e,t){return new Promise(function(r){var n=e.audioTrack,i=e.videoTrack;n.samples&&"aac"===n.segmentCodec?t.decryptAacSamples(n.samples,0,function(){i.samples?t.decryptAvcSamples(i.samples,0,0,function(){r(e)}):r(e)}):i.samples&&t.decryptAvcSamples(i.samples,0,0,function(){r(e)})})},t.destroy=function(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0},t.parseAACPES=function(e,t){var r,n,i,a=0,s=this.aacOverFlow,o=t.data;if(s){this.aacOverFlow=null;var l=s.missing,u=s.sample.unit.byteLength;if(-1===l)o=Se(s.sample.unit,o);else{var c=u-l;s.sample.unit.set(o.subarray(0,l),c),e.samples.push(s.sample),a=s.missing}}for(r=a,n=o.length;r<n-1&&!Fn(o,r);r++);if(r!==a){var d,f=r<n-1;if(d=f?"AAC PES did not start with ADTS header,offset:"+r:"No ADTS header found in AAC PES",_i(this.observer,new Error(d),f,this.logger),!f)return}if(Un(e,this.observer,o,r,this.audioCodec),void 0!==t.pts)i=t.pts;else{if(!s)return void this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var h=Bn(e.samplerate);i=s.sample.pts+h}for(var p,m=0;r<n;){if(r+=(p=jn(e,o,r,i,m)).length,p.missing){this.aacOverFlow=p;break}for(m++;r<n-1&&!Fn(o,r);r++);}},t.parseMPEGPES=function(e,t){var r=t.data,n=r.length,i=0,a=0,s=t.pts;if(void 0!==s)for(;a<n;)if(li(r,a)){var o=ai(e,r,a,s,i);if(!o)break;a+=o.length,i++}else a++;else this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")},t.parseAC3PES=function(e,t){var r=t.data,n=t.pts;if(void 0!==n)for(var i,a=r.length,s=0,o=0;o<a&&(i=hi(e,r,o,n,s++))>0;)o+=i;else this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS")},t.parseID3PES=function(e,t){if(void 0!==t.pts){var r=a({},t,{type:this._videoTrack?Xn.emsg:Xn.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(r)}else this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS")},e}();function Ri(e,t){return((31&e[t+1])<<8)+e[t+2]}function Li(e,t){return(31&e[t+10])<<8|e[t+11]}function Ai(e,t,r,n,i,a){var s={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<o;){var l=Ri(e,t),u=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!n){Di("ADTS AAC",a);break}case 15:-1===s.audioPid&&(s.audioPid=l);break;case 21:-1===s.id3Pid&&(s.id3Pid=l);break;case 219:if(!n){Di("H.264",a);break}case 27:-1===s.videoPid&&(s.videoPid=l);break;case 3:case 4:r.mpeg||r.mp3?-1===s.audioPid&&(s.audioPid=l,s.segmentAudioCodec="mp3"):a.log("MPEG audio found, not supported in this browser");break;case 193:if(!n){Di("AC-3",a);break}case 129:r.ac3?-1===s.audioPid&&(s.audioPid=l,s.segmentAudioCodec="ac3"):a.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===s.audioPid&&u>0)for(var c=t+5,d=u;d>2;){106===e[c]&&(!0!==r.ac3?a.log("AC-3 audio found, not supported in this browser for now"):(s.audioPid=l,s.segmentAudioCodec="ac3"));var f=e[c+1]+2;c+=f,d-=f}break;case 194:case 135:return _i(i,new Error("Unsupported EC-3 in M2TS found"),void 0,a),s;case 36:-1===s.videoPid&&(s.videoPid=l,s.segmentVideoCodec="hevc",a.log("HEVC in M2TS found"))}t+=u+5}return s}function _i(e,t,r,n){n.warn("parsing error: "+t.message),e.emit(L.ERROR,L.ERROR,{type:k.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,fatal:!1,levelRetry:r,error:t,reason:t.message})}function Di(e,t){t.log(e+" with AES-128-CBC encryption found in unencrypted stream")}function Ci(e,t){var r,n,i,a,s,o=0,l=e.data;if(!e||0===e.size)return null;for(;l[0].length<19&&l.length>1;)l[0]=Se(l[0],l[1]),l.splice(1,1);if(1===((r=l[0])[0]<<16)+(r[1]<<8)+r[2]){if((n=(r[4]<<8)+r[5])&&n>e.size-6)return null;var u=r[7];192&u&&(a=536870912*(14&r[9])+4194304*(255&r[10])+16384*(254&r[11])+128*(255&r[12])+(254&r[13])/2,64&u?a-(s=536870912*(14&r[14])+4194304*(255&r[15])+16384*(254&r[16])+128*(255&r[17])+(254&r[18])/2)>54e5&&(t.warn(Math.round((a-s)/9e4)+"s delta between PTS and DTS, align them"),a=s):s=a);var c=(i=r[8])+9;if(e.size<=c)return null;e.size-=c;for(var d=new Uint8Array(e.size),f=0,h=l.length;f<h;f++){var p=(r=l[f]).byteLength;if(c){if(c>p){c-=p;continue}r=r.subarray(c),p-=c,c=0}d.set(r,o),o+=p}return n&&(n-=i+3),{data:d,pts:a,dts:s,len:n}}return null}var Ii=function(){function e(){}return e.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},e}(),Pi=Math.pow(2,32)-1,xi=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,s,l,s,o),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){for(var t=8,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];for(var a=n.length,s=a;a--;)t+=n[a].byteLength;var o=new Uint8Array(t);for(o[0]=t>>24&255,o[1]=t>>16&255,o[2]=t>>8&255,o[3]=255&t,o.set(e,4),a=0,t=8;a<s;a++)o.set(n[a],t),t+=n[a].byteLength;return o},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var n=Math.floor(r/(Pi+1)),i=Math.floor(r%(Pi+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale||0,t.duration||0),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,r))},e.moov=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale||0,t[0].duration||0)].concat(n).concat(e.mvex(t)))},e.mvex=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(n))},e.mvhd=function(t,r){r*=t;var n=Math.floor(r/(Pi+1)),i=Math.floor(r%(Pi+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var r,n,i=t.samples||[],a=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,a[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r,n,i,a=[],s=[];for(r=0;r<t.sps.length;r++)i=(n=t.sps[r]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(n));for(r=0;r<t.pps.length;r++)i=(n=t.pps[r]).byteLength,s.push(i>>>8&255),s.push(255&i),s=s.concat(Array.prototype.slice.call(n));var o=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(s))),l=t.width,u=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2].concat(t,[6,1,2]))},e.audioStsd=function(e){var t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,255&t,0,0])},e.mp4a=function(t){return e.box(e.types.mp4a,e.audioStsd(t),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){return e.box(e.types[".mp3"],e.audioStsd(t))},e.ac3=function(t){return e.box(e.types["ac-3"],e.audioStsd(t),e.box(e.types.dac3,t.config))},e.stsd=function(t){var r=t.segmentCodec;if("audio"===t.type){if("aac"===r)return e.box(e.types.stsd,e.STSD,e.mp4a(t));if("ac3"===r&&t.config)return e.box(e.types.stsd,e.STSD,e.ac3(t));if("mp3"===r&&"mp3"===t.codec)return e.box(e.types.stsd,e.STSD,e.mp3(t))}else{if(!t.pps||!t.sps)throw new Error("video track missing pps or sps");if("avc"===r)return e.box(e.types.stsd,e.STSD,e.avc1(t));if("hevc"===r&&t.vps)return e.box(e.types.stsd,e.STSD,e.hvc1(t))}throw new Error("unsupported "+t.type+" segment codec ("+r+"/"+t.codec+")")},e.tkhd=function(t){var r=t.id,n=(t.duration||0)*(t.timescale||0),i=t.width||0,a=t.height||0,s=Math.floor(n/(Pi+1)),o=Math.floor(n%(Pi+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,o>>24,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,r){var n=e.sdtp(t),i=t.id,a=Math.floor(r/(Pi+1)),s=Math.floor(r%(Pi+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,n.length+16+20+8+16+8+8),n)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var n,i,a,s,o,l,u=t.samples||[],c=u.length,d=12+16*c,f=new Uint8Array(d);for(r+=8+d,f.set(["video"===t.type?1:0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<c;n++)a=(i=u[n]).duration,s=i.size,o=i.flags,l=i.cts,f.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*n);return e.box(e.types.trun,f)},e.initSegment=function(t){e.types||e.init();var r=e.moov(t);return Se(e.FTYP,r)},e.hvc1=function(t){for(var r=t.params,n=[t.vps,t.sps,t.pps],i=new Uint8Array([1,r.general_profile_space<<6|(r.general_tier_flag?32:0)|r.general_profile_idc,r.general_profile_compatibility_flags[0],r.general_profile_compatibility_flags[1],r.general_profile_compatibility_flags[2],r.general_profile_compatibility_flags[3],r.general_constraint_indicator_flags[0],r.general_constraint_indicator_flags[1],r.general_constraint_indicator_flags[2],r.general_constraint_indicator_flags[3],r.general_constraint_indicator_flags[4],r.general_constraint_indicator_flags[5],r.general_level_idc,240|r.min_spatial_segmentation_idc>>8,255&r.min_spatial_segmentation_idc,252|r.parallelismType,252|r.chroma_format_idc,248|r.bit_depth_luma_minus8,248|r.bit_depth_chroma_minus8,0,parseInt(r.frame_rate.fps),3|r.temporal_id_nested<<2|r.num_temporal_layers<<3|(r.frame_rate.fixed?64:0),n.length]),a=i.length,s=0;s<n.length;s+=1){a+=3;for(var o=0;o<n[s].length;o+=1)a+=2+n[s][o].length}var l=new Uint8Array(a);l.set(i,0),a=i.length;for(var u=n.length-1,c=0;c<n.length;c+=1){l.set(new Uint8Array([32+c|(c===u?128:0),0,n[c].length]),a),a+=3;for(var d=0;d<n[c].length;d+=1)l.set(new Uint8Array([n[c][d].length>>8,255&n[c][d].length]),a),a+=2,l.set(n[c][d],a),a+=n[c][d].length}var f=e.box(e.types.hvcC,l),h=t.width,p=t.height,m=t.pixelRatio[0],g=t.pixelRatio[1];return e.box(e.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,h>>8&255,255&h,p>>8&255,255&p,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),f,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([m>>24,m>>16&255,m>>8&255,255&m,g>>24,g>>16&255,g>>8&255,255&g])))},e}();xi.types=void 0,xi.HDLR_TYPES=void 0,xi.STTS=void 0,xi.STSC=void 0,xi.STCO=void 0,xi.STSZ=void 0,xi.VMHD=void 0,xi.SMHD=void 0,xi.STSD=void 0,xi.FTYP=void 0,xi.DINF=void 0;function Oi(e,t,r,n){void 0===r&&(r=1),void 0===n&&(n=!1);var i=e*t*r;return n?Math.round(i):i}function Mi(e,t){return Oi(e,1e3,1/9e4,t)}var Fi=null,Ni=null;function Ui(e,t,r,n){return{duration:t,size:r,cts:n,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}var Bi=function(e){function t(t,r,n,i){var a;if((a=e.call(this,"mp4-remuxer",i)||this).observer=void 0,a.config=void 0,a.typeSupported=void 0,a.ISGenerated=!1,a._initPTS=null,a._initDTS=null,a.nextVideoTs=null,a.nextAudioTs=null,a.videoSampleDuration=null,a.isAudioContiguous=!1,a.isVideoContiguous=!1,a.videoTrackConfig=void 0,a.observer=t,a.config=r,a.typeSupported=n,a.ISGenerated=!1,null===Fi){var s=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Fi=s?parseInt(s[1]):0}if(null===Ni){var o=navigator.userAgent.match(/Safari\/(\d+)/i);Ni=o?parseInt(o[1]):0}return a}o(t,e);var r=t.prototype;return r.destroy=function(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null},r.resetTimeStamp=function(e){this.log("initPTS & initDTS reset"),this._initPTS=this._initDTS=e},r.resetNextTimestamp=function(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},r.resetInitSegment=function(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0},r.getVideoStartPts=function(e){var t=!1,r=e[0].pts,n=e.reduce(function(e,n){var i=n.pts,a=i-e;return a<-4294967296&&(t=!0,a=(i=ji(i,r))-e),a>0?e:i},r);return t&&this.debug("PTS rollover detected"),n},r.remux=function(e,t,r,n,i,a,s,o){var l,u,c,d,f,h,p=i,m=i,g=e.pid>-1,v=t.pid>-1,y=t.samples.length,E=e.samples.length>0,b=s&&y>0||y>1;if((!g||E)&&(!v||b)||this.ISGenerated||s){if(this.ISGenerated){var S,T,w,k,R=this.videoTrackConfig;(R&&(t.width!==R.width||t.height!==R.height||(null==(S=t.pixelRatio)?void 0:S[0])!==(null==(T=R.pixelRatio)?void 0:T[0])||(null==(w=t.pixelRatio)?void 0:w[1])!==(null==(k=R.pixelRatio)?void 0:k[1]))||!R&&b||null===this.nextAudioTs&&E)&&this.resetInitSegment()}this.ISGenerated||(c=this.generateIS(e,t,i,a));var L,A=this.isVideoContiguous,_=-1;if(b&&(_=function(e){for(var t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!A&&this.config.forceKeyFrameOnDiscontinuity))if(h=!0,_>0){this.warn("Dropped "+_+" out of "+y+" video samples due to a missing keyframe");var D=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(_),t.dropped+=_,L=m+=(t.samples[0].pts-D)/t.inputTimeScale}else-1===_&&(this.warn("No keyframe found out of "+y+" video samples"),h=!1);if(this.ISGenerated){if(E&&b){var C=this.getVideoStartPts(t.samples),I=(ji(e.samples[0].pts,C)-C)/t.inputTimeScale;p+=Math.max(0,I),m+=Math.max(0,-I)}if(E){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),c=this.generateIS(e,t,i,a)),u=this.remuxAudio(e,p,this.isAudioContiguous,a,v||b||o===P?m:void 0),b){var x=u?u.endPTS-u.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),c=this.generateIS(e,t,i,a)),l=this.remuxVideo(t,m,A,x)}}else b&&(l=this.remuxVideo(t,m,A,0));l&&(l.firstKeyFrame=_,l.independent=-1!==_,l.firstKeyFramePTS=L)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(f=Hi(r,i,this._initPTS,this._initDTS)),n.samples.length&&(d=Gi(n,i,this._initPTS))),{audio:u,video:l,initSegment:c,independent:h,text:d,id3:f}},r.generateIS=function(e,t,r,n){var i,a,s,o,l=e.samples,u=t.samples,c=this.typeSupported,d={},f=this._initPTS,h=!f||n,p="audio/mp4";if(h&&(i=a=1/0),e.config&&l.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":c.mpeg?(p="audio/mpeg",e.codec=""):c.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3"}d.audio={id:"audio",container:p,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&c.mpeg?new Uint8Array(0):xi.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(o=e.id,s=e.inputTimeScale,f&&s===f.timescale?h=!1:i=a=l[0].pts-Math.round(s*r))}if(t.sps&&t.pps&&u.length){if(t.timescale=t.inputTimeScale,d.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:xi.initSegment([t]),metadata:{width:t.width,height:t.height}},h)if(o=t.id,s=t.inputTimeScale,f&&s===f.timescale)h=!1;else{var m=this.getVideoStartPts(u),g=Math.round(s*r);a=Math.min(a,ji(u[0].dts,m)-g),i=Math.min(i,m-g)}this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(d).length)return this.ISGenerated=!0,h?(this._initPTS={baseTime:i,timescale:s},this._initDTS={baseTime:a,timescale:s}):i=s=void 0,{tracks:d,initPTS:i,timescale:s,trackId:o}},r.remuxVideo=function(e,t,r,n){var i,s,o=e.inputTimeScale,l=e.samples,u=[],c=l.length,d=this._initPTS,f=d.baseTime*o/d.timescale,h=this.nextVideoTs,p=8,m=this.videoSampleDuration,g=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,y=!1;if(!r||null===h){var E=f+t*o,b=l[0].pts-ji(l[0].dts,l[0].pts);Fi&&null!==h&&Math.abs(E-b-(h+f))<15e3?r=!0:h=E-b-f}for(var S=h+f,T=0;T<c;T++){var w=l[T];w.pts=ji(w.pts,S),w.dts=ji(w.dts,S),w.dts<l[T>0?T-1:T].dts&&(y=!0)}y&&l.sort(function(e,t){var r=e.dts-t.dts,n=e.pts-t.pts;return r||n}),i=l[0].dts;var A=l[l.length-1].dts-i,_=A?Math.round(A/(c-1)):m||e.inputTimeScale/30;if(r){var D=i-S,C=D>_,I=D<-1;if((C||I)&&(C?this.warn((e.segmentCodec||"").toUpperCase()+": "+Mi(D,!0)+" ms ("+D+"dts) hole between fragments detected at "+t.toFixed(3)):this.warn((e.segmentCodec||"").toUpperCase()+": "+Mi(-D,!0)+" ms ("+D+"dts) overlapping between fragments detected at "+t.toFixed(3)),!I||S>=l[0].pts||Fi)){i=S;var P=l[0].pts-D;if(C)l[0].dts=i,l[0].pts=P;else for(var x=!0,O=0;O<l.length&&!(l[O].dts>P&&x);O++){var M=l[O].pts;if(l[O].dts-=D,l[O].pts-=D,O<l.length-1){var F=l[O+1].pts;x=F<=l[O].pts==F<=M}}this.log("Video: Initial PTS/DTS adjusted: "+Mi(P,!0)+"/"+Mi(i,!0)+", delta: "+Mi(D,!0)+" ms")}}for(var N=0,U=0,B=i=Math.max(0,i),j=0;j<c;j++){for(var H=l[j],G=H.units,z=G.length,V=0,K=0;K<z;K++)V+=G[K].data.length;U+=V,N+=z,H.length=V,H.dts<B?(H.dts=B,B+=_/4|0||1):B=H.dts,g=Math.min(H.pts,g),v=Math.max(H.pts,v)}s=l[c-1].dts;var $,q=U+4*N+8;try{$=new Uint8Array(q)}catch(e){return void this.observer.emit(L.ERROR,L.ERROR,{type:k.MUX_ERROR,details:R.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:q,reason:"fail allocating video mdat "+q})}var W=new DataView($.buffer);W.setUint32(0,q),$.set(xi.types.mdat,4);for(var Y=!1,X=Number.POSITIVE_INFINITY,Q=Number.POSITIVE_INFINITY,J=Number.NEGATIVE_INFINITY,Z=Number.NEGATIVE_INFINITY,ee=0;ee<c;ee++){for(var te=l[ee],re=te.units,ne=0,ie=0,ae=re.length;ie<ae;ie++){var se=re[ie],oe=se.data,le=se.data.byteLength;W.setUint32(p,le),p+=4,$.set(oe,p),p+=le,ne+=4+le}var ue=void 0;if(ee<c-1)m=l[ee+1].dts-te.dts,ue=l[ee+1].pts-te.pts;else{var ce=this.config,de=ee>0?te.dts-l[ee-1].dts:_;if(ue=ee>0?te.pts-l[ee-1].pts:_,ce.stretchShortVideoTrack&&null!==this.nextAudioTs){var fe=Math.floor(ce.maxBufferHole*o),he=(n?g+n*o:this.nextAudioTs+f)-te.pts;he>fe?((m=he-de)<0?m=de:Y=!0,this.log("It is approximately "+he/90+" ms to the next segment; using duration "+m/90+" ms for the last video frame.")):m=de}else m=de}var pe=Math.round(te.pts-te.dts);X=Math.min(X,m),J=Math.max(J,m),Q=Math.min(Q,ue),Z=Math.max(Z,ue),u.push(Ui(te.key,m,ne,pe))}if(u.length)if(Fi){if(Fi<70){var me=u[0].flags;me.dependsOn=2,me.isNonSync=0}}else if(Ni&&Z-Q<J-X&&_/J<.025&&0===u[0].cts){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var ge=i,ve=0,ye=u.length;ve<ye;ve++){var Ee=ge+u[ve].duration,be=ge+u[ve].cts;if(ve<ye-1){var Se=Ee+u[ve+1].cts;u[ve].duration=Se-be}else u[ve].duration=ve?u[ve-1].duration:_;u[ve].cts=0,ge=Ee}}var Te=s+(m=Y||!m?_:m);this.nextVideoTs=h=Te-f,this.videoSampleDuration=m,this.isVideoContiguous=!0;var we={data1:xi.moof(e.sequenceNumber++,i,a(e,{samples:u})),data2:$,startPTS:(g-f)/o,endPTS:(v+m-f)/o,startDTS:(i-f)/o,endDTS:h/o,type:"video",hasAudio:!1,hasVideo:!0,nb:u.length,dropped:e.dropped};return e.samples=[],e.dropped=0,we},r.getSamplesPerFrame=function(e){switch(e.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}},r.remuxAudio=function(e,t,r,n,i){var s=e.inputTimeScale,o=s/(e.samplerate?e.samplerate:s),l=this.getSamplesPerFrame(e),u=l*o,c=this._initPTS,d="mp3"===e.segmentCodec&&this.typeSupported.mpeg,f=[],h=void 0!==i,p=e.samples,m=d?0:8,g=this.nextAudioTs||-1,v=c.baseTime*s/c.timescale,y=v+t*s;if(this.isAudioContiguous=r=r||p.length&&g>0&&(n&&Math.abs(y-(g+v))<9e3||Math.abs(ji(p[0].pts,y)-(g+v))<20*u),p.forEach(function(e){e.pts=ji(e.pts,y)}),!r||g<0){if(p=p.filter(function(e){return e.pts>=0}),!p.length)return;g=0===i?0:n&&!h?Math.max(0,y-v):p[0].pts-v}if("aac"===e.segmentCodec)for(var E=this.config.maxAudioFramesDrift,b=0,S=g+v;b<p.length;b++){var T=p[b],w=T.pts,A=w-S,_=Math.abs(1e3*A/s);if(A<=-E*u&&h)0===b&&(this.warn("Audio frame @ "+(w/s).toFixed(3)+"s overlaps marker by "+Math.round(1e3*A/s)+" ms."),this.nextAudioTs=g=w-v,S=w);else if(A>=E*u&&_<1e4&&h){var D=Math.round(A/u);for(S=w-D*u;S<0&&D&&u;)D--,S+=u;0===b&&(this.nextAudioTs=g=S-v),this.warn("Injecting "+D+" audio frames @ "+((S-v)/s).toFixed(3)+"s due to "+Math.round(1e3*A/s)+" ms gap.");for(var C=0;C<D;C++){var I=Ii.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);I||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),I=T.unit.subarray()),p.splice(b,0,{unit:I,pts:S}),S+=u,b++}}T.pts=S,S+=u}for(var P,x=null,O=null,M=0,F=p.length;F--;)M+=p[F].unit.byteLength;for(var N=0,U=p.length;N<U;N++){var B=p[N],j=B.unit,H=B.pts;if(null!==O)f[N-1].duration=Math.round((H-O)/o);else{if(r&&"aac"===e.segmentCodec&&(H=g+v),x=H,!(M>0))return;M+=m;try{P=new Uint8Array(M)}catch(e){return void this.observer.emit(L.ERROR,L.ERROR,{type:k.MUX_ERROR,details:R.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:M,reason:"fail allocating audio mdat "+M})}d||(new DataView(P.buffer).setUint32(0,M),P.set(xi.types.mdat,4))}P.set(j,m);var G=j.byteLength;m+=G,f.push(Ui(!0,l,G,0)),O=H}var z=f.length;if(z){var V=f[f.length-1];g=O-v,this.nextAudioTs=g+o*V.duration;var K=d?new Uint8Array(0):xi.moof(e.sequenceNumber++,x/o,a({},e,{samples:f}));e.samples=[];var $=(x-v)/s,q=g/s,W={data1:K,data2:P,startPTS:$,endPTS:q,startDTS:$,endDTS:q,type:"audio",hasAudio:!0,hasVideo:!1,nb:z};return this.isAudioContiguous=!0,W}},t}(F);function ji(e,t){var r;if(null===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e}function Hi(e,t,r,n){var i=e.samples.length;if(i){for(var a=e.inputTimeScale,s=0;s<i;s++){var o=e.samples[s];o.pts=ji(o.pts-r.baseTime*a/r.timescale,t*a)/a,o.dts=ji(o.dts-n.baseTime*a/n.timescale,t*a)/a}var l=e.samples;return e.samples=[],{samples:l}}}function Gi(e,t,r){var n=e.samples.length;if(n){for(var i=e.inputTimeScale,a=0;a<n;a++){var s=e.samples[a];s.pts=ji(s.pts-r.baseTime*i/r.timescale,t*i)/i}e.samples.sort(function(e,t){return e.pts-t.pts});var o=e.samples;return e.samples=[],{samples:o}}}var zi,Vi=function(e){function t(t,r,n,i){var a;return(a=e.call(this,"passthrough-remuxer",i)||this).emitInitSegment=!1,a.audioCodec=void 0,a.videoCodec=void 0,a.initData=void 0,a.initPTS=null,a.initTracks=void 0,a.lastEndTime=null,a.isVideoContiguous=!1,a}o(t,e);var r=t.prototype;return r.destroy=function(){},r.resetTimeStamp=function(e){this.lastEndTime=null;var t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)},r.resetNextTimestamp=function(){this.isVideoContiguous=!1,this.lastEndTime=null},r.resetInitSegment=function(e,t,r,n){this.audioCodec=t,this.videoCodec=r,this.generateInitSegment(be(e,n)),this.emitInitSegment=!0},r.generateInitSegment=function(e){var t=this.audioCodec,r=this.videoCodec;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var n=this.initData=pe(e);n.audio&&(t=$i(n.audio,X,this)),n.video&&(r=$i(n.video,Q,this));var i={};n.audio&&n.video?i.audiovideo={container:"video/mp4",codec:t+","+r,supplemental:n.video.supplemental,initSegment:e,id:"main"}:n.audio?i.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:n.video?i.video={container:"video/mp4",codec:r,supplemental:n.video.supplemental,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=i},r.remux=function(e,t,r,n,i,a){var s,o,l=this.initPTS,u=this.lastEndTime,c={audio:void 0,video:void 0,text:n,id3:r,initSegment:void 0};S(u)||(u=this.lastEndTime=i||0);var d=t.samples;if(null==d||!d.length)return c;var f={initPTS:void 0,timescale:void 0,trackId:void 0},h=this.initData;if(null!=(s=h)&&s.length||(this.generateInitSegment(d),h=this.initData),null==(o=h)||!o.length)return this.warn("Failed to generate initSegment."),c;this.emitInitSegment&&(f.tracks=this.initTracks,this.emitInitSegment=!1);var p,m=function(e,t,r){for(var n={},i=fe(e,["moof","traf"]),a=0;a<i.length;a++){var s=i[a],o=fe(s,["tfhd"])[0],l=ue(o,4),u=t[l];if(u){var c=n[l]||(n[l]={start:NaN,duration:0,sampleCount:0,timescale:u.timescale,type:u.type}),d=fe(s,["tfdt"])[0];if(d){var f=d[0],h=ue(d,4);1===f&&(h===ie?r.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(h*=ie+1,h+=ue(d,8))),S(h)&&(!S(c.start)||h<c.start)&&(c.start=h)}var p=u.default,m=ue(o,0)|(null==p?void 0:p.flags),g=(null==p?void 0:p.duration)||0;8&m&&(g=ue(o,2&m?12:8));for(var v=fe(s,["trun"]),y=c.start||0,E=0,b=g,T=0;T<v.length;T++){var w=v[T],k=ue(w,4),R=c.sampleCount;c.sampleCount+=k;var L=1&w[3],A=4&w[3],_=1&w[2],D=2&w[2],C=4&w[2],I=8&w[2],P=8,x=k;for(L&&(P+=4),A&&k&&(1&w[P+1]||void 0!==c.keyFrameIndex||(c.keyFrameIndex=R),P+=4,_?(b=ue(w,P),P+=4):b=g,D&&(P+=4),I&&(P+=4),y+=b,E+=b,x--);x--;)_?(b=ue(w,P),P+=4):b=g,D&&(P+=4),C&&(1&w[P+1]||void 0===c.keyFrameIndex&&(c.keyFrameIndex=c.sampleCount-(x+1),c.keyFrameStart=y),P+=4),I&&(P+=4),y+=b,E+=b;!E&&g&&(E+=g*k)}c.duration+=E}}if(!Object.keys(n).some(function(e){return n[e].duration})){for(var O=1/0,M=0,F=fe(e,["sidx"]),N=0;N<F.length;N++){var U=he(F[N]);if(null!=U&&U.references){O=Math.min(O,U.earliestPresentationTime/U.timescale);var B=U.references.reduce(function(e,t){return e+t.info.duration||0},0);M=Math.max(M,B+U.earliestPresentationTime/U.timescale)}}M&&S(M)&&Object.keys(n).forEach(function(e){n[e].duration||(n[e].duration=M*n[e].timescale-n[e].start)})}return n}(d,h,this),g=h.audio?m[h.audio.id]:null,v=h.video?m[h.video.id]:null,y=Ki(v,1/0),E=Ki(g,1/0),b=Ki(v,0,!0),T=Ki(g,0,!0),w=i,k=0;if(g&&(!v||!l&&E<y||l&&l.trackId===h.audio.id)?(f.trackId=h.audio.id,p=g,k=T-E):v&&(f.trackId=h.video.id,p=v,k=b-y),p){var R=p.timescale;w=p.start/R,f.initPTS=p.start-i*R,f.timescale=R,l||(this.initPTS=l={baseTime:f.initPTS,timescale:R,trackId:f.trackId})}!a&&l||!function(e,t,r,n){if(null===e)return!0;var i=Math.max(n,1),a=t-e.baseTime/e.timescale;return Math.abs(a-r)>i}(l,w,i,k)&&f.timescale===l.timescale||(f.initPTS=w-i,f.timescale=1,l&&1===l.timescale&&this.warn("Adjusting initPTS @"+i+" from "+l.baseTime/l.timescale+" to "+f.initPTS),this.initPTS=l={baseTime:f.initPTS,timescale:1});var L=e?w-l.baseTime/l.timescale:u,A=L+k;k>0?this.lastEndTime=A:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var _=!!h.audio,D=!!h.video,C="";_&&(C+="audio"),D&&(C+="video");var I={data1:d,startPTS:L,startDTS:L,endPTS:A,endDTS:A,type:C,hasAudio:_,hasVideo:D,nb:1,dropped:0};c.audio=_&&!D?I:void 0,c.video=D?I:void 0;var P=null==v?void 0:v.sampleCount;if(P){var x=v.keyFrameIndex,O=-1!==x;I.nb=P,I.dropped=0===x||this.isVideoContiguous?0:O?x:P,I.independent=O,I.firstKeyFrame=x,O&&v.keyFrameStart&&(I.firstKeyFramePTS=(v.keyFrameStart-l.baseTime)/l.timescale),this.isVideoContiguous||(c.independent=O),this.isVideoContiguous||(this.isVideoContiguous=O),I.dropped&&this.warn("fmp4 does not start with IDR: firstIDR "+x+"/"+P+" dropped: "+I.dropped+" start: "+(I.firstKeyFramePTS||"NA"))}return c.initSegment=f,c.id3=Hi(r,i,l,l),n.samples.length&&(c.text=Gi(n,i,l)),c},t}(F);function Ki(e,t,r){return void 0===r&&(r=!1),void 0!==(null==e?void 0:e.start)?(e.start+(r?e.duration:0))/e.timescale:t}function $i(e,t,r){var n=null==e?void 0:e.codec;return n&&n.length>4?n:t===X?"ec-3"===n||"ac-3"===n||"alac"===n?n:"fLaC"===n||"Opus"===n?Ue(n,!1):(r.warn('Unhandled audio codec "'+n+'" in mp4 MAP'),n||"mp4a"):(r.warn('Unhandled video codec "'+n+'" in mp4 MAP'),n||"avc1")}try{zi=self.performance.now.bind(self.performance)}catch(e){zi=Date.now}var qi=[{demux:gi,remux:Vi},{demux:ki,remux:Bi},{demux:ci,remux:Bi},{demux:pi,remux:Bi}];qi.splice(2,0,{demux:fi,remux:Bi});var Wi=function(){function e(e,t,r,n,i,a){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=r,this.id=i,this.logger=a}var t=e.prototype;return t.configure=function(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()},t.push=function(e,t,r,n){var i=this,a=r.transmuxing;a.executeStart=zi();var s=new Uint8Array(e),o=this.currentTransmuxState,l=this.transmuxConfig;n&&(this.currentTransmuxState=n);var u=n||o,c=u.contiguous,d=u.discontinuity,f=u.trackSwitch,h=u.accurateTimeOffset,p=u.timeOffset,m=u.initSegmentChange,g=l.audioCodec,v=l.videoCodec,y=l.defaultInitPts,E=l.duration,b=l.initSegmentData,S=function(e,t){var r=null;return e.byteLength>0&&null!=(null==t?void 0:t.key)&&null!==t.iv&&null!=t.method&&(r=t),r}(s,t);if(S&&mr(S.method)){var T=this.getDecrypter(),w=gr(S.method);if(!T.isSync())return this.asyncResult=!0,this.decryptionPromise=T.webCryptoDecrypt(s,S.key.buffer,S.iv.buffer,w).then(function(e){var t=i.push(e,null,r);return i.decryptionPromise=null,t}),this.decryptionPromise;var A=T.softwareDecrypt(s,S.key.buffer,S.iv.buffer,w);if(r.part>-1){var _=T.flush();A=_?_.buffer:_}if(!A)return a.executeEnd=zi(),Yi(r);s=new Uint8Array(A)}var D=this.needsProbing(d,f);if(D){var C=this.configureTransmuxer(s);if(C)return this.logger.warn("[transmuxer] "+C.message),this.observer.emit(L.ERROR,L.ERROR,{type:k.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,fatal:!1,error:C,reason:C.message}),a.executeEnd=zi(),Yi(r)}(d||f||m||D)&&this.resetInitSegment(b,g,v,E,t),(d||m||D)&&this.resetInitialTimestamp(y),c||this.resetContiguity();var I=this.transmux(s,S,p,h,r);this.asyncResult=Xi(I);var P=this.currentTransmuxState;return P.contiguous=!0,P.discontinuity=!1,P.trackSwitch=!1,a.executeEnd=zi(),I},t.flush=function(e){var t=this,r=e.transmuxing;r.executeStart=zi();var n=this.decrypter,i=this.currentTransmuxState,a=this.decryptionPromise;if(a)return this.asyncResult=!0,a.then(function(){return t.flush(e)});var s=[],o=i.timeOffset;if(n){var l=n.flush();l&&s.push(this.push(l.buffer,null,e))}var u=this.demuxer,c=this.remuxer;if(!u||!c){r.executeEnd=zi();var d=[Yi(e)];return this.asyncResult?Promise.resolve(d):d}var f=u.flush(o);return Xi(f)?(this.asyncResult=!0,f.then(function(r){return t.flushRemux(s,r,e),s})):(this.flushRemux(s,f,e),this.asyncResult?Promise.resolve(s):s)},t.flushRemux=function(e,t,r){var n=t.audioTrack,i=t.videoTrack,a=t.id3Track,s=t.textTrack,o=this.currentTransmuxState,l=o.accurateTimeOffset,u=o.timeOffset;this.logger.log("[transmuxer.ts]: Flushed "+this.id+" sn: "+r.sn+(r.part>-1?" part: "+r.part:"")+" of "+(this.id===I?"level":"track")+" "+r.level);var c=this.remuxer.remux(n,i,a,s,u,l,!0,this.id);e.push({remuxResult:c,chunkMeta:r}),r.transmuxing.executeEnd=zi()},t.resetInitialTimestamp=function(e){var t=this.demuxer,r=this.remuxer;t&&r&&(t.resetTimeStamp(e),r.resetTimeStamp(e))},t.resetContiguity=function(){var e=this.demuxer,t=this.remuxer;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())},t.resetInitSegment=function(e,t,r,n,i){var a=this.demuxer,s=this.remuxer;a&&s&&(a.resetInitSegment(e,t,r,n),s.resetInitSegment(e,t,r,i))},t.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},t.transmux=function(e,t,r,n,i){return t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,r,n,i):this.transmuxUnencrypted(e,r,n,i)},t.transmuxUnencrypted=function(e,t,r,n){var i=this.demuxer.demux(e,t,!1,!this.config.progressive),a=i.audioTrack,s=i.videoTrack,o=i.id3Track,l=i.textTrack;return{remuxResult:this.remuxer.remux(a,s,o,l,t,r,!1,this.id),chunkMeta:n}},t.transmuxSampleAes=function(e,t,r,n,i){var a=this;return this.demuxer.demuxSampleAes(e,t,r).then(function(e){return{remuxResult:a.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,r,n,!1,a.id),chunkMeta:i}})},t.configureTransmuxer=function(e){for(var t,r=this.config,n=this.observer,i=this.typeSupported,a=0,s=qi.length;a<s;a++){var o;if(null!=(o=qi[a].demux)&&o.probe(e,this.logger)){t=qi[a];break}}if(!t)return new Error("Failed to find demuxer by probing fragment data");var l=this.demuxer,u=this.remuxer,c=t.remux,d=t.demux;u&&u instanceof c||(this.remuxer=new c(n,r,i,this.logger)),l&&l instanceof d||(this.demuxer=new d(n,r,i,this.logger),this.probe=d.probe)},t.needsProbing=function(e,t){return!this.demuxer||!this.remuxer||e||t},t.getDecrypter=function(){var e=this.decrypter;return e||(e=this.decrypter=new qt(this.config)),e},e}();var Yi=function(e){return{remuxResult:{},chunkMeta:e}};function Xi(e){return"then"in e&&e.then instanceof Function}var Qi=function(e,t,r,n,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=r,this.duration=n,this.defaultInitPts=i||null},Ji=function(e,t,r,n,i,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=r,this.trackSwitch=n,this.timeOffset=i,this.initSegmentChange=a},Zi=[];function ea(e,t,r){if(!((n=t.remuxResult).audio||n.video||n.text||n.id3||n.initSegment))return!1;var n,i=[],a=t.remuxResult,s=a.audio,o=a.video;return s&&ta(i,s),o&&ta(i,o),e.postMessage({event:"transmuxComplete",data:t,instanceNo:r},i),!0}function ta(e,t){t.data1&&e.push(t.data1.buffer),t.data2&&e.push(t.data2.buffer)}function ra(e,t,r,n){t.reduce(function(t,r){return ea(e,r,n)||t},!1)||e.postMessage({event:"transmuxComplete",data:t[0],instanceNo:n}),e.postMessage({event:"flush",data:r,instanceNo:n})}function na(e,t,r){self.postMessage({event:e,data:t,instanceNo:r})}void 0!==r&&r&&self.addEventListener("message",function(e){var t=e.data,r=t.instanceNo;if(void 0!==r){var n=Zi[r];if("reset"===t.cmd&&(delete Zi[t.resetNo],n&&n.destroy(),t.cmd="init"),"init"===t.cmd){var i=JSON.parse(t.config),a=new y;a.on(L.FRAG_DECRYPTED,na),a.on(L.ERROR,na);var s=G(i.debug,t.id);return function(e,t){var r=function(r){e[r]=function(){var e=Array.prototype.join.call(arguments," ");na("workerLog",{logType:r,message:e},t)}};for(var n in e)r(n)}(s,r),Zi[r]=new Wi(a,t.typeSupported,i,"",t.id,s),void na("init",null,r)}if(n)switch(t.cmd){case"configure":n.configure(t.config);break;case"demux":var o=n.push(t.data,t.decryptdata,t.chunkMeta,t.state);Xi(o)?o.then(function(e){ea(self,e,r)}).catch(function(e){na(L.ERROR,{instanceNo:r,type:k.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,chunkMeta:t.chunkMeta,fatal:!1,error:e,err:e,reason:"transmuxer-worker push error"},r)}):ea(self,o,r);break;case"flush":var l=t.chunkMeta,u=n.flush(l);Xi(u)?u.then(function(e){ra(self,e,l,r)}).catch(function(e){na(L.ERROR,{type:k.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,chunkMeta:t.chunkMeta,fatal:!1,error:e,err:e,reason:"transmuxer-worker flush error"},r)}):ra(self,u,l,r)}}});var ia="1.6.7",aa={};var sa=0,oa=function(){function e(e,r,n,i){var a=this;this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=sa++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=function(e){var t=e.data,r=a.hls;if(r&&null!=t&&t.event&&t.instanceNo===a.instanceNo)switch(t.event){case"init":var n,i=null==(n=a.workerContext)?void 0:n.objectURL;i&&self.URL.revokeObjectURL(i);break;case"transmuxComplete":a.handleTransmuxComplete(t.data);break;case"flush":a.onFlush(t.data);break;case"workerLog":r.logger[t.data.logType]&&r.logger[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=a.frag,t.data.part=a.part,t.data.id=a.id,r.trigger(t.event,t.data)}},this.onWorkerError=function(e){if(a.hls){var t=new Error(e.message+"  ("+e.filename+":"+e.lineno+")");a.hls.config.enableWorker=!1,a.hls.logger.warn('Error in "'+a.id+'" Web Worker, fallback to inline'),a.hls.trigger(L.ERROR,{type:k.OTHER_ERROR,details:R.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:t})}};var s=e.config;this.hls=e,this.id=r,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=n,this.onFlush=i;var o=function(e,t){(t=t||{}).frag=a.frag||void 0,e===L.ERROR&&(t.parent=a.id,t.part=a.part,a.error=t.error),a.hls.trigger(e,t)};this.observer=new y,this.observer.on(L.FRAG_DECRYPTED,o),this.observer.on(L.ERROR,o);var l=Ge(s.preferManagedMediaSource);if(this.useWorker&&"undefined"!=typeof Worker){var u=this.hls.logger;s.workerPath;try{s.workerPath?(u.log("loading Web Worker "+s.workerPath+' for "'+r+'"'),this.workerContext=function(e){var t=aa[e];if(t)return t.clientCount++,t;var r=new self.URL(e,self.location.href).href,n={worker:new self.Worker(r),scriptURL:r,clientCount:1};return aa[e]=n,n}(s.workerPath)):(u.log('injecting Web Worker for "'+r+'"'),this.workerContext=function(){var e=aa[ia];if(e)return e.clientCount++,e;var r=new self.Blob(["var exports={};var module={exports:exports};function define(f){f()};define.amd=true;("+t.toString()+")(true);"],{type:"text/javascript"}),n=self.URL.createObjectURL(r),i={worker:new self.Worker(n),objectURL:n,clientCount:1};return aa[ia]=i,i}());var c=this.workerContext.worker;c.addEventListener("message",this.onWorkerMessage),c.addEventListener("error",this.onWorkerError),c.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:l,id:r,config:at(s)})}catch(t){u.warn('Error setting up "'+r+'" Web Worker, fallback to inline',t),this.terminateWorker(),this.error=null,this.transmuxer=new Wi(this.observer,l,s,"",r,e.logger)}}else this.transmuxer=new Wi(this.observer,l,s,"",r,e.logger)}var r=e.prototype;return r.reset=function(){if(this.frag=null,this.part=null,this.workerContext){var e=this.instanceNo;this.instanceNo=sa++;var t=this.hls.config,r=Ge(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:r,id:this.id,config:at(t)})}},r.terminateWorker=function(){if(this.workerContext){var e=this.workerContext.worker;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),function(e){var t=aa[e||ia];if(t&&1===t.clientCount--){var r=t.worker,n=t.objectURL;delete aa[e||ia],n&&self.URL.revokeObjectURL(n),r.terminate()}}(this.hls.config.workerPath)}},r.destroy=function(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{var e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}var t=this.observer;t&&t.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null},r.push=function(e,t,r,n,i,a,s,o,l,u){var c,d,f=this;l.transmuxing.start=self.performance.now();var h=this.instanceNo,p=this.transmuxer,m=a?a.start:i.start,g=i.decryptdata,v=this.frag,y=!(v&&i.cc===v.cc),E=!(v&&l.level===v.level),b=v?l.sn-v.sn:-1,S=this.part?l.part-this.part.index:-1,T=0===b&&l.id>1&&l.id===(null==v?void 0:v.stats.chunkCount),w=!E&&(1===b||0===b&&(1===S||T&&S<=0)),k=self.performance.now();(E||b||0===i.stats.parsing.start)&&(i.stats.parsing.start=k),!a||!S&&w||(a.stats.parsing.start=k);var R=!(v&&(null==(c=i.initSegment)?void 0:c.url)===(null==(d=v.initSegment)?void 0:d.url)),L=new Ji(y,w,o,E,m,R);if(!w||y||R){this.hls.logger.log("[transmuxer-interface]: Starting new transmux session for "+i.type+" sn: "+l.sn+(l.part>-1?" part: "+l.part:"")+" "+(this.id===I?"level":"track")+": "+l.level+" id: "+l.id+"\n        discontinuity: "+y+"\n        trackSwitch: "+E+"\n        contiguous: "+w+"\n        accurateTimeOffset: "+o+"\n        timeOffset: "+m+"\n        initSegmentChange: "+R);var A=new Qi(r,n,t,s,u);this.configureTransmuxer(A)}if(this.frag=i,this.part=a,this.workerContext)this.workerContext.worker.postMessage({instanceNo:h,cmd:"demux",data:e,decryptdata:g,chunkMeta:l,state:L},e instanceof ArrayBuffer?[e]:[]);else if(p){var _=p.push(e,g,l,L);Xi(_)?_.then(function(e){f.handleTransmuxComplete(e)}).catch(function(e){f.transmuxerError(e,l,"transmuxer-interface push error")}):this.handleTransmuxComplete(_)}},r.flush=function(e){var t=this;e.transmuxing.start=self.performance.now();var r=this.instanceNo,n=this.transmuxer;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:r,cmd:"flush",chunkMeta:e});else if(n){var i=n.flush(e);Xi(i)?i.then(function(r){t.handleFlushResult(r,e)}).catch(function(r){t.transmuxerError(r,e,"transmuxer-interface flush error")}):this.handleFlushResult(i,e)}},r.transmuxerError=function(e,t,r){this.hls&&(this.error=e,this.hls.trigger(L.ERROR,{type:k.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:r}))},r.handleFlushResult=function(e,t){var r=this;e.forEach(function(e){r.handleTransmuxComplete(e)}),this.onFlush(t)},r.configureTransmuxer=function(e){var t=this.instanceNo,r=this.transmuxer;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):r&&r.configure(e)},r.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)},e}(),la=function(e){function t(t,r,n){var i;return(i=e.call(this,t,r,n,"audio-stream-controller",P)||this).mainAnchor=null,i.mainFragLoading=null,i.audioOnly=!1,i.bufferedTrack=null,i.switchingTrack=null,i.trackId=-1,i.waitingData=null,i.mainDetails=null,i.flushing=!1,i.bufferFlushed=!1,i.cachedTrackLoadedData=null,i.registerListeners(),i}o(t,e);var r=t.prototype;return r.onHandlerDestroying=function(){this.unregisterListeners(),e.prototype.onHandlerDestroying.call(this),this.resetItem()},r.resetItem=function(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null},r.registerListeners=function(){e.prototype.registerListeners.call(this);var t=this.hls;t.on(L.LEVEL_LOADED,this.onLevelLoaded,this),t.on(L.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.on(L.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(L.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(L.BUFFER_RESET,this.onBufferReset,this),t.on(L.BUFFER_CREATED,this.onBufferCreated,this),t.on(L.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(L.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(L.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(L.FRAG_LOADING,this.onFragLoading,this),t.on(L.FRAG_BUFFERED,this.onFragBuffered,this)},r.unregisterListeners=function(){var t=this.hls;t&&(e.prototype.unregisterListeners.call(this),t.off(L.LEVEL_LOADED,this.onLevelLoaded,this),t.off(L.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.off(L.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(L.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(L.BUFFER_RESET,this.onBufferReset,this),t.off(L.BUFFER_CREATED,this.onBufferCreated,this),t.off(L.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(L.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(L.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(L.FRAG_LOADING,this.onFragLoading,this),t.off(L.FRAG_BUFFERED,this.onFragBuffered,this))},r.onInitPtsFound=function(e,t){var r=t.frag,n=t.id,i=t.initPTS,a=t.timescale;if(n===I){var s=r.cc,o=this.fragCurrent;if(this.initPTS[s]={baseTime:i,timescale:a},this.log("InitPTS for cc: "+s+" found from main: "+i+"/"+a),this.mainAnchor=r,this.state===kn){var l=this.waitingData;(!l&&!this.loadingParts||l&&l.frag.cc!==s)&&this.syncWithAnchor(r,null==l?void 0:l.frag)}else!this.hls.hasEnoughToStart&&o&&o.cc!==s?(o.abortRequests(),this.syncWithAnchor(r,o)):this.state===mn&&this.tick()}},r.getLoadPosition=function(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:e.prototype.getLoadPosition.call(this)},r.syncWithAnchor=function(e,t){var r,n=(null==(r=this.mainFragLoading)?void 0:r.frag)||null;if(!t||(null==n?void 0:n.cc)!==t.cc){var i=(n||e).cc,a=Et(this.getLevelDetails(),i,this.getLoadPosition());a&&(this.log("Syncing with main frag at "+a.start+" cc "+a.cc),this.startFragRequested=!1,this.nextLoadPosition=a.start,this.resetLoadingState(),this.state===mn&&this.doTickIdle())}},r.startLoad=function(e,t){if(!this.levels)return this.startPosition=e,void(this.state=pn);var r=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),r>0&&-1===e?(this.log("Override startPosition with lastCurrentTime @"+r.toFixed(3)),e=r,this.state=mn):this.state=En,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()},r.doTick=function(){switch(this.state){case mn:this.doTickIdle();break;case En:var t=this.levels,r=this.trackId,n=null==t?void 0:t[r],i=null==n?void 0:n.details;if(i&&!this.waitForLive(n)){if(this.waitForCdnTuneIn(i))break;this.state=kn}break;case yn:var a,s=performance.now(),o=this.retryDate;if(!o||s>=o||null!=(a=this.media)&&a.seeking){var l=this.levels,u=this.trackId;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((null==l?void 0:l[u])||null),this.state=mn}break;case kn:var c=this.waitingData;if(c){var d=c.frag,f=c.part,h=c.cache,p=c.complete,m=this.mainAnchor;if(void 0!==this.initPTS[d.cc]){this.waitingData=null,this.state=vn;var g={frag:d,part:f,payload:h.flush().buffer,networkDetails:null};this._handleFragmentLoadProgress(g),p&&e.prototype._handleFragmentLoadComplete.call(this,g)}else m&&m.cc!==c.frag.cc&&this.syncWithAnchor(m,c.frag)}else this.state=mn}this.onTickEnd()},r.resetLoadingState=function(){var t=this.waitingData;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingData=null),e.prototype.resetLoadingState.call(this)},r.onTickEnd=function(){var e=this.media;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)},r.doTickIdle=function(){var e,t=this.hls,r=this.levels,n=this.media,i=this.trackId,a=t.config;if(this.buffering&&(n||this.primaryPrefetch||!this.startFragRequested&&a.startFragPrefetch)&&null!=r&&r[i]){var s=r[i],o=s.details;if(!o||this.waitForLive(s)||this.waitForCdnTuneIn(o))return this.state=En,void(this.startFragRequested=!1);var l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,X,P));var u=this.getFwdBufferInfo(l,P);if(null!==u){if(!this.switchingTrack&&this._streamEnded(u,o))return t.trigger(L.BUFFER_EOS,{type:"audio"}),void(this.state=Tn);var c=u.len,d=t.maxBufferLength,f=o.fragments,h=f[0].start,p=this.getLoadPosition(),m=this.flushing?p:u.end;if(this.switchingTrack&&n){var g=p;o.PTSKnown&&g<h&&(u.end>h||u.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=h+.05)}if(!(c>=d&&!this.switchingTrack&&m<f[f.length-1].start)){var v=this.getNextFragment(m,o);if(v&&this.isLoopLoading(v,m)&&(v=this.getNextFragmentLoopLoading(v,o,u,I,d)),v){var y=(null==(e=this.mainFragLoading)?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&y&&ee(v)&&!v.endList&&(!o.live||!this.loadingParts&&m<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(y)===Nt&&(this.mainFragLoading=y=null),y&&ee(y))){if(v.start>y.end){var E=this.fragmentTracker.getFragAtPos(m,I);E&&E.end>y.end&&(y=E,this.mainFragLoading={frag:E,targetBufferTime:null})}if(v.start>y.end)return}this.loadFragment(v,s,m)}else this.bufferFlushed=!0}}}},r.onMediaDetaching=function(t,r){this.bufferFlushed=this.flushing=!1,e.prototype.onMediaDetaching.call(this,t,r)},r.onAudioTracksUpdated=function(e,t){var r=t.audioTracks;this.resetTransmuxer(),this.levels=r.map(function(e){return new rt(e)})},r.onAudioTrackSwitching=function(e,t){var r=!!t.url;this.trackId=t.id;var n=this.fragCurrent;n&&(n.abortRequests(),this.removeUnbufferedFrags(n.start)),this.resetLoadingState(),r?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==pn&&(this.setInterval(100),this.state=mn,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())},r.onManifestLoading=function(){e.prototype.onManifestLoading.call(this),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1},r.onLevelLoaded=function(e,t){this.mainDetails=t.details;var r=this.cachedTrackLoadedData;r&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(L.AUDIO_TRACK_LOADED,r))},r.onAudioTrackLoaded=function(e,t){var r,n=this.levels,i=t.details,a=t.id,s=t.groupId,o=t.track;if(n){var l=this.mainDetails;if(!l||i.endCC>l.endCC||l.expired)return this.cachedTrackLoadedData=t,void(this.state!==pn&&(this.state=En));this.cachedTrackLoadedData=null,this.log("Audio track "+a+' "'+o.name+'" of "'+s+'" loaded ['+i.startSN+","+i.endSN+"]"+(i.lastPartSn?"[part-"+i.lastPartSn+"-"+i.lastPartIndex+"]":"")+",duration:"+i.totalduration);var u=n[a],c=0;if(i.live||null!=(r=u.details)&&r.live){if(this.checkLiveUpdate(i),i.deltaUpdateFailed)return;var d;u.details&&(c=this.alignPlaylists(i,u.details,null==(d=this.levelLastLoaded)?void 0:d.details)),i.alignedSliding||(dn(i,l),i.alignedSliding||fn(i,l),c=i.fragmentStart)}u.details=i,this.levelLastLoaded=u,this.startFragRequested||this.setStartPosition(l,c),this.hls.trigger(L.AUDIO_TRACK_UPDATED,{details:i,id:a,groupId:t.groupId}),this.state!==En||this.waitForCdnTuneIn(i)||(this.state=mn),this.tick()}else this.warn("Audio tracks reset while loading track "+a+' "'+o.name+'" of "'+s+'"')},r._handleFragmentLoadProgress=function(e){var t,r=e.frag,n=e.part,i=e.payload,a=this.config,s=this.trackId,o=this.levels;if(o){var l=o[s];if(l){var u=l.details;if(!u)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(r.start);var c=a.defaultAudioCodec||l.audioCodec||"mp4a.40.2",d=this.transmuxer;d||(d=this.transmuxer=new oa(this.hls,P,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var f=this.initPTS[r.cc],h=null==(t=r.initSegment)?void 0:t.data;if(void 0!==f){var p=n?n.index:-1,m=-1!==p,g=new er(r.level,r.sn,r.stats.chunkCount,i.byteLength,p,m);d.push(i,h,c,"",r,n,u.totalduration,!1,g,f)}else this.log("Unknown video PTS for cc "+r.cc+", waiting for video PTS before demuxing audio frag "+r.sn+" of ["+u.startSN+" ,"+u.endSN+"],track "+s),(this.waitingData=this.waitingData||{frag:r,part:n,cache:new _n,complete:!1}).cache.push(new Uint8Array(i)),this.state!==pn&&(this.state=kn)}else this.warn("Audio track is undefined on fragment load progress")}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered")},r._handleFragmentLoadComplete=function(t){this.waitingData?this.waitingData.complete=!0:e.prototype._handleFragmentLoadComplete.call(this,t)},r.onBufferReset=function(){this.mediaBuffer=null},r.onBufferCreated=function(e,t){this.bufferFlushed=this.flushing=!1;var r=t.tracks.audio;r&&(this.mediaBuffer=r.buffer||null)},r.onFragLoading=function(e,t){!this.audioOnly&&t.frag.type===I&&ee(t.frag)&&(this.mainFragLoading=t,this.state===mn&&this.tick())},r.onFragBuffered=function(e,t){var r=t.frag,n=t.part;if(r.type===P)if(this.fragContextChanged(r))this.warn("Fragment "+r.sn+(n?" p: "+n.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+(this.switchingTrack?this.switchingTrack.name:"false"));else{if(ee(r)){this.fragPrevious=r;var i=this.switchingTrack;i&&(this.bufferedTrack=i,this.switchingTrack=null,this.hls.trigger(L.AUDIO_TRACK_SWITCHED,c({},i)))}this.fragBufferedComplete(r,n),this.media&&this.tick()}else this.audioOnly||r.type!==I||r.elementaryStreams.video||r.elementaryStreams.audiovideo||(this.audioOnly=!0,this.mainFragLoading=null)},r.onError=function(t,r){var n;if(r.fatal)this.state=wn;else switch(r.details){case R.FRAG_GAP:case R.FRAG_PARSING_ERROR:case R.FRAG_DECRYPT_ERROR:case R.FRAG_LOAD_ERROR:case R.FRAG_LOAD_TIMEOUT:case R.KEY_LOAD_ERROR:case R.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(P,r);break;case R.AUDIO_TRACK_LOAD_ERROR:case R.AUDIO_TRACK_LOAD_TIMEOUT:case R.LEVEL_PARSING_ERROR:r.levelRetry||this.state!==En||(null==(n=r.context)?void 0:n.type)!==D||(this.state=mn);break;case R.BUFFER_ADD_CODEC_ERROR:case R.BUFFER_APPEND_ERROR:if("audio"!==r.parent)return;this.reduceLengthAndFlushBuffer(r)||this.resetLoadingState();break;case R.BUFFER_FULL_ERROR:if("audio"!==r.parent)return;this.reduceLengthAndFlushBuffer(r)&&(this.bufferedTrack=null,e.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio"));break;case R.INTERNAL_EXCEPTION:this.recoverWorkerError(r)}},r.onBufferFlushing=function(e,t){t.type!==Q&&(this.flushing=!0)},r.onBufferFlushed=function(e,t){var r=t.type;if(r!==Q){this.flushing=!1,this.bufferFlushed=!0,this.state===Tn&&(this.state=mn);var n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,r,P),this.tick())}},r._handleTransmuxComplete=function(e){var t,r="audio",n=this.hls,i=e.remuxResult,s=e.chunkMeta,o=this.getCurrentContext(s);if(o){var l=o.frag,u=o.part,c=o.level,d=c.details,f=i.audio,h=i.text,p=i.id3,m=i.initSegment;if(!this.fragContextChanged(l)&&d){if(this.state=bn,this.switchingTrack&&f&&this.completeAudioSwitch(this.switchingTrack),null!=m&&m.tracks){var g=l.initSegment||l;this._bufferInitSegment(c,m.tracks,g,s),n.trigger(L.FRAG_PARSING_INIT_SEGMENT,{frag:g,id:r,tracks:m.tracks})}if(f){var v=f.startPTS,y=f.endPTS,E=f.startDTS,b=f.endDTS;u&&(u.elementaryStreams[X]={startPTS:v,endPTS:y,startDTS:E,endDTS:b}),l.setElementaryStreamInfo(X,v,y,E,b),this.bufferFragmentData(f,l,u,s)}if(null!=p&&null!=(t=p.samples)&&t.length){var S=a({id:r,frag:l,details:d},p);n.trigger(L.FRAG_PARSING_METADATA,S)}if(h){var T=a({id:r,frag:l,details:d},h);n.trigger(L.FRAG_PARSING_USERDATA,T)}}else this.fragmentTracker.removeFragment(l)}else this.resetWhenMissingContext(s)},r._bufferInitSegment=function(e,t,r,n){if(this.state===bn&&(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,t.audio)){var i=t.audio;i.id=P;var a=e.audioCodec;this.log("Init audio buffer, container:"+i.container+", codecs[level/parsed]=["+a+"/"+i.codec+"]"),a&&1===a.split(",").length&&(i.levelCodec=a),this.hls.trigger(L.BUFFER_CODECS,t);var s=i.initSegment;if(null!=s&&s.byteLength){var o={type:"audio",frag:r,part:null,chunkMeta:n,parent:r.type,data:s};this.hls.trigger(L.BUFFER_APPENDING,o)}this.tickImmediate()}},r.loadFragment=function(t,r,n){var i,a=this.fragmentTracker.getState(t);if(this.switchingTrack||a===Ot||a===Ft)if(ee(t))if(null!=(i=r.details)&&i.live&&!this.initPTS[t.cc]){this.log("Waiting for video PTS in continuity counter "+t.cc+" of live stream before loading audio fragment "+t.sn+" of level "+this.trackId),this.state=kn;var s=this.mainDetails;s&&s.fragmentStart!==r.details.fragmentStart&&fn(r.details,s)}else e.prototype.loadFragment.call(this,t,r,n);else this._loadInitSegment(t,r);else this.clearTrackerIfNeeded(t)},r.flushAudioIfNeeded=function(t){if(this.media&&this.bufferedTrack){var r=this.bufferedTrack;ct({name:r.name,lang:r.lang,assocLang:r.assocLang,characteristics:r.characteristics,audioCodec:r.audioCodec,channels:r.channels},t,dt)||(ht(t.url,this.hls)?(this.log("Switching audio track : flushing all audio"),e.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=t)}},r.completeAudioSwitch=function(e){var t=this.hls;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(L.AUDIO_TRACK_SWITCHED,c({},e))},t}(Ln),ua=function(e){function t(t,r){var n;return(n=e.call(this,r,t.logger)||this).hls=void 0,n.canLoad=!1,n.timer=-1,n.hls=t,n}o(t,e);var r=t.prototype;return r.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},r.clearTimer=function(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)},r.startLoad=function(){this.canLoad=!0,this.loadPlaylist()},r.stopLoad=function(){this.canLoad=!1,this.clearTimer()},r.switchParams=function(e,t,r){var n=null==t?void 0:t.renditionReports;if(n){for(var i=-1,a=0;a<n.length;a++){var s=n[a],o=void 0;try{o=new self.URL(s.URI,t.url).href}catch(e){this.warn("Could not construct new URL for Rendition Report: "+e),o=s.URI||""}if(o===e){i=a;break}o===e.substring(0,o.length)&&(i=a)}if(-1!==i){var l=n[i],u=parseInt(l["LAST-MSN"])||(null==t?void 0:t.lastPartSn),c=parseInt(l["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){var d=Math.min(t.age-t.partTarget,t.targetduration);c>=0&&d>t.partTarget&&(c+=1)}var f=r&&et(r);return new tt(u,c>=0?c:void 0,f)}}},r.loadPlaylist=function(e){this.clearTimer()},r.loadingPlaylist=function(e,t){this.clearTimer()},r.shouldLoadPlaylist=function(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)},r.getUrlWithDirectives=function(e,t){if(t)try{return t.addDirectives(e)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}return e},r.playlistLoaded=function(e,t,r){var n=t.details,i=t.stats,a=self.performance.now(),s=i.loading.first?Math.max(0,a-i.loading.first):0;n.advancedDateTime=Date.now()-s;var o=this.hls.config.timelineOffset;if(o!==n.appliedTimelineOffset){var l=Math.max(o||0,0);n.appliedTimelineOffset=l,n.fragments.forEach(function(e){e.start=e.playlistOffset+l})}if(n.live||null!=r&&r.live){var u="levelInfo"in t?t.levelInfo:t.track;if(n.reloaded(r),r&&n.fragments.length>0){Jr(r,n);var c=n.playlistParsingError;if(c){this.warn(c);var d=this.hls;if(!d.config.ignorePlaylistParsingErrors){var f,h=t.networkDetails;return void d.trigger(L.ERROR,{type:k.NETWORK_ERROR,details:R.LEVEL_PARSING_ERROR,fatal:!1,url:n.url,error:c,reason:c.message,level:t.level||void 0,parent:null==(f=n.fragments[0])?void 0:f.type,networkDetails:h,stats:i})}n.playlistParsingError=null}}-1===n.requestScheduled&&(n.requestScheduled=i.loading.start);var p,m=this.hls.mainForwardBufferInfo,g=m?m.end-m.len:0,v=rn(n,1e3*(n.edge-g));if(n.requestScheduled+v<a?n.requestScheduled=a:n.requestScheduled+=v,this.log("live playlist "+e+" "+(n.advanced?"REFRESHED "+n.lastPartSn+"-"+n.lastPartIndex:n.updated?"UPDATED":"MISSED")),!this.canLoad||!n.live)return;var y=void 0,E=void 0;if(n.canBlockReload&&n.endSN&&n.advanced){var b=this.hls.config.lowLatencyMode,S=n.lastPartSn,T=n.endSN,w=n.lastPartIndex,A=S===T;-1!==w?A?(y=T+1,E=b?0:w):(y=S,E=b?w+1:n.maxPartIndex):y=T+1;var _=n.age,D=_+n.ageHeader,C=Math.min(D-n.partTarget,1.5*n.targetduration);if(C>0){if(D>3*n.targetduration)this.log("Playlist last advanced "+_.toFixed(2)+"s ago. Omitting segment and part directives."),y=void 0,E=void 0;else if(null!=r&&r.tuneInGoal&&D-n.partTarget>r.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+r.tuneInGoal+" to: "+C+" with playlist age: "+n.age),C=0;else{var I=Math.floor(C/n.targetduration);y+=I,void 0!==E&&(E+=Math.round(C%n.targetduration/n.partTarget)),this.log("CDN Tune-in age: "+n.ageHeader+"s last advanced "+_.toFixed(2)+"s goal: "+C+" skip sn "+I+" to part "+E)}n.tuneInGoal=C}if(p=this.getDeliveryDirectives(n,t.deliveryDirectives,y,E),b||!A)return n.requestScheduled=a,void this.loadingPlaylist(u,p)}else(n.canBlockReload||n.canSkipUntil)&&(p=this.getDeliveryDirectives(n,t.deliveryDirectives,y,E));p&&void 0!==y&&n.canBlockReload&&(n.requestScheduled=i.loading.first+Math.max(v-2*s,v/2)),this.scheduleLoading(u,p,n)}else this.clearTimer()},r.scheduleLoading=function(e,t,r){var n=this,i=r||e.details;if(i){var a=self.performance.now(),s=i.requestScheduled;if(a>=s)this.loadingPlaylist(e,t);else{var o=s-a;this.log("reload live playlist "+(e.name||e.bitrate+"bps")+" in "+Math.round(o)+" ms"),this.clearTimer(),this.timer=self.setTimeout(function(){return n.loadingPlaylist(e,t)},o)}}else this.loadingPlaylist(e,t)},r.getDeliveryDirectives=function(e,t,r,n){var i=et(e);return null!=t&&t.skip&&e.deltaUpdateFailed&&(r=t.msn,n=t.part,i=Qe),new tt(r,n,i)},r.checkRetry=function(e){var t=this,r=e.details,n=bt(e),i=e.errorAction,a=i||{},s=a.action,o=a.retryCount,l=void 0===o?0:o,u=a.retryConfig,c=!!i&&!!u&&(s===_t||!i.resolved&&s===Lt);if(c){var d;if(l>=u.maxNumRetry)return!1;if(n&&null!=(d=e.context)&&d.deliveryDirectives)this.warn("Retrying playlist loading "+(l+1)+"/"+u.maxNumRetry+' after "'+r+'" without delivery-directives'),this.loadPlaylist();else{var f=Tt(u,l);this.clearTimer(),this.timer=self.setTimeout(function(){return t.loadPlaylist()},f),this.warn("Retrying playlist loading "+(l+1)+"/"+u.maxNumRetry+' after "'+r+'" in '+f+"ms")}e.levelRetry=!0,i.resolved=!0}return c},t}(F);function ca(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!da(e[r].attrs,t[r].attrs))return!1;return!0}function da(e,t,r){var n=e["STABLE-RENDITION-ID"];return n&&!r?n===t["STABLE-RENDITION-ID"]:!(r||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(function(r){return e[r]!==t[r]})}function fa(e,t){return t.label.toLowerCase()===e.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(e.lang||"").toLowerCase())}var ha=function(e){function t(t){var r;return(r=e.call(this,t,"audio-track-controller")||this).tracks=[],r.groupIds=null,r.tracksInGroup=[],r.trackId=-1,r.currentTrack=null,r.selectDefaultTrack=!0,r.registerListeners(),r}o(t,e);var r=t.prototype;return r.registerListeners=function(){var e=this.hls;e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_PARSED,this.onManifestParsed,this),e.on(L.LEVEL_LOADING,this.onLevelLoading,this),e.on(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(L.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(L.ERROR,this.onError,this)},r.unregisterListeners=function(){var e=this.hls;e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_PARSED,this.onManifestParsed,this),e.off(L.LEVEL_LOADING,this.onLevelLoading,this),e.off(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(L.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(L.ERROR,this.onError,this)},r.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,e.prototype.destroy.call(this)},r.onManifestLoading=function(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0},r.onManifestParsed=function(e,t){this.tracks=t.audioTracks||[]},r.onAudioTrackLoaded=function(e,t){var r=t.id,n=t.groupId,i=t.details,a=this.tracksInGroup[r];if(a&&a.groupId===n){var s=a.details;a.details=t.details,this.log("Audio track "+r+' "'+a.name+'" lang:'+a.lang+" group:"+n+" loaded ["+i.startSN+"-"+i.endSN+"]"),r===this.trackId&&this.playlistLoaded(r,t,s)}else this.warn("Audio track with id:"+r+" and group:"+n+" not found in active group "+(null==a?void 0:a.groupId))},r.onLevelLoading=function(e,t){this.switchLevel(t.level)},r.onLevelSwitching=function(e,t){this.switchLevel(t.level)},r.switchLevel=function(e){var t=this.hls.levels[e];if(t){var r=t.audioGroups||null,n=this.groupIds,i=this.currentTrack;if(!r||(null==n?void 0:n.length)!==(null==r?void 0:r.length)||null!=r&&r.some(function(e){return-1===(null==n?void 0:n.indexOf(e))})){this.groupIds=r,this.trackId=-1,this.currentTrack=null;var a=this.tracks.filter(function(e){return!r||-1!==r.indexOf(e.groupId)});if(a.length)this.selectDefaultTrack&&!a.some(function(e){return e.default})&&(this.selectDefaultTrack=!1),a.forEach(function(e,t){e.id=t});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=a;var s=this.hls.config.audioPreference;if(!i&&s){var o=ut(s,a,dt);if(o>-1)i=a[o];else{var l=ut(s,this.tracks);i=this.tracks[l]}}var u=this.findTrackId(i);-1===u&&i&&(u=this.findTrackId(null));var c={audioTracks:a};this.log("Updating audio tracks, "+a.length+" track(s) found in group(s): "+(null==r?void 0:r.join(","))),this.hls.trigger(L.AUDIO_TRACKS_UPDATED,c);var d=this.trackId;if(-1!==u&&-1===d)this.setAudioTrack(u);else if(a.length&&-1===d){var f,h=new Error("No audio track selected for current audio group-ID(s): "+(null==(f=this.groupIds)?void 0:f.join(","))+" track count: "+a.length);this.warn(h.message),this.hls.trigger(L.ERROR,{type:k.MEDIA_ERROR,details:R.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:h})}}}},r.onError=function(e,t){!t.fatal&&t.context&&(t.context.type!==D||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))},r.setAudioOption=function(e){var t=this.hls;if(t.config.audioPreference=e,e){var r=this.allAudioTracks;if(this.selectDefaultTrack=!1,r.length){var n=this.currentTrack;if(n&&ct(e,n,dt))return n;var i=ut(e,this.tracksInGroup,dt);if(i>-1){var a=this.tracksInGroup[i];return this.setAudioTrack(i),a}if(n){var s=t.loadLevel;-1===s&&(s=t.firstAutoLevel);var o=function(e,t,r,n,i){var a=t[n],s=t.reduce(function(e,t,r){var n=t.uri;return(e[n]||(e[n]=[])).push(r),e},{})[a.uri];s.length>1&&(n=Math.max.apply(Math,s));var o=a.videoRange,l=a.frameRate,u=a.codecSet.substring(0,4),c=ft(t,n,function(t){if(t.videoRange!==o||t.frameRate!==l||t.codecSet.substring(0,4)!==u)return!1;var n=t.audioGroups,a=r.filter(function(e){return!n||-1!==n.indexOf(e.groupId)});return ut(e,a,i)>-1});return c>-1?c:ft(t,n,function(t){var n=t.audioGroups,a=r.filter(function(e){return!n||-1!==n.indexOf(e.groupId)});return ut(e,a,i)>-1})}(e,t.levels,r,s,dt);if(-1===o)return null;t.nextLoadLevel=o}if(e.channels||e.audioCodec){var l=ut(e,r);if(l>-1)return r[l]}}}return null},r.setAudioTrack=function(e){var t=this.tracksInGroup;if(e<0||e>=t.length)this.warn("Invalid audio track id: "+e);else{this.selectDefaultTrack=!1;var r=this.currentTrack,n=t[e],i=n.details&&!n.details.live;if(!(e===this.trackId&&n===r&&i||(this.log("Switching to audio-track "+e+' "'+n.name+'" lang:'+n.lang+" group:"+n.groupId+" channels:"+n.channels),this.trackId=e,this.currentTrack=n,this.hls.trigger(L.AUDIO_TRACK_SWITCHING,c({},n)),i))){var a=this.switchParams(n.url,null==r?void 0:r.details,n.details);this.loadPlaylist(a)}}},r.findTrackId=function(e){for(var t=this.tracksInGroup,r=0;r<t.length;r++){var n=t[r];if((!this.selectDefaultTrack||n.default)&&(!e||ct(e,n,dt)))return r}if(e){for(var i=e.name,a=e.lang,s=e.assocLang,o=e.characteristics,l=e.audioCodec,u=e.channels,c=0;c<t.length;c++)if(ct({name:i,lang:a,assocLang:s,characteristics:o,audioCodec:l,channels:u},t[c],dt))return c;for(var d=0;d<t.length;d++){var f=t[d];if(da(e.attrs,f.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return d}for(var h=0;h<t.length;h++){var p=t[h];if(da(e.attrs,p.attrs,["LANGUAGE"]))return h}}return-1},r.loadPlaylist=function(t){e.prototype.loadPlaylist.call(this);var r=this.currentTrack;this.shouldLoadPlaylist(r)&&ht(r.url,this.hls)&&this.scheduleLoading(r,t)},r.loadingPlaylist=function(t,r){e.prototype.loadingPlaylist.call(this,t,r);var n=t.id,i=t.groupId,a=this.getUrlWithDirectives(t.url,r),s=t.details,o=null==s?void 0:s.age;this.log("Loading audio-track "+n+' "'+t.name+'" lang:'+t.lang+" group:"+i+(void 0!==(null==r?void 0:r.msn)?" at sn "+r.msn+" part "+r.part:"")+(o&&s.live?" age "+o.toFixed(1)+(s.type?" "+s.type||0:""):"")+" "+a),this.hls.trigger(L.AUDIO_TRACK_LOADING,{url:a,id:n,groupId:i,deliveryDirectives:r||null,track:t})},n(t,[{key:"allAudioTracks",get:function(){return this.tracks}},{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}}])}(ua),pa=function(){function e(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}var t=e.prototype;return t.destroy=function(){this.tracks=this.queues=null},t.append=function(e,t,r){if(null!==this.queues&&null!==this.tracks){var n=this.queues[t];n.push(e),1!==n.length||r||this.executeNext(t)}},t.appendBlocker=function(e){var t=this;return new Promise(function(r){var n={label:"async-blocker",execute:r,onStart:function(){},onComplete:function(){},onError:function(){}};t.append(n,e)})},t.prependBlocker=function(e){var t=this;return new Promise(function(r){if(t.queues){var n={label:"async-blocker-prepend",execute:r,onStart:function(){},onComplete:function(){},onError:function(){}};t.queues[e].unshift(n)}})},t.removeBlockers=function(){null!==this.queues&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(function(e){var t,r=null==(t=e[0])?void 0:t.label;"async-blocker"!==r&&"async-blocker-prepend"!==r||(e[0].execute(),e.splice(0,1))})},t.unblockAudio=function(e){null!==this.queues&&this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")},t.executeNext=function(e){if(null!==this.queues&&null!==this.tracks){var t=this.queues[e];if(t.length){var r=t[0];try{r.execute()}catch(t){var n;if(r.onError(t),null===this.queues||null===this.tracks)return;var i=null==(n=this.tracks[e])?void 0:n.buffer;null!=i&&i.updating||this.shiftAndExecuteNext(e)}}}},t.shiftAndExecuteNext=function(e){null!==this.queues&&(this.queues[e].shift(),this.executeNext(e))},t.current=function(e){var t;return(null==(t=this.queues)?void 0:t[e][0])||null},t.toString=function(){var e=this.queues,t=this.tracks;return null===e||null===t?"<destroyed>":"\n"+this.list("video")+"\n"+this.list("audio")+"\n"+this.list("audiovideo")+"}"},t.list=function(e){var t,r;return null!=(t=this.queues)&&t[e]||null!=(r=this.tracks)&&r[e]?e+": ("+this.listSbInfo(e)+") "+this.listOps(e):""},t.listSbInfo=function(e){var t,r=null==(t=this.tracks)?void 0:t[e],n=null==r?void 0:r.buffer;return n?"SourceBuffer"+(n.updating?" updating":"")+(r.ended?" ended":"")+(r.ending?" ending":""):"none"},t.listOps=function(e){var t;return(null==(t=this.queues)?void 0:t[e].map(function(e){return e.label}).join(", "))||""},e}(),ma=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,ga="HlsJsTrackRemovedError",va=function(e){function t(t){var r;return(r=e.call(this,t)||this).name=ga,r}return o(t,e),t}(h(Error)),ya=function(e){function t(t,r){var n,i;return(n=e.call(this,"buffer-controller",t.logger)||this).hls=void 0,n.fragmentTracker=void 0,n.details=null,n._objectUrl=null,n.operationQueue=null,n.bufferCodecEventsTotal=0,n.media=null,n.mediaSource=null,n.lastMpegAudioChunk=null,n.blockedAudioAppend=null,n.lastVideoAppendEnd=0,n.appendSource=void 0,n.transferData=void 0,n.overrides=void 0,n.appendErrors={audio:0,video:0,audiovideo:0},n.tracks={},n.sourceBuffers=[[null,null],[null,null]],n._onEndStreaming=function(e){var t;n.hls&&"open"===(null==(t=n.mediaSource)?void 0:t.readyState)&&n.hls.pauseBuffering()},n._onStartStreaming=function(e){n.hls&&n.hls.resumeBuffering()},n._onMediaSourceOpen=function(e){var t=n,r=t.media,i=t.mediaSource;e&&n.log("Media source opened"),r&&i&&(i.removeEventListener("sourceopen",n._onMediaSourceOpen),r.removeEventListener("emptied",n._onMediaEmptied),n.updateDuration(),n.hls.trigger(L.MEDIA_ATTACHED,{media:r,mediaSource:i}),null!==n.mediaSource&&n.checkPendingTracks())},n._onMediaSourceClose=function(){n.log("Media source closed")},n._onMediaSourceEnded=function(){n.log("Media source ended")},n._onMediaEmptied=function(){var e=n,t=e.mediaSrc,r=e._objectUrl;t!==r&&n.error("Media element src was set while attaching MediaSource ("+r+" > "+t+")")},n.hls=t,n.fragmentTracker=r,n.appendSource=(i=V(t.config.preferManagedMediaSource),"undefined"!=typeof self&&i===self.ManagedMediaSource),n.initTracks(),n.registerListeners(),n}o(t,e);var r=t.prototype;return r.hasSourceTypes=function(){return Object.keys(this.tracks).length>0},r.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null},r.registerListeners=function(){var e=this.hls;e.on(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_PARSED,this.onManifestParsed,this),e.on(L.BUFFER_RESET,this.onBufferReset,this),e.on(L.BUFFER_APPENDING,this.onBufferAppending,this),e.on(L.BUFFER_CODECS,this.onBufferCodecs,this),e.on(L.BUFFER_EOS,this.onBufferEos,this),e.on(L.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(L.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(L.FRAG_PARSED,this.onFragParsed,this),e.on(L.FRAG_CHANGED,this.onFragChanged,this),e.on(L.ERROR,this.onError,this)},r.unregisterListeners=function(){var e=this.hls;e.off(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_PARSED,this.onManifestParsed,this),e.off(L.BUFFER_RESET,this.onBufferReset,this),e.off(L.BUFFER_APPENDING,this.onBufferAppending,this),e.off(L.BUFFER_CODECS,this.onBufferCodecs,this),e.off(L.BUFFER_EOS,this.onBufferEos,this),e.off(L.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(L.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(L.FRAG_PARSED,this.onFragParsed,this),e.off(L.FRAG_CHANGED,this.onFragChanged,this),e.off(L.ERROR,this.onError,this)},r.transferMedia=function(){var e=this,t=this.media,r=this.mediaSource;if(!t)return null;var n={};if(this.operationQueue){var i=this.isUpdating();i||this.operationQueue.removeBlockers();var s=this.isQueued();(i||s)&&this.warn("Transfering MediaSource with"+(s?" operations in queue":"")+(i?" updating SourceBuffer(s)":"")+" "+this.operationQueue),this.operationQueue.destroy()}var o=this.transferData;return!this.sourceBufferCount&&o&&o.mediaSource===r?a(n,o.tracks):this.sourceBuffers.forEach(function(t){var r=t[0];r&&(n[r]=a({},e.tracks[r]),e.removeBuffer(r)),t[0]=t[1]=null}),{media:t,mediaSource:r,tracks:n}},r.initTracks=function(){this.sourceBuffers=[[null,null],[null,null]],this.tracks={},this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0},r.onManifestLoading=function(){this.bufferCodecEventsTotal=0,this.details=null},r.onManifestParsed=function(e,t){var r,n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsTotal=n,this.log(n+" bufferCodec event(s) expected."),null!=(r=this.transferData)&&r.mediaSource&&this.sourceBufferCount&&n&&this.bufferCreated()},r.onMediaAttaching=function(e,t){var r=this.media=t.media,n=V(this.appendSource);if(this.transferData=this.overrides=void 0,r&&n){var i=!!t.mediaSource;(i||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);var a=this.mediaSource=t.mediaSource||new n;if(this.assignMediaSource(a),i)this._objectUrl=r.src,this.attachTransferred();else{var s=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{r.removeAttribute("src");var o=self.ManagedMediaSource;r.disableRemotePlayback=r.disableRemotePlayback||o&&a instanceof o,Ea(r),function(e,t){var r=self.document.createElement("source");r.type="video/mp4",r.src=t,e.appendChild(r)}(r,s),r.load()}catch(e){r.src=s}else r.src=s}r.addEventListener("emptied",this._onMediaEmptied)}},r.assignMediaSource=function(e){var t,r;this.log(((null==(t=this.transferData)?void 0:t.mediaSource)===e?"transferred":"created")+" media source: "+(null==(r=e.constructor)?void 0:r.name)),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))},r.attachTransferred=function(){var e=this,t=this.media,r=this.transferData;if(r&&t){var n=this.tracks,i=r.tracks,a=i?Object.keys(i):null,s=a?a.length:0,o=function(){e.media&&e.mediaSourceOpenOrEnded&&e._onMediaSourceOpen()};if(i&&a&&s){if(!this.tracksReady)return this.hls.config.startFragPrefetch=!0,void this.log("attachTransferred: waiting for SourceBuffer track info");if(this.log("attachTransferred: (bufferCodecEventsTotal "+this.bufferCodecEventsTotal+")\nrequired tracks: "+at(n,function(e,t){return"initSegment"===e?void 0:t})+";\ntransfer tracks: "+at(i,function(e,t){return"initSegment"===e?void 0:t})+"}"),!K(i,n)){r.mediaSource=null,r.tracks=void 0;var l=t.currentTime,u=this.details,c=Math.max(l,(null==u?void 0:u.fragments[0].start)||0);return c-l>1?void this.log("attachTransferred: waiting for playback to reach new tracks start time "+l+" -> "+c):(this.warn('attachTransferred: resetting MediaSource for incompatible tracks ("'+Object.keys(i)+'"->"'+Object.keys(n)+'") start time: '+c+" currentTime: "+l),this.onMediaDetaching(L.MEDIA_DETACHING,{}),this.onMediaAttaching(L.MEDIA_ATTACHING,r),void(t.currentTime=c))}this.transferData=void 0,a.forEach(function(t){var r=t,n=i[r];if(n){var a=n.buffer;if(a){var s=e.fragmentTracker,o=n.id;if(s.hasFragments(o)||s.hasParts(o)){var l=rr.getBuffered(a);s.detectEvictedFragments(r,l,o,null,!0)}var u=ba(r),c=[r,a];e.sourceBuffers[u]=c,a.updating&&e.operationQueue&&e.operationQueue.prependBlocker(r),e.trackSourceBuffer(r,n)}}}),o(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),o()}},r.onMediaDetaching=function(e,t){var r=this,n=!!t.transferMedia;this.transferData=this.overrides=void 0;var i=this.media,a=this.mediaSource,s=this._objectUrl;if(a){if(this.log("media source "+(n?"transferring":"detaching")),n)this.sourceBuffers.forEach(function(e){var t=e[0];t&&r.removeBuffer(t)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){var o="open"===a.readyState;try{for(var l=a.sourceBuffers,u=l.length;u--;)o&&l[u].abort(),a.removeSourceBuffer(l[u]);o&&a.endOfStream()}catch(e){this.warn("onMediaDetaching: "+e.message+" while calling endOfStream")}}this.sourceBufferCount&&this.onBufferReset()}a.removeEventListener("sourceopen",this._onMediaSourceOpen),a.removeEventListener("sourceended",this._onMediaSourceEnded),a.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(a.removeEventListener("startstreaming",this._onStartStreaming),a.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}i&&(i.removeEventListener("emptied",this._onMediaEmptied),n||(s&&self.URL.revokeObjectURL(s),this.mediaSrc===s?(i.removeAttribute("src"),this.appendSource&&Ea(i),i.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(L.MEDIA_DETACHED,t)},r.onBufferReset=function(){var e=this;this.sourceBuffers.forEach(function(t){var r=t[0];r&&e.resetBuffer(r)}),this.initTracks()},r.resetBuffer=function(e){var t,r=null==(t=this.tracks[e])?void 0:t.buffer;if(this.removeBuffer(e),r)try{var n;null!=(n=this.mediaSource)&&n.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(r)}catch(t){this.warn("onBufferReset "+e,t)}delete this.tracks[e]},r.removeBuffer=function(e){this.removeBufferListeners(e),this.sourceBuffers[ba(e)]=[null,null];var t=this.tracks[e];t&&(t.buffer=void 0)},r.resetQueue=function(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new pa(this.tracks)},r.onBufferCodecs=function(e,t){var r=this,n=this.tracks,i=Object.keys(t);this.log('BUFFER_CODECS: "'+i+'" (current SB count '+this.sourceBufferCount+")");var a="audiovideo"in t&&(n.audio||n.video)||n.audiovideo&&("audio"in t||"video"in t),s=!a&&this.sourceBufferCount&&this.media&&i.some(function(e){return!n[e]});a||s?this.warn('Unsupported transition between "'+Object.keys(n)+'" and "'+i+'" SourceBuffers'):(i.forEach(function(e){var i,a,s,o=t[e],l=o.id,u=o.codec,c=o.levelCodec,d=o.container,f=o.metadata,h=o.supplemental,p=n[e],m=null==(i=r.transferData)||null==(a=i.tracks)?void 0:a[e],g=null!=m&&m.buffer?m:p,v=(null==g?void 0:g.pendingCodec)||(null==g?void 0:g.codec),y=null==g?void 0:g.levelCodec;p||(p=n[e]={buffer:void 0,listeners:[],codec:u,supplemental:h,container:d,levelCodec:c,metadata:f,id:l});var E=Be(v,y),b=null==E?void 0:E.replace(ma,"$1"),S=Be(u,c),T=null==(s=S)?void 0:s.replace(ma,"$1");S&&E&&b!==T&&("audio"===e.slice(0,5)&&(S=Ue(S,r.appendSource)),r.log("switching codec "+v+" to "+S),S!==(p.pendingCodec||p.codec)&&(p.pendingCodec=S),p.container=d,r.appendChangeType(e,d,S))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),this.sourceBufferCount||this.mediaSourceOpenOrEnded&&this.checkPendingTracks())},r.appendChangeType=function(e,t,r){var n=this,i=t+";codecs="+r,a={label:"change-type="+i,execute:function(){var a=n.tracks[e];if(a){var s=a.buffer;null!=s&&s.changeType&&(n.log("changing "+e+" sourceBuffer type to "+i),s.changeType(i),a.codec=r,a.container=t)}n.shiftAndExecuteNext(e)},onStart:function(){},onComplete:function(){},onError:function(t){n.warn("Failed to change "+e+" SourceBuffer type",t)}};this.append(a,e,this.isPending(this.tracks[e]))},r.blockAudio=function(e){var t,r=this,n=e.start,i=n+.05*e.duration;if(!0!==(null==(t=this.fragmentTracker.getAppendedFrag(n,I))?void 0:t.gap)){var a={label:"block-audio",execute:function(){var e,t=r.tracks.video;(r.lastVideoAppendEnd>i||null!=t&&t.buffer&&rr.isBuffered(t.buffer,i)||!0===(null==(e=r.fragmentTracker.getAppendedFrag(i,I))?void 0:e.gap))&&(r.blockedAudioAppend=null,r.shiftAndExecuteNext("audio"))},onStart:function(){},onComplete:function(){},onError:function(e){r.warn("Error executing block-audio operation",e)}};this.blockedAudioAppend={op:a,frag:e},this.append(a,"audio",!0)}},r.unblockAudio=function(){var e=this.blockedAudioAppend,t=this.operationQueue;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))},r.onBufferAppending=function(e,t){var r=this,n=this.tracks,i=t.data,a=t.type,s=t.parent,o=t.frag,l=t.part,u=t.chunkMeta,c=t.offset,d=u.buffering[a],f=o.sn,h=o.cc,p=self.performance.now();d.start=p;var m=o.stats.buffering,g=l?l.stats.buffering:null;0===m.start&&(m.start=p),g&&0===g.start&&(g.start=p);var v=n.audio,y=!1;"audio"===a&&"audio/mpeg"===(null==v?void 0:v.container)&&(y=!this.lastMpegAudioChunk||1===u.id||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);var E=n.video,b=null==E?void 0:E.buffer;if(b&&"initSegment"!==f){var T=l||o,w=this.blockedAudioAppend;if("audio"!==a||"main"===s||this.blockedAudioAppend){if("video"===a){var A=T.end;if(w){var _=w.frag.start;(A>_||A<this.lastVideoAppendEnd||rr.isBuffered(b,_))&&this.unblockAudio()}this.lastVideoAppendEnd=A}}else{var D=T.start+.05*T.duration,C=b.buffered,I=this.currentOp("video");C.length||I?!I&&!rr.isBuffered(b,D)&&this.lastVideoAppendEnd<D&&this.blockAudio(T):this.blockAudio(T)}}var P=(l||o).start,x={label:"append-"+a,execute:function(){var e;d.executeStart=self.performance.now();var t=null==(e=r.tracks[a])?void 0:e.buffer;t&&(y?r.updateTimestampOffset(t,P,.1,a,f,h):void 0!==c&&S(c)&&r.updateTimestampOffset(t,c,1e-6,a,f,h)),r.appendExecutor(i,a)},onStart:function(){},onComplete:function(){var e=self.performance.now();d.executeEnd=d.end=e,0===m.first&&(m.first=e),g&&0===g.first&&(g.first=e);var t={};r.sourceBuffers.forEach(function(e){var r=e[0],n=e[1];r&&(t[r]=rr.getBuffered(n))}),r.appendErrors[a]=0,"audio"===a||"video"===a?r.appendErrors.audiovideo=0:(r.appendErrors.audio=0,r.appendErrors.video=0),r.hls.trigger(L.BUFFER_APPENDED,{type:a,frag:o,part:l,chunkMeta:u,parent:o.type,timeRanges:t})},onError:function(e){var t,n={type:k.MEDIA_ERROR,parent:o.type,details:R.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:o,part:l,chunkMeta:u,error:e,err:e,fatal:!1},i=null==(t=r.media)?void 0:t.error;if(e.code===DOMException.QUOTA_EXCEEDED_ERR||"QuotaExceededError"==e.name||"quota"in e)n.details=R.BUFFER_FULL_ERROR;else if(e.code===DOMException.INVALID_STATE_ERR&&r.mediaSourceOpenOrEnded&&!i)n.errorAction=xt(!0);else if(e.name===ga&&0===r.sourceBufferCount)n.errorAction=xt(!0);else{var s=++r.appendErrors[a];r.warn("Failed "+s+"/"+r.hls.config.appendErrorMaxRetry+' times to append segment in "'+a+'" sourceBuffer ('+(i||"no media error")+")"),(s>=r.hls.config.appendErrorMaxRetry||i)&&(n.fatal=!0)}r.hls.trigger(L.ERROR,n)}};this.append(x,a,this.isPending(this.tracks[a]))},r.getFlushOp=function(e,t,r){var n=this;return this.log('queuing "'+e+'" remove '+t+"-"+r),{label:"remove",execute:function(){n.removeExecutor(e,t,r)},onStart:function(){},onComplete:function(){n.hls.trigger(L.BUFFER_FLUSHED,{type:e})},onError:function(i){n.warn("Failed to remove "+t+"-"+r+' from "'+e+'" SourceBuffer',i)}}},r.onBufferFlushing=function(e,t){var r=this,n=t.type,i=t.startOffset,a=t.endOffset;n?this.append(this.getFlushOp(n,i,a),n):this.sourceBuffers.forEach(function(e){var t=e[0];t&&r.append(r.getFlushOp(t,i,a),t)})},r.onFragParsed=function(e,t){var r=this,n=t.frag,i=t.part,a=[],s=i?i.elementaryStreams:n.elementaryStreams;s[J]?a.push("audiovideo"):(s[X]&&a.push("audio"),s[Q]&&a.push("video"));0===a.length&&this.warn("Fragments must have at least one ElementaryStreamType set. type: "+n.type+" level: "+n.level+" sn: "+n.sn),this.blockBuffers(function(){var e=self.performance.now();n.stats.buffering.end=e,i&&(i.stats.buffering.end=e);var t=i?i.stats:n.stats;r.hls.trigger(L.FRAG_BUFFERED,{frag:n,part:i,stats:t,id:n.type})},a).catch(function(e){r.warn("Fragment buffered callback "+e),r.stepOperationQueue(r.sourceBufferTypes)})},r.onFragChanged=function(e,t){this.trimBuffers()},r.onBufferEos=function(e,t){var r,n=this;this.sourceBuffers.forEach(function(e){var r=e[0];if(r){var i=n.tracks[r];t.type&&t.type!==r||(i.ending=!0,i.ended||(i.ended=!0,n.log(r+" buffer reached EOS")))}});var i=!1!==(null==(r=this.overrides)?void 0:r.endOfStream);this.sourceBufferCount>0&&!this.sourceBuffers.some(function(e){var t,r=e[0];return r&&!(null!=(t=n.tracks[r])&&t.ended)})&&(i?(this.log("Queueing EOS"),this.blockUntilOpen(function(){n.tracksEnded();var e=n.mediaSource;e&&"open"===e.readyState?(n.log("Calling mediaSource.endOfStream()"),e.endOfStream(),n.hls.trigger(L.BUFFERED_TO_END,void 0)):e&&n.log("Could not call mediaSource.endOfStream(). mediaSource.readyState: "+e.readyState)})):(this.tracksEnded(),this.hls.trigger(L.BUFFERED_TO_END,void 0)))},r.tracksEnded=function(){var e=this;this.sourceBuffers.forEach(function(t){var r=t[0];if(null!==r){var n=e.tracks[r];n&&(n.ending=!1)}})},r.onLevelUpdated=function(e,t){var r=t.details;r.fragments.length&&(this.details=r,this.updateDuration())},r.updateDuration=function(){var e=this;this.blockUntilOpen(function(){var t=e.getDurationAndRange();t&&e.updateMediaSource(t)})},r.onError=function(e,t){if(t.details===R.BUFFER_APPEND_ERROR&&t.frag){var r,n=null==(r=t.errorAction)?void 0:r.nextAutoLevel;S(n)&&n!==t.frag.level&&this.resetAppendErrors()}},r.resetAppendErrors=function(){this.appendErrors={audio:0,video:0,audiovideo:0}},r.trimBuffers=function(){var e=this.hls,t=this.details,r=this.media;if(r&&null!==t&&this.sourceBufferCount){var n=e.config,i=r.currentTime,a=t.levelTargetDuration,s=t.live&&null!==n.liveBackBufferLength?n.liveBackBufferLength:n.backBufferLength;if(S(s)&&s>=0){var o=Math.max(s,a),l=Math.floor(i/a)*a-o;this.flushBackBuffer(i,a,l)}if(S(n.frontBufferFlushThreshold)&&n.frontBufferFlushThreshold>0){var u=Math.max(n.maxBufferLength,n.frontBufferFlushThreshold),c=Math.max(u,a),d=Math.floor(i/a)*a+c;this.flushFrontBuffer(i,a,d)}}},r.flushBackBuffer=function(e,t,r){var n=this;this.sourceBuffers.forEach(function(e){var t=e[0],i=e[1];if(i){var a=rr.getBuffered(i);if(a.length>0&&r>a.start(0)){var s;n.hls.trigger(L.BACK_BUFFER_REACHED,{bufferEnd:r});var o=n.tracks[t];if(null!=(s=n.details)&&s.live)n.hls.trigger(L.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(null!=o&&o.ended)return void n.log("Cannot flush "+t+" back buffer while SourceBuffer is in ended state");n.hls.trigger(L.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:t})}}})},r.flushFrontBuffer=function(e,t,r){var n=this;this.sourceBuffers.forEach(function(t){var i=t[0],a=t[1];if(a){var s=rr.getBuffered(a),o=s.length;if(o<2)return;var l=s.start(o-1),u=s.end(o-1);if(r>l||e>=l&&e<=u)return;n.hls.trigger(L.BUFFER_FLUSHING,{startOffset:l,endOffset:1/0,type:i})}})},r.getDurationAndRange=function(){var e,t=this.details,r=this.mediaSource;if(!t||!this.media||"open"!==(null==r?void 0:r.readyState))return null;var n=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&t.live&&r.setLiveSeekableRange){var i=Math.max(0,t.fragmentStart);return{duration:1/0,start:i,end:Math.max(i,n)}}return{duration:1/0}}var a=null==(e=this.overrides)?void 0:e.duration;if(a)return S(a)?{duration:a}:null;var s=this.media.duration;return n>(S(r.duration)?r.duration:0)&&n>s||!S(s)?{duration:n}:null},r.updateMediaSource=function(e){var t=e.duration,r=e.start,n=e.end,i=this.mediaSource;this.media&&i&&"open"===i.readyState&&(i.duration!==t&&(S(t)&&this.log("Updating MediaSource duration to "+t.toFixed(3)),i.duration=t),void 0!==r&&void 0!==n&&(this.log("MediaSource duration is set to "+i.duration+". Setting seekable range to "+r+"-"+n+"."),i.setLiveSeekableRange(r,n)))},r.checkPendingTracks=function(){var e=this.bufferCodecEventsTotal,t=this.pendingTrackCount,r=this.tracks;if(this.log("checkPendingTracks (pending: "+t+" codec events expected: "+e+") "+at(r)),this.tracksReady){var n,i=null==(n=this.transferData)?void 0:n.tracks;i&&Object.keys(i).length?this.attachTransferred():this.createSourceBuffers()}},r.bufferCreated=function(){var e=this;if(this.sourceBufferCount){var t={};this.sourceBuffers.forEach(function(r){var n=r[0],i=r[1];if(n){var a=e.tracks[n];t[n]={buffer:i,container:a.container,codec:a.codec,supplemental:a.supplemental,levelCodec:a.levelCodec,id:a.id,metadata:a.metadata}}}),this.hls.trigger(L.BUFFER_CREATED,{tracks:t}),this.log("SourceBuffers created. Running queue: "+this.operationQueue),this.sourceBuffers.forEach(function(t){var r=t[0];e.executeNext(r)})}else{var r=new Error("could not create source buffer for media codec(s)");this.hls.trigger(L.ERROR,{type:k.MEDIA_ERROR,details:R.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:r,reason:r.message})}},r.createSourceBuffers=function(){var e=this.tracks,t=this.sourceBuffers,r=this.mediaSource;if(!r)throw new Error("createSourceBuffers called when mediaSource was null");for(var n in e){var i=n,a=e[i];if(this.isPending(a)){var s=this.getTrackCodec(a,i),o=a.container+";codecs="+s;a.codec=s,this.log("creating sourceBuffer("+o+")"+(this.currentOp(i)?" Queued":"")+" "+at(a));try{var l=r.addSourceBuffer(o),u=ba(i),c=[i,l];t[u]=c,a.buffer=l}catch(e){var d;return this.error("error while trying to add sourceBuffer: "+e.message),this.shiftAndExecuteNext(i),null==(d=this.operationQueue)||d.removeBlockers(),delete this.tracks[i],void this.hls.trigger(L.ERROR,{type:k.MEDIA_ERROR,details:R.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,sourceBufferName:i,mimeType:o,parent:a.id})}this.trackSourceBuffer(i,a)}}this.bufferCreated()},r.getTrackCodec=function(e,t){var r=e.supplemental,n=e.codec;r&&("video"===t||"audiovideo"===t)&&Ie(r,"video")&&(n=function(e,t){var r=[];if(e)for(var n=e.split(","),i=0;i<n.length;i++)Ce(n[i],"video")||r.push(n[i]);return t&&r.push(t),r.join(",")}(n,r));var i=Be(n,e.levelCodec);return i?"audio"===t.slice(0,5)?Ue(i,this.appendSource):i:""},r.trackSourceBuffer=function(e,t){var r=this,n=t.buffer;if(n){var i=this.getTrackCodec(t,e);this.tracks[e]={buffer:n,codec:i,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",function(e,t){var n=t.removedRanges;null!=n&&n.length&&r.hls.trigger(L.BUFFER_FLUSHED,{type:e})})}},r.onSBUpdateStart=function(e){var t=this.currentOp(e);t&&t.onStart()},r.onSBUpdateEnd=function(e){var t;if("closed"!==(null==(t=this.mediaSource)?void 0:t.readyState)){var r=this.currentOp(e);r&&(r.onComplete(),this.shiftAndExecuteNext(e))}else this.resetBuffer(e)},r.onSBUpdateError=function(e,t){var r,n=new Error(e+" SourceBuffer error. MediaSource readyState: "+(null==(r=this.mediaSource)?void 0:r.readyState));this.error(""+n,t),this.hls.trigger(L.ERROR,{type:k.MEDIA_ERROR,details:R.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:n,fatal:!1});var i=this.currentOp(e);i&&i.onError(n)},r.updateTimestampOffset=function(e,t,r,n,i,a){var s=t-e.timestampOffset;Math.abs(s)>=r&&(this.log("Updating "+n+" SourceBuffer timestampOffset to "+t+" (sn: "+i+" cc: "+a+")"),e.timestampOffset=t)},r.removeExecutor=function(e,t,r){var n=this.media,i=this.mediaSource,a=this.tracks[e],s=null==a?void 0:a.buffer;if(!n||!i||!s)return this.warn("Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),void this.shiftAndExecuteNext(e);var o=S(n.duration)?n.duration:1/0,l=S(i.duration)?i.duration:1/0,u=Math.max(0,t),c=Math.min(r,o,l);c>u&&(!a.ending||a.ended)?(a.ended=!1,this.log("Removing ["+u+","+c+"] from the "+e+" SourceBuffer"),s.remove(u,c)):this.shiftAndExecuteNext(e)},r.appendExecutor=function(e,t){var r=this.tracks[t],n=null==r?void 0:r.buffer;if(!n)throw new va("Attempting to append to the "+t+" SourceBuffer, but it does not exist");r.ending=!1,r.ended=!1,n.appendBuffer(e)},r.blockUntilOpen=function(e){var t=this;if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(function(e){t.warn("SourceBuffer blocked callback "+e),t.stepOperationQueue(t.sourceBufferTypes)});else try{e()}catch(e){this.warn("Callback run without blocking "+this.operationQueue+" "+e)}},r.isUpdating=function(){return this.sourceBuffers.some(function(e){var t=e[0],r=e[1];return t&&r.updating})},r.isQueued=function(){var e=this;return this.sourceBuffers.some(function(t){var r=t[0];return r&&!!e.currentOp(r)})},r.isPending=function(e){return!!e&&!e.buffer},r.blockBuffers=function(e,t){var r=this;if(void 0===t&&(t=this.sourceBufferTypes),!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);var n=this.operationQueue,i=t.map(function(e){return r.appendBlocker(e)});return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(i).then(function(t){n===r.operationQueue&&(e(),r.stepOperationQueue(r.sourceBufferTypes))})},r.stepOperationQueue=function(e){var t=this;e.forEach(function(e){var r,n=null==(r=t.tracks[e])?void 0:r.buffer;n&&!n.updating&&t.shiftAndExecuteNext(e)})},r.append=function(e,t,r){this.operationQueue&&this.operationQueue.append(e,t,r)},r.appendBlocker=function(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)},r.currentOp=function(e){return this.operationQueue?this.operationQueue.current(e):null},r.executeNext=function(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)},r.shiftAndExecuteNext=function(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)},r.addBufferListener=function(e,t,r){var n=this.tracks[e];if(n){var i=n.buffer;if(i){var a=r.bind(this,e);n.listeners.push({event:t,listener:a}),i.addEventListener(t,a)}}},r.removeBufferListeners=function(e){var t=this.tracks[e];if(t){var r=t.buffer;r&&(t.listeners.forEach(function(e){r.removeEventListener(e.event,e.listener)}),t.listeners.length=0)}},n(t,[{key:"mediaSourceOpenOrEnded",get:function(){var e,t=null==(e=this.mediaSource)?void 0:e.readyState;return"open"===t||"ended"===t}},{key:"sourceBufferTracks",get:function(){var e=this;return Object.keys(this.tracks).reduce(function(t,r){var n=e.tracks[r];return t[r]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},t},{})}},{key:"bufferedToEnd",get:function(){var e=this;return this.sourceBufferCount>0&&!this.sourceBuffers.some(function(t){var r,n,i=t[0];return i&&(!(null!=(r=e.tracks[i])&&r.ended)||(null==(n=e.tracks[i])?void 0:n.ending))})}},{key:"tracksReady",get:function(){var e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}},{key:"mediaSrc",get:function(){var e,t,r=(null==(e=this.media)||null==(t=e.querySelector)?void 0:t.call(e,"source"))||this.media;return null==r?void 0:r.src}},{key:"pendingTrackCount",get:function(){var e=this;return Object.keys(this.tracks).reduce(function(t,r){return t+(e.isPending(e.tracks[r])?1:0)},0)}},{key:"sourceBufferCount",get:function(){return this.sourceBuffers.reduce(function(e,t){return e+(t[0]?1:0)},0)}},{key:"sourceBufferTypes",get:function(){return this.sourceBuffers.map(function(e){return e[0]}).filter(function(e){return!!e})}}])}(F);function Ea(e){var t=e.querySelectorAll("source");[].slice.call(t).forEach(function(t){e.removeChild(t)})}function ba(e){return"audio"===e?1:0}var Sa,Ta=function(){function e(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var t=e.prototype;return t.setStreamController=function(e){this.streamController=e},t.destroy=function(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},t.registerListeners=function(){var e=this.hls;e.on(L.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(L.MANIFEST_PARSED,this.onManifestParsed,this),e.on(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(L.BUFFER_CODECS,this.onBufferCodecs,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this)},t.unregisterListener=function(){var e=this.hls;e.off(L.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(L.MANIFEST_PARSED,this.onManifestParsed,this),e.off(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(L.BUFFER_CODECS,this.onBufferCodecs,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this)},t.onFpsDropLevelCapping=function(e,t){var r=this.hls.levels[t.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})},t.onMediaAttaching=function(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()},t.onManifestParsed=function(e,t){var r=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,r.config.capLevelToPlayerSize&&t.video&&this.startCapping()},t.onLevelsUpdated=function(e,t){this.timer&&S(this.autoLevelCapping)&&this.detectPlayerSize()},t.onBufferCodecs=function(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},t.onMediaDetaching=function(){this.stopCapping(),this.media=null},t.detectPlayerSize=function(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);var e=this.hls.levels;if(e.length){var t=this.hls,r=this.getMaxLevel(e.length-1);r!==this.autoLevelCapping&&t.logger.log("Setting autoLevelCapping to "+r+": "+e[r].height+"p@"+e[r].bitrate+" for media "+this.mediaWidth+"x"+this.mediaHeight),t.autoLevelCapping=r,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},t.getMaxLevel=function(t){var r=this,n=this.hls.levels;if(!n.length)return-1;var i=n.filter(function(e,n){return r.isLevelAllowed(e)&&n<=t});return this.clientRect=null,e.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},t.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},t.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},t.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var r=e.getBoundingClientRect();t.width=r.width,t.height=r.height,t.width||t.height||(t.width=r.right-r.left||e.width||0,t.height=r.bottom-r.top||e.height||0)}return this.clientRect=t,t},t.isLevelAllowed=function(e){return!this.restrictedLevels.some(function(t){return e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height})},e.getMaxLevelByMediaSize=function(e,t,r){if(null==e||!e.length)return-1;for(var n=function(e,t){return!t||e.width!==t.width||e.height!==t.height},i=e.length-1,a=Math.max(t,r),s=0;s<e.length;s+=1){var o=e[s];if((o.width>=a||o.height>=a)&&n(o,e[s+1])){i=s;break}}return i},n(e,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(e){}return Math.min(e,this.hls.config.maxDevicePixelRatio)}}])}(),wa="m",ka="a",Ra="v",La="av",Aa="i",_a="tt",Da="h",Ca="CMCD-Request",Ia="CMCD-Session",Pa="CMCD-Status",xa=((Sa={})["CMCD-Object"]=["br","ab","d","ot","tb","tpb","lb","tab","lab","url"],Sa[Ca]=["pb","bl","tbl","dl","ltc","mtp","nor","nrr","rc","sn","sta","su","ttfb","ttfbb","ttlb","cmsdd","cmsds","smrt","df","cs"],Sa[Ia]=["cid","pr","sf","sid","st","v","msd"],Sa[Pa]=["bs","bsd","cdn","rtp","bg","pt","ec","e"],Sa),Oa=function e(t,r){Array.isArray(t)&&(t=t.map(function(t){return t instanceof e?t:new e(t)})),this.value=t,this.params=r};function Ma(e,t,r,n){return new Error("failed to "+e+' "'+(i=t,(Array.isArray(i)?JSON.stringify(i):i instanceof Map?"Map{}":i instanceof Set?"Set{}":"object"==typeof i?JSON.stringify(i):String(i))+'" as ')+r,{cause:n});var i}function Fa(e,t,r){return Ma("serialize",e,t,r)}var Na=function(e){this.description=e},Ua="Bare Item";function Ba(e){if(!1===ArrayBuffer.isView(e))throw Fa(e,"Byte Sequence");return":"+(t=e,btoa(String.fromCharCode.apply(String,t))+":");var t}function ja(e){if(function(e){return e<-999999999999999||999999999999999<e}(e))throw Fa(e,"Integer");return e.toString()}function Ha(e,t){if(e<0)return-Ha(-e,t);var r=Math.pow(10,t);if(Math.abs(e*r%1-.5)<Number.EPSILON){var n=Math.floor(e*r);return(n%2==0?n:n+1)/r}return Math.round(e*r)/r}function Ga(e){var t=Ha(e,3);if(Math.floor(Math.abs(t)).toString().length>12)throw Fa(e,"Decimal");var r=t.toString();return r.includes(".")?r:r+".0"}var za=/[\x00-\x1f\x7f]+/;function Va(e){var t,r=(t=e).description||t.toString().slice(7,-1);if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(r))throw Fa(r,"Token");return r}function Ka(e){switch(typeof e){case"number":if(!S(e))throw Fa(e,Ua);return Number.isInteger(e)?ja(e):Ga(e);case"string":return function(e){if(za.test(e))throw Fa(e,"String");return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}(e);case"symbol":return Va(e);case"boolean":return function(e){if("boolean"!=typeof e)throw Fa(e,"Boolean");return e?"?1":"?0"}(e);case"object":if(e instanceof Date)return function(e){return"@"+ja(e.getTime()/1e3)}(e);if(e instanceof Uint8Array)return Ba(e);if(e instanceof Na)return Va(e);default:throw Fa(e,Ua)}}function $a(e){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(e))throw Fa(e,"Key");return e}function qa(e){return null==e?"":Object.entries(e).map(function(e){var t=e[0],r=e[1];return!0===r?";"+$a(t):";"+$a(t)+"="+Ka(r)}).join("")}function Wa(e){return e instanceof Oa?""+Ka(e.value)+qa(e.params):Ka(e)}function Ya(e,t){if(void 0===t&&(t={whitespace:!0}),"object"!=typeof e)throw Fa(e,"Dict");var r=e instanceof Map?e.entries():Object.entries(e),n=(null==t?void 0:t.whitespace)?" ":"";return Array.from(r).map(function(e){var t=e[0],r=e[1];r instanceof Oa==0&&(r=new Oa(r));var n,i=$a(t);return!0===r.value?i+=qa(r.params):(i+="=",Array.isArray(r.value)?i+="("+(n=r).value.map(Wa).join(" ")+")"+qa(n.params):i+=Wa(r)),i}).join(","+n)}var Xa=function(e){return Math.round(e)},Qa=function(e){return 100*Xa(e/100)},Ja={br:Xa,d:Xa,bl:Qa,dl:Qa,mtp:Qa,nor:function(e,t){return(null==t?void 0:t.baseUrl)&&(e=function(e,t){var r=new URL(e),n=new URL(t);if(r.origin!==n.origin)return e;for(var i=r.pathname.split("/").slice(1),a=n.pathname.split("/").slice(1,-1);i[0]===a[0];)i.shift(),a.shift();for(;a.length;)a.shift(),i.unshift("..");return i.join("/")}(e,t.baseUrl)),encodeURIComponent(e)},rtp:Qa,tb:Xa};function Za(e,t){var r={};if(null==e||"object"!=typeof e)return r;var n=Object.keys(e).sort(),i=a({},Ja,null==t?void 0:t.formatters),s=null==t?void 0:t.filter;return n.forEach(function(n){if(!1!==(null==s?void 0:s(n))){var a=e[n],o=i[n];o&&(a=o(a,t)),"v"===n&&1===a||"pr"==n&&1===a||function(e){return"number"==typeof e?S(e):null!=e&&""!==e&&!1!==e}(a)&&(function(e){return["ot","sf","st","e","sta"].includes(e)}(n)&&"string"==typeof a&&(a=new Na(a)),r[n]=a)}}),r}function es(e,t){return void 0===t&&(t={}),e?function(e,t){return Ya(e,t)}(Za(e,t),a({whitespace:!1},t)):""}function ts(e,t,r){return a(e,function(e,t){void 0===t&&(t={});var r={};if(!e)return r;var n=Object.entries(e),i=Object.entries(xa).concat(Object.entries((null==t?void 0:t.customHeaderMap)||{})),a=n.reduce(function(e,t){var r,n,a=t[0],s=t[1],o=(null===(r=i.find(function(e){return e[1].includes(a)}))||void 0===r?void 0:r[0])||Ca;return null!==(n=e[o])&&void 0!==n||(e[o]={}),e[o][a]=s,e},{});return Object.entries(a).reduce(function(e,r){var n=r[0],i=r[1];return e[n]=es(i,t),e},r)}(t,r))}var rs=/CMCD=[^&#]+/;function ns(e,t,r){var n=function(e,t){if(void 0===t&&(t={}),!e)return"";var r=es(e,t);return"CMCD="+encodeURIComponent(r)}(t,r);if(!n)return e;if(rs.test(e))return e.replace(rs,n);var i=e.includes("?")?"&":"?";return""+e+i+n}var is=function(){function e(e){var t=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){t.initialized&&(t.starved=!0),t.buffering=!0},this.onPlaying=function(){t.initialized||(t.initialized=!0),t.buffering=!1},this.applyPlaylistData=function(e){try{t.apply(e,{ot:wa,su:!t.initialized})}catch(e){t.hls.logger.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=function(e){try{var r=e.frag,n=e.part,i=t.hls.levels[r.level],a=t.getObjectType(r),s={d:1e3*(n||r).duration,ot:a};a!==Ra&&a!==ka&&a!=La||(s.br=i.bitrate/1e3,s.tb=t.getTopBandwidth(a)/1e3,s.bl=t.getBufferLength(a));var o=n?t.getNextPart(n):t.getNextFrag(r);null!=o&&o.url&&o.url!==r.url&&(s.nor=o.url),t.apply(e,s)}catch(e){t.hls.logger.warn("Could not generate segment CMCD data.",e)}},this.hls=e;var r=this.config=e.config,n=r.cmcd;null!=n&&(r.pLoader=this.createPlaylistLoader(),r.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||e.sessionId,this.cid=n.contentId,this.useHeaders=!0===n.useHeaders,this.includeKeys=n.includeKeys,this.registerListeners())}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHED,this.onMediaDetached,this),e.on(L.BUFFER_CREATED,this.onBufferCreated,this)},t.unregisterListeners=function(){var e=this.hls;e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHED,this.onMediaDetached,this),e.off(L.BUFFER_CREATED,this.onBufferCreated,this)},t.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null},t.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},t.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},t.onBufferCreated=function(e,t){var r,n;this.audioBuffer=null==(r=t.tracks.audio)?void 0:r.buffer,this.videoBuffer=null==(n=t.tracks.video)?void 0:n.buffer},t.createData=function(){var e;return{v:1,sf:Da,sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},t.apply=function(e,t){void 0===t&&(t={}),a(t,this.createData());var r=t.ot===Aa||t.ot===Ra||t.ot===La;this.starved&&r&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering);var n=this.includeKeys;n&&(t=Object.keys(t).reduce(function(e,r){return n.includes(r)&&(e[r]=t[r]),e},{}));var i={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),ts(e.headers,t,i)):e.url=ns(e.url,t,i)},t.getNextFrag=function(e){var t,r=null==(t=this.hls.levels[e.level])?void 0:t.details;if(r){var n=e.sn-r.startSN;return r.fragments[n+1]}},t.getNextPart=function(e){var t,r,n=e.index,i=e.fragment,a=null==(t=this.hls.levels[i.level])||null==(r=t.details)?void 0:r.partList;if(a)for(var s=i.sn,o=a.length-1;o>=0;o--){var l=a[o];if(l.index===n&&l.fragment.sn===s)return a[o+1]}},t.getObjectType=function(e){var t=e.type;return"subtitle"===t?_a:"initSegment"===e.sn?Aa:"audio"===t?ka:"main"===t?this.hls.audioTracks.length?Ra:La:void 0},t.getTopBandwidth=function(e){var t,r=0,n=this.hls;if(e===ka)t=n.audioTracks;else{var i=n.maxAutoLevel,a=i>-1?i+1:n.levels.length;t=n.levels.slice(0,a)}return t.forEach(function(e){e.bitrate>r&&(r=e.bitrate)}),r>0?r:NaN},t.getBufferLength=function(e){var t=this.media,r=e===ka?this.audioBuffer:this.videoBuffer;return r&&t?1e3*rr.bufferInfo(r,t.currentTime,this.config.maxBufferHole).len:NaN},t.createPlaylistLoader=function(){var e=this.config.pLoader,t=this.applyPlaylistData,r=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new r(e)}var i=e.prototype;return i.destroy=function(){this.loader.destroy()},i.abort=function(){this.loader.abort()},i.load=function(e,r,n){t(e),this.loader.load(e,r,n)},n(e,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}])}()},t.createFragmentLoader=function(){var e=this.config.fLoader,t=this.applyFragmentData,r=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new r(e)}var i=e.prototype;return i.destroy=function(){this.loader.destroy()},i.abort=function(){this.loader.abort()},i.load=function(e,r,n){t(e),this.loader.load(e,r,n)},n(e,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}])}()},e}(),as=function(e){function t(t){var r;return(r=e.call(this,"content-steering",t.logger)||this).hls=void 0,r.loader=null,r.uri=null,r.pathwayId=".",r._pathwayPriority=null,r.timeToLoad=300,r.reloadTimer=-1,r.updated=0,r.started=!1,r.enabled=!0,r.levels=null,r.audioTracks=null,r.subtitleTracks=null,r.penalizedPathways={},r.hls=t,r.registerListeners(),r}o(t,e);var r=t.prototype;return r.registerListeners=function(){var e=this.hls;e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(L.MANIFEST_PARSED,this.onManifestParsed,this),e.on(L.ERROR,this.onError,this)},r.unregisterListeners=function(){var e=this.hls;e&&(e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(L.MANIFEST_PARSED,this.onManifestParsed,this),e.off(L.ERROR,this.onError,this))},r.pathways=function(){return(this.levels||[]).reduce(function(e,t){return-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e},[])},r.startLoad=function(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){var e=1e3*this.timeToLoad-(performance.now()-this.updated);if(e>0)return void this.scheduleRefresh(this.uri,e)}this.loadSteeringManifest(this.uri)}},r.stopLoad=function(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()},r.clearTimeout=function(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)},r.destroy=function(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null},r.removeLevel=function(e){var t=this.levels;t&&(this.levels=t.filter(function(t){return t!==e}))},r.onManifestLoading=function(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null},r.onManifestLoaded=function(e,t){var r=t.contentSteering;null!==r&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())},r.onManifestParsed=function(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks},r.onError=function(e,t){var r=t.errorAction;if((null==r?void 0:r.action)===Lt&&r.flags===Ct){var n=this.levels,i=this._pathwayPriority,a=this.pathwayId;if(t.context){var s=t.context,o=s.groupId,l=s.pathwayId,u=s.type;o&&n?a=this.getPathwayForGroupId(o,u,a):l&&(a=l)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!i&&n&&(i=this.pathways()),i&&i.length>1&&(this.updatePathwayPriority(i),r.resolved=this.pathwayId!==a),t.details!==R.BUFFER_APPEND_ERROR||t.fatal?r.resolved||this.warn("Could not resolve "+t.details+' ("'+t.error.message+'") with content-steering for Pathway: '+a+" levels: "+(n?n.length:n)+" priorities: "+at(i)+" penalized: "+at(this.penalizedPathways)):r.resolved=!0}},r.filterParsedLevels=function(e){this.levels=e;var t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){var r=e[0].pathwayId;this.log("No levels found in Pathway "+this.pathwayId+'. Setting initial Pathway to "'+r+'"'),t=this.getLevelsForPathway(r),this.pathwayId=r}return t.length!==e.length&&this.log("Found "+t.length+"/"+e.length+' levels in Pathway "'+this.pathwayId+'"'),t},r.getLevelsForPathway=function(e){return null===this.levels?[]:this.levels.filter(function(t){return e===t.pathwayId})},r.updatePathwayPriority=function(e){var t;this._pathwayPriority=e;var r=this.penalizedPathways,n=performance.now();Object.keys(r).forEach(function(e){n-r[e]>3e5&&delete r[e]});for(var i=0;i<e.length;i++){var a=e[i];if(!(a in r)){if(a===this.pathwayId)return;var s=this.hls.nextLoadLevel,o=this.hls.levels[s];if((t=this.getLevelsForPathway(a)).length>0){this.log('Setting Pathway to "'+a+'"'),this.pathwayId=a,on(t),this.hls.trigger(L.LEVELS_UPDATED,{levels:t});var l=this.hls.levels[s];o&&l&&this.levels&&(l.attrs["STABLE-VARIANT-ID"]!==o.attrs["STABLE-VARIANT-ID"]&&l.bitrate!==o.bitrate&&this.log("Unstable Pathways change from bitrate "+o.bitrate+" to "+l.bitrate),this.hls.nextLoadLevel=s);break}}}},r.getPathwayForGroupId=function(e,t,r){for(var n=this.getLevelsForPathway(r).concat(this.levels||[]),i=0;i<n.length;i++)if(t===D&&n[i].hasAudioGroup(e)||t===C&&n[i].hasSubtitleGroup(e))return n[i].pathwayId;return r},r.clonePathways=function(e){var t=this,r=this.levels;if(r){var n={},i={};e.forEach(function(e){var a=e.ID,s=e["BASE-ID"],o=e["URI-REPLACEMENT"];if(!r.some(function(e){return e.pathwayId===a})){var l=t.getLevelsForPathway(s).map(function(e){var t=new cr(e.attrs);t["PATHWAY-ID"]=a;var r=t.AUDIO&&t.AUDIO+"_clone_"+a,s=t.SUBTITLES&&t.SUBTITLES+"_clone_"+a;r&&(n[t.AUDIO]=r,t.AUDIO=r),s&&(i[t.SUBTITLES]=s,t.SUBTITLES=s);var l=os(e.uri,t["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",o),u=new rt({attrs:t,audioCodec:e.audioCodec,bitrate:e.bitrate,height:e.height,name:e.name,url:l,videoCodec:e.videoCodec,width:e.width});if(e.audioGroups)for(var c=1;c<e.audioGroups.length;c++)u.addGroupId("audio",e.audioGroups[c]+"_clone_"+a);if(e.subtitleGroups)for(var d=1;d<e.subtitleGroups.length;d++)u.addGroupId("text",e.subtitleGroups[d]+"_clone_"+a);return u});r.push.apply(r,l),ss(t.audioTracks,n,o,a),ss(t.subtitleTracks,i,o,a)}})}},r.loadSteeringManifest=function(e){var t,r=this,n=this.hls.config,i=n.loader;this.loader&&this.loader.destroy(),this.loader=new i(n);try{t=new self.URL(e)}catch(t){return this.enabled=!1,void this.log("Failed to parse Steering Manifest URI: "+e)}if("data:"!==t.protocol){var a=0|(this.hls.bandwidthEstimate||n.abrEwmaDefaultEstimate);t.searchParams.set("_HLS_pathway",this.pathwayId),t.searchParams.set("_HLS_throughput",""+a)}var s={responseType:"json",url:t.href},o=n.steeringManifestLoadPolicy.default,l=o.errorRetry||o.timeoutRetry||{},u={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:l.maxNumRetry||0,retryDelay:l.retryDelayMs||0,maxRetryDelay:l.maxRetryDelayMs||0},c={onSuccess:function(e,n,i,a){r.log('Loaded steering manifest: "'+t+'"');var s=e.data;if(1===(null==s?void 0:s.VERSION)){r.updated=performance.now(),r.timeToLoad=s.TTL;var o=s["RELOAD-URI"],l=s["PATHWAY-CLONES"],u=s["PATHWAY-PRIORITY"];if(o)try{r.uri=new self.URL(o,t).href}catch(e){return r.enabled=!1,void r.log("Failed to parse Steering Manifest RELOAD-URI: "+o)}r.scheduleRefresh(r.uri||i.url),l&&r.clonePathways(l);var c={steeringManifest:s,url:t.toString()};r.hls.trigger(L.STEERING_MANIFEST_LOADED,c),u&&r.updatePathwayPriority(u)}else r.log("Steering VERSION "+s.VERSION+" not supported!")},onError:function(e,t,n,i){if(r.log("Error loading steering manifest: "+e.code+" "+e.text+" ("+t.url+")"),r.stopLoad(),410===e.code)return r.enabled=!1,void r.log("Steering manifest "+t.url+" no longer available");var a=1e3*r.timeToLoad;if(429!==e.code)r.scheduleRefresh(r.uri||t.url,a);else{var s=r.loader;if("function"==typeof(null==s?void 0:s.getResponseHeader)){var o=s.getResponseHeader("Retry-After");o&&(a=1e3*parseFloat(o))}r.log("Steering manifest "+t.url+" rate limited")}},onTimeout:function(e,t,n){r.log("Timeout loading steering manifest ("+t.url+")"),r.scheduleRefresh(r.uri||t.url)}};this.log("Requesting steering manifest: "+t),this.loader.load(s,u,c)},r.scheduleRefresh=function(e,t){var r=this;void 0===t&&(t=1e3*this.timeToLoad),this.clearTimeout(),this.reloadTimer=self.setTimeout(function(){var t,n=null==(t=r.hls)?void 0:t.media;!n||n.ended?r.scheduleRefresh(e,1e3*r.timeToLoad):r.loadSteeringManifest(e)},t)},n(t,[{key:"pathwayPriority",get:function(){return this._pathwayPriority},set:function(e){this.updatePathwayPriority(e)}}])}(F);function ss(e,t,r,n){e&&Object.keys(t).forEach(function(i){var s=e.filter(function(e){return e.groupId===i}).map(function(e){var s=a({},e);return s.details=void 0,s.attrs=new cr(s.attrs),s.url=s.attrs.URI=os(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",r),s.groupId=s.attrs["GROUP-ID"]=t[i],s.attrs["PATHWAY-ID"]=n,s});e.push.apply(e,s)})}function os(e,t,r,n){var i,a=n.HOST,s=n.PARAMS,o=n[r];t&&(i=null==o?void 0:o[t])&&(e=i);var l=new self.URL(e);return a&&!i&&(l.host=a),s&&Object.keys(s).sort().forEach(function(e){e&&l.searchParams.set(e,s[e])}),l.href}function ls(e,t,r){us(e,t,r),e.addEventListener(t,r)}function us(e,t,r){e.removeEventListener(t,r)}var cs=function(e){function t(r){var n;return(n=e.call(this,"eme",r.logger)||this).hls=void 0,n.config=void 0,n.media=null,n.keyFormatPromise=null,n.keySystemAccessPromises={},n._requestLicenseFailureCount=0,n.mediaKeySessions=[],n.keyIdToKeySessionPromise={},n.mediaKeys=null,n.setMediaKeysQueue=t.CDMCleanupPromise?[t.CDMCleanupPromise]:[],n.onWaitingForKey=function(e){n.log('"'+e.type+'" event')},n.hls=r,n.config=r.config,n.registerListeners(),n}o(t,e);var r=t.prototype;return r.destroy=function(){this.onDestroying(),this.onMediaDetached();var e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onWaitingForKey=null},r.registerListeners=function(){this.hls.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(L.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(L.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(L.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(L.DESTROYING,this.onDestroying,this)},r.unregisterListeners=function(){this.hls.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(L.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(L.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(L.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(L.DESTROYING,this.onDestroying,this)},r.getLicenseServerUrl=function(e){var t=this.config,r=t.drmSystems,n=t.widevineLicenseUrl,i=r[e];return i?i.licenseUrl:e===Sr.WIDEVINE&&n?n:void 0},r.getLicenseServerUrlOrThrow=function(e){var t=this.getLicenseServerUrl(e);if(void 0===t)throw new Error('no license server URL configured for key-system "'+e+'"');return t},r.getServerCertificateUrl=function(e){var t=this.config.drmSystems[e];if(t)return t.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+e+'"]')},r.attemptKeySystemAccess=function(e){var t=this,r=this.hls.levels,n=function(e,t,r){return!!e&&r.indexOf(e)===t},i=r.map(function(e){return e.audioCodec}).filter(n),a=r.map(function(e){return e.videoCodec}).filter(n);return i.length+a.length===0&&a.push("avc1.42e01e"),new Promise(function(r,n){var s=function(e){var o=e.shift();t.getMediaKeysPromise(o,i,a).then(function(e){return r({keySystem:o,mediaKeys:e})}).catch(function(t){e.length?s(e):n(t instanceof ds?t:new ds({type:k.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))})};s(e)})},r.requestMediaKeySystemAccess=function(e,t){var r=this.config.requestMediaKeySystemAccessFunc;if("function"!=typeof r){var n="Configured requestMediaKeySystemAccess is not a function "+r;return null===Cr&&"http:"===self.location.protocol&&(n="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(n))}return r(e,t)},r.getMediaKeysPromise=function(e,t,r){var n=this,i=function(e,t,r,n){var i;switch(e){case Sr.FAIRPLAY:i=["cenc","sinf"];break;case Sr.WIDEVINE:case Sr.PLAYREADY:i=["cenc"];break;case Sr.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+e)}return function(e,t,r,n){return[{initDataTypes:e,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:t.map(function(e){return{contentType:"audio/mp4; codecs="+e,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null}}),videoCapabilities:r.map(function(e){return{contentType:"video/mp4; codecs="+e,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}})}]}(i,t,r,n)}(e,t,r,this.config.drmSystemOptions),a=this.keySystemAccessPromises[e],s=null==a?void 0:a.keySystemAccess;if(!s){this.log('Requesting encrypted media "'+e+'" key-system access with config: '+at(i)),s=this.requestMediaKeySystemAccess(e,i);var o=this.keySystemAccessPromises[e]={keySystemAccess:s};return s.catch(function(t){n.log('Failed to obtain access to key-system "'+e+'": '+t)}),s.then(function(t){n.log('Access for key-system "'+t.keySystem+'" obtained');var r=n.fetchServerCertificate(e);return n.log('Create media-keys for "'+e+'"'),o.mediaKeys=t.createMediaKeys().then(function(t){return n.log('Media-keys created for "'+e+'"'),o.hasMediaKeys=!0,r.then(function(r){return r?n.setMediaKeysServerCertificate(t,e,r):t})}),o.mediaKeys.catch(function(t){n.error('Failed to create media-keys for "'+e+'"}: '+t)}),o.mediaKeys})}return s.then(function(){return a.mediaKeys})},r.createMediaKeySessionContext=function(e){var t=e.decryptdata,r=e.keySystem,n=e.mediaKeys;this.log('Creating key-system session "'+r+'" keyId: '+q(t.keyId||[]));var i=n.createSession(),a={decryptdata:t,keySystem:r,mediaKeys:n,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(a),a},r.renewKeySession=function(e){var t=e.decryptdata;if(t.pssh){var r=this.createMediaKeySessionContext(e),n=this.getKeyIdString(t);this.keyIdToKeySessionPromise[n]=this.generateRequestWithPreferredKeySession(r,"cenc",t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)},r.getKeyIdString=function(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return q(e.keyId)},r.updateKeySession=function(e,t){var r,n=e.mediaKeysSession;return this.log('Updating key-session "'+n.sessionId+'" for keyID '+q((null==(r=e.decryptdata)?void 0:r.keyId)||[])+"\n      } (data length: "+(t?t.byteLength:t)+")"),n.update(t)},r.getSelectedKeySystemFormats=function(){var e=this;return Object.keys(this.keySystemAccessPromises).map(function(t){return{keySystem:t,hasMediaKeys:e.keySystemAccessPromises[t].hasMediaKeys}}).filter(function(e){return!!e.hasMediaKeys}).map(function(e){return Ar(e.keySystem)}).filter(function(e){return!!e})},r.getKeySystemAccess=function(e){var t=this;return this.getKeySystemSelectionPromise(e).then(function(e){var r=e.keySystem,n=e.mediaKeys;return t.attemptSetMediaKeys(r,n)})},r.selectKeySystem=function(e){var t=this;return new Promise(function(r,n){return t.getKeySystemSelectionPromise(e).then(function(e){var t=e.keySystem,i=Ar(t);i?r(i):n(new Error('Unable to find format for key-system "'+t+'"'))}).catch(n)})},r.selectKeySystemFormat=function(e){var t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+e.sn+" "+e.type+": "+e.level+") key formats "+t.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise},r.getKeyFormatPromise=function(e){var t=_r(this.config),r=e.map(Lr).filter(function(e){return!!e&&-1!==t.indexOf(e)});return this.selectKeySystem(r)},r.loadKey=function(e){var t=this,r=e.keyInfo.decryptdata,n=this.getKeyIdString(r),i="(keyId: "+n+' format: "'+r.keyFormat+'" method: '+r.method+" uri: "+r.uri+")";this.log("Starting session for key "+i);var a=this.keyIdToKeySessionPromise[n];return a||(a=this.getKeySystemForKeyPromise(r).then(function(n){var a=n.keySystem,s=n.mediaKeys;return t.throwIfDestroyed(),t.log("Handle encrypted media sn: "+e.frag.sn+" "+e.frag.type+": "+e.frag.level+" using key "+i),t.attemptSetMediaKeys(a,s).then(function(){return t.throwIfDestroyed(),t.createMediaKeySessionContext({keySystem:a,mediaKeys:s,decryptdata:r})})}),(this.keyIdToKeySessionPromise[n]=a.then(function(e){var n=r.pssh?r.pssh.buffer:null;return t.generateRequestWithPreferredKeySession(e,"cenc",n,"playlist-key")})).catch(function(e){return t.handleError(e)})),a},r.throwIfDestroyed=function(e){if(!this.hls)throw new Error("invalid state")},r.handleError=function(e){this.hls&&(this.error(e.message),e instanceof ds?this.hls.trigger(L.ERROR,e.data):this.hls.trigger(L.ERROR,{type:k.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))},r.getKeySystemForKeyPromise=function(e){var t=this.getKeyIdString(e),r=this.keyIdToKeySessionPromise[t];if(!r){var n=Lr(e.keyFormat),i=n?[n]:_r(this.config);return this.attemptKeySystemAccess(i)}return r},r.getKeySystemSelectionPromise=function(e){if(e.length||(e=_r(this.config)),0===e.length)throw new ds({type:k.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+at({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(e)},r.attemptSetMediaKeys=function(e,t){var r=this;if(this.mediaKeys===t)return Promise.resolve();var n=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+e+'"');var i=Promise.all(n).then(function(){if(!r.media)throw r.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return r.media.setMediaKeys(t)});return this.mediaKeys=t,this.setMediaKeysQueue.push(i),i.then(function(){r.log('Media-keys set for "'+e+'"'),n.push(i),r.setMediaKeysQueue=r.setMediaKeysQueue.filter(function(e){return-1===n.indexOf(e)})})},r.generateRequestWithPreferredKeySession=function(e,t,r,n){var i,a,s=this,o=null==(i=this.config.drmSystems)||null==(a=i[e.keySystem])?void 0:a.generateRequest;if(o)try{var l=o.call(this.hls,t,r,e);if(!l)throw new Error("Invalid response from configured generateRequest filter");t=l.initDataType,r=l.initData?l.initData:null,e.decryptdata.pssh=r?new Uint8Array(r):null}catch(e){var u;if(this.warn(e.message),null!=(u=this.hls)&&u.config.debug)throw e}if(null===r)return this.log('Skipping key-session request for "'+n+'" (no initData)'),Promise.resolve(e);var c=this.getKeyIdString(e.decryptdata);this.log('Generating key-session request for "'+n+'": '+c+" (init data type: "+t+" length: "+(r?r.byteLength:null)+")");var d=new y,f=e._onmessage=function(t){var r=e.mediaKeysSession;if(r){var n=t.messageType,i=t.message;s.log('"'+n+'" message event for session "'+r.sessionId+'" message size: '+i.byteLength),"license-request"===n||"license-renewal"===n?s.renewLicense(e,i).catch(function(e){d.eventNames().length?d.emit("error",e):s.handleError(e)}):"license-release"===n?e.keySystem===Sr.FAIRPLAY&&(s.updateKeySession(e,yr("acknowledged")),s.removeSession(e)):s.warn('unhandled media key message type "'+n+'"')}else d.emit("error",new Error("invalid state"))},h=e._onkeystatuseschange=function(t){if(e.mediaKeysSession){s.onKeyStatusChange(e);var r=e.keyStatus;d.emit("keyStatus",r),"expired"===r&&(s.warn(e.keySystem+" expired for key "+c),s.renewKeySession(e))}else d.emit("error",new Error("invalid state"))};ls(e.mediaKeysSession,"message",f),ls(e.mediaKeysSession,"keystatuseschange",h);var p=new Promise(function(e,t){d.on("error",t),d.on("keyStatus",function(r){r.startsWith("usable")?e():"output-restricted"===r?t(new ds({type:k.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===r?t(new ds({type:k.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+r+'"')):"expired"===r?t(new Error("key expired while generating request")):s.warn('unhandled key status change "'+r+'"')})});return e.mediaKeysSession.generateRequest(t,r).then(function(){var t;s.log('Request generated for key-session "'+(null==(t=e.mediaKeysSession)?void 0:t.sessionId)+'" keyId: '+c)}).catch(function(e){throw new ds({type:k.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},"Error generating key-session request: "+e)}).then(function(){return p}).catch(function(t){throw d.removeAllListeners(),s.removeSession(e),t}).then(function(){return d.removeAllListeners(),e})},r.onKeyStatusChange=function(e){var t=this;e.mediaKeysSession.keyStatuses.forEach(function(r,n){if("string"==typeof n&&"object"==typeof r){var i=n;n=r,r=i}t.log('key status change "'+r+'" for keyStatuses keyId: '+q("buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n))+" session keyId: "+q(new Uint8Array(e.decryptdata.keyId||[]))+" uri: "+e.decryptdata.uri),e.keyStatus=r})},r.fetchServerCertificate=function(e){var t=this.config,r=new(0,t.loader)(t),n=this.getServerCertificateUrl(e);return n?(this.log('Fetching server certificate for "'+e+'"'),new Promise(function(i,a){var s={responseType:"arraybuffer",url:n},o=t.certLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},u={onSuccess:function(e,t,r,n){i(e.data)},onError:function(t,r,i,o){a(new ds({type:k.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:c({url:s.url,data:void 0},t)},'"'+e+'" certificate request failed ('+n+"). Status: "+t.code+" ("+t.text+")"))},onTimeout:function(t,r,i){a(new ds({type:k.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:{url:s.url,data:void 0}},'"'+e+'" certificate request timed out ('+n+")"))},onAbort:function(e,t,r){a(new Error("aborted"))}};r.load(s,l,u)})):Promise.resolve()},r.setMediaKeysServerCertificate=function(e,t,r){var n=this;return new Promise(function(i,a){e.setServerCertificate(r).then(function(a){n.log("setServerCertificate "+(a?"success":"not supported by CDM")+" ("+(null==r?void 0:r.byteLength)+') on "'+t+'"'),i(e)}).catch(function(e){a(new ds({type:k.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))})})},r.renewLicense=function(e,t){var r=this;return this.requestLicense(e,new Uint8Array(t)).then(function(t){return r.updateKeySession(e,new Uint8Array(t)).catch(function(e){throw new ds({type:k.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)})})},r.unpackPlayReadyKeyMessage=function(e,t){var r=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!r.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;var n=(new DOMParser).parseFromString(r,"application/xml"),i=n.querySelectorAll("HttpHeader");if(i.length>0)for(var a,s=0,o=i.length;s<o;s++){var l,u,c=null==(l=(a=i[s]).querySelector("name"))?void 0:l.textContent,d=null==(u=a.querySelector("value"))?void 0:u.textContent;c&&d&&e.setRequestHeader(c,d)}var f=n.querySelector("Challenge"),h=null==f?void 0:f.textContent;if(!h)throw new Error("Cannot find <Challenge> in key message");return yr(atob(h))},r.setupLicenseXHR=function(e,t,r,n){var i=this,a=this.config.licenseXhrSetup;return a?Promise.resolve().then(function(){if(!r.decryptdata)throw new Error("Key removed");return a.call(i.hls,e,t,r,n)}).catch(function(s){if(!r.decryptdata)throw s;return e.open("POST",t,!0),a.call(i.hls,e,t,r,n)}).then(function(r){return e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:r||n}}):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:n}))},r.requestLicense=function(e,t){var r=this,n=this.config.keyLoadPolicy.default;return new Promise(function(i,a){var s=r.getLicenseServerUrlOrThrow(e.keySystem);r.log("Sending license request to URL: "+s);var o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=function(){if(!r.hls||!e.mediaKeysSession)return a(new Error("invalid state"));if(4===o.readyState)if(200===o.status){r._requestLicenseFailureCount=0;var l=o.response;r.log("License received "+(l instanceof ArrayBuffer?l.byteLength:l));var u=r.config.licenseResponseCallback;if(u)try{l=u.call(r.hls,o,s,e)}catch(e){r.error(e)}i(l)}else{var c=n.errorRetry,d=c?c.maxNumRetry:0;if(r._requestLicenseFailureCount++,r._requestLicenseFailureCount>d||o.status>=400&&o.status<500)a(new ds({type:k.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o,response:{url:s,data:void 0,code:o.status,text:o.statusText}},"License Request XHR failed ("+s+"). Status: "+o.status+" ("+o.statusText+")"));else{var f=d-r._requestLicenseFailureCount+1;r.warn("Retrying license request, "+f+" attempts left"),r.requestLicense(e,t).then(i,a)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,r.setupLicenseXHR(o,s,e,t).then(function(t){var n=t.xhr,i=t.licenseChallenge;e.keySystem==Sr.PLAYREADY&&(i=r.unpackPlayReadyKeyMessage(n,i)),n.send(i)})})},r.onDestroying=function(){this.unregisterListeners(),this._clear()},r.onMediaAttached=function(e,t){if(this.config.emeEnabled){var r=t.media;this.media=r,ls(r,"waitingforkey",this.onWaitingForKey)}},r.onMediaDetached=function(){var e=this.media;e&&(us(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)},r._clear=function(){var e,r=this;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.mediaKeys||this.mediaKeySessions.length){var n=this.media,i=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,Pr.clearKeyUriToKeyIdMap();var a=i.length;t.CDMCleanupPromise=Promise.all(i.map(function(e){return r.removeSession(e)}).concat(null==n||null==(e=n.setMediaKeys(null))?void 0:e.catch(function(e){var t;r.log("Could not clear media keys: "+e),null==(t=r.hls)||t.trigger(L.ERROR,{type:k.OTHER_ERROR,details:R.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error("Could not clear media keys: "+e)})}))).catch(function(e){var t;r.log("Could not close sessions and clear media keys: "+e),null==(t=r.hls)||t.trigger(L.ERROR,{type:k.OTHER_ERROR,details:R.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error("Could not close sessions and clear media keys: "+e)})}).then(function(){a&&r.log("finished closing key sessions and clearing media keys")})}},r.onManifestLoading=function(){this.keyFormatPromise=null},r.onManifestLoaded=function(e,t){var r=t.sessionKeys;if(r&&this.config.emeEnabled&&!this.keyFormatPromise){var n=r.reduce(function(e,t){return-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e},[]);this.log("Selecting key-system from session-keys "+n.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(n)}},r.removeSession=function(e){var t,r,n=this,i=e.mediaKeysSession,a=e.licenseXhr;if(i){this.log("Remove licenses and keys and close session "+i.sessionId),e._onmessage&&(i.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(i.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),a&&a.readyState!==XMLHttpRequest.DONE&&a.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;var s=this.mediaKeySessions.indexOf(e);return s>-1&&this.mediaKeySessions.splice(s,1),(t=this.config.drmSystemOptions,"persistent-license"===t.sessionType||null!=(r=t.sessionTypes)&&r.some(function(e){return"persistent-license"===e})?new Promise(function(e,t){self.setTimeout(function(){return t(new Error("MediaKeySession.remove() timeout"))},8e3),i.remove().then(e)}):Promise.resolve()).catch(function(e){var t;n.log("Could not remove session: "+e),null==(t=n.hls)||t.trigger(L.ERROR,{type:k.OTHER_ERROR,details:R.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error("Could not remove session: "+e)})}).then(function(){return i.close()}).catch(function(e){var t;n.log("Could not close session: "+e),null==(t=n.hls)||t.trigger(L.ERROR,{type:k.OTHER_ERROR,details:R.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error("Could not close session: "+e)})})}},t}(F);cs.CDMCleanupPromise=void 0;var ds=function(e){function t(t,r){var n;return(n=e.call(this,r)||this).data=void 0,t.error||(t.error=new Error(r)),n.data=t,t.err=t.error,n}return o(t,e),t}(h(Error)),fs=function(){function e(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}var t=e.prototype;return t.setStreamController=function(e){this.streamController=e},t.registerListeners=function(){this.hls.on(L.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(L.MEDIA_DETACHING,this.onMediaDetaching,this)},t.unregisterListeners=function(){this.hls.off(L.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(L.MEDIA_DETACHING,this.onMediaDetaching,this)},t.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},t.onMediaAttaching=function(e,t){var r=this.hls.config;if(r.capLevelOnFPSDrop){var n=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=n,n&&"function"==typeof n.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}},t.onMediaDetaching=function(){this.media=null},t.checkFPS=function(e,t,r){var n=performance.now();if(t){if(this.lastTime){var i=n-this.lastTime,a=r-this.lastDroppedFrames,s=t-this.lastDecodedFrames,o=1e3*a/i,l=this.hls;if(l.trigger(L.FPS_DROP,{currentDropped:a,currentDecoded:s,totalDroppedFrames:r}),o>0&&a>l.config.fpsDroppedMonitoringThreshold*s){var u=l.currentLevel;l.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=u)&&(u-=1,l.trigger(L.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:l.currentLevel}),l.autoLevelCapping=u,this.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=t}},t.checkFPSInterval=function(){var e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},e}();function hs(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()}var ps=.025,ms=function(e){return e[e.Point=0]="Point",e[e.Range=1]="Range",e}({});function gs(e,t,r){return e.identifier+"-"+(r+1)+"-"+hs(t)}var vs=function(){function e(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}var t=e.prototype;return t.setDateRange=function(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)},t.reset=function(){var e;this.appendInPlaceStarted=!1,null==(e=this.assetListLoader)||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)},t.isAssetPastPlayoutLimit=function(e){var t;if(e>0&&e>=this.assetList.length)return!0;var r=this.playoutLimit;return!(e<=0||isNaN(r))&&(0===r||((null==(t=this.assetList[e])?void 0:t.startOffset)||0)>r)},t.findAssetIndex=function(e){return this.assetList.indexOf(e)},t.toString=function(){return'["'+(e=this).identifier+'" '+(e.cue.pre?"<pre>":e.cue.post?"<post>":"")+e.timelineStart.toFixed(2)+"-"+e.resumeTime.toFixed(2)+"]";var e},n(e,[{key:"identifier",get:function(){return this.dateRange.id}},{key:"startDate",get:function(){return this.dateRange.startDate}},{key:"startTime",get:function(){var e=this.dateRange.startTime;if(this.snapOptions.out){var t=this.dateRange.tagAnchor;if(t)return ys(e,t)}return e}},{key:"startOffset",get:function(){return this.cue.pre?0:this.startTime}},{key:"startIsAligned",get:function(){if(0===this.startTime||this.snapOptions.out)return!0;var e=this.dateRange.tagAnchor;if(e){var t=this.dateRange.startTime;return t-ys(t,e)<.1}return!1}},{key:"resumptionOffset",get:function(){var e=this.resumeOffset,t=S(e)?e:this.duration;return this.cumulativeDuration+t}},{key:"resumeTime",get:function(){var e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){var t=this.resumeAnchor;if(t)return ys(e,t)}return e}},{key:"appendInPlace",get:function(){return!!this.appendInPlaceStarted||!this.appendInPlaceDisabled&&!(this.cue.once||this.cue.pre||!this.startIsAligned||!(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<ps))},set:function(e){this.appendInPlaceStarted?this.resetOnResume=!e:this.appendInPlaceDisabled=!e}},{key:"timelineStart",get:function(){return null!==this._timelineStart?this._timelineStart:this.startTime},set:function(e){this._timelineStart=e}},{key:"duration",get:function(){var e,t=this.playoutLimit;return e=null!==this._duration?this._duration:this.dateRange.duration?this.dateRange.duration:this.dateRange.plannedDuration||0,!isNaN(t)&&t<e&&(e=t),e},set:function(e){this._duration=e}},{key:"cue",get:function(){return this.dateRange.cue}},{key:"timelineOccupancy",get:function(){return"RANGE"===this.dateRange.attr["X-TIMELINE-OCCUPIES"]?ms.Range:ms.Point}},{key:"supplementsPrimary",get:function(){return"PRIMARY"===this.dateRange.attr["X-TIMELINE-STYLE"]}},{key:"contentMayVary",get:function(){return"NO"!==this.dateRange.attr["X-CONTENT-MAY-VARY"]}},{key:"assetUrl",get:function(){return this.dateRange.attr["X-ASSET-URI"]}},{key:"assetListUrl",get:function(){return this.dateRange.attr["X-ASSET-LIST"]}},{key:"baseUrl",get:function(){return this.base.url}},{key:"assetListLoaded",get:function(){return this.assetList.length>0||null!==this.assetListResponse}}])}();function ys(e,t){return e-t.start<t.duration/2&&!(Math.abs(e-(t.start+t.duration))<ps)?t.start:t.start+t.duration}function Es(e,t,r){var n=new self.URL(e,r);return"data:"!==n.protocol&&n.searchParams.set("_HLS_primary_id",t),n}function bs(e,t){for(;null!=(r=e.assetList[++t])&&r.error;)var r;return t}function Ss(e){var t=e.timelineStart,r=e.duration||0;return'["'+e.identifier+'" '+t.toFixed(2)+"-"+(t+r).toFixed(2)+"]"}var Ts=function(){function e(e,t,r,n){var i=this;this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=function(){i.reachedPlayout(i.currentTime)&&i.hls.trigger(L.PLAYOUT_LIMIT_REACHED,{})};var a=this.hls=new e(t);this.interstitial=r,this.assetItem=n;var s=n.uri;try{s=Es(s,t.primarySessionId).href}catch(e){}a.loadSource(s);var o=function(){i.hasDetails=!0};a.once(L.LEVEL_LOADED,o),a.once(L.AUDIO_TRACK_LOADED,o),a.once(L.SUBTITLE_TRACK_LOADED,o),a.on(L.MEDIA_ATTACHING,function(e,t){var r=t.media;i.removeMediaListeners(),i.mediaAttached=r,i.interstitial.playoutLimit&&(r.addEventListener("timeupdate",i.checkPlayout),i.appendInPlace&&a.on(L.BUFFER_APPENDED,function(){var e=i.bufferedEnd;i.reachedPlayout(e)&&(i._bufferedEosTime=e,a.trigger(L.BUFFERED_TO_END,void 0))}))})}var t=e.prototype;return t.bufferedInPlaceToEnd=function(e){var t;if(!this.appendInPlace)return!1;if(null!=(t=this.hls)&&t.bufferedToEnd)return!0;if(!e||!this._bufferedEosTime)return!1;var r=this.timelineOffset,n=rr.bufferInfo(e,r,0);return this.getAssetTime(n.end)>=this._bufferedEosTime-.02},t.reachedPlayout=function(e){var t=this.interstitial.playoutLimit;return this.startOffset+e>=t},t.getAssetTime=function(e){var t=this.timelineOffset,r=this.duration;return Math.min(Math.max(0,e-t),r)},t.removeMediaListeners=function(){var e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))},t.bufferSnapShot=function(){var e;this.mediaAttached&&null!=(e=this.hls)&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)},t.destroy=function(){this.removeMediaListeners(),this.hls.destroy(),this.hls=this.interstitial=null,this.tracks=this.mediaAttached=this.checkPlayout=null},t.attachMedia=function(e){this.hls.attachMedia(e)},t.detachMedia=function(){this.removeMediaListeners(),this.mediaAttached=null,this.hls.detachMedia()},t.resumeBuffering=function(){this.hls.resumeBuffering()},t.pauseBuffering=function(){this.hls.pauseBuffering()},t.transferMedia=function(){return this.bufferSnapShot(),this.hls.transferMedia()},t.resetDetails=function(){var e=this.hls;if(this.hasDetails){e.stopLoad();var t=function(e){return delete e.details};e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}},t.on=function(e,t,r){this.hls.on(e,t)},t.once=function(e,t,r){this.hls.once(e,t)},t.off=function(e,t,r){this.hls.off(e,t)},t.toString=function(){var e;return"HlsAssetPlayer: "+Ss(this.assetItem)+" "+(null==(e=this.hls)?void 0:e.sessionId)+" "+(this.appendInPlace?"append-in-place":"")},n(e,[{key:"appendInPlace",get:function(){var e;return(null==(e=this.interstitial)?void 0:e.appendInPlace)||!1}},{key:"destroyed",get:function(){var e;return!(null!=(e=this.hls)&&e.userConfig)}},{key:"assetId",get:function(){return this.assetItem.identifier}},{key:"interstitialId",get:function(){return this.assetItem.parentIdentifier}},{key:"media",get:function(){var e;return(null==(e=this.hls)?void 0:e.media)||null}},{key:"bufferedEnd",get:function(){var e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;var t=rr.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}},{key:"currentTime",get:function(){var e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}},{key:"duration",get:function(){return this.assetItem.duration||0}},{key:"remaining",get:function(){var e=this.duration;return e?Math.max(0,e-this.currentTime):0}},{key:"startOffset",get:function(){return this.assetItem.startOffset}},{key:"timelineOffset",get:function(){var e;return(null==(e=this.hls)?void 0:e.config.timelineOffset)||0},set:function(e){var t=this.timelineOffset;if(e!==t){var r=e-t;if(Math.abs(r)>1/9e4){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}}])}(),ws=function(e){function t(t,r){var n;return(n=e.call(this,"interstitials-sched",r)||this).onScheduleUpdate=void 0,n.eventMap={},n.events=null,n.items=null,n.durations={primary:0,playout:0,integrated:0},n.onScheduleUpdate=t,n}o(t,e);var r=t.prototype;return r.destroy=function(){this.reset(),this.onScheduleUpdate=null},r.reset=function(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(function(e){return e.reset()}),this.events=this.items=null},r.resetErrorsInRange=function(e,t){return this.events?this.events.reduce(function(r,n){return e<=n.startOffset&&t>n.startOffset?(delete n.error,r+1):r},0):0},r.getEvent=function(e){return e&&this.eventMap[e]||null},r.hasEvent=function(e){return e in this.eventMap},r.findItemIndex=function(e,t){if(e.event)return this.findEventIndex(e.event.identifier);var r=-1;e.nextEvent?r=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(r=this.findEventIndex(e.previousEvent.identifier)+1);var n=this.items;if(n)for(n[r]||(void 0===t&&(t=e.start),r=this.findItemIndexAtTime(t));r>=0&&null!=(i=n[r])&&i.event;){var i;r--}return r},r.findItemIndexAtTime=function(e,t){var r=this.items;if(r)for(var n=0;n<r.length;n++){var i=r[n];if(t&&"primary"!==t&&(i=i[t]),e===i.start||e>i.start&&e<i.end)return n}return-1},r.findJumpRestrictedIndex=function(e,t){var r=this.items;if(r)for(var n=e;n<=t&&r[n];n++){var i=r[n].event;if(null!=i&&i.restrictions.jump&&!i.appendInPlace)return n}return-1},r.findEventIndex=function(e){var t=this.items;if(t)for(var r=t.length;r--;){var n;if((null==(n=t[r].event)?void 0:n.identifier)===e)return r}return-1},r.findAssetIndex=function(e,t){var r=e.assetList,n=r.length;if(n>1)for(var i=0;i<n;i++){var a=r[i];if(!a.error){var s=a.timelineStart;if(t===s||t>s&&t<s+(a.duration||0))return i}}return 0},r.parseInterstitialDateRanges=function(e,t){var r=this,n=e.main.details,i=n.dateRanges,a=this.events,s=this.parseDateRanges(i,{url:n.url},t),o=Object.keys(i),l=a?a.filter(function(e){return!o.includes(e.identifier)}):[];s.length&&s.sort(function(e,t){var r=e.cue.pre,n=e.cue.post,i=t.cue.pre,a=t.cue.post;if(r&&!i)return-1;if(i&&!r)return 1;if(n&&!a)return 1;if(a&&!n)return-1;if(!(r||i||n||a)){var s=e.startTime,o=t.startTime;if(s!==o)return s-o}return e.dateRange.tagOrder-t.dateRange.tagOrder}),this.events=s,l.forEach(function(e){r.removeEvent(e)}),this.updateSchedule(e,l)},r.updateSchedule=function(e,t){void 0===t&&(t=[]);var r=this.events||[];if(r.length||t.length||this.length<2){var n=this.items,i=this.parseSchedule(r,e);(t.length||(null==n?void 0:n.length)!==i.length||i.some(function(e,t){return Math.abs(e.playout.start-n[t].playout.start)>.005||Math.abs(e.playout.end-n[t].playout.end)>.005}))&&(this.items=i,this.onScheduleUpdate(t,n))}},r.parseDateRanges=function(e,t,r){for(var n=[],i=Object.keys(e),a=0;a<i.length;a++){var s=i[a],o=e[s];if(o.isInterstitial){var l=this.eventMap[s];l?l.setDateRange(o):(l=new vs(o,t),this.eventMap[s]=l,!1===r&&(l.appendInPlace=r)),n.push(l)}}return n},r.parseSchedule=function(e,t){var r=[],n=t.main.details,i=n.live?1/0:n.edge,a=0;if((e=e.filter(function(e){return!(e.error||e.cue.once&&e.hasPlayed)})).length){this.resolveOffsets(e,t);var s=0,o=0;if(e.forEach(function(t,n){var l=t.cue.pre,u=t.cue.post,c=e[n-1]||null,d=t.appendInPlace,f=u?i:t.startOffset,h=t.duration,p=t.timelineOccupancy===ms.Range?h:0,m=t.resumptionOffset,g=(null==c?void 0:c.startTime)===f,v=f+t.cumulativeDuration,y=d?v+h:f+m;if(l||!u&&f<=0){var E=o;o+=p,t.timelineStart=v;var b=a;a+=h,r.push({event:t,start:v,end:y,playout:{start:b,end:a},integrated:{start:E,end:o}})}else{if(!(f<=i))return;if(!g){var S=f-s;if(S>.033){var T=s,w=o;o+=S;var k=a;a+=S;var R={previousEvent:e[n-1]||null,nextEvent:t,start:T,end:T+S,playout:{start:k,end:a},integrated:{start:w,end:o}};r.push(R)}else S>0&&c&&(c.cumulativeDuration+=S,r[r.length-1].end=f)}u&&(y=v),t.timelineStart=v;var L=o;o+=p;var A=a;a+=h,r.push({event:t,start:v,end:y,playout:{start:A,end:a},integrated:{start:L,end:o}})}var _=t.resumeTime;s=u||_>i?i:_}),s<i){var l,u=s,c=o,d=i-s;o+=d;var f=a;a+=d,r.push({previousEvent:(null==(l=r[r.length-1])?void 0:l.event)||null,nextEvent:null,start:s,end:u+d,playout:{start:f,end:a},integrated:{start:c,end:o}})}this.setDurations(i,a,o)}else{r.push({previousEvent:null,nextEvent:null,start:0,end:i,playout:{start:0,end:i},integrated:{start:0,end:i}}),this.setDurations(i,i,i)}return r},r.setDurations=function(e,t,r){this.durations={primary:e,playout:t,integrated:r}},r.resolveOffsets=function(e,t){var r=this,n=t.main.details,i=n.live?1/0:n.edge,a=0,s=-1;e.forEach(function(o,l){var u=o.cue.pre,c=o.cue.post,d=u?0:c?i:o.startTime;r.updateAssetDurations(o),s===d?o.cumulativeDuration=a:(a=0,s=d),!c&&o.snapOptions.in&&(o.resumeAnchor=gt(null,n.fragments,o.startOffset+o.resumptionOffset,0,0)||void 0),o.appendInPlace&&!o.appendInPlaceStarted&&(r.primaryCanResumeInPlaceAt(o,t)||(o.appendInPlace=!1)),!o.appendInPlace&&l+1<e.length&&e[l+1].startTime-e[l].resumeTime<.033&&(e[l+1].appendInPlace=!1,e[l+1].appendInPlace&&r.warn("Could not change append strategy for abutting event "+o));var f=S(o.resumeOffset)?o.resumeOffset:o.duration;a+=f})},r.primaryCanResumeInPlaceAt=function(e,t){var r=this,n=e.resumeTime,i=e.startTime+e.resumptionOffset;return Math.abs(n-i)>ps?(this.log('"'+e.identifier+'" resumption '+n+" not aligned with estimated timeline end "+i),!1):t?!Object.keys(t).some(function(i){var a=t[i].details,s=a.edge;if(n>=s)return r.log('"'+e.identifier+'" resumption '+n+" past "+i+" playlist end "+s),!1;var o=gt(null,a.fragments,n);if(!o)return r.log('"'+e.identifier+'" resumption '+n+" does not align with any fragments in "+i+" playlist ("+a.fragStart+"-"+a.fragmentEnd+")"),!0;var l="audio"===i?.175:0;return!(Math.abs(o.start-n)<ps+l||Math.abs(o.end-n)<ps+l||(r.log('"'+e.identifier+'" resumption '+n+" not aligned with "+i+" fragment bounds ("+o.start+"-"+o.end+" sn: "+o.sn+" cc: "+o.cc+")"),0))}):(this.log('"'+e.identifier+'" resumption '+n+" can not be aligned with media (none selected)"),!1)},r.updateAssetDurations=function(e){if(e.assetListLoaded){var t=e.timelineStart,r=0,n=!1,i=!1;e.assetList.forEach(function(e,a){var s=t+r;e.startOffset=r,e.timelineStart=s,n||(n=null===e.duration),i||(i=!!e.error);var o=e.error?0:e.duration||0;r+=o}),e.duration=n&&!i?Math.max(r,e.duration):r}},r.removeEvent=function(e){e.reset(),delete this.eventMap[e.identifier]},n(t,[{key:"duration",get:function(){var e=this.items;return e?e[e.length-1].end:0}},{key:"length",get:function(){return this.items?this.items.length:0}},{key:"assetIdAtEnd",get:function(){var e,t,r=null==(e=this.items)||null==(t=e[this.length-1])?void 0:t.event;if(r){var n=r.assetList,i=n[n.length-1];if(i)return i.identifier}return null}}])}(F);function ks(e){return"["+(e.event?'"'+e.event.identifier+'"':"primary")+": "+e.start.toFixed(2)+"-"+e.end.toFixed(2)+"]"}var Rs=function(){function e(e){this.hls=void 0,this.hls=e}var t=e.prototype;return t.destroy=function(){this.hls=null},t.loadAssetList=function(e,t){var r,n=this,i=e.assetListUrl;try{r=Es(i,this.hls.sessionId,e.baseUrl)}catch(t){var a=this.assignAssetListError(e,R.ASSET_LIST_LOAD_ERROR,t,i);return void this.hls.trigger(L.ERROR,a)}t&&"data:"!==r.protocol&&r.searchParams.set("_HLS_start_offset",""+t);var s=this.hls.config,o=new(0,s.loader)(s),l={responseType:"json",url:r.href},u=s.interstitialAssetListLoadPolicy.default,c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:function(t,r,i,a){var s=t.data,o=null==s?void 0:s.ASSETS;if(Array.isArray(o))e.assetListResponse=s,n.hls.trigger(L.ASSET_LIST_LOADED,{event:e,assetListResponse:s,networkDetails:a});else{var l=n.assignAssetListError(e,R.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),i.url,r,a);n.hls.trigger(L.ERROR,l)}},onError:function(t,r,i,a){var s=n.assignAssetListError(e,R.ASSET_LIST_LOAD_ERROR,new Error("Error loading X-ASSET-LIST: HTTP status "+t.code+" "+t.text+" ("+r.url+")"),r.url,a,i);n.hls.trigger(L.ERROR,s)},onTimeout:function(t,r,i){var a=n.assignAssetListError(e,R.ASSET_LIST_LOAD_TIMEOUT,new Error("Timeout loading X-ASSET-LIST ("+r.url+")"),r.url,t,i);n.hls.trigger(L.ERROR,a)}};return o.load(l,c,d),this.hls.trigger(L.ASSET_LIST_LOADING,{event:e}),o},t.assignAssetListError=function(e,t,r,n,i,a){return e.error=r,{type:k.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:n,error:r,networkDetails:a,stats:i}},e}();function Ls(e){null==e||e.play().catch(function(){})}var As=function(e){function t(t,r){var n;return(n=e.call(this,"interstitials",t.logger)||this).HlsPlayerClass=void 0,n.hls=void 0,n.assetListLoader=void 0,n.mediaSelection=null,n.altSelection=null,n.media=null,n.detachedData=null,n.requiredTracks=null,n.manager=null,n.playerQueue=[],n.bufferedPos=-1,n.timelinePos=-1,n.schedule=void 0,n.playingItem=null,n.bufferingItem=null,n.waitingItem=null,n.endedItem=null,n.playingAsset=null,n.endedAsset=null,n.bufferingAsset=null,n.shouldPlay=!1,n.onPlay=function(){n.shouldPlay=!0},n.onPause=function(){n.shouldPlay=!1},n.onSeeking=function(){var e=n.currentTime;if(void 0!==e&&!n.playbackDisabled){var t=e-n.timelinePos;if(!(Math.abs(t)<1/7056e5)){var r=t<=-.01;n.timelinePos=e,n.bufferedPos=e;var i=n.playingItem;if(i)if(r&&n.schedule.resetErrorsInRange(e,e-t)&&n.updateSchedule(),n.checkBuffer(),r&&e<i.start||e>=i.end){var a,s=n.schedule.findItemIndexAtTime(n.timelinePos);if(!n.isInterstitial(i)&&null!=(a=n.media)&&a.paused&&(n.shouldPlay=!1),!r){var o=n.findItemIndex(i);if(s>o){var l=n.schedule.findJumpRestrictedIndex(o+1,s);if(l>o)return void n.setSchedulePosition(l)}}n.setSchedulePosition(s)}else{var u=n.playingAsset;if(u){var c=u.timelineStart,d=u.duration||0;(r&&e<c||e>=c+d)&&n.setScheduleToAssetAtTime(e,u)}else if(n.playingLastItem&&n.isInterstitial(i)){var f=i.event.assetList[0];f&&(n.endedItem=n.playingItem,n.playingItem=null,n.setScheduleToAssetAtTime(e,f))}}else n.checkBuffer()}}},n.onTimeupdate=function(){var e=n.currentTime;if(void 0!==e&&!n.playbackDisabled&&e>n.timelinePos){n.timelinePos=e,e>n.bufferedPos&&n.checkBuffer();var t=n.playingItem;if(t&&!n.playingLastItem){if(e>=t.end){n.timelinePos=t.end;var r=n.findItemIndex(t);n.setSchedulePosition(r+1)}var i=n.playingAsset;i&&e>=i.timelineStart+(i.duration||0)&&n.setScheduleToAssetAtTime(e,i)}}},n.onScheduleUpdate=function(e,t){var r=n.schedule,i=n.playingItem,a=r.events||[],s=r.items||[],o=r.durations,l=e.map(function(e){return e.identifier}),u=!(!a.length&&!l.length);(u||t)&&n.log("INTERSTITIALS_UPDATED ("+a.length+"): "+a+"\nSchedule: "+s.map(function(e){return ks(e)})+" pos: "+n.timelinePos),l.length&&n.log("Removed events "+l),n.playerQueue.forEach(function(e){if(e.interstitial.appendInPlace){var t=e.assetItem.timelineStart,r=e.timelineOffset-t;if(r)try{e.timelineOffset=t}catch(i){Math.abs(r)>ps&&n.warn(i+' ("'+e.assetId+'" '+e.timelineOffset+"->"+t+")")}}});var c=null;if(i){var d=n.updateItem(i,n.timelinePos);n.itemsMatch(i,d)&&(n.playingItem=d,n.waitingItem=n.endedItem=null,c=function(){return n.trimInPlace(d,i)})}else n.waitingItem=n.updateItem(n.waitingItem),n.endedItem=n.updateItem(n.endedItem);var f=n.bufferingItem;if(f){var h=n.updateItem(f,n.bufferedPos);n.itemsMatch(f,h)?(n.bufferingItem=h,c||(c=function(){return n.trimInPlace(h,f)})):f.event&&(n.bufferingItem=n.playingItem,n.clearInterstitial(f.event,null))}if(e.forEach(function(e){e.assetList.forEach(function(e){n.clearAssetPlayer(e.identifier,null)})}),u||t){if(n.hls.trigger(L.INTERSTITIALS_UPDATED,{events:a.slice(0),schedule:s.slice(0),durations:o,removedIds:l}),n.isInterstitial(i)&&l.includes(i.event.identifier))return n.warn('Interstitial "'+i.event.identifier+'" removed while playing'),void n.primaryFallback(i.event);c&&c(),n.checkBuffer()}},n.hls=t,n.HlsPlayerClass=r,n.assetListLoader=new Rs(t),n.schedule=new ws(n.onScheduleUpdate,t.logger),n.registerListeners(),n}o(t,e);var r=t.prototype;return r.registerListeners=function(){var e=this.hls;e.on(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(L.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(L.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(L.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(L.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(L.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(L.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(L.BUFFER_APPENDED,this.onBufferAppended,this),e.on(L.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(L.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(L.MEDIA_ENDED,this.onMediaEnded,this),e.on(L.ERROR,this.onError,this),e.on(L.DESTROYING,this.onDestroying,this)},r.unregisterListeners=function(){var e=this.hls;e&&(e.off(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(L.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(L.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(L.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(L.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(L.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(L.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(L.BUFFER_CODECS,this.onBufferCodecs,this),e.off(L.BUFFER_APPENDED,this.onBufferAppended,this),e.off(L.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(L.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(L.MEDIA_ENDED,this.onMediaEnded,this),e.off(L.ERROR,this.onError,this),e.off(L.DESTROYING,this.onDestroying,this))},r.startLoad=function(){this.resumeBuffering()},r.stopLoad=function(){this.pauseBuffering()},r.resumeBuffering=function(){var e;null==(e=this.getBufferingPlayer())||e.resumeBuffering()},r.pauseBuffering=function(){var e;null==(e=this.getBufferingPlayer())||e.pauseBuffering()},r.destroy=function(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.manager=null,this.hls=this.HlsPlayerClass=this.schedule=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null},r.onDestroying=function(){var e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)},r.removeMediaListeners=function(e){us(e,"play",this.onPlay),us(e,"pause",this.onPause),us(e,"seeking",this.onSeeking),us(e,"timeupdate",this.onTimeupdate)},r.onMediaAttaching=function(e,t){var r=this.media=t.media;ls(r,"seeking",this.onSeeking),ls(r,"timeupdate",this.onTimeupdate),ls(r,"play",this.onPlay),ls(r,"pause",this.onPause)},r.onMediaAttached=function(e,t){var r=this.effectivePlayingItem,n=this.detachedData;if(this.detachedData=null,null===r)this.checkStart();else if(!n){this.clearScheduleState();var i=this.findItemIndex(r);this.setSchedulePosition(i)}},r.clearScheduleState=function(){this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null},r.onMediaDetaching=function(e,t){var r=!!t.transferMedia,n=this.media;if(this.media=null,!r&&(n&&this.removeMediaListeners(n),this.detachedData)){var i=this.getBufferingPlayer();i&&(this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,i.detachMedia()),this.shouldPlay=!1}},r.isInterstitial=function(e){return!(null==e||!e.event)},r.retreiveMediaSource=function(e,t){var r=this.getAssetPlayer(e);r&&this.transferMediaFromPlayer(r,t)},r.transferMediaFromPlayer=function(e,t){var r=e.interstitial.appendInPlace,n=e.media;if(r&&n===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&n)return void(this.detachedData={media:n});var i=e.transferMedia();this.log("transfer MediaSource from "+e+" "+at(i)),this.detachedData=i}else t&&n&&(this.shouldPlay||(this.shouldPlay=!n.paused))},r.transferMediaTo=function(e,t){var r,n,i=this;if(e.media!==t){var a,s=null,o=this.hls,l=e!==o,u=l&&e.interstitial.appendInPlace,c=null==(r=this.detachedData)?void 0:r.mediaSource;if(o.media)u&&(s=o.transferMedia(),this.detachedData=s),a="Primary";else if(c){var d=this.getBufferingPlayer();d?(s=d.transferMedia(),a=""+d):a="detached MediaSource"}else a="detached media";if(!s)if(c)s=this.detachedData,this.log("using detachedData: MediaSource "+at(s));else if(!this.detachedData||o.media===t){var f=this.playerQueue;f.length>1&&f.forEach(function(e){if(l&&e.interstitial.appendInPlace!==u){var t=e.interstitial;i.clearInterstitial(e.interstitial,null),t.appendInPlace=!1,t.appendInPlace&&i.warn("Could not change append strategy for queued assets "+t)}}),this.hls.detachMedia(),this.detachedData={media:t}}var h=s&&"mediaSource"in s&&"closed"!==(null==(n=s.mediaSource)?void 0:n.readyState),p=h&&s?s:t;if(this.log((h?"transfering MediaSource":"attaching media")+" to "+(l?e:"Primary")+" from "+a),p===s){var m=l&&e.assetId===this.schedule.assetIdAtEnd;p.overrides={duration:this.schedule.duration,endOfStream:!l||m,cueRemoval:!l}}e.attachMedia(p)}},r.onInterstitialCueEnter=function(){this.onTimeupdate()},r.checkStart=function(){var e=this.schedule,t=e.events;if(t&&!this.playbackDisabled&&this.media){-1===this.bufferedPos&&(this.bufferedPos=0);var r=this.timelinePos,n=this.effectivePlayingItem;if(-1===r){var i=this.hls.startPosition;if(this.timelinePos=i,t.length&&t[0].cue.pre){var a=e.findEventIndex(t[0].identifier);this.setSchedulePosition(a)}else if(i>=0||!this.primaryLive){var s=this.timelinePos=i>0?i:0,o=e.findItemIndexAtTime(s);this.setSchedulePosition(o)}}else if(n&&!this.playingItem){var l=e.findItemIndex(n);this.setSchedulePosition(l)}}},r.advanceAfterAssetEnded=function(e,t,r){var n=bs(e,r);if(e.isAssetPastPlayoutLimit(n)){var i=this.schedule.items;if(i){var a=t+1;if(a>=i.length)return void this.setSchedulePosition(-1);var s=e.resumeTime;this.timelinePos<s&&(this.timelinePos=s,this.checkBuffer()),this.setSchedulePosition(a)}}else this.setSchedulePosition(t,n)},r.setScheduleToAssetAtTime=function(e,t){var r=this.schedule,n=t.parentIdentifier,i=r.getEvent(n);if(i){var a=r.findEventIndex(n),s=r.findAssetIndex(i,e);this.advanceAfterAssetEnded(i,a,s-1)}},r.setSchedulePosition=function(e,t){var r=this.schedule.items;if(r&&!this.playbackDisabled){this.log("setSchedulePosition "+e+", "+t);var n=e>=0?r[e]:null,i=this.playingItem,a=this.playingLastItem;if(this.isInterstitial(i)){var s,o=i.event,l=this.playingAsset,u=null==l?void 0:l.identifier,c=u?this.getAssetPlayer(u):null;if(c&&u&&(!this.eventItemsMatch(i,n)||void 0!==t&&u!==(null==(s=o.assetList)?void 0:s[t].identifier))){var d,f=o.findAssetIndex(l);if(this.log("INTERSTITIAL_ASSET_ENDED "+(f+1)+"/"+o.assetList.length+" "+Ss(l)),this.endedAsset=l,this.playingAsset=null,this.hls.trigger(L.INTERSTITIAL_ASSET_ENDED,{asset:l,assetListIndex:f,event:o,schedule:r.slice(0),scheduleIndex:e,player:c}),i!==this.playingItem)return void(this.itemsMatch(i,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(o,this.findItemIndex(this.playingItem),f));this.retreiveMediaSource(u,n),!c.media||null!=(d=this.detachedData)&&d.mediaSource||c.detachMedia()}if(!this.eventItemsMatch(i,n)&&(this.endedItem=i,this.playingItem=null,this.log("INTERSTITIAL_ENDED "+o+" "+ks(i)),o.hasPlayed=!0,this.hls.trigger(L.INTERSTITIAL_ENDED,{event:o,schedule:r.slice(0),scheduleIndex:e}),o.cue.once)){this.updateSchedule();var h=this.schedule.items;if(n&&h){var p=this.findItemIndex(n);this.advanceSchedule(p,h,t,i,a)}return}}this.advanceSchedule(e,r,t,i,a)}},r.advanceSchedule=function(e,t,r,n,i){var a=this,s=e>=0?t[e]:null,o=this.primaryMedia,l=this.playerQueue;if(l.length&&l.forEach(function(t){var r=t.interstitial,n=a.schedule.findEventIndex(r.identifier);(n<e||n>e+1)&&a.clearInterstitial(r,s)}),this.isInterstitial(s)){this.timelinePos=Math.min(Math.max(this.timelinePos,s.start),s.end);var u=s.event;if(void 0===r){var c=bs(u,(r=this.schedule.findAssetIndex(u,this.timelinePos))-1);if(u.isAssetPastPlayoutLimit(c))return void this.advanceAfterAssetEnded(u,e,r);r=c}var d=this.waitingItem;this.assetsBuffered(s,o)||this.setBufferingItem(s);var f=this.preloadAssets(u,r);if(this.eventItemsMatch(s,d||n)||(this.waitingItem=s,this.log("INTERSTITIAL_STARTED "+ks(s)+" "+(u.appendInPlace?"append in place":"")),this.hls.trigger(L.INTERSTITIAL_STARTED,{event:u,schedule:t.slice(0),scheduleIndex:e})),!u.assetListLoaded)return void this.log("Waiting for ASSET-LIST to complete loading "+u);if(u.assetListLoader&&(u.assetListLoader.destroy(),u.assetListLoader=void 0),!o)return void this.log("Waiting for attachMedia to start Interstitial "+u);this.waitingItem=this.endedItem=null,this.playingItem=s;var h=u.assetList[r];if(!h){var p=t[e+1],m=this.media;return p&&m&&!this.isInterstitial(p)&&m.currentTime<p.start&&(m.currentTime=this.timelinePos=p.start),void this.advanceAfterAssetEnded(u,e,r||0)}if(f||(f=this.getAssetPlayer(h.identifier)),null===f||f.destroyed){var g=u.assetList.length;this.warn("asset "+(r+1)+"/"+g+" player destroyed "+u),f=this.createAssetPlayer(u,h,r)}if(!this.eventItemsMatch(s,this.bufferingItem)&&u.appendInPlace&&this.isAssetBuffered(h))return;this.startAssetPlayer(f,r,t,e,o),this.shouldPlay&&Ls(f.media)}else null!==s?(this.resumePrimary(s,e,n),this.shouldPlay&&Ls(this.hls.media)):i&&this.isInterstitial(n)&&(this.endedItem=null,this.playingItem=n,n.event.appendInPlace||this.attachPrimary(this.schedule.durations.primary,null))},r.resumePrimary=function(e,t,r){var n;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log("resuming "+ks(e)),null==(n=this.detachedData)||!n.mediaSource){var i=this.timelinePos;(i<e.start||i>=e.end)&&(i=this.getPrimaryResumption(e,t),this.timelinePos=i),this.attachPrimary(i,e)}if(r){var a=this.schedule.items;a&&(this.log("INTERSTITIALS_PRIMARY_RESUMED "+ks(e)),this.hls.trigger(L.INTERSTITIALS_PRIMARY_RESUMED,{schedule:a.slice(0),scheduleIndex:t}),this.checkBuffer())}},r.getPrimaryResumption=function(e,t){var r=e.start;if(this.primaryLive){var n=this.primaryDetails;if(0===t)return this.hls.startPosition;if(n&&(r<n.fragmentStart||r>n.edge))return this.hls.liveSyncPosition||-1}return r},r.isAssetBuffered=function(e){var t=this.getAssetPlayer(e.identifier);return null!=t&&t.hls?t.hls.bufferedToEnd:rr.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)},r.attachPrimary=function(e,t,r){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;var n=this.primaryMedia;if(n){var i=this.hls;i.media?this.checkBuffer():(this.transferMediaTo(i,n),r&&this.startLoadingPrimaryAt(e,r)),r||(this.timelinePos=e,this.startLoadingPrimaryAt(e,r))}},r.startLoadingPrimaryAt=function(e,t){var r,n=this.hls;!n.loadingEnabled||!n.media||Math.abs(((null==(r=n.mainForwardBufferInfo)?void 0:r.start)||n.media.currentTime)-e)>.5?n.startLoad(e,t):n.bufferingEnabled||n.resumeBuffering()},r.onManifestLoading=function(){this.stopLoad(),this.schedule.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(L.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(L.BUFFER_CODECS,this.onBufferCodecs,this)},r.onLevelUpdated=function(e,t){if(-1!==t.level){var r=this.hls.levels[t.level],n=c(c({},this.mediaSelection||this.altSelection),{},{main:r});this.mediaSelection=n,this.schedule.parseInterstitialDateRanges(n,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}},r.onAudioTrackUpdated=function(e,t){var r=this.hls.audioTracks[t.id],n=this.mediaSelection;if(n){var i=c(c({},n),{},{audio:r});this.mediaSelection=i}else this.altSelection=c(c({},this.altSelection),{},{audio:r})},r.onSubtitleTrackUpdated=function(e,t){var r=this.hls.subtitleTracks[t.id],n=this.mediaSelection;if(n){var i=c(c({},n),{},{subtitles:r});this.mediaSelection=i}else this.altSelection=c(c({},this.altSelection),{},{subtitles:r})},r.onAudioTrackSwitching=function(e,t){var r=lt(t);this.playerQueue.forEach(function(e){return e.hls.setAudioOption(t)||e.hls.setAudioOption(r)})},r.onSubtitleTrackSwitch=function(e,t){var r=lt(t);this.playerQueue.forEach(function(e){return e.hls.setSubtitleOption(t)||-1!==t.id&&e.hls.setSubtitleOption(r)})},r.onBufferCodecs=function(e,t){var r=t.tracks;r&&(this.requiredTracks=r)},r.onBufferAppended=function(e,t){this.checkBuffer()},r.onBufferFlushed=function(e,t){var r=this.playingItem;if(r&&!this.itemsMatch(r,this.bufferingItem)&&!this.isInterstitial(r)){var n=this.timelinePos;this.bufferedPos=n,this.checkBuffer()}},r.onBufferedToEnd=function(e){var t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(var r=0;r<t.length;r++){var n=t[r];if(n.cue.post){var i,a=this.schedule.findEventIndex(n.identifier),s=null==(i=this.schedule.items)?void 0:i[a];this.isInterstitial(s)&&this.eventItemsMatch(s,this.bufferingItem)&&this.bufferedToItem(s,0);break}}this.bufferedPos=Number.MAX_VALUE}},r.onMediaEnded=function(e){var t=this.playingItem;if(!this.playingLastItem&&t){var r=this.findItemIndex(t);this.setSchedulePosition(r+1)}else this.shouldPlay=!1},r.updateItem=function(e,t){var r=this.schedule.items;return e&&r&&r[this.findItemIndex(e,t)]||null},r.trimInPlace=function(e,t){var r=this;if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach(function(t,n){e.event.isAssetPastPlayoutLimit(n)&&r.clearAssetPlayer(t.identifier,null)});var n=e.end+.25,i=rr.bufferInfo(this.primaryMedia,n,0);(i.end>n||(i.nextStart||0)>n)&&(this.attachPrimary(n,null),this.flushFrontBuffer(n))}},r.itemsMatch=function(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))},r.eventItemsMatch=function(e,t){var r;return!!t&&(e===t||e.event.identifier===(null==(r=t.event)?void 0:r.identifier))},r.findItemIndex=function(e,t){return e?this.schedule.findItemIndex(e,t):-1},r.updateSchedule=function(){var e=this.mediaSelection;e&&this.schedule.updateSchedule(e,[])},r.checkBuffer=function(e){var t=this.schedule.items;if(t){var r=rr.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=r.len<1),this.updateBufferedPos(r.end,t,e)}},r.updateBufferedPos=function(e,t,r){var n=this.schedule,i=this.bufferingItem;if(!(this.bufferedPos>e))if(1===t.length&&this.itemsMatch(t[0],i))this.bufferedPos=e;else{var a=this.playingItem,s=this.findItemIndex(a),o=n.findItemIndexAtTime(e);if(this.bufferedPos<e){var l,u,c=this.findItemIndex(i),d=Math.min(c+1,t.length-1),f=t[d];if((-1===o&&i&&e>=i.end||null!=(l=f.event)&&l.appendInPlace&&e+.01>=f.start)&&(o=d),d-s>1&&!1===(null==i||null==(u=i.event)?void 0:u.appendInPlace))return;if(this.bufferedPos=e,o>c&&o>s)this.bufferedToItem(f);else{var h=this.primaryDetails;this.primaryLive&&h&&e>h.edge-h.targetduration&&f.start<h.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(f)&&this.preloadAssets(f.event,0)}}else r&&a&&!this.itemsMatch(a,i)&&(o===s?this.bufferedToItem(a):o===s+1&&this.bufferedToItem(t[o]))}},r.assetsBuffered=function(e,t){var r=this;return 0!==e.event.assetList.length&&!e.event.assetList.some(function(e){var n=r.getAssetPlayer(e.identifier);return!(null!=n&&n.bufferedInPlaceToEnd(t))})},r.setBufferingItem=function(e){var t=this,r=this.bufferingItem,n=this.schedule;if(this.itemsMatch(e,r))this.bufferingItem!==e&&(this.bufferingItem=e);else{var i=n.items,a=n.events;if(!i||!a)return r;var s=this.isInterstitial(e),o=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));var l=o?o.remaining:r?r.end-this.timelinePos:0;this.log("INTERSTITIALS_BUFFERED_TO_BOUNDARY "+ks(e)+(r?" ("+l.toFixed(2)+" remaining)":"")),this.playbackDisabled||(s?e.event.assetList.forEach(function(e){var r=t.getAssetPlayer(e.identifier);r&&r.resumeBuffering()}):(this.hls.resumeBuffering(),this.playerQueue.forEach(function(e){return e.pauseBuffering()}))),this.hls.trigger(L.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:a.slice(0),schedule:i.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}return r},r.bufferedToItem=function(e,t){void 0===t&&(t=0);var r=this.setBufferingItem(e);if(!this.playbackDisabled)if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(null!==r){this.bufferingAsset=null;var n=this.detachedData;if(n)if(n.mediaSource){this.attachPrimary(e.start,e,!0)}else this.preloadPrimary(e);else this.preloadPrimary(e)}},r.preloadPrimary=function(e){var t=this.findItemIndex(e),r=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(r)},r.bufferedToEvent=function(e,t){var r=e.event,n=0===r.assetList.length&&!r.assetListLoader,i=r.cue.once;if(n||!i){var a=this.preloadAssets(r,t);if(null!=a&&a.interstitial.appendInPlace){var s=r.assetList[t],o=this.primaryMedia;s&&o&&this.bufferAssetPlayer(a,o)}}},r.preloadAssets=function(e,t){var r=e.assetUrl,n=e.assetList.length,i=0===n&&!e.assetListLoader,a=e.cue.once;if(i){var s,o=e.timelineStart;if(e.appendInPlace){var l,u=this.playingItem;this.isInterstitial(u)||(null==u||null==(l=u.nextEvent)?void 0:l.identifier)!==e.identifier||this.flushFrontBuffer(o+.25)}var c=0;if(!this.playingItem&&this.primaryLive&&-1===(c=this.hls.startPosition)&&(c=this.hls.liveSyncPosition||0),c&&!e.cue.pre&&!e.cue.post){var d=c-o;d>0&&(s=Math.round(1e3*d)/1e3)}if(this.log("Load interstitial asset "+(t+1)+"/"+(r?1:n)+" "+e+(s?" live-start: "+c+" start-offset: "+s:"")),r)return this.createAsset(e,0,0,o,e.duration,r);var f=this.assetListLoader.loadAssetList(e,s);f&&(e.assetListLoader=f)}else if(!a&&n){for(var h=t;h<n;h++){var p=e.assetList[h],m=this.getAssetPlayerQueueIndex(p.identifier);-1!==m&&!this.playerQueue[m].destroyed||p.error||this.createAssetPlayer(e,p,h)}return this.getAssetPlayer(e.assetList[t].identifier)}return null},r.flushFrontBuffer=function(e){var t=this,r=this.requiredTracks;r&&(this.log("Removing front buffer starting at "+e),Object.keys(r).forEach(function(r){t.hls.trigger(L.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:r})}))},r.getAssetPlayerQueueIndex=function(e){for(var t=this.playerQueue,r=0;r<t.length;r++)if(e===t[r].assetId)return r;return-1},r.getAssetPlayer=function(e){var t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null},r.getBufferingPlayer=function(){var e=this.playerQueue,t=this.primaryMedia;if(t)for(var r=0;r<e.length;r++)if(e[r].media===t)return e[r];return null},r.createAsset=function(e,t,r,n,i,a){var s={parentIdentifier:e.identifier,identifier:gs(e,a,t),duration:i,startOffset:r,timelineStart:n,uri:a};return this.createAssetPlayer(e,s,t)},r.createAssetPlayer=function(e,t,r){var n=this,i=this.hls,s=i.userConfig,o=s.videoPreference,l=i.loadLevelObj||i.levels[i.currentLevel];(o||l)&&(o=a({},o),l.videoCodec&&(o.videoCodec=l.videoCodec),l.videoRange&&(o.allowedVideoRanges=[l.videoRange]));var u=i.audioTracks[i.audioTrack],d=i.subtitleTracks[i.subtitleTrack],f=0;if(this.primaryLive||e.appendInPlace){var h=this.timelinePos-t.timelineStart;if(h>1){var p=t.duration;p&&h<p&&(f=h)}}var m=t.identifier,g=c(c({},s),{},{autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:i.sessionId,assetPlayerId:m,abrEwmaDefaultEstimate:i.bandwidthEstimate,interstitialsController:void 0,startPosition:f,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:o,audioPreference:u||s.audioPreference,subtitlePreference:d||s.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(g.timelineOffset=t.timelineStart));var v=g.cmcd;null!=v&&v.sessionId&&v.contentId&&(g.cmcd=a({},v,{contentId:hs(t.uri)})),this.getAssetPlayer(m)&&this.warn("Duplicate date range identifier "+e+" and asset "+m);var y=new Ts(this.HlsPlayerClass,g,e,t);this.playerQueue.push(y),e.assetList[r]=t;var E=function(i){if(i.live){var a=new Error("Interstitials MUST be VOD assets "+e),s={fatal:!0,type:k.OTHER_ERROR,details:R.INTERSTITIAL_ASSET_ITEM_ERROR,error:a};n.handleAssetItemError(s,e,n.schedule.findEventIndex(e.identifier),r,a.message)}else{var o=i.edge-i.fragmentStart,l=t.duration;(null===l||o>l)&&(n.log('Interstitial asset "'+m+'" duration change '+l+" > "+o),t.duration=o,n.updateSchedule())}};y.on(L.LEVEL_UPDATED,function(e,t){var r=t.details;return E(r)}),y.on(L.LEVEL_PTS_UPDATED,function(e,t){var r=t.details;return E(r)});var b=function(e,t){var r=n.getAssetPlayer(m);if(r&&t.tracks){r.off(L.BUFFER_CODECS,b),r.tracks=t.tracks;var i=n.primaryMedia;n.bufferingAsset===r.assetItem&&i&&!r.media&&n.bufferAssetPlayer(r,i)}};y.on(L.BUFFER_CODECS,b);var S=function(){var r,i=n.getAssetPlayer(m);if(n.log("buffered to end of asset "+i),i){var a=n.schedule.findEventIndex(e.identifier),s=null==(r=n.schedule.items)?void 0:r[a];if(n.isInterstitial(s)){var o=e.findAssetIndex(t),l=bs(e,o);if(e.isAssetPastPlayoutLimit(l)){var u,c=null==(u=n.schedule.items)?void 0:u[a+1];c&&n.bufferedToItem(c)}else n.bufferedToItem(s,l)}}};y.on(L.BUFFERED_TO_END,S);var T=function(t){return function(){if(n.getAssetPlayer(m)){n.shouldPlay=!0;var r=n.schedule.findEventIndex(e.identifier);n.advanceAfterAssetEnded(e,r,t)}}};return y.once(L.MEDIA_ENDED,T(r)),y.once(L.PLAYOUT_LIMIT_REACHED,T(1/0)),y.on(L.ERROR,function(t,i){var a=n.getAssetPlayer(m);if(i.details!==R.BUFFER_STALLED_ERROR)n.handleAssetItemError(i,e,n.schedule.findEventIndex(e.identifier),r,"Asset player error "+i.error+" "+e);else if(null!=a&&a.media){var s=a.currentTime,o=a.duration-s;s&&e.appendInPlace&&o/a.media.playbackRate<.5?(n.log("Advancing buffer past end of asset "+m+" "+e+" at "+a.media.currentTime),S()):(n.warn("Stalled at "+s+" of "+(s+o)+" in asset "+m+" "+e),n.onTimeupdate(),n.checkBuffer(!0))}}),y.on(L.DESTROYING,function(){if(n.getAssetPlayer(m)){var t=new Error("Asset player destroyed unexpectedly "+m),i={fatal:!0,type:k.OTHER_ERROR,details:R.INTERSTITIAL_ASSET_ITEM_ERROR,error:t};n.handleAssetItemError(i,e,n.schedule.findEventIndex(e.identifier),r,t.message)}}),this.log("INTERSTITIAL_ASSET_PLAYER_CREATED "+Ss(t)),this.hls.trigger(L.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:r,event:e,player:y}),y},r.clearInterstitial=function(e,t){var r=this;e.assetList.forEach(function(e){r.clearAssetPlayer(e.identifier,t)}),e.reset()},r.resetAssetPlayer=function(e){var t=this.getAssetPlayerQueueIndex(e);if(-1!==t){this.log('reset asset player "'+e+'" after error');var r=this.playerQueue[t];this.transferMediaFromPlayer(r,null),r.resetDetails()}},r.clearAssetPlayer=function(e,t){var r=this.getAssetPlayerQueueIndex(e);if(-1!==r){this.log('clear asset player "'+e+'" toSegment: '+(t?ks(t):t));var n=this.playerQueue[r];this.transferMediaFromPlayer(n,t),this.playerQueue.splice(r,1),n.destroy()}},r.emptyPlayerQueue=function(){for(var e;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]},r.startAssetPlayer=function(e,t,r,n,i){var a=e.interstitial,s=e.assetItem,o=e.assetId,l=a.assetList.length,u=this.playingAsset;this.endedAsset=null,this.playingAsset=s,u&&u.identifier===o||(u&&(this.clearAssetPlayer(u.identifier,r[n]),delete u.error),this.log("INTERSTITIAL_ASSET_STARTED "+(t+1)+"/"+l+" "+Ss(s)),this.hls.trigger(L.INTERSTITIAL_ASSET_STARTED,{asset:s,assetListIndex:t,event:a,schedule:r.slice(0),scheduleIndex:n,player:e})),this.bufferAssetPlayer(e,i)},r.bufferAssetPlayer=function(e,t){var r,n,i=e.interstitial,a=e.assetItem,s=this.schedule.findEventIndex(i.identifier),o=null==(r=this.schedule.items)?void 0:r[s];if(o){this.setBufferingItem(o),this.bufferingAsset=a;var l=this.getBufferingPlayer();if(l!==e){var u=i.appendInPlace;if(!u||!1!==(null==l?void 0:l.interstitial.appendInPlace)){var c=(null==l?void 0:l.tracks)||(null==(n=this.detachedData)?void 0:n.tracks)||this.requiredTracks;if(u&&a!==this.playingAsset){if(!e.tracks)return;if(c&&!K(c,e.tracks)){var d=new Error("Asset "+Ss(a)+" SourceBuffer tracks ('"+Object.keys(e.tracks)+"') are not compatible with primary content tracks ('"+Object.keys(c)+"')"),f={fatal:!0,type:k.OTHER_ERROR,details:R.INTERSTITIAL_ASSET_ITEM_ERROR,error:d},h=i.findAssetIndex(a);return void this.handleAssetItemError(f,i,s,h,d.message)}}this.transferMediaTo(e,t)}}}},r.handleAssetItemError=function(e,t,r,n,i){if(e.details!==R.BUFFER_STALLED_ERROR){var s=t.assetList[n];this.warn("INTERSTITIAL_ASSET_ERROR "+(s?Ss(s):s)+" "+e.error);var o=null==s?void 0:s.identifier,l=this.getAssetPlayerQueueIndex(o),u=this.playerQueue[l]||null,c=this.schedule.items,d=a({},e,{fatal:!1,errorAction:xt(!0),asset:s,assetListIndex:n,event:t,schedule:c,scheduleIndex:r,player:u});if(this.hls.trigger(L.INTERSTITIAL_ASSET_ERROR,d),e.fatal){var f=this.playingAsset,h=new Error(i);if(s&&(this.clearAssetPlayer(o,null),s.error=h),t.assetList.some(function(e){return!e.error})){for(var p=n;p<t.assetList.length;p++)this.resetAssetPlayer(t.assetList[p].identifier);this.updateSchedule()}else t.error=h;t.error?this.primaryFallback(t):f&&f.identifier===o&&this.advanceAfterAssetEnded(t,r,n)}}},r.primaryFallback=function(e){var t=e.timelineStart,r=this.effectivePlayingItem;if(this.updateSchedule(),r){this.log('Fallback to primary from event "'+e.identifier+'" start: '+t+" pos: "+this.timelinePos+" playing: "+(r?ks(r):"<none>")+" error: "+e.error);var n=this.timelinePos;-1===n&&(n=this.hls.startPosition);var i=this.updateItem(r,n);this.itemsMatch(r,i)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t));var a=this.schedule.findItemIndexAtTime(n);this.setSchedulePosition(a)}else this.checkStart()},r.onAssetListLoaded=function(e,t){var r,n=this,i=t.event,a=i.identifier,s=t.assetListResponse.ASSETS;if(this.schedule.hasEvent(a)){var o=i.timelineStart,l=i.duration,u=0;s.forEach(function(e,t){var r=parseFloat(e.DURATION);n.createAsset(i,t,u,o+u,r,e.URI),u+=r}),i.duration=u,this.log("Loaded asset-list with duration: "+u+" (was: "+l+") "+i);var c=this.waitingItem,d=(null==c?void 0:c.event.identifier)===a;this.updateSchedule();var f=null==(r=this.bufferingItem)?void 0:r.event;if(d){var h,p=this.schedule.findEventIndex(a),m=null==(h=this.schedule.items)?void 0:h[p];if(m){if(!this.playingItem&&this.timelinePos>m.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==p)return i.error=new Error("Interstitial no longer within playback range "+this.timelinePos+" "+i),void this.primaryFallback(i);this.setBufferingItem(m)}this.setSchedulePosition(p)}else if((null==f?void 0:f.identifier)===a&&f.appendInPlace){var g=i.assetList[0],v=this.getAssetPlayer(g.identifier),y=this.primaryMedia;g&&v&&y&&this.bufferAssetPlayer(v,y)}}},r.onError=function(e,t){switch(t.details){case R.ASSET_LIST_PARSING_ERROR:case R.ASSET_LIST_LOAD_ERROR:case R.ASSET_LIST_LOAD_TIMEOUT:var r=t.interstitial;r&&this.primaryFallback(r);break;case R.BUFFER_STALLED_ERROR:this.onTimeupdate(),this.checkBuffer(!0)}},n(t,[{key:"interstitialsManager",get:function(){if(!this.manager){if(!this.hls)return null;var e=this,t=function(){return e.bufferingItem||e.waitingItem},r=function(t){return t?e.getAssetPlayer(t.identifier):t},n=function(t,n,a,s,o){if(t){var l=t[n].start,u=t.event;if(u){if("playout"===n||u.timelineOccupancy!==ms.Point){var c=r(a);(null==c?void 0:c.interstitial)===u&&(l+=c.assetItem.startOffset+c[o])}}else l+=("bufferedPos"===s?i():e[s])-t.start;return l}return 0},i=function(){var t=e.bufferedPos;return t===Number.MAX_VALUE?a("primary"):Math.max(t,0)},a=function(t){var r;return null!=(r=e.primaryDetails)&&r.live?e.primaryDetails.edge:e.schedule.durations[t]},s=function(t,i){var a,s,o=e.effectivePlayingItem;if(null==o||null==(a=o.event)||!a.restrictions.skip){e.log("seek to "+t+' "'+i+'"');var l=e.effectivePlayingItem,u=e.schedule.findItemIndexAtTime(t,i),c=null==(s=e.schedule.items)?void 0:s[u],d=e.getBufferingPlayer(),f=null==d?void 0:d.interstitial,h=null==f?void 0:f.appendInPlace,p=l&&e.itemsMatch(l,c);if(l&&(h||p)){var m=r(e.playingAsset),g=(null==m?void 0:m.media)||e.primaryMedia;if(g){var v="primary"===i?g.currentTime:n(l,i,e.playingAsset,"timelinePos","currentTime"),y=t-v,E=(h?v:g.currentTime)+y;if(E>=0&&(!m||h||E<=m.duration))return void(g.currentTime=E)}}if(c){var b=t;if("primary"!==i){var S=t-c[i].start;b=c.start+S}var T=!e.isInterstitial(c);if(e.isInterstitial(l)&&!l.event.appendInPlace||!T&&!c.event.appendInPlace){if(l){var w=e.findItemIndex(l);if(u>w){var k=e.schedule.findJumpRestrictedIndex(w+1,u);if(k>w)return void e.setSchedulePosition(k)}var R=0;if(T)e.timelinePos=b,e.checkBuffer();else{var L,A=null==c||null==(L=c.event)?void 0:L.assetList;if(A)for(var _=t-(c[i]||c).start,D=A.length;D--;){var C=A[D];if(C.duration&&_>=C.startOffset&&_<C.startOffset+C.duration){R=D;break}}}e.setSchedulePosition(u,R)}}else{var I=e.media||(h?null==d?void 0:d.media:null);I&&(I.currentTime=b)}}}},o=function(){var r=e.effectivePlayingItem;if(e.isInterstitial(r))return r;var n=t();return e.isInterstitial(n)?n:null},l={get currentTime(){var t=o(),r=e.effectivePlayingItem;return r&&r===t?n(r,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-r.playout.start:0},set currentTime(t){var r=o(),n=e.effectivePlayingItem;n&&n===r&&s(t+n.playout.start,"playout")},get duration(){var e=o();return e?e.playout.end-e.playout.start:0},get assetPlayers(){var t,r=null==(t=o())?void 0:t.event.assetList;return r?r.map(function(t){return e.getAssetPlayer(t.identifier)}):[]},get playingIndex(){var t,r=null==(t=o())?void 0:t.event;return r&&e.effectivePlayingAsset?r.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return o()}};this.manager={get events(){var t,r;return(null==(t=e.schedule)||null==(r=t.events)?void 0:r.slice(0))||[]},get schedule(){var t,r;return(null==(t=e.schedule)||null==(r=t.items)?void 0:r.slice(0))||[]},get interstitialPlayer(){return o()?l:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){var r=t();return e.findItemIndex(r)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){var t=e.effectivePlayingItem;return e.findItemIndex(t)},primary:{get bufferedEnd(){return i()},get currentTime(){var t=e.timelinePos;return t>0?t:0},set currentTime(e){s(e,"primary")},get duration(){return a("primary")},get seekableStart(){var t;return(null==(t=e.primaryDetails)?void 0:t.fragmentStart)||0}},integrated:{get bufferedEnd(){return n(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return n(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(e){s(e,"integrated")},get duration(){return a("integrated")},get seekableStart(){var t;return function(t,r){if(0!==t&&"primary"!==r&&e.schedule.length){var n,i=e.schedule.findItemIndexAtTime(t),a=null==(n=e.schedule.items)?void 0:n[i];if(a)return t+(a[r].start-a.start)}return t}((null==(t=e.primaryDetails)?void 0:t.fragmentStart)||0,"integrated")}},skip:function(){var t=e.effectivePlayingItem,r=null==t?void 0:t.event;if(r&&!r.restrictions.skip){var n=e.findItemIndex(t);if(r.appendInPlace){var i=t.playout.start+t.event.duration;s(i+.001,"playout")}else e.advanceAfterAssetEnded(r,n,1/0)}}}}return this.manager}},{key:"effectivePlayingItem",get:function(){return this.waitingItem||this.playingItem||this.endedItem}},{key:"effectivePlayingAsset",get:function(){return this.playingAsset||this.endedAsset}},{key:"playingLastItem",get:function(){var e,t=this.playingItem,r=null==(e=this.schedule)?void 0:e.items;return!!(this.playbackStarted&&t&&r)&&this.findItemIndex(t)===r.length-1}},{key:"playbackStarted",get:function(){return null!==this.effectivePlayingItem}},{key:"currentTime",get:function(){var e,t,r;if(null!==this.mediaSelection){var n=this.waitingItem||this.playingItem;if(!this.isInterstitial(n)||n.event.appendInPlace){var i=this.media;!i&&null!=(e=this.bufferingItem)&&null!=(t=e.event)&&t.appendInPlace&&(i=this.primaryMedia);var a=null==(r=i)?void 0:r.currentTime;if(void 0!==a&&S(a))return a}}}},{key:"primaryMedia",get:function(){var e;return this.media||(null==(e=this.detachedData)?void 0:e.media)||null}},{key:"playbackDisabled",get:function(){return!1===this.hls.config.enableInterstitialPlayback}},{key:"primaryDetails",get:function(){var e,t;return null==(e=this.mediaSelection)||null==(t=e.main)?void 0:t.details}},{key:"primaryLive",get:function(){var e;return!(null==(e=this.primaryDetails)||!e.live)}}])}(F),_s=function(e){function t(t,r,n){var i;return(i=e.call(this,t,r,n,"subtitle-stream-controller",x)||this).currentTrackId=-1,i.tracksBuffered=[],i.mainDetails=null,i.registerListeners(),i}o(t,e);var r=t.prototype;return r.onHandlerDestroying=function(){this.unregisterListeners(),e.prototype.onHandlerDestroying.call(this),this.mainDetails=null},r.registerListeners=function(){e.prototype.registerListeners.call(this);var t=this.hls;t.on(L.LEVEL_LOADED,this.onLevelLoaded,this),t.on(L.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(L.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(L.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(L.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.on(L.BUFFER_FLUSHING,this.onBufferFlushing,this)},r.unregisterListeners=function(){e.prototype.unregisterListeners.call(this);var t=this.hls;t.off(L.LEVEL_LOADED,this.onLevelLoaded,this),t.off(L.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(L.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(L.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(L.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.off(L.BUFFER_FLUSHING,this.onBufferFlushing,this)},r.startLoad=function(e,t){this.stopLoad(),this.state=mn,this.setInterval(500),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()},r.onManifestLoading=function(){e.prototype.onManifestLoading.call(this),this.mainDetails=null},r.onMediaDetaching=function(t,r){this.tracksBuffered=[],e.prototype.onMediaDetaching.call(this,t,r)},r.onLevelLoaded=function(e,t){this.mainDetails=t.details},r.onSubtitleFragProcessed=function(e,t){var r=t.frag,n=t.success;if(this.fragContextChanged(r)||(ee(r)&&(this.fragPrevious=r),this.state=mn),n){var i=this.tracksBuffered[this.currentTrackId];if(i){for(var a,s=r.start,o=0;o<i.length;o++)if(s>=i[o].start&&s<=i[o].end){a=i[o];break}var l=r.start+r.duration;a?a.end=l:(a={start:s,end:l},i.push(a)),this.fragmentTracker.fragBuffered(r),this.fragBufferedComplete(r,null),this.media&&this.tick()}}},r.onBufferFlushing=function(e,t){var r=t.startOffset,n=t.endOffset;if(0===r&&n!==Number.POSITIVE_INFINITY){var i=n-1;if(i<=0)return;t.endOffsetSubtitles=Math.max(0,i),this.tracksBuffered.forEach(function(e){for(var t=0;t<e.length;)if(e[t].end<=i)e.shift();else{if(!(e[t].start<i))break;e[t].start=i,t++}}),this.fragmentTracker.removeFragmentsInRange(r,i,x)}},r.onError=function(e,t){var r=t.frag;(null==r?void 0:r.type)===x&&(t.details===R.FRAG_GAP&&this.fragmentTracker.fragBuffered(r,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==pn&&(this.state=mn))},r.onSubtitleTracksUpdated=function(e,t){var r=this,n=t.subtitleTracks;this.levels&&ca(this.levels,n)?this.levels=n.map(function(e){return new rt(e)}):(this.tracksBuffered=[],this.levels=n.map(function(e){var t=new rt(e);return r.tracksBuffered[t.id]=[],t}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,x),this.fragPrevious=null,this.mediaBuffer=null)},r.onSubtitleTrackSwitch=function(e,t){var r;if(this.currentTrackId=t.id,null!=(r=this.levels)&&r.length&&-1!==this.currentTrackId){var n=this.levels[this.currentTrackId];null!=n&&n.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,n&&this.state!==pn&&this.setInterval(500)}else this.clearInterval()},r.onSubtitleTrackLoaded=function(e,t){var r,n=this.currentTrackId,i=this.levels,a=t.details,s=t.id;if(i){var o=i[s];if(!(s>=i.length)&&o){this.log("Subtitle track "+s+" loaded ["+a.startSN+","+a.endSN+"]"+(a.lastPartSn?"[part-"+a.lastPartSn+"-"+a.lastPartIndex+"]":"")+",duration:"+a.totalduration),this.mediaBuffer=this.mediaBufferTimeRanges;var l=0;if(a.live||null!=(r=o.details)&&r.live){if(a.deltaUpdateFailed)return;var u=this.mainDetails;if(!u)return void(this.startFragRequested=!1);var c,d=u.fragments[0];o.details?0===(l=this.alignPlaylists(a,o.details,null==(c=this.levelLastLoaded)?void 0:c.details))&&d&&tn(a,l=d.start):a.hasProgramDateTime&&u.hasProgramDateTime?(fn(a,u),l=a.fragmentStart):d&&tn(a,l=d.start),u&&!this.startFragRequested&&this.setStartPosition(u,l)}o.details=a,this.levelLastLoaded=o,s===n&&(this.hls.trigger(L.SUBTITLE_TRACK_UPDATED,{details:a,id:s,groupId:t.groupId}),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===mn&&(gt(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),o.details=void 0)))}}else this.warn("Subtitle tracks were reset while loading level "+s)},r._handleFragmentLoadComplete=function(e){var t=this,r=e.frag,n=e.payload,i=r.decryptdata,a=this.hls;if(!this.fragContextChanged(r)&&n&&n.byteLength>0&&null!=i&&i.key&&i.iv&&mr(i.method)){var s=performance.now();this.decrypter.decrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer,gr(i.method)).catch(function(e){throw a.trigger(L.ERROR,{type:k.MEDIA_ERROR,details:R.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:r}),e}).then(function(e){var t=performance.now();a.trigger(L.FRAG_DECRYPTED,{frag:r,payload:e,stats:{tstart:s,tdecrypt:t}})}).catch(function(e){t.warn(e.name+": "+e.message),t.state=mn})}},r.doTick=function(){if(this.media){if(this.state===mn){var e=this.currentTrackId,t=this.levels,r=null==t?void 0:t[e];if(!r||!t.length||!r.details)return;if(this.waitForLive(r))return;var n=this.config,i=this.getLoadPosition(),a=rr.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],i,n.maxBufferHole),s=a.end,o=a.len,l=r.details;if(o>this.hls.maxBufferLength+l.levelTargetDuration)return;var u=l.fragments,c=u.length,d=l.edge,f=null,h=this.fragPrevious;if(s<d){var p=n.maxFragLookUpTolerance,m=s>d-p?0:p;!(f=gt(h,u,Math.max(u[0].start,s),m))&&h&&h.start<u[0].start&&(f=u[0])}else f=u[c-1];if(!(f=this.filterReplacedPrimary(f,r.details)))return;var g=u[f.sn-l.startSN-1];if(g&&g.cc===f.cc&&this.fragmentTracker.getState(g)===Ot&&(f=g),this.fragmentTracker.getState(f)===Ot){var v=this.mapToInitFragWhenRequired(f);v&&this.loadFragment(v,r,s)}}}else this.state=mn},r.loadFragment=function(t,r,n){ee(t)?e.prototype.loadFragment.call(this,t,r,n):this._loadInitSegment(t,r)},n(t,[{key:"mediaBufferTimeRanges",get:function(){return new Ds(this.tracksBuffered[this.currentTrackId]||[])}}])}(Ln),Ds=function(e){this.buffered=void 0;var t=function(t,r,n){if((r>>>=0)>n-1)throw new DOMException("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+r+") is greater than the maximum bound ("+n+")");return e[r][t]};this.buffered={get length(){return e.length},end:function(r){return t("end",r,e.length)},start:function(r){return t("start",r,e.length)}}};function Cs(e,t){var r;try{r=new Event("addtrack")}catch(e){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)}function Is(e,t){var r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(r){z.debug("[texttrack-utils]: "+r);try{var n=new self.TextTrackCue(t.startTime,t.endTime,t.text);n.id=t.id,e.addCue(n)}catch(e){z.debug("[texttrack-utils]: Legacy TextTrackCue fallback failed: "+e)}}"disabled"===r&&(e.mode=r)}function Ps(e,t){var r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues)for(var n=e.cues.length;n--;)t&&e.cues[n].removeEventListener("enter",t),e.removeCue(e.cues[n]);"disabled"===r&&(e.mode=r)}function xs(e,t,r,n){var i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues&&e.cues.length>0)for(var a=function(e,t,r){var n=[],i=function(e,t){if(t<=e[0].startTime)return 0;var r=e.length-1;if(t>e[r].endTime)return-1;for(var n,i=0,a=r;i<=a;)if(t<e[n=Math.floor((a+i)/2)].startTime)a=n-1;else{if(!(t>e[n].startTime&&i<r))return n;i=n+1}return e[i].startTime-t<t-e[a].startTime?i:a}(e,t);if(i>-1)for(var a=i,s=e.length;a<s;a++){var o=e[a];if(o.startTime>=t&&o.endTime<=r)n.push(o);else if(o.startTime>r)return n}return n}(e.cues,t,r),s=0;s<a.length;s++)n&&!n(a[s])||e.removeCue(a[s]);"disabled"===i&&(e.mode=i)}function Os(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"subtitles"!==n.kind&&"captions"!==n.kind||!n.label||t.push(e[r])}return t}var Ms=function(e){function t(t){var r;return(r=e.call(this,t,"subtitle-track-controller")||this).media=null,r.tracks=[],r.groupIds=null,r.tracksInGroup=[],r.trackId=-1,r.currentTrack=null,r.selectDefaultTrack=!0,r.queuedDefaultTrack=-1,r.useTextTrackPolling=!1,r.subtitlePollingInterval=-1,r._subtitleDisplay=!0,r.asyncPollTrackChange=function(){return r.pollTrackChange(0)},r.onTextTracksChanged=function(){if(r.useTextTrackPolling||self.clearInterval(r.subtitlePollingInterval),r.media&&r.hls.config.renderTextTracksNatively){for(var e=null,t=Os(r.media.textTracks),n=0;n<t.length;n++)if("hidden"===t[n].mode)e=t[n];else if("showing"===t[n].mode){e=t[n];break}var i=r.findTrackForTextTrack(e);r.subtitleTrack!==i&&r.setSubtitleTrack(i)}},r.registerListeners(),r}o(t,e);var r=t.prototype;return r.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,e.prototype.destroy.call(this)},r.registerListeners=function(){var e=this.hls;e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_PARSED,this.onManifestParsed,this),e.on(L.LEVEL_LOADING,this.onLevelLoading,this),e.on(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(L.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(L.ERROR,this.onError,this)},r.unregisterListeners=function(){var e=this.hls;e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_PARSED,this.onManifestParsed,this),e.off(L.LEVEL_LOADING,this.onLevelLoading,this),e.off(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(L.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(L.ERROR,this.onError,this)},r.onMediaAttached=function(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},r.pollTrackChange=function(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)},r.onMediaDetaching=function(e,t){var r=this.media;if(r){var n=!!t.transferMedia;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||r.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,n||Os(r.textTracks).forEach(function(e){Ps(e)})}},r.onManifestLoading=function(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0},r.onManifestParsed=function(e,t){this.tracks=t.subtitleTracks},r.onSubtitleTrackLoaded=function(e,t){var r=t.id,n=t.groupId,i=t.details,a=this.tracksInGroup[r];if(a&&a.groupId===n){var s=a.details;a.details=t.details,this.log("Subtitle track "+r+' "'+a.name+'" lang:'+a.lang+" group:"+n+" loaded ["+i.startSN+"-"+i.endSN+"]"),r===this.trackId&&this.playlistLoaded(r,t,s)}else this.warn("Subtitle track with id:"+r+" and group:"+n+" not found in active group "+(null==a?void 0:a.groupId))},r.onLevelLoading=function(e,t){this.switchLevel(t.level)},r.onLevelSwitching=function(e,t){this.switchLevel(t.level)},r.switchLevel=function(e){var t=this.hls.levels[e];if(t){var r=t.subtitleGroups||null,n=this.groupIds,i=this.currentTrack;if(!r||(null==n?void 0:n.length)!==(null==r?void 0:r.length)||null!=r&&r.some(function(e){return-1===(null==n?void 0:n.indexOf(e))})){this.groupIds=r,this.trackId=-1,this.currentTrack=null;var a=this.tracks.filter(function(e){return!r||-1!==r.indexOf(e.groupId)});if(a.length)this.selectDefaultTrack&&!a.some(function(e){return e.default})&&(this.selectDefaultTrack=!1),a.forEach(function(e,t){e.id=t});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=a;var s=this.hls.config.subtitlePreference;if(!i&&s){this.selectDefaultTrack=!1;var o=ut(s,a);if(o>-1)i=a[o];else{var l=ut(s,this.tracks);i=this.tracks[l]}}var u=this.findTrackId(i);-1===u&&i&&(u=this.findTrackId(null));var c={subtitleTracks:a};this.log("Updating subtitle tracks, "+a.length+' track(s) found in "'+(null==r?void 0:r.join(","))+'" group-id'),this.hls.trigger(L.SUBTITLE_TRACKS_UPDATED,c),-1!==u&&-1===this.trackId&&this.setSubtitleTrack(u)}}},r.findTrackId=function(e){for(var t=this.tracksInGroup,r=this.selectDefaultTrack,n=0;n<t.length;n++){var i=t[n];if((!r||i.default)&&(r||e)&&(!e||ct(i,e)))return n}if(e){for(var a=0;a<t.length;a++){var s=t[a];if(da(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return a}for(var o=0;o<t.length;o++){var l=t[o];if(da(e.attrs,l.attrs,["LANGUAGE"]))return o}}return-1},r.findTrackForTextTrack=function(e){if(e)for(var t=this.tracksInGroup,r=0;r<t.length;r++)if(fa(t[r],e))return r;return-1},r.onError=function(e,t){!t.fatal&&t.context&&(t.context.type!==C||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))},r.setSubtitleOption=function(e){if(this.hls.config.subtitlePreference=e,e){if(-1===e.id)return this.setSubtitleTrack(-1),null;var t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){var r=this.currentTrack;if(r&&ct(e,r))return r;var n=ut(e,this.tracksInGroup);if(n>-1){var i=this.tracksInGroup[n];return this.setSubtitleTrack(n),i}if(r)return null;var a=ut(e,t);if(a>-1)return t[a]}}return null},r.loadPlaylist=function(t){e.prototype.loadPlaylist.call(this),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,t)},r.loadingPlaylist=function(t,r){e.prototype.loadingPlaylist.call(this,t,r);var n=t.id,i=t.groupId,a=this.getUrlWithDirectives(t.url,r),s=t.details,o=null==s?void 0:s.age;this.log("Loading subtitle "+n+' "'+t.name+'" lang:'+t.lang+" group:"+i+(void 0!==(null==r?void 0:r.msn)?" at sn "+r.msn+" part "+r.part:"")+(o&&s.live?" age "+o.toFixed(1)+(s.type?" "+s.type||0:""):"")+" "+a),this.hls.trigger(L.SUBTITLE_TRACK_LOADING,{url:a,id:n,groupId:i,deliveryDirectives:r||null,track:t})},r.toggleTrackModes=function(){var e=this.media;if(e){var t,r=Os(e.textTracks),n=this.currentTrack;if(n&&((t=r.filter(function(e){return fa(n,e)})[0])||this.warn('Unable to find subtitle TextTrack with name "'+n.name+'" and language "'+n.lang+'"')),[].slice.call(r).forEach(function(e){"disabled"!==e.mode&&e!==t&&(e.mode="disabled")}),t){var i=this.subtitleDisplay?"showing":"hidden";t.mode!==i&&(t.mode=i)}}},r.setSubtitleTrack=function(e){var t=this.tracksInGroup;if(this.media)if(e<-1||e>=t.length||!S(e))this.warn("Invalid subtitle track id: "+e);else{this.selectDefaultTrack=!1;var r=this.currentTrack,n=t[e]||null;if(this.trackId=e,this.currentTrack=n,this.toggleTrackModes(),n){var i=!!n.details&&!n.details.live;if(e!==this.trackId||n!==r||!i){this.log("Switching to subtitle-track "+e+(n?' "'+n.name+'" lang:'+n.lang+" group:"+n.groupId:""));var a=n.id,s=n.groupId,o=void 0===s?"":s,l=n.name,u=n.type,c=n.url;this.hls.trigger(L.SUBTITLE_TRACK_SWITCH,{id:a,groupId:o,name:l,type:u,url:c});var d=this.switchParams(n.url,null==r?void 0:r.details,n.details);this.loadPlaylist(d)}}else this.hls.trigger(L.SUBTITLE_TRACK_SWITCH,{id:e})}else this.queuedDefaultTrack=e},n(t,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}},{key:"allSubtitleTracks",get:function(){return this.tracks}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}}])}(ua),Fs={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Ns=function(e){return String.fromCharCode(Fs[e]||e)},Us=15,Bs=100,js={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Hs={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Gs={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},zs={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Vs=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],Ks=function(){function e(){this.time=null,this.verboseLevel=0}return e.prototype.log=function(e,t){if(this.verboseLevel>=e){var r="function"==typeof t?t():t;z.log(this.time+" ["+e+"] "+r)}},e}(),$s=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},qs=function(){function e(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),Ws=function(){function e(){this.uchar=" ",this.penState=new qs}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),Ys=function(){function e(e){this.chars=[],this.pos=0,this.currPenState=new qs,this.cueStartTime=null,this.logger=void 0;for(var t=0;t<Bs;t++)this.chars.push(new Ws);this.logger=e}var t=e.prototype;return t.equals=function(e){for(var t=0;t<Bs;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0},t.copy=function(e){for(var t=0;t<Bs;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<Bs;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Bs&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Bs)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){var t=this;e>=144&&this.backSpace();var r=Ns(e);this.pos>=Bs?this.logger.log(0,function(){return"Cannot insert "+e.toString(16)+" ("+r+") at position "+t.pos+". Skipping it!"}):(this.chars[this.pos].setChar(r,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<Bs;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,r=0;r<Bs;r++){var n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),Xs=function(){function e(e){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(var t=0;t<Us;t++)this.rows.push(new Ys(e));this.logger=e}var t=e.prototype;return t.reset=function(){for(var e=0;e<Us;e++)this.rows[e].clear();this.currRow=14},t.equals=function(e){for(var t=!0,r=0;r<Us;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<Us;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<Us;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){this.logger.log(2,function(){return"pacData = "+at(e)});var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<Us;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[n].cueStartTime,s=this.logger.time;if(null!==a&&null!==s&&a<s)for(var o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(i.rows[n+o])}}this.currRow=t;var l=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,c=Math.max(u-1,0);l.setCursor(e.indent),e.color=l.chars[c].penState.foreground}var d={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(d)},t.setBkgData=function(e){this.logger.log(2,function(){return"bkgData = "+at(e)}),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){var e=this;if(null!==this.nrRollUpRows){this.logger.log(1,function(){return e.getDisplayText()});var t=this.currRow+1-this.nrRollUpRows,r=this.rows.splice(t,1)[0];r.clear(),this.rows.splice(this.currRow,0,r),this.logger.log(2,"Rolling up")}else this.logger.log(3,"roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],r="",n=-1,i=0;i<Us;i++){var a=this.rows[i].getTextString();a&&(n=i+1,e?t.push("Row "+n+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},t.getTextAndFormat=function(){return this.rows},e}(),Qs=function(){function e(e,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Xs(r),this.nonDisplayedMemory=new Xs(r),this.lastOutputScreen=new Xs(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(2,function(){return"MODE="+e}),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=this,r=0;r<e.length;r++)this.writeScreen.insertChar(e[r]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,function(){return n+": "+t.writeScreen.getDisplayText(!0)}),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,function(){return"DISPLAYED: "+t.displayedMemory.getDisplayText(!0)}),this.outputDataUpdate())},t.ccRCL=function(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){var e=this;if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,function(){return"DISP: "+e.displayedMemory.getDisplayText()})}this.outputDataUpdate(!0)},t.ccTO=function(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}this.logger.log(2,"MIDROW: "+at(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),Js=function(){function e(e,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory={a:null,b:null},this.logger=void 0;var n=this.logger=new Ks;this.channels=[null,new Qs(e,t,n),new Qs(e+1,r,n)]}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var r=this;this.logger.time=e;for(var n=function(e){var n=127&t[e],i=127&t[e+1],a=!1,s=null;if(0===n&&0===i)return 0;r.logger.log(3,function(){return"["+$s([t[e],t[e+1]])+"] -> ("+$s([n,i])+")"});var o=r.cmdHistory;if(n>=16&&n<=31){if(function(e,t,r){return r.a===e&&r.b===t}(n,i,o))return Zs(null,null,o),r.logger.log(3,function(){return"Repeated command ("+$s([n,i])+") is dropped"}),0;Zs(n,i,r.cmdHistory),(a=r.parseCmd(n,i))||(a=r.parseMidrow(n,i)),a||(a=r.parsePAC(n,i)),a||(a=r.parseBackgroundAttributes(n,i))}else Zs(null,null,o);if(!a&&(s=r.parseChars(n,i))){var l=r.currentChannel;l&&l>0?r.channels[l].insertChars(s):r.logger.log(2,"No channel found yet. TEXT-MODE?")}a||s||r.logger.log(2,function(){return"Couldn't parse cleaned data "+$s([n,i])+" orig: "+$s([t[e],t[e+1]])})},i=0;i<t.length;i+=2)n(i)},t.parseCmd=function(e,t){if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;var r=20===e||21===e||23===e?1:2,n=this.channels[r];return 20===e||21===e||28===e||29===e?32===t?n.ccRCL():33===t?n.ccBS():34===t?n.ccAOF():35===t?n.ccAON():36===t?n.ccDER():37===t?n.ccRU(2):38===t?n.ccRU(3):39===t?n.ccRU(4):40===t?n.ccFON():41===t?n.ccRDC():42===t?n.ccTR():43===t?n.ccRTD():44===t?n.ccEDM():45===t?n.ccCR():46===t?n.ccENM():47===t&&n.ccEOC():n.ccTO(t-32),this.currentChannel=r,!0},t.parseMidrow=function(e,t){var r=0;if((17===e||25===e)&&t>=32&&t<=47){if((r=17===e?1:2)!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;var n=this.channels[r];return!!n&&(n.ccMIDROW(t),this.logger.log(3,function(){return"MIDROW ("+$s([e,t])+")"}),!0)}return!1},t.parsePAC=function(e,t){var r;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;var n=e<=23?1:2;r=t>=64&&t<=95?1===n?js[e]:Gs[e]:1===n?Hs[e]:zs[e];var i=this.channels[n];return!!i&&(i.setPAC(this.interpretPAC(r,t)),this.currentChannel=n,!0)},t.interpretPAC=function(e,t){var r,n={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,n.underline=!(1&~r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n},t.parseChars=function(e,t){var r,n,i=null,a=null;return e>=25?(r=2,a=e-8):(r=1,a=e),a>=17&&a<=19?(n=17===a?t+80:18===a?t+112:t+144,this.logger.log(2,function(){return"Special char '"+Ns(n)+"' in channel "+r}),i=[n]):e>=32&&e<=127&&(i=0===t?[e]:[e,t]),i&&this.logger.log(3,function(){return"Char codes =  "+$s(i).join(",")}),i},t.parseBackgroundAttributes=function(e,t){var r;if(!((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47))return!1;var n={};16===e||24===e?(r=Math.floor((t-32)/2),n.background=Vs[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0));var i=e<=23?1:2;return this.channels[i].setBkgData(n),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}Zs(null,null,this.cmdHistory)},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var r=this.channels[t];r&&r.cueSplitAtTime(e)}},e}();function Zs(e,t,r){r.a=e,r.b=t}var eo=function(){if(null!=br&&br.VTTCue)return self.VTTCue;var e=["","lr","rl"],t=["start","middle","end","left","right"];function r(e,t){if("string"!=typeof t)return!1;if(!Array.isArray(e))return!1;var r=t.toLowerCase();return!!~e.indexOf(r)&&r}function n(e){return r(t,e)}function i(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var s in a)e[s]=a[s]}return e}function a(t,a,s){var o=this,l={enumerable:!0};o.hasBeenReset=!1;var u="",c=!1,d=t,f=a,h=s,p=null,m="",g=!0,v="auto",y="start",E=50,b="middle",S=50,T="middle";Object.defineProperty(o,"id",i({},l,{get:function(){return u},set:function(e){u=""+e}})),Object.defineProperty(o,"pauseOnExit",i({},l,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(o,"startTime",i({},l,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",i({},l,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",i({},l,{get:function(){return h},set:function(e){h=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",i({},l,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",i({},l,{get:function(){return m},set:function(t){var n=function(t){return r(e,t)}(t);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");m=n,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",i({},l,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",i({},l,{get:function(){return v},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",i({},l,{get:function(){return y},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",i({},l,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",i({},l,{get:function(){return b},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",i({},l,{get:function(){return S},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");S=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",i({},l,{get:function(){return T},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");T=t,this.hasBeenReset=!0}})),o.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}(),to=function(){function e(){}return e.prototype.decode=function(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))},e}();function ro(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+parseFloat(n||0)}var r=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?t(r[2],r[3],0,r[4]):t(r[1],r[2],r[3],r[4]):null}var no=function(){function e(){this.values=Object.create(null)}var t=e.prototype;return t.set=function(e,t){this.get(e)||""===t||(this.values[e]=t)},t.get=function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},t.has=function(e){return e in this.values},t.alt=function(e,t,r){for(var n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}},t.integer=function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},t.percent=function(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){var r=parseFloat(t);if(r>=0&&r<=100)return this.set(e,r),!0}return!1},e}();function io(e,t,r,n){var i=n?e.split(n):[e];for(var a in i)if("string"==typeof i[a]){var s=i[a].split(r);2===s.length&&t(s[0],s[1])}}var ao=new eo(0,0,""),so="middle"===ao.align?"middle":"center";function oo(e,t,r){var n=e;function i(){var t=ro(e);if(null===t)throw new Error("Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=i(),a(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.slice(3),a(),t.endTime=i(),a(),function(e,t){var n=new no;io(e,function(e,t){var i;switch(e){case"region":for(var a=r.length-1;a>=0;a--)if(r[a].id===t){n.set(e,r[a].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":i=t.split(","),n.integer(e,i[0]),n.percent(e,i[0])&&n.set("snapToLines",!1),n.alt(e,i[0],["auto"]),2===i.length&&n.alt("lineAlign",i[1],["start",so,"end"]);break;case"position":i=t.split(","),n.percent(e,i[0]),2===i.length&&n.alt("positionAlign",i[1],["start",so,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",so,"end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");var i=n.get("line","auto");"auto"===i&&-1===ao.line&&(i=-1),t.line=i,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",so);var a=n.get("position","auto");"auto"===a&&50===ao.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}function lo(e){return e.replace(/<br(?: \/)?>/gi,"\n")}var uo=function(){function e(){this.state="INITIAL",this.buffer="",this.decoder=new to,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var t=e.prototype;return t.parse=function(e){var t=this;function r(){var e=t.buffer,r=0;for(e=lo(e);r<e.length&&"\r"!==e[r]&&"\n"!==e[r];)++r;var n=e.slice(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.slice(r),n}function n(e){io(e,function(e,t){},/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var a=(i=r()).match(/^(Ã¯Â»Â¿)?WEBVTT([ \t].*)?$/);if(null==a||!a[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var s=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(s?s=!1:i=r(),t.state){case"HEADER":/:/.test(i)?n(i):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new eo(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{oo(i,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var o=-1!==i.indexOf("--\x3e");if(!i||o&&(s=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID")}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},t.flush=function(){var e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this},e}(),co=/\r\n|\n\r|\n|\r/g,fo=function(e,t,r){return void 0===r&&(r=0),e.slice(r,r+t.length)===t};function ho(e,t,r){return hs(e.toString())+hs(t.toString())+hs(r)}function po(e,t,r,n,i,a,s){var o,l,u,c=new uo,d=$(new Uint8Array(e)).trim().replace(co,"\n").split("\n"),f=[],h=t?(l=t.baseTime,void 0===(u=t.timescale)&&(u=1),Oi(l,9e4,1/u)):0,p="00:00.000",m=0,g=0,v=!0;c.oncue=function(e){var a=r[n],s=r.ccOffset,l=(m-h)/9e4;if(null!=a&&a.new&&(void 0!==g?s=r.ccOffset=a.start:function(e,t,r){var n=e[t],i=e[n.prevCC];if(!i||!i.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);for(;null!=(a=i)&&a.new;){var a;e.ccOffset+=n.start-i.start,n.new=!1,i=e[(n=i).prevCC]}e.presentationOffset=r}(r,n,l)),l){if(!t)return void(o=new Error("Missing initPTS for VTT MPEGTS"));s=l-r.presentationOffset}var u=e.endTime-e.startTime,c=ji(9e4*(e.startTime+s-g),9e4*i)/9e4;e.startTime=Math.max(c,0),e.endTime=Math.max(c+u,0);var d=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(d)),e.id||(e.id=ho(e.startTime,e.endTime,d)),e.endTime>0&&f.push(e)},c.onparsingerror=function(e){o=e},c.onflush=function(){o?s(o):a(f)},d.forEach(function(e){if(v){if(fo(e,"X-TIMESTAMP-MAP=")){v=!1,e.slice(16).split(",").forEach(function(e){fo(e,"LOCAL:")?p=e.slice(6):fo(e,"MPEGTS:")&&(m=parseInt(e.slice(7)))});try{g=function(e){var t=parseInt(e.slice(-3)),r=parseInt(e.slice(-6,-4)),n=parseInt(e.slice(-9,-7)),i=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!(S(t)&&S(r)&&S(n)&&S(i)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*r,(t+=6e4*n)+36e5*i}(p)/1e3}catch(e){o=e}return}""===e&&(v=!1)}c.parse(e+"\n")}),c.flush()}var mo="stpp.ttml.im1t",go=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,vo=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,yo={left:"start",center:"center",right:"end",start:"start",end:"end"};function Eo(e,t,r,n){var i,s,o,l,u=fe(new Uint8Array(e),["mdat"]);if(0!==u.length){var c=u.map(function(e){return $(e)}),d=(i=t.baseTime,s=1,void 0===(o=t.timescale)&&(o=1),void 0===l&&(l=!1),Oi(i,s,1/o,l));try{c.forEach(function(e){return r(function(e,t){var r=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");var n={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},i=Object.keys(n).reduce(function(e,t){return e[t]=r.getAttribute("ttp:"+t)||n[t],e},{}),s="preserve"!==r.getAttribute("xml:space"),o=So(bo(r,"styling","style")),l=So(bo(r,"layout","region")),u=bo(r,"body","[begin]");return[].map.call(u,function(e){var r=To(e,s);if(!r||!e.hasAttribute("begin"))return null;var n=Ro(e.getAttribute("begin"),i),u=Ro(e.getAttribute("dur"),i),c=Ro(e.getAttribute("end"),i);if(null===n)throw ko(e);if(null===c){if(null===u)throw ko(e);c=n+u}var d=new eo(n-t,c-t,r);d.id=ho(d.startTime,d.endTime,d.text);var f=function(e,t,r){var n="http://www.w3.org/ns/ttml#styling",i=null,a=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],s=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;return s&&r.hasOwnProperty(s)&&(i=r[s]),a.reduce(function(r,a){var s=wo(t,n,a)||wo(e,n,a)||wo(i,n,a);return s&&(r[a]=s),r},{})}(l[e.getAttribute("region")],o[e.getAttribute("style")],o),h=f.textAlign;if(h){var p=yo[h];p&&(d.lineAlign=p),d.align=h}return a(d,f),d}).filter(function(e){return null!==e})}(e,d))})}catch(e){n(e)}}else n(new Error("Could not parse IMSC1 mdat"))}function bo(e,t,r){var n=e.getElementsByTagName(t)[0];return n?[].slice.call(n.querySelectorAll(r)):[]}function So(e){return e.reduce(function(e,t){var r=t.getAttribute("xml:id");return r&&(e[r]=t),e},{})}function To(e,t){return[].slice.call(e.childNodes).reduce(function(e,r,n){var i;return"br"===r.nodeName&&n?e+"\n":null!=(i=r.childNodes)&&i.length?To(r,t):t?e+r.textContent.trim().replace(/\s+/g," "):e+r.textContent},"")}function wo(e,t,r){return e&&e.hasAttributeNS(t,r)?e.getAttributeNS(t,r):null}function ko(e){return new Error("Could not parse ttml timestamp "+e)}function Ro(e,t){if(!e)return null;var r=ro(e);return null===r&&(go.test(e)?r=function(e,t){var r=go.exec(e),n=(0|r[4])+(0|r[5])/t.subFrameRate;return 3600*(0|r[1])+60*(0|r[2])+(0|r[3])+n/t.frameRate}(e,t):vo.test(e)&&(r=function(e,t){var r=vo.exec(e),n=Number(r[1]);switch(r[2]){case"h":return 3600*n;case"m":return 60*n;case"ms":return 1e3*n;case"f":return n/t.frameRate;case"t":return n/t.tickRate}return n}(e,t))),r}var Lo=function(){function e(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},t.newCue=function(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},t.reset=function(){this.cueRanges=[],this.startTime=null},e}(),Ao=function(){function e(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(L.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(L.FRAG_LOADING,this.onFragLoading,this),e.on(L.FRAG_LOADED,this.onFragLoaded,this),e.on(L.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(L.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(L.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(L.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(L.BUFFER_FLUSHING,this.onBufferFlushing,this)}var t=e.prototype;return t.destroy=function(){var e=this.hls;e.off(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(L.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(L.FRAG_LOADING,this.onFragLoading,this),e.off(L.FRAG_LOADED,this.onFragLoaded,this),e.off(L.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(L.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(L.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(L.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(L.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0},t.initCea608Parsers=function(){var e=new Lo(this,"textTrack1"),t=new Lo(this,"textTrack2"),r=new Lo(this,"textTrack3"),n=new Lo(this,"textTrack4");this.cea608Parser1=new Js(1,e,t),this.cea608Parser2=new Js(3,r,n)},t.addCues=function(e,t,r,n,i){for(var a=!1,s=i.length;s--;){var o=i[s],l=Co(o[0],o[1],t,r);if(l>=0&&(o[0]=Math.min(o[0],t),o[1]=Math.max(o[1],r),a=!0,l/(r-t)>.5))return}if(a||i.push([t,r]),this.config.renderTextTracksNatively){var u=this.captionsTracks[e];this.Cues.newCue(u,t,r,n)}else{var c=this.Cues.newCue(null,t,r,n);this.hls.trigger(L.CUES_PARSED,{type:"captions",cues:c,track:e})}},t.onInitPtsFound=function(e,t){var r=this,n=t.frag,i=t.id,a=t.initPTS,s=t.timescale,o=this.unparsedVttFrags;i===I&&(this.initPTS[n.cc]={baseTime:a,timescale:s}),o.length&&(this.unparsedVttFrags=[],o.forEach(function(e){r.initPTS[e.frag.cc]?r.onFragLoaded(L.FRAG_LOADED,e):r.hls.trigger(L.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))},t.getExistingTrack=function(e,t){var r=this.media;if(r)for(var n=0;n<r.textTracks.length;n++){var i=r.textTracks[n];if(Do(i,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return i}return null},t.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},t.createNativeTrack=function(e){if(!this.captionsTracks[e]){var t=this.captionsProperties,r=this.captionsTracks,n=this.media,i=t[e],a=i.label,s=i.languageCode,o=this.getExistingTrack(a,s);if(o)r[e]=o,Ps(r[e]),Cs(r[e],n);else{var l=this.createTextTrack("captions",a,s);l&&(l[e]=!0,r[e]=l)}}},t.createNonNativeTrack=function(e){if(!this.nonNativeCaptionsTracks[e]){var t=this.captionsProperties[e];if(t){var r={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(L.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}}},t.createTextTrack=function(e,t,r){var n=this.media;if(n)return n.addTextTrack(e,t,r)},t.onMediaAttaching=function(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()},t.onMediaDetaching=function(e,t){var r=!!t.transferMedia;if(this.media=null,!r){var n=this.captionsTracks;Object.keys(n).forEach(function(e){Ps(n[e]),delete n[e]}),this.nonNativeCaptionsTracks={}}},t.onManifestLoading=function(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},t._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)Ps(t[r])}},t.onSubtitleTracksUpdated=function(e,t){var r=this,n=t.subtitleTracks||[],i=n.some(function(e){return e.textCodec===mo});if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(ca(this.tracks,n))return void(this.tracks=n);if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){var a=this.media,s=a?Os(a.textTracks):null;if(this.tracks.forEach(function(e,t){var n;if(s){for(var i=null,a=0;a<s.length;a++)if(s[a]&&Do(s[a],e)){i=s[a],s[a]=null;break}i&&(n=i)}if(n)Ps(n);else{var o=_o(e);(n=r.createTextTrack(o,e.name,e.lang))&&(n.mode="disabled")}n&&r.textTracks.push(n)}),null!=s&&s.length){var o=s.filter(function(e){return null!==e}).map(function(e){return e.label});o.length&&this.hls.logger.warn("Media element contains unused subtitle tracks: "+o.join(", ")+". Replace media element for each source to clear TextTracks and captions menu.")}}else if(this.tracks.length){var l=this.tracks.map(function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}});this.hls.trigger(L.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:l})}}},t.onManifestLoaded=function(e,t){var r=this;this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(function(e){var t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(t){var n="textTrack"+t[1],i=r.captionsProperties[n];i&&(i.label=e.name,e.lang&&(i.languageCode=e.lang),i.media=e)}})},t.closedCaptionsForLevel=function(e){var t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]},t.onFragLoading=function(e,t){if(this.enabled&&t.frag.type===I){var r,n,i=this.cea608Parser1,a=this.cea608Parser2,s=this.lastSn,o=t.frag,l=o.cc,u=o.sn,c=null!=(r=null==(n=t.part)?void 0:n.index)?r:-1;i&&a&&(u!==s+1||u===s&&c!==this.lastPartIndex+1||l!==this.lastCc)&&(i.reset(),a.reset()),this.lastCc=l,this.lastSn=u,this.lastPartIndex=c}},t.onFragLoaded=function(e,t){var r=t.frag,n=t.payload;if(r.type===x)if(n.byteLength){var i=r.decryptdata,a="stats"in t;if(null==i||!i.encrypted||a){var s=this.tracks[r.level],o=this.vttCCs;o[r.cc]||(o[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),s&&s.textCodec===mo?this._parseIMSC1(r,n):this._parseVTTs(t)}}else this.hls.trigger(L.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})},t._parseIMSC1=function(e,t){var r=this,n=this.hls;Eo(t,this.initPTS[e.cc],function(t){r._appendCues(t,e.level),n.trigger(L.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},function(t){n.logger.log("Failed to parse IMSC1: "+t),n.trigger(L.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})})},t._parseVTTs=function(e){var t,r=this,n=e.frag,i=e.payload,a=this.initPTS,s=this.unparsedVttFrags,o=a.length-1;if(a[n.cc]||-1!==o){var l=this.hls;po(null!=(t=n.initSegment)&&t.data?Se(n.initSegment.data,new Uint8Array(i)).buffer:i,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,function(e){r._appendCues(e,n.level),l.trigger(L.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},function(t){var a="Missing initPTS for VTT MPEGTS"===t.message;a?s.push(e):r._fallbackToIMSC1(n,i),l.logger.log("Failed to parse VTT cue: "+t),a&&o>n.cc||l.trigger(L.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:t})})}else s.push(e)},t._fallbackToIMSC1=function(e,t){var r=this,n=this.tracks[e.level];n.textCodec||Eo(t,this.initPTS[e.cc],function(){n.textCodec=mo,r._parseIMSC1(e,t)},function(){n.textCodec="wvtt"})},t._appendCues=function(e,t){var r=this.hls;if(this.config.renderTextTracksNatively){var n=this.textTracks[t];if(!n||"disabled"===n.mode)return;e.forEach(function(e){return Is(n,e)})}else{var i=this.tracks[t];if(!i)return;var a=i.default?"default":"subtitles"+t;r.trigger(L.CUES_PARSED,{type:"subtitles",cues:e,track:a})}},t.onFragDecrypted=function(e,t){t.frag.type===x&&this.onFragLoaded(L.FRAG_LOADED,t)},t.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},t.onFragParsingUserdata=function(e,t){if(this.enabled&&this.config.enableCEA708Captions){var r=t.frag,n=t.samples;if(r.type!==I||"NONE"!==this.closedCaptionsForLevel(r))for(var i=0;i<n.length;i++){var a=n[i].bytes;if(a){this.cea608Parser1||this.initCea608Parsers();var s=this.extractCea608Data(a);this.cea608Parser1.addData(n[i].pts,s[0]),this.cea608Parser2.addData(n[i].pts,s[1])}}}},t.onBufferFlushing=function(e,t){var r=t.startOffset,n=t.endOffset,i=t.endOffsetSubtitles,a=t.type,s=this.media;if(s&&!(s.currentTime<n)){if(!a||"video"===a){var o=this.captionsTracks;Object.keys(o).forEach(function(e){return xs(o[e],r,n)})}if(this.config.renderTextTracksNatively&&0===r&&void 0!==i){var l=this.textTracks;Object.keys(l).forEach(function(e){return xs(l[e],r,i)})}}},t.extractCea608Data=function(e){for(var t=[[],[]],r=31&e[0],n=2,i=0;i<r;i++){var a=e[n++],s=127&e[n++],o=127&e[n++];if((0!==s||0!==o)&&4&a){var l=3&a;0!==l&&1!==l||(t[l].push(s),t[l].push(o))}}return t},e}();function _o(e){return e.characteristics&&/transcribes-spoken-dialog/gi.test(e.characteristics)&&/describes-music-and-sound/gi.test(e.characteristics)?"captions":"subtitles"}function Do(e,t){return!!e&&e.kind===_o(t)&&fa(t,e)}function Co(e,t,r,n){return Math.min(t,n)-Math.max(e,r)}var Io=/\s/,Po={newCue:function(e,t,r,n){for(var i,a,s,o,l,u=[],c=self.VTTCue||self.TextTrackCue,d=0;d<n.rows.length;d++)if(s=!0,o=0,l="",!(i=n.rows[d]).isEmpty()){for(var f,h=0;h<i.chars.length;h++)Io.test(i.chars[h].uchar)&&s?o++:(l+=i.chars[h].uchar,s=!1);i.cueStartTime=t,t===r&&(r+=1e-4),o>=16?o--:o++;var p=lo(l.trim()),m=ho(t,r,p);null!=e&&null!=(f=e.cues)&&f.getCueById(m)||((a=new c(t,r,p)).id=m,a.line=d+1,a.align="left",a.position=10+Math.min(80,10*Math.floor(8*o/32)),u.push(a))}return e&&u.length&&(u.sort(function(e,t){return"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line}),u.forEach(function(t){return Is(e,t)})),u}};var xo=/(\d+)-(\d+)\/(\d+)/,Oo=function(){function e(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Mo,this.controller=new self.AbortController,this.stats=new Y}var t=e.prototype;return t.destroy=function(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null},t.abortInternal=function(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())},t.abort=function(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},t.load=function(e,t,r){var n=this,i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();var s=function(e,t){var r={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(a({},e.headers))};return e.rangeEnd&&r.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),r}(e,this.controller.signal),o="arraybuffer"===e.responseType,l=o?"byteLength":"length",u=t.loadPolicy,c=u.maxTimeToFirstByteMs,d=u.maxLoadTimeMs;this.context=e,this.config=t,this.callbacks=r,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),t.timeout=c&&S(c)?c:d,this.requestTimeout=self.setTimeout(function(){n.callbacks&&(n.abortInternal(),n.callbacks.onTimeout(i,e,n.response))},t.timeout),(Xi(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(function(r){var a;n.response=n.loader=r;var s=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(n.requestTimeout),t.timeout=d,n.requestTimeout=self.setTimeout(function(){n.callbacks&&(n.abortInternal(),n.callbacks.onTimeout(i,e,n.response))},d-(s-i.loading.start)),!r.ok){var l=r.status,u=r.statusText;throw new Fo(u||"fetch, bad network response",l,r)}i.loading.first=s,i.total=function(e){var t=e.get("Content-Range");if(t){var r=function(e){var t=xo.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}(t);if(S(r))return r}var n=e.get("Content-Length");if(n)return parseInt(n)}(r.headers)||i.total;var c=null==(a=n.callbacks)?void 0:a.onProgress;return c&&S(t.highWaterMark)?n.loadProgressively(r,i,e,t.highWaterMark,c):o?r.arrayBuffer():"json"===e.responseType?r.json():r.text()}).then(function(r){var a,s,o=n.response;if(!o)throw new Error("loader destroyed");self.clearTimeout(n.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);var u=r[l];u&&(i.loaded=i.total=u);var c={url:o.url,data:r,code:o.status},d=null==(a=n.callbacks)?void 0:a.onProgress;d&&!S(t.highWaterMark)&&d(i,e,r,o),null==(s=n.callbacks)||s.onSuccess(c,i,e,o)}).catch(function(t){var r;if(self.clearTimeout(n.requestTimeout),!i.aborted){var a=t&&t.code||0,s=t?t.message:null;null==(r=n.callbacks)||r.onError({code:a,text:s},e,t?t.details:null,i)}})},t.getCacheAge=function(){var e=null;if(this.response){var t=this.response.headers.get("age");e=t?parseFloat(t):null}return e},t.getResponseHeader=function(e){return this.response?this.response.headers.get(e):null},t.loadProgressively=function(e,t,r,n,i){void 0===n&&(n=0);var a=new _n,s=e.body.getReader(),o=function(){return s.read().then(function(s){if(s.done)return a.dataLength&&i(t,r,a.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));var l=s.value,u=l.length;return t.loaded+=u,u<n||a.dataLength?(a.push(l),a.dataLength>=n&&i(t,r,a.flush().buffer,e)):i(t,r,l.buffer,e),o()}).catch(function(){return Promise.reject()})};return o()},e}();function Mo(e,t){return new self.Request(e.url,t)}var Fo=function(e){function t(t,r,n){var i;return(i=e.call(this,t)||this).code=void 0,i.details=void 0,i.code=r,i.details=n,i}return o(t,e),t}(h(Error)),No=/^age:\s*[\d.]+\s*$/im,Uo=function(){function e(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Y,this.retryDelay=0}var t=e.prototype;return t.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null},t.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))},t.abort=function(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},t.load=function(e,t,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=r,this.loadInternal()},t.loadInternal=function(){var e=this,t=this.config,r=this.context;if(t&&r){var n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;var a=this.xhrSetup;a?Promise.resolve().then(function(){if(e.loader===n&&!e.stats.aborted)return a(n,r.url)}).catch(function(t){if(e.loader===n&&!e.stats.aborted)return n.open("GET",r.url,!0),a(n,r.url)}).then(function(){e.loader!==n||e.stats.aborted||e.openAndSendXhr(n,r,t)}).catch(function(t){var a;null==(a=e.callbacks)||a.onError({code:n.status,text:t.message},r,n,i)}):this.openAndSendXhr(n,r,t)}},t.openAndSendXhr=function(e,t,r){e.readyState||e.open("GET",t.url,!0);var n=t.headers,i=r.loadPolicy,a=i.maxTimeToFirstByteMs,s=i.maxLoadTimeMs;if(n)for(var o in n)e.setRequestHeader(o,n[o]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),r.timeout=a&&S(a)?a:s,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send()},t.readystatechange=function(){var e=this.context,t=this.loader,r=this.stats;if(e&&t){var n=t.readyState,i=this.config;if(!r.aborted&&n>=2&&(0===r.loading.first&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),i.timeout!==i.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),i.timeout=i.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),4===n)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;var a=t.status,s="text"===t.responseType?t.responseText:null;if(a>=200&&a<300){var o=null!=s?s:t.response;if(null!=o){var l,u;r.loading.end=Math.max(self.performance.now(),r.loading.first);var c="arraybuffer"===t.responseType?o.byteLength:o.length;r.loaded=r.total=c,r.bwEstimate=8e3*r.total/(r.loading.end-r.loading.first);var d=null==(l=this.callbacks)?void 0:l.onProgress;d&&d(r,e,o,t);var f={url:t.responseURL,data:o,code:a};return void(null==(u=this.callbacks)||u.onSuccess(f,r,e,t))}}var h,p=i.loadPolicy.errorRetry;kt(p,r.retry,!1,{url:e.url,data:void 0,code:a})?this.retry(p):(z.error(a+" while loading "+e.url),null==(h=this.callbacks)||h.onError({code:a,text:t.statusText},e,t,r))}}},t.loadtimeout=function(){if(this.config){var e=this.config.loadPolicy.timeoutRetry;if(kt(e,this.stats.retry,!0))this.retry(e);else{var t;z.warn("timeout while loading "+(null==(t=this.context)?void 0:t.url));var r=this.callbacks;r&&(this.abortInternal(),r.onTimeout(this.stats,this.context,this.loader))}}},t.retry=function(e){var t=this.context,r=this.stats;this.retryDelay=Tt(e,r.retry),r.retry++,z.warn((status?"HTTP Status "+status:"Timeout")+" while loading "+(null==t?void 0:t.url)+", retrying "+r.retry+"/"+e.maxNumRetry+" in "+this.retryDelay+"ms"),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)},t.loadprogress=function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)},t.getCacheAge=function(){var e=null;if(this.loader&&No.test(this.loader.getAllResponseHeaders())){var t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e},t.getResponseHeader=function(e){return this.loader&&new RegExp("^"+e+":\\s*[\\d.]+\\s*$","im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null},e}(),Bo=c(c({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:6e7,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:Uo,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:pt,bufferController:ya,capLevelController:Ta,errorController:Pt,fpsController:fs,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:Cr,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:Po,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:_s,subtitleTrackController:Ms,timelineController:Ao,audioStreamController:la,audioTrackController:ha,emeController:cs,cmcdController:is,contentSteeringController:as,interstitialsController:As});function jo(e){return e&&"object"==typeof e?Array.isArray(e)?e.map(jo):Object.keys(e).reduce(function(t,r){return t[r]=jo(e[r]),t},{}):e}function Ho(e,t){var r=e.loader;r!==Oo&&r!==Uo?(t.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1}()&&(e.loader=Oo,e.progressive=!0,e.enableSoftwareAES=!0,t.log("[config]: Progressive streaming enabled, using FetchLoader"))}var Go=function(e){function t(t,r){var n;return(n=e.call(this,"gap-controller",t.logger)||this).hls=null,n.fragmentTracker=null,n.media=null,n.mediaSource=void 0,n.nudgeRetry=0,n.stallReported=!1,n.stalled=null,n.moved=!1,n.seeking=!1,n.buffered={},n.lastCurrentTime=0,n.ended=0,n.waiting=0,n.onMediaPlaying=function(){n.ended=0,n.waiting=0},n.onMediaWaiting=function(){var e;null!=(e=n.media)&&e.seeking||(n.waiting=self.performance.now(),n.tick())},n.onMediaEnded=function(){var e;n.hls&&(n.ended=(null==(e=n.media)?void 0:e.currentTime)||1,n.hls.trigger(L.MEDIA_ENDED,{stalled:!1}))},n.hls=t,n.fragmentTracker=r,n.registerListeners(),n}o(t,e);var r=t.prototype;return r.registerListeners=function(){var e=this.hls;e&&(e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.BUFFER_APPENDED,this.onBufferAppended,this))},r.unregisterListeners=function(){var e=this.hls;e&&(e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.BUFFER_APPENDED,this.onBufferAppended,this))},r.destroy=function(){e.prototype.destroy.call(this),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0},r.onMediaAttached=function(e,t){this.setInterval(100),this.mediaSource=t.mediaSource;var r=this.media=t.media;ls(r,"playing",this.onMediaPlaying),ls(r,"waiting",this.onMediaWaiting),ls(r,"ended",this.onMediaEnded)},r.onMediaDetaching=function(e,t){this.clearInterval();var r=this.media;r&&(us(r,"playing",this.onMediaPlaying),us(r,"waiting",this.onMediaWaiting),us(r,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0},r.onBufferAppended=function(e,t){this.buffered=t.timeRanges},r.tick=function(){var e;if(null!=(e=this.media)&&e.readyState&&this.hasBuffered){var t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}},r.poll=function(e,t){var r,n,i=null==(r=this.hls)?void 0:r.config;if(i){var a=this.media;if(a){var s=a.seeking,o=this.seeking&&!s,l=!this.seeking&&s,u=a.paused&&!s||a.ended||0===a.playbackRate;if(this.seeking=s,e!==t)return t&&(this.ended=0),this.moved=!0,s||(this.nudgeRetry=0,i.nudgeOnVideoHole&&!u&&e>t&&this.nudgeOnVideoHole(e,t)),void(0===this.waiting&&this.stallResolved(e));if(l||o)o&&this.stallResolved(e);else{if(u)return this.nudgeRetry=0,this.stallResolved(e),void(!this.ended&&a.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(L.MEDIA_ENDED,{stalled:!1})));if(rr.getBuffered(a).length){var c=rr.bufferInfo(a,e,0),d=c.nextStart||0,f=this.fragmentTracker;if(s&&f&&this.hls){var h=zo(this.hls.inFlightFragments,e),p=c.len>2,m=!d||h||d-e>2&&!f.getPartialFragment(e);if(p||m)return;this.moved=!1}var g=null==(n=this.hls)?void 0:n.latestLevelDetails;if(!this.moved&&null!==this.stalled&&f){if(!(c.len>0||d))return;var v=Math.max(d,c.start||0)-e,y=null!=g&&g.live?2*g.targetduration:2,E=f.getPartialFragment(e);if(v>0&&(v<=y||E))return void(a.paused||this._trySkipBufferHole(E))}var b=i.detectStallWithCurrentTimeMs,S=self.performance.now(),T=this.waiting,w=this.stalled;if(null===w){if(!(T>0&&S-T<b))return void(this.stalled=S);w=this.stalled=T}var k=S-w;if(!s&&(k>=b||T)&&this.hls){var R;if("ended"===(null==(R=this.mediaSource)?void 0:R.readyState)&&(null==g||!g.live)&&Math.abs(e-((null==g?void 0:g.edge)||0))<1){if(this.ended)return;return this.ended=e||1,void this.hls.trigger(L.MEDIA_ENDED,{stalled:!0})}if(this._reportStall(c),!this.media||!this.hls)return}var A=rr.bufferInfo(a,e,i.maxBufferHole);this._tryFixBufferStall(A,k,e)}else this.nudgeRetry=0}}}},r.stallResolved=function(e){var t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){var r=self.performance.now()-t;this.log("playback not stuck anymore @"+e+", after "+Math.round(r)+"ms"),this.stallReported=!1,this.waiting=0,this.hls.trigger(L.STALL_RESOLVED,{})}},r.nudgeOnVideoHole=function(e,t){var r,n=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&null!=(r=this.buffered.audio)&&r.length&&n&&n.length>1&&e>n.end(0)){var i=rr.bufferedInfo(rr.timeRangesToArray(this.buffered.audio),e,0);if(i.len>1&&t>=i.start){var a=rr.timeRangesToArray(n),s=rr.bufferedInfo(a,t,0).bufferedIndex;if(s>-1&&s<a.length-1){var o=rr.bufferedInfo(a,e,0).bufferedIndex,l=a[s].end,u=a[s+1].start;if((-1===o||o>s)&&u-l<1&&e-l<2){var c=new Error("nudging playhead to flush pipeline after video hole. currentTime: "+e+" hole: "+l+" -> "+u+" buffered index: "+o);this.warn(c.message),this.media.currentTime+=1e-6;var d=this.fragmentTracker.getPartialFragment(e)||void 0,f=rr.bufferInfo(this.media,e,0);this.hls.trigger(L.ERROR,{type:k.MEDIA_ERROR,details:R.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:c,reason:c.message,frag:d,buffer:f.len,bufferInfo:f})}}}}},r._tryFixBufferStall=function(e,t,r){var n,i,a=this.fragmentTracker,s=this.media,o=null==(n=this.hls)?void 0:n.config;if(s&&a&&o){var l=null==(i=this.hls)?void 0:i.latestLevelDetails,u=a.getPartialFragment(r);if((u||null!=l&&l.live&&r<l.fragmentStart)&&(this._trySkipBufferHole(u)||!this.media))return;var c=e.buffered,d=this.adjacentTraversal(e,r);(c&&c.length>1&&e.len>o.maxBufferHole||e.nextStart&&(e.nextStart-r<o.maxBufferHole||d))&&(t>1e3*o.highBufferWatchdogPeriod||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}},r.adjacentTraversal=function(e,t){var r=this.fragmentTracker,n=e.nextStart;if(r&&n){var i=r.getFragAtPos(t,I),a=r.getFragAtPos(n,I);if(i&&a)return a.sn-i.sn<2}return!1},r._reportStall=function(e){var t=this.hls,r=this.media,n=this.stallReported,i=this.stalled;if(!n&&null!==i&&r&&t){this.stallReported=!0;var a=new Error("Playback stalling at @"+r.currentTime+" due to low buffer ("+at(e)+")");this.warn(a.message),t.trigger(L.ERROR,{type:k.MEDIA_ERROR,details:R.BUFFER_STALLED_ERROR,fatal:!1,error:a,buffer:e.len,bufferInfo:e,stalled:{start:i}})}},r._trySkipBufferHole=function(e){var t,r=this.fragmentTracker,n=this.media,i=null==(t=this.hls)?void 0:t.config;if(!n||!r||!i)return 0;var a=n.currentTime,s=rr.bufferInfo(n,a,0),o=a<s.start?s.start:s.nextStart;if(o&&this.hls){var l=s.len<=i.maxBufferHole,u=s.len>0&&s.len<1&&n.readyState<3,c=o-a;if(c>0&&(l||u)){if(c>i.maxBufferHole){var d=!1;if(0===a){var f=r.getAppendedFrag(0,I);f&&o<f.end&&(d=!0)}if(!d){var h=e||r.getAppendedFrag(a,I);if(h){var p;if(null==(p=this.hls.loadLevelObj)||!p.details)return 0;if(zo(this.hls.inFlightFragments,o))return 0;for(var m=!1,g=h.end;g<o;){var v=r.getAppendedFrag(g,I)||r.getPartialFragment(g);if(!v){m=!0;break}g+=v.duration}if(m)return 0}}}var y=Math.max(o+.05,a+.1);if(this.warn("skipping hole, adjusting currentTime from "+a+" to "+y),this.moved=!0,n.currentTime=y,null==e||!e.gap){var E=new Error("fragment loaded with buffer holes, seeking from "+a+" to "+y);this.hls.trigger(L.ERROR,{type:k.MEDIA_ERROR,details:R.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:E,reason:E.message,frag:e||void 0,buffer:s.len,bufferInfo:s})}return y}}return 0},r._tryNudgeBuffer=function(e){var t=this.hls,r=this.media,n=this.nudgeRetry,i=null==t?void 0:t.config;if(!r||!i)return 0;var a=r.currentTime;if(this.nudgeRetry++,n<i.nudgeMaxRetry){var s=a+(n+1)*i.nudgeOffset,o=new Error("Nudging 'currentTime' from "+a+" to "+s);this.warn(o.message),r.currentTime=s,t.trigger(L.ERROR,{type:k.MEDIA_ERROR,details:R.BUFFER_NUDGE_ON_STALL,error:o,fatal:!1,buffer:e.len,bufferInfo:e})}else{var l=new Error("Playhead still not moving while enough data buffered @"+a+" after "+i.nudgeMaxRetry+" nudges");this.error(l.message),t.trigger(L.ERROR,{type:k.MEDIA_ERROR,details:R.BUFFER_STALLED_ERROR,error:l,fatal:!0,buffer:e.len,bufferInfo:e})}},n(t,[{key:"hasBuffered",get:function(){return Object.keys(this.buffered).length>0}}])}(Zt);function zo(e,t){var r=Vo(e.main);if(r&&r.start<=t)return r;var n=Vo(e.audio);return n&&n.start<=t?n:null}function Vo(e){if(!e)return null;switch(e.state){case mn:case pn:case Tn:case wn:return null}return e.frag}function Ko(){if("undefined"!=typeof self)return self.VTTCue||self.TextTrackCue}function $o(e,t,r,n,i){var a=new e(t,r,"");try{a.value=n,i&&(a.type=i)}catch(s){a=new e(t,r,at(i?c({type:i},n):n))}return a}var qo=function(){var e=Ko();try{e&&new e(0,Number.POSITIVE_INFINITY,"")}catch(e){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}(),Wo=function(){function e(e){var t=this;this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.onEventCueEnter=function(){t.hls&&t.hls.trigger(L.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}var t=e.prototype;return t.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null},t._registerListeners=function(){var e=this.hls;e.on(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(L.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(L.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(L.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)},t._unregisterListeners=function(){var e=this.hls;e.off(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(L.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(L.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(L.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)},t.onMediaAttaching=function(e,t){var r;this.media=t.media,!1===(null==(r=t.overrides)?void 0:r.cueRemoval)&&(this.removeCues=!1)},t.onMediaAttached=function(){var e=this.hls.latestLevelDetails;e&&this.updateDateRangeCues(e)},t.onMediaDetaching=function(e,t){this.media=null,t.transferMedia||(this.id3Track&&(this.removeCues&&Ps(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})},t.onManifestLoading=function(){this.dateRangeCuesAppended={}},t.createTrack=function(e){var t=this.getID3Track(e.textTracks);return t.mode="hidden",t},t.getID3Track=function(e){if(this.media){for(var t=0;t<e.length;t++){var r=e[t];if("metadata"===r.kind&&"id3"===r.label)return Cs(r,this.media),r}return this.media.addTextTrack("metadata","id3")}},t.onFragParsingMetadata=function(e,t){if(this.media){var r=this.hls.config,n=r.enableEmsgMetadataCues,i=r.enableID3MetadataCues;if(n||i){var a=t.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));var s=Ko();if(s)for(var o=0;o<a.length;o++){var l=a[o].type;if((l!==Xn.emsg||n)&&i){var u=$n(a[o].data);if(u){var c=a[o].pts,d=c+a[o].duration;d>qo&&(d=qo),d-c<=0&&(d=c+.25);for(var f=0;f<u.length;f++){var h=u[f];if(!qn(h)){this.updateId3CueEnds(c,l);var p=$o(s,c,d,h,l);p&&this.id3Track.addCue(p)}}}}}}}},t.updateId3CueEnds=function(e,t){var r,n=null==(r=this.id3Track)?void 0:r.cues;if(n)for(var i=n.length;i--;){var a=n[i];a.type===t&&a.startTime<e&&a.endTime===qo&&(a.endTime=e)}},t.onBufferFlushing=function(e,t){var r=t.startOffset,n=t.endOffset,i=t.type,a=this.id3Track,s=this.hls;if(s){var o=s.config,l=o.enableEmsgMetadataCues,u=o.enableID3MetadataCues;a&&(l||u)&&xs(a,r,n,"audio"===i?function(e){return e.type===Xn.audioId3&&u}:"video"===i?function(e){return e.type===Xn.emsg&&l}:function(e){return e.type===Xn.audioId3&&u||e.type===Xn.emsg&&l})}},t.onLevelUpdated=function(e,t){var r=t.details;this.updateDateRangeCues(r,!0)},t.onLevelPtsUpdated=function(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)},t.updateDateRangeCues=function(e,t){var r=this;if(this.media&&e.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var n,i=this.id3Track,a=e.dateRanges,s=Object.keys(a),o=this.dateRangeCuesAppended;if(i&&t)if(null!=(n=i.cues)&&n.length)for(var l=Object.keys(o).filter(function(e){return!s.includes(e)}),u=function(){var e=l[c],t=o[e].cues;delete o[e],Object.keys(t).forEach(function(e){try{var n=t[e];n.removeEventListener("enter",r.onEventCueEnter),i.removeCue(n)}catch(e){}})},c=l.length;c--;)u();else o=this.dateRangeCuesAppended={};var d=e.fragments[e.fragments.length-1];if(0!==s.length&&S(null==d?void 0:d.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var f=Ko(),h=function(){var e=s[p],t=a[e],n=t.startTime,i=o[e],l=(null==i?void 0:i.cues)||{},u=(null==i?void 0:i.durationKnown)||!1,c=qo,d=t.duration;if(t.endDate&&null!==d)c=n+d,u=!0;else if(t.endOnNext&&!u){var h=s.reduce(function(e,r){if(r!==t.id){var n=a[r];if(n.class===t.class&&n.startDate>t.startDate&&(!e||t.startDate<e.startDate))return n}return e},null);h&&(c=h.startTime,u=!0)}for(var m=Object.keys(t.attr),g=0;g<m.length;g++){var v=m[g];if(dr(v)){var y=l[v];if(y)u&&!i.durationKnown?y.endTime=c:Math.abs(y.startTime-n)>.01&&(y.startTime=n,y.endTime=c);else if(f){var E=t.attr[v];fr(v)&&(E=W(E));var b=$o(f,n,c,{key:v,data:E},Xn.dateRange);b&&(b.id=e,r.id3Track.addCue(b),l[v]=b,r.hls.config.interstitialsController&&("X-ASSET-LIST"!==v&&"X-ASSET-URL"!==v||b.addEventListener("enter",r.onEventCueEnter)))}}}o[e]={cues:l,dateRange:t,durationKnown:u}},p=0;p<s.length;p++)h()}}},e}(),Yo=function(){function e(e){var t=this;this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=function(){var e=t.media,r=t.levelDetails;if(e&&r){t.currentTime=e.currentTime;var n=t.computeLatency();if(null!==n){t._latency=n;var i=t.config,a=i.lowLatencyMode,s=i.maxLiveSyncPlaybackRate;if(a&&1!==s&&r.live){var o=t.targetLatency;if(null!==o){var l=n-o;if(l<Math.min(t.maxLatency,o+r.targetduration)&&l>.05&&t.forwardBufferLength>1){var u=Math.min(2,Math.max(1,s)),c=Math.round(2/(1+Math.exp(-.75*l-t.edgeStalled))*20)/20,d=Math.min(u,Math.max(1,c));t.changeMediaPlaybackRate(e,d)}else 1!==e.playbackRate&&0!==e.playbackRate&&t.changeMediaPlaybackRate(e,1)}}}}},this.hls=e,this.config=e.config,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null},t.registerListeners=function(){var e=this.hls;e&&(e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(L.ERROR,this.onError,this))},t.unregisterListeners=function(){var e=this.hls;e&&(e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(L.ERROR,this.onError,this))},t.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)},t.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)},t.onManifestLoading=function(){this._latency=null,this.stallCount=0},t.onLevelUpdated=function(e,t){var r=t.details;r.advanced&&this.onTimeupdate(),!r.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)},t.onError=function(e,t){var r;t.details===R.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&null!=(r=this.levelDetails)&&r.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))},t.changeMediaPlaybackRate=function(e,t){var r,n;e.playbackRate!==t&&(null==(r=this.hls)||r.logger.debug("[latency-controller]: latency="+this.latency.toFixed(3)+", targetLatency="+(null==(n=this.targetLatency)?void 0:n.toFixed(3))+", forwardBufferLength="+this.forwardBufferLength.toFixed(3)+": adjusting playback rate from "+e.playbackRate+" to "+t),e.playbackRate=t)},t.estimateLiveEdge=function(){var e=this.levelDetails;return null===e?null:e.edge+e.age},t.computeLatency=function(){var e=this.estimateLiveEdge();return null===e?null:e-this.currentTime},n(e,[{key:"levelDetails",get:function(){var e;return(null==(e=this.hls)?void 0:e.latestLevelDetails)||null}},{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var e=this.config;if(void 0!==e.liveMaxLatencyDuration)return e.liveMaxLatencyDuration;var t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}},{key:"targetLatency",get:function(){var e=this.levelDetails;if(null===e||null===this.hls)return null;var t=e.holdBack,r=e.partHoldBack,n=e.targetduration,i=this.config,a=i.liveSyncDuration,s=i.liveSyncDurationCount,o=i.lowLatencyMode,l=this.hls.userConfig,u=o&&r||t;(this._targetLatencyUpdated||l.liveSyncDuration||l.liveSyncDurationCount||0===u)&&(u=void 0!==a?a:s*n);var c=n;return u+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,c)},set:function(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}},{key:"liveSyncPosition",get:function(){var e=this.estimateLiveEdge(),t=this.targetLatency;if(null===e||null===t)return null;var r=this.levelDetails;if(null===r)return null;var n=r.edge,i=e-t-this.edgeStalled,a=n-r.totalduration,s=n-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(a,i),s)}},{key:"drift",get:function(){var e=this.levelDetails;return null===e?1:e.drift}},{key:"edgeStalled",get:function(){var e=this.levelDetails;if(null===e)return 0;var t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}},{key:"forwardBufferLength",get:function(){var e=this.media,t=this.levelDetails;if(!e||!t)return 0;var r=e.buffered.length;return(r?e.buffered.end(r-1):t.edge)-this.currentTime}}])}(),Xo=function(e){function t(t,r){var n;return(n=e.call(this,t,"level-controller")||this)._levels=[],n._firstLevel=-1,n._maxAutoLevel=-1,n._startLevel=void 0,n.currentLevel=null,n.currentLevelIndex=-1,n.manualLevelIndex=-1,n.steering=void 0,n.onParsedComplete=void 0,n.steering=r,n._registerListeners(),n}o(t,e);var r=t.prototype;return r._registerListeners=function(){var e=this.hls;e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(L.LEVEL_LOADED,this.onLevelLoaded,this),e.on(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(L.FRAG_BUFFERED,this.onFragBuffered,this),e.on(L.ERROR,this.onError,this)},r._unregisterListeners=function(){var e=this.hls;e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(L.LEVEL_LOADED,this.onLevelLoaded,this),e.off(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(L.FRAG_BUFFERED,this.onFragBuffered,this),e.off(L.ERROR,this.onError,this)},r.destroy=function(){this._unregisterListeners(),this.steering=null,this.resetLevels(),e.prototype.destroy.call(this)},r.stopLoad=function(){this._levels.forEach(function(e){e.loadError=0,e.fragmentError=0}),e.prototype.stopLoad.call(this)},r.resetLevels=function(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1},r.onManifestLoading=function(e,t){this.resetLevels()},r.onManifestLoaded=function(e,t){var r=this,n=this.hls.config.preferManagedMediaSource,i=[],a={},s={},o=!1,l=!1,u=!1;t.levels.forEach(function(e){var t=e.attrs,c=e.audioCodec,d=e.videoCodec;c&&(e.audioCodec=c=Ue(c,n)||void 0),d&&(d=e.videoCodec=function(e){for(var t=e.split(","),r=0;r<t.length;r++){var n=t[r].split(".");n.length>2&&"avc1"===n[0]&&(t[r]="avc1."+parseInt(n[1]).toString(16)+("000"+parseInt(n[2]).toString(16)).slice(-4))}return t.join(",")}(d));var f=e.width,h=e.height,p=e.unknownCodecs,m=p?p.length:0;if(p)for(var g=m;g--;){var v=p[g];r.isAudioSupported(v)?(e.audioCodec=c=c?c+","+v:v,m--,De.audio[c.substring(0,4)]=2):r.isVideoSupported(v)&&(e.videoCodec=d=d?d+","+v:v,m--,De.video[d.substring(0,4)]=2)}if(o||(o=!(!f||!h)),l||(l=!!d),u||(u=!!c),m||c&&!r.isAudioSupported(c)||d&&!r.isVideoSupported(d))r.log('Some or all CODECS not supported "'+t.CODECS+'"');else{var y=t.CODECS,E=t["FRAME-RATE"],b=t["HDCP-LEVEL"],S=t["PATHWAY-ID"],T=t.RESOLUTION,w=t["VIDEO-RANGE"],k=(S||".")+"-"+e.bitrate+"-"+T+"-"+E+"-"+y+"-"+w+"-"+b;if(a[k])if(a[k].uri===e.url||e.attrs["PATHWAY-ID"])a[k].addGroupId("audio",t.AUDIO),a[k].addGroupId("text",t.SUBTITLES);else{var R=s[k]+=1;e.attrs["PATHWAY-ID"]=new Array(R+1).join(".");var L=r.createLevel(e);a[k]=L,i.push(L)}else{var A=r.createLevel(e);a[k]=A,s[k]=1,i.push(A)}}}),this.filterAndSortMediaOptions(i,t,o,l,u)},r.createLevel=function(e){var t=new rt(e),r=e.supplemental;if(null!=r&&r.videoCodec&&!this.isVideoSupported(r.videoCodec)){var n=new Error('SUPPLEMENTAL-CODECS not supported "'+r.videoCodec+'"');this.log(n.message),t.supportedResult=Ke(n,[])}return t},r.isAudioSupported=function(e){return Ie(e,"audio",this.hls.config.preferManagedMediaSource)},r.isVideoSupported=function(e){return Ie(e,"video",this.hls.config.preferManagedMediaSource)},r.filterAndSortMediaOptions=function(e,t,r,n,i){var a=this,s=[],o=[],l=e;if((r||n)&&i&&(l=l.filter(function(e){var t,r=e.videoCodec,n=e.videoRange,i=e.width,a=e.height;return(!!r||!(!i||!a))&&(!!(t=n)&&Xe.indexOf(t)>-1)})),0!==l.length){t.audioTracks&&Qo(s=t.audioTracks.filter(function(e){return!e.audioCodec||a.isAudioSupported(e.audioCodec)})),t.subtitles&&Qo(o=t.subtitles);var u=l.slice(0);l.sort(function(e,t){if(e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"])return(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1;if(r&&e.height!==t.height)return e.height-t.height;if(e.frameRate!==t.frameRate)return e.frameRate-t.frameRate;if(e.videoRange!==t.videoRange)return Xe.indexOf(e.videoRange)-Xe.indexOf(t.videoRange);if(e.videoCodec!==t.videoCodec){var n=Oe(e.videoCodec),i=Oe(t.videoCodec);if(n!==i)return i-n}if(e.uri===t.uri&&e.codecSet!==t.codecSet){var a=Me(e.codecSet),s=Me(t.codecSet);if(a!==s)return s-a}return e.averageBitrate!==t.averageBitrate?e.averageBitrate-t.averageBitrate:0});var c=u[0];if(this.steering&&(l=this.steering.filterParsedLevels(l)).length!==u.length)for(var d=0;d<u.length;d++)if(u[d].pathwayId===l[0].pathwayId){c=u[d];break}this._levels=l;for(var f=0;f<l.length;f++)if(l[f]===c){var h;this._firstLevel=f;var p=c.bitrate,m=this.hls.bandwidthEstimate;if(this.log("manifest loaded, "+l.length+" level(s) found, first bitrate: "+p),void 0===(null==(h=this.hls.userConfig)?void 0:h.abrEwmaDefaultEstimate)){var g=Math.min(p,this.hls.config.abrEwmaDefaultEstimateMax);g>m&&m===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=g)}break}var v=i&&!n,y=this.hls.config,E=!(!y.audioStreamController||!y.audioTrackController),b={levels:l,audioTracks:s,subtitleTracks:o,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:i,video:n,altAudio:E&&!v&&s.some(function(e){return!!e.url})};this.hls.trigger(L.MANIFEST_PARSED,b)}else Promise.resolve().then(function(){if(a.hls){var e="no level with compatible codecs found in manifest",r=e;t.levels.length&&(r="one or more CODECS in variant not supported: "+at(t.levels.map(function(e){return e.attrs.CODECS}).filter(function(e,t,r){return r.indexOf(e)===t})),a.warn(r),e+=" ("+r+")");var n=new Error(e);a.hls.trigger(L.ERROR,{type:k.MEDIA_ERROR,details:R.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:n,reason:r})}})},r.onError=function(e,t){!t.fatal&&t.context&&t.context.type===_&&t.context.level===this.level&&this.checkRetry(t)},r.onFragBuffered=function(e,t){var r=t.frag;if(void 0!==r&&r.type===I){var n=r.elementaryStreams;if(!Object.keys(n).some(function(e){return!!n[e]}))return;var i=this._levels[r.level];null!=i&&i.loadError&&(this.log("Resetting level error count of "+i.loadError+" on frag buffered"),i.loadError=0)}},r.onLevelLoaded=function(e,t){var r,n,i=t.level,a=t.details,s=t.levelInfo;if(!s)return this.warn("Invalid level index "+i),void(null!=(n=t.deliveryDirectives)&&n.skip&&(a.deltaUpdateFailed=!0));if(s===this.currentLevel||t.withoutMultiVariant){0===s.fragmentError&&(s.loadError=0);var o=s.details;o===t.details&&o.advanced&&(o=void 0),this.playlistLoaded(i,t,o)}else null!=(r=t.deliveryDirectives)&&r.skip&&(a.deltaUpdateFailed=!0)},r.loadPlaylist=function(t){e.prototype.loadPlaylist.call(this),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,t)},r.loadingPlaylist=function(t,r){e.prototype.loadingPlaylist.call(this,t,r);var n=this.getUrlWithDirectives(t.uri,r),i=this.currentLevelIndex,a=t.attrs["PATHWAY-ID"],s=t.details,o=null==s?void 0:s.age;this.log("Loading level index "+i+(void 0!==(null==r?void 0:r.msn)?" at sn "+r.msn+" part "+r.part:"")+(a?" Pathway "+a:"")+(o&&s.live?" age "+o.toFixed(1)+(s.type?" "+s.type||0:""):"")+" "+n),this.hls.trigger(L.LEVEL_LOADING,{url:n,level:i,levelInfo:t,pathwayId:t.attrs["PATHWAY-ID"],id:0,deliveryDirectives:r||null})},r.removeLevel=function(e){var t,r=this;if(1!==this._levels.length){var n=this._levels.filter(function(t,n){return n!==e||(r.steering&&r.steering.removeLevel(t),t===r.currentLevel&&(r.currentLevel=null,r.currentLevelIndex=-1,t.details&&t.details.fragments.forEach(function(e){return e.level=-1})),!1)});on(n),this._levels=n,this.currentLevelIndex>-1&&null!=(t=this.currentLevel)&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);var i=n.length-1;this._firstLevel=Math.min(this._firstLevel,i),this._startLevel&&(this._startLevel=Math.min(this._startLevel,i)),this.hls.trigger(L.LEVELS_UPDATED,{levels:n})}},r.onLevelsUpdated=function(e,t){var r=t.levels;this._levels=r},r.checkMaxAutoUpdated=function(){var e=this.hls,t=e.autoLevelCapping,r=e.maxAutoLevel,n=e.maxHdcpLevel;this._maxAutoLevel!==r&&(this._maxAutoLevel=r,this.hls.trigger(L.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:t,levels:this.levels,maxAutoLevel:r,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))},n(t,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"loadLevelObj",get:function(){return this.currentLevel}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;if(0!==t.length){if(e<0||e>=t.length){var r=new Error("invalid level idx"),n=e<0;if(this.hls.trigger(L.ERROR,{type:k.OTHER_ERROR,details:R.LEVEL_SWITCH_ERROR,level:e,fatal:n,error:r,reason:r.message}),n)return;e=Math.min(e,t.length-1)}var i=this.currentLevelIndex,a=this.currentLevel,s=a?a.attrs["PATHWAY-ID"]:void 0,o=t[e],l=o.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=o,i!==e||!a||s!==l){this.log("Switching to level "+e+" ("+(o.height?o.height+"p ":"")+(o.videoRange?o.videoRange+" ":"")+(o.codecSet?o.codecSet+" ":"")+"@"+o.bitrate+")"+(l?" with Pathway "+l:"")+" from level "+i+(s?" with Pathway "+s:""));var u={level:e,attrs:o.attrs,details:o.details,bitrate:o.bitrate,averageBitrate:o.averageBitrate,maxBitrate:o.maxBitrate,realBitrate:o.realBitrate,width:o.width,height:o.height,codecSet:o.codecSet,audioCodec:o.audioCodec,videoCodec:o.videoCodec,audioGroups:o.audioGroups,subtitleGroups:o.subtitleGroups,loaded:o.loaded,loadError:o.loadError,fragmentError:o.fragmentError,name:o.name,id:o.id,uri:o.uri,url:o.url,urlId:0,audioGroupIds:o.audioGroupIds,textGroupIds:o.textGroupIds};this.hls.trigger(L.LEVEL_SWITCHING,u);var c=o.details;if(!c||c.live){var d=this.switchParams(o.uri,null==a?void 0:a.details,c);this.loadPlaylist(d)}}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this.hls.firstAutoLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"pathways",get:function(){return this.steering?this.steering.pathways():[]}},{key:"pathwayPriority",get:function(){return this.steering?this.steering.pathwayPriority:null},set:function(e){if(this.steering){var t=this.steering.pathways(),r=e.filter(function(e){return-1!==t.indexOf(e)});if(e.length<1)return void this.warn("pathwayPriority "+e+" should contain at least one pathway from list: "+t);this.steering.pathwayPriority=r}}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}])}(ua);function Qo(e){var t={};e.forEach(function(e){var r=e.groupId||"";e.id=t[r]=t[r]||0,t[r]++})}function Jo(){return self.SourceBuffer||self.WebKitSourceBuffer}function Zo(){if(!V())return!1;var e=Jo();return!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove}var el=function(e){function t(t,r,n){var i;return(i=e.call(this,t,r,n,"stream-controller",I)||this).audioCodecSwap=!1,i.level=-1,i._forceStartLoad=!1,i._hasEnoughToStart=!1,i.altAudio=0,i.audioOnly=!1,i.fragPlaying=null,i.fragLastKbps=0,i.couldBacktrack=!1,i.backtrackFragment=null,i.audioCodecSwitch=!1,i.videoBuffer=null,i.onMediaPlaying=function(){i.tick()},i.onMediaSeeked=function(){var e=i.media,t=e?e.currentTime:null;if(null!==t&&S(t)&&(i.log("Media seeked to "+t.toFixed(3)),i.getBufferedFrag(t))){var r=i.getFwdBufferInfoAtPos(e,t,I,0);null!==r&&0!==r.len?i.tick():i.warn("Main forward buffer length at "+t+' on "seeked" event '+(r?r.len:"empty")+")")}},i.registerListeners(),i}o(t,e);var r=t.prototype;return r.registerListeners=function(){e.prototype.registerListeners.call(this);var t=this.hls;t.on(L.MANIFEST_PARSED,this.onManifestParsed,this),t.on(L.LEVEL_LOADING,this.onLevelLoading,this),t.on(L.LEVEL_LOADED,this.onLevelLoaded,this),t.on(L.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(L.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(L.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(L.BUFFER_CREATED,this.onBufferCreated,this),t.on(L.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(L.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(L.FRAG_BUFFERED,this.onFragBuffered,this)},r.unregisterListeners=function(){e.prototype.unregisterListeners.call(this);var t=this.hls;t.off(L.MANIFEST_PARSED,this.onManifestParsed,this),t.off(L.LEVEL_LOADED,this.onLevelLoaded,this),t.off(L.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(L.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(L.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(L.BUFFER_CREATED,this.onBufferCreated,this),t.off(L.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(L.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(L.FRAG_BUFFERED,this.onFragBuffered,this)},r.onHandlerDestroying=function(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),e.prototype.onHandlerDestroying.call(this)},r.startLoad=function(e,t){if(this.levels){var r=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){var i=n.startLevel;-1===i&&(n.config.testBandwidth&&this.levels.length>1?(i=0,this.bitrateTest=!0):i=n.firstAutoLevel),n.nextLoadLevel=i,this.level=n.loadLevel,this._hasEnoughToStart=!!t}r>0&&-1===e&&!t&&(this.log("Override startPosition with lastCurrentTime @"+r.toFixed(3)),e=r),this.state=mn,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=pn},r.stopLoad=function(){this._forceStartLoad=!1,e.prototype.stopLoad.call(this)},r.doTick=function(){switch(this.state){case Rn:var e=this.levels,t=this.level,r=null==e?void 0:e[t],n=null==r?void 0:r.details;if(n&&(!n.live||this.levelLastLoaded===r&&!this.waitForLive(r))){if(this.waitForCdnTuneIn(n))break;this.state=mn;break}if(this.hls.nextLoadLevel!==this.level){this.state=mn;break}break;case yn:var i,a=self.performance.now(),s=this.retryDate;if(!s||a>=s||null!=(i=this.media)&&i.seeking){var o=this.levels,l=this.level,u=null==o?void 0:o[l];this.resetStartWhenNotLoaded(u||null),this.state=mn}}this.state===mn&&this.doTickIdle(),this.onTickEnd()},r.onTickEnd=function(){var t;e.prototype.onTickEnd.call(this),null!=(t=this.media)&&t.readyState&&!1===this.media.seeking&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()},r.doTickIdle=function(){var e=this.hls,t=this.levelLastLoaded,r=this.levels,n=this.media;if(null!==t&&(n||this.primaryPrefetch||!this.startFragRequested&&e.config.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)){var i=this.buffering?e.nextLoadLevel:e.loadLevel;if(null!=r&&r[i]){var a=r[i],s=this.getMainFwdBufferInfo();if(null!==s){var o=this.getLevelDetails();if(o&&this._streamEnded(s,o)){var l={};return 2===this.altAudio&&(l.type="video"),this.hls.trigger(L.BUFFER_EOS,l),void(this.state=Tn)}if(this.buffering){e.loadLevel!==i&&-1===e.manualLevel&&this.log("Adapting to level "+i+" from level "+this.level),this.level=e.nextLoadLevel=i;var u=a.details;if(!u||this.state===Rn||this.waitForLive(a))return this.level=i,this.state=Rn,void(this.startFragRequested=!1);var c=s.len,d=this.getMaxBufferLength(a.maxBitrate);if(!(c>=d)){this.backtrackFragment&&this.backtrackFragment.start>s.end&&(this.backtrackFragment=null);var f=this.backtrackFragment?this.backtrackFragment.start:s.end,h=this.getNextFragment(f,u);if(this.couldBacktrack&&!this.fragPrevious&&h&&ee(h)&&this.fragmentTracker.getState(h)!==Nt){var p,m=(null!=(p=this.backtrackFragment)?p:h).sn-u.startSN,g=u.fragments[m-1];g&&h.cc===g.cc&&(h=g,this.fragmentTracker.removeFragment(g))}else this.backtrackFragment&&s.len&&(this.backtrackFragment=null);if(h&&this.isLoopLoading(h,f)){if(!h.gap){var v=this.audioOnly&&!this.altAudio?X:Q,y=(v===Q?this.videoBuffer:this.mediaBuffer)||this.media;y&&this.afterBufferFlushed(y,v,I)}h=this.getNextFragmentLoopLoading(h,u,s,I,d)}h&&(!h.initSegment||h.initSegment.data||this.bitrateTest||(h=h.initSegment),this.loadFragment(h,a,f))}}}}}},r.loadFragment=function(t,r,n){var i=this.fragmentTracker.getState(t);i===Ot||i===Ft?ee(t)?this.bitrateTest?(this.log("Fragment "+t.sn+" of level "+t.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(t,r)):e.prototype.loadFragment.call(this,t,r,n):this._loadInitSegment(t,r):this.clearTrackerIfNeeded(t)},r.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,I)},r.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.end+.5):null},r.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},r.nextLevelSwitch=function(){var e=this.levels,t=this.media;if(null!=t&&t.readyState){var r,n=this.getAppendedFrag(t.currentTime);n&&n.start>1&&this.flushMainBuffer(0,n.start-1);var i=this.getLevelDetails();if(null!=i&&i.live){var a=this.getMainFwdBufferInfo();if(!a||a.len<2*i.targetduration)return}if(!t.paused&&e){var s=e[this.hls.nextLoadLevel],o=this.fragLastKbps;r=o&&this.fragCurrent?this.fragCurrent.duration*s.maxBitrate/(1e3*o)+1:0}else r=0;var l=this.getBufferedFrag(t.currentTime+r);if(l){var u=this.followingBufferedFrag(l);if(u){this.abortCurrentFrag();var c=u.maxStartPTS?u.maxStartPTS:u.start,d=u.duration,f=Math.max(l.end,c+Math.min(Math.max(d-this.config.maxFragLookUpTolerance,d*(this.couldBacktrack?.5:.125)),d*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(f,Number.POSITIVE_INFINITY)}}}},r.abortCurrentFrag=function(){var e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case gn:case vn:case yn:case bn:case Sn:this.state=mn}this.nextLoadPosition=this.getLoadPosition()},r.flushMainBuffer=function(t,r){e.prototype.flushMainBuffer.call(this,t,r,2===this.altAudio?"video":null)},r.onMediaAttached=function(t,r){e.prototype.onMediaAttached.call(this,t,r);var n=r.media;ls(n,"playing",this.onMediaPlaying),ls(n,"seeked",this.onMediaSeeked)},r.onMediaDetaching=function(t,r){var n=this.media;n&&(us(n,"playing",this.onMediaPlaying),us(n,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,e.prototype.onMediaDetaching.call(this,t,r),r.transferMedia||(this._hasEnoughToStart=!1)},r.onManifestLoading=function(){e.prototype.onManifestLoading.call(this),this.log("Trigger BUFFER_RESET"),this.hls.trigger(L.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1},r.onManifestParsed=function(e,t){var r,n,i=!1,a=!1;t.levels.forEach(function(e){var t=e.audioCodec;t&&(i=i||-1!==t.indexOf("mp4a.40.2"),a=a||-1!==t.indexOf("mp4a.40.5"))}),this.audioCodecSwitch=i&&a&&!("function"==typeof(null==(n=Jo())||null==(r=n.prototype)?void 0:r.changeType)),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1},r.onLevelLoading=function(e,t){if(this.levels&&this.state===mn){var r=t.levelInfo;(!r.details||r.details.live&&(this.levelLastLoaded!==r||r.details.expired)||this.waitForCdnTuneIn(r.details))&&(this.state=Rn)}},r.onLevelLoaded=function(e,t){var r,n=this.levels,i=this.startFragRequested,a=t.level,s=t.details,o=s.totalduration;if(n){this.log("Level "+a+" loaded ["+s.startSN+","+s.endSN+"]"+(s.lastPartSn?"[part-"+s.lastPartSn+"-"+s.lastPartIndex+"]":"")+", cc ["+s.startCC+", "+s.endCC+"] duration:"+o);var l=t.levelInfo,u=this.fragCurrent;!u||this.state!==vn&&this.state!==yn||u.level!==t.level&&u.loader&&this.abortCurrentFrag();var c=0;if(s.live||null!=(r=l.details)&&r.live){var d;if(this.checkLiveUpdate(s),s.deltaUpdateFailed)return;c=this.alignPlaylists(s,l.details,null==(d=this.levelLastLoaded)?void 0:d.details)}if(l.details=s,this.levelLastLoaded=l,i||this.setStartPosition(s,c),this.hls.trigger(L.LEVEL_UPDATED,{details:s,level:a}),this.state===Rn){if(this.waitForCdnTuneIn(s))return;this.state=mn}i&&s.live&&this.synchronizeToLiveEdge(s),this.tick()}else this.warn("Levels were reset while loading level "+a)},r.synchronizeToLiveEdge=function(e){var t=this.config,r=this.media;if(r){var n=this.hls.liveSyncPosition,i=this.getLoadPosition(),a=e.fragmentStart,s=e.edge,o=i>=a-t.maxFragLookUpTolerance&&i<=s;if(null!==n&&r.duration>n&&(i<n||!o)){var l=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!o&&r.readyState<4||i<s-l)&&(this._hasEnoughToStart||(this.nextLoadPosition=n),r.readyState))if(this.warn("Playback: "+i.toFixed(3)+" is located too far from the end of live sliding playlist: "+s+", reset currentTime to : "+n.toFixed(3)),"buffered"===this.config.liveSyncMode){var u,c=rr.bufferInfo(r,n,0);if(null==c||null==(u=c.buffered)||!u.length)return void(r.currentTime=n);if(c.start<=i)return void(r.currentTime=n);var d=rr.bufferedInfo(c.buffered,i,0).nextStart;d&&(r.currentTime=d)}else r.currentTime=n}}},r._handleFragmentLoadProgress=function(e){var t,r=e.frag,n=e.part,i=e.payload,a=this.levels;if(a){var s=a[r.level];if(s){var o=s.details;if(!o)return this.warn("Dropping fragment "+r.sn+" of level "+r.level+" after level details were reset"),void this.fragmentTracker.removeFragment(r);var l=s.videoCodec,u=o.PTSKnown||!o.live,c=null==(t=r.initSegment)?void 0:t.data,d=this._getAudioCodec(s),f=this.transmuxer=this.transmuxer||new oa(this.hls,I,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),h=n?n.index:-1,p=-1!==h,m=new er(r.level,r.sn,r.stats.chunkCount,i.byteLength,h,p),g=this.initPTS[r.cc];f.push(i,c,d,l,r,n,o.totalduration,u,m,g)}else this.warn("Level "+r.level+" not found on progress")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered")},r.onAudioTrackSwitching=function(e,t){var r=this,n=this.hls,i=2===this.altAudio;if(ht(t.url,n))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(i)return this.fragmentTracker.removeAllFragments(),n.once(L.BUFFER_FLUSHED,function(){var e;null==(e=r.hls)||e.trigger(L.AUDIO_TRACK_SWITCHED,t)}),void n.trigger(L.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});n.trigger(L.AUDIO_TRACK_SWITCHED,t)}},r.onAudioTrackSwitched=function(e,t){var r=ht(t.url,this.hls);if(r){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=r?2:0,this.tick()},r.onBufferCreated=function(e,t){var r,n,i=t.tracks,a=!1;for(var s in i){var o=i[s];if("main"===o.id){if(n=s,r=o,"video"===s){var l=i[s];l&&(this.videoBuffer=l.buffer)}}else a=!0}a&&r?(this.log("Alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media},r.onFragBuffered=function(e,t){var r=t.frag,n=t.part,i=r.type===I;if(i){if(this.fragContextChanged(r))return this.warn("Fragment "+r.sn+(n?" p: "+n.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===Sn&&(this.state=mn));var a=n?n.stats:r.stats;this.fragLastKbps=Math.round(8*a.total/(a.buffering.end-a.loading.first)),ee(r)&&(this.fragPrevious=r),this.fragBufferedComplete(r,n)}var s=this.media;s&&(!this._hasEnoughToStart&&rr.getBuffered(s).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),i&&this.tick())},r.onError=function(e,t){var r;if(t.fatal)this.state=wn;else switch(t.details){case R.FRAG_GAP:case R.FRAG_PARSING_ERROR:case R.FRAG_DECRYPT_ERROR:case R.FRAG_LOAD_ERROR:case R.FRAG_LOAD_TIMEOUT:case R.KEY_LOAD_ERROR:case R.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(I,t);break;case R.LEVEL_LOAD_ERROR:case R.LEVEL_LOAD_TIMEOUT:case R.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==Rn||(null==(r=t.context)?void 0:r.type)!==_||(this.state=mn);break;case R.BUFFER_ADD_CODEC_ERROR:case R.BUFFER_APPEND_ERROR:if("main"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case R.BUFFER_FULL_ERROR:if("main"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case R.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}},r.onFragLoadEmergencyAborted=function(){this.state=mn,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()},r.onBufferFlushed=function(e,t){var r=t.type;if(r!==X||!this.altAudio){var n=(r===Q?this.videoBuffer:this.mediaBuffer)||this.media;n&&(this.afterBufferFlushed(n,r,I),this.tick())}},r.onLevelsUpdated=function(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,-1===this.level&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels},r.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},r.seekToStartPos=function(){var e=this.media;if(e){var t=e.currentTime,r=this.startPosition;if(r>=0&&t<r){if(e.seeking)return void this.log("could not seek to "+r+", already seeking at "+t);var n=this.timelineOffset;n&&r&&(r+=n);var i=this.getLevelDetails(),a=rr.getBuffered(e),s=a.length?a.start(0):0,o=s-r,l=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||o>0&&(o<l||this.loadingParts&&o<2*((null==i?void 0:i.partTarget)||0)))&&(this.log("adjusting start position by "+o+" to match buffer start"),r+=o,this.startPosition=r),t<r&&(this.log("seek to target start position "+r+" from current time "+t+" buffer start "+s),e.currentTime=r)}}},r._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t},r._loadBitrateTestFrag=function(e,t){var r=this;e.bitrateTest=!0,this._doFragLoad(e,t).then(function(e){var n=r.hls,i=null==e?void 0:e.frag;if(i&&!r.fragContextChanged(i)){t.fragmentError=0,r.state=mn,r.startFragRequested=!1,r.bitrateTest=!1;var a=i.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),n.trigger(L.FRAG_LOADED,e),i.bitrateTest=!1}})},r._handleTransmuxComplete=function(e){var t,r=this.playlistType,n=this.hls,i=e.remuxResult,a=e.chunkMeta,s=this.getCurrentContext(a);if(s){var o=s.frag,l=s.part,u=s.level,c=i.video,d=i.text,f=i.id3,h=i.initSegment,p=u.details,m=this.altAudio?void 0:i.audio;if(this.fragContextChanged(o))this.fragmentTracker.removeFragment(o);else{if(this.state=bn,h){if(null!=h&&h.tracks){var g=o.initSegment||o;this._bufferInitSegment(u,h.tracks,g,a),n.trigger(L.FRAG_PARSING_INIT_SEGMENT,{frag:g,id:r,tracks:h.tracks})}var v=h.initPTS,y=h.timescale,E=this.initPTS[o.cc];!S(v)||E&&E.baseTime===v&&E.timescale===y||(this.initPTS[o.cc]={baseTime:v,timescale:y},n.trigger(L.INIT_PTS_FOUND,{frag:o,id:r,initPTS:v,timescale:y}))}if(c&&p){m&&"audiovideo"===c.type&&this.logMuxedErr(o);var b=p.fragments[o.sn-1-p.startSN],T=o.sn===p.startSN,w=!b||o.cc>b.cc;if(!1!==i.independent){var k=c.startPTS,R=c.endPTS,A=c.startDTS,_=c.endDTS;if(l)l.elementaryStreams[c.type]={startPTS:k,endPTS:R,startDTS:A,endDTS:_};else if(c.firstKeyFrame&&c.independent&&1===a.id&&!w&&(this.couldBacktrack=!0),c.dropped&&c.independent){var D=this.getMainFwdBufferInfo(),C=(D?D.end:this.getLoadPosition())+this.config.maxBufferHole,I=c.firstKeyFramePTS?c.firstKeyFramePTS:k;if(!T&&C<I-this.config.maxBufferHole&&!w)return void this.backtrack(o);w&&(o.gap=!0),o.setElementaryStreamInfo(c.type,o.start,R,o.start,_,!0)}else T&&k-(p.appliedTimelineOffset||0)>2&&(o.gap=!0);o.setElementaryStreamInfo(c.type,k,R,A,_),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(c,o,l,a,T||w)}else{if(!T&&!w)return void this.backtrack(o);o.gap=!0}}if(m){var P=m.startPTS,x=m.endPTS,O=m.startDTS,M=m.endDTS;l&&(l.elementaryStreams[X]={startPTS:P,endPTS:x,startDTS:O,endDTS:M}),o.setElementaryStreamInfo(X,P,x,O,M),this.bufferFragmentData(m,o,l,a)}if(p&&null!=f&&null!=(t=f.samples)&&t.length){var F={id:r,frag:o,details:p,samples:f.samples};n.trigger(L.FRAG_PARSING_METADATA,F)}if(p&&d){var N={id:r,frag:o,details:p,samples:d.samples};n.trigger(L.FRAG_PARSING_USERDATA,N)}}}else this.resetWhenMissingContext(a)},r.logMuxedErr=function(e){this.warn((ee(e)?"Media":"Init")+" segment with muxed audiovideo where only video expected: "+e.url)},r._bufferInitSegment=function(e,t,r,n){var i=this;if(this.state===bn){this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(r));var a=t.audio,s=t.video,o=t.audiovideo;if(a){var l=e.audioCodec,u=Be(a.codec,l);"mp4a"===u&&(u="mp4a.40.5");var c=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){u&&(u=-1!==u.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5");var d=a.metadata;d&&"channelCount"in d&&1!==(d.channelCount||1)&&-1===c.indexOf("firefox")&&(u="mp4a.40.5")}u&&-1!==u.indexOf("mp4a.40.5")&&-1!==c.indexOf("android")&&"audio/mpeg"!==a.container&&(u="mp4a.40.2",this.log("Android: force audio codec to "+u)),l&&l!==u&&this.log('Swapping manifest audio codec "'+l+'" for "'+u+'"'),a.levelCodec=u,a.id=I,this.log("Init audio buffer, container:"+a.container+", codecs[selected/level/parsed]=["+(u||"")+"/"+(l||"")+"/"+a.codec+"]"),delete t.audiovideo}if(s){s.levelCodec=e.videoCodec,s.id=I;var f=s.codec;if(4===(null==f?void 0:f.length))switch(f){case"hvc1":case"hev1":s.codec="hvc1.1.6.L120.90";break;case"av01":s.codec="av01.0.04M.08";break;case"avc1":s.codec="avc1.42e01e"}this.log("Init video buffer, container:"+s.container+", codecs[level/parsed]=["+(e.videoCodec||"")+"/"+f+"]"+(s.codec!==f?" parsed-corrected="+s.codec:"")+(s.supplemental?" supplemental="+s.supplemental:"")),delete t.audiovideo}o&&(this.log("Init audiovideo buffer, container:"+o.container+", codecs[level/parsed]=["+e.codecs+"/"+o.codec+"]"),delete t.video,delete t.audio);var h=Object.keys(t);if(h.length){if(this.hls.trigger(L.BUFFER_CODECS,t),!this.hls)return;h.forEach(function(e){var a=t[e].initSegment;null!=a&&a.byteLength&&i.hls.trigger(L.BUFFER_APPENDING,{type:e,data:a,frag:r,part:null,chunkMeta:n,parent:r.type})})}this.tickImmediate()}},r.getMainFwdBufferInfo=function(){var e=this.mediaBuffer&&2===this.altAudio?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,I)},r.backtrack=function(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=mn},r.checkFragmentChanged=function(){var e=this.media,t=null;if(e&&e.readyState>1&&!1===e.seeking){var r=e.currentTime;if(rr.isBuffered(e,r)?t=this.getAppendedFrag(r):rr.isBuffered(e,r+.1)&&(t=this.getAppendedFrag(r+.1)),t){this.backtrackFragment=null;var n=this.fragPlaying,i=t.level;n&&t.sn===n.sn&&n.level===i||(this.fragPlaying=t,this.hls.trigger(L.FRAG_CHANGED,{frag:t}),n&&n.level===i||this.hls.trigger(L.LEVEL_SWITCHED,{level:i}))}}},n(t,[{key:"hasEnoughToStart",get:function(){return this._hasEnoughToStart}},{key:"maxBufferLength",get:function(){var e=this.levels,t=this.level,r=null==e?void 0:e[t];return r?this.getMaxBufferLength(r.maxBitrate):this.config.maxBufferLength}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"currentFrag",get:function(){var e;if(this.fragPlaying)return this.fragPlaying;var t=(null==(e=this.media)?void 0:e.currentTime)||this.lastCurrentTime;return S(t)?this.getAppendedFrag(t):null}},{key:"currentProgramDateTime",get:function(){var e,t=(null==(e=this.media)?void 0:e.currentTime)||this.lastCurrentTime;if(S(t)){var r=this.getLevelDetails(),n=this.currentFrag||(r?gt(null,r.fragments,t):null);if(n){var i=n.programDateTime;if(null!==i){var a=i+1e3*(t-n.start);return new Date(a)}}}return null}},{key:"currentLevel",get:function(){var e=this.currentFrag;return e?e.level:-1}},{key:"nextBufferedFrag",get:function(){var e=this.currentFrag;return e?this.followingBufferedFrag(e):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}])}(Ln),tl=function(){function e(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}var t=e.prototype;return t.abort=function(e){for(var t in this.keyUriToKeyInfo){var r=this.keyUriToKeyInfo[t].loader;if(r){var n;if(e&&e!==(null==(n=r.context)?void 0:n.frag.type))return;r.abort()}}},t.detach=function(){for(var e in this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}},t.destroy=function(){for(var e in this.detach(),this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}},t.createKeyLoadError=function(e,t,r,n,i){return void 0===t&&(t=R.KEY_LOAD_ERROR),new Jt({type:k.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:i,error:r,networkDetails:n})},t.loadClear=function(e,t,r){var n=this;if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(var i,a=function(){var i=t[s];if(e.cc<=i.cc&&(!ee(e)||!ee(i)||e.sn<i.sn)||!r&&s==o-1)return{v:n.emeController.selectKeySystemFormat(i).then(function(e){if(n.emeController){i.setKeyFormat(e);var t=Lr(e);return t?n.emeController.getKeySystemAccess([t]):void 0}})}},s=0,o=t.length;s<o;s++)if(i=a())return i.v;if(this.config.requireKeySystemAccessOnStart){var l=_r(this.config);if(l.length)return this.emeController.getKeySystemAccess(l)}}return null},t.load=function(e){var t=this;return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(function(r){return t.loadInternal(e,r)}):this.loadInternal(e)},t.loadInternal=function(e,t){var r,n;t&&e.setKeyFormat(t);var i=e.decryptdata;if(!i){var a=new Error(t?"Expected frag.decryptdata to be defined after setting format "+t:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,R.KEY_LOAD_ERROR,a))}var s=i.uri;if(!s)return Promise.reject(this.createKeyLoadError(e,R.KEY_LOAD_ERROR,new Error('Invalid key URI: "'+s+'"')));var o,l=this.keyUriToKeyInfo[s];if(null!=(r=l)&&r.decryptdata.key)return i.key=l.decryptdata.key,Promise.resolve({frag:e,keyInfo:l});if(null!=(n=l)&&n.keyLoadPromise)switch(null==(o=l.mediaKeySessionContext)?void 0:o.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return l.keyLoadPromise.then(function(t){return i.key=t.keyInfo.decryptdata.key,{frag:e,keyInfo:l}})}switch(l=this.keyUriToKeyInfo[s]={decryptdata:i,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},i.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===i.keyFormat?this.loadKeyHTTP(l,e):this.loadKeyEME(l,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(l,e);default:return Promise.reject(this.createKeyLoadError(e,R.KEY_LOAD_ERROR,new Error('Key supplied with unsupported METHOD: "'+i.method+'"')))}},t.loadKeyEME=function(e,t){var r={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var n=this.emeController.loadKey(r);if(n)return(e.keyLoadPromise=n.then(function(t){return e.mediaKeySessionContext=t,r})).catch(function(t){throw e.keyLoadPromise=null,t})}return Promise.resolve(r)},t.loadKeyHTTP=function(e,t){var r=this,n=this.config,i=new(0,n.loader)(n);return t.keyLoader=e.loader=i,e.keyLoadPromise=new Promise(function(a,s){var o={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},l=n.keyLoadPolicy.default,u={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:function(e,t,n,i){var o=n.frag,l=n.keyInfo,u=n.url;if(!o.decryptdata||l!==r.keyUriToKeyInfo[u])return s(r.createKeyLoadError(o,R.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),i));l.decryptdata.key=o.decryptdata.key=new Uint8Array(e.data),o.keyLoader=null,l.loader=null,a({frag:o,keyInfo:l})},onError:function(e,n,i,a){r.resetLoader(n),s(r.createKeyLoadError(t,R.KEY_LOAD_ERROR,new Error("HTTP Error "+e.code+" loading key "+e.text),i,c({url:o.url,data:void 0},e)))},onTimeout:function(e,n,i){r.resetLoader(n),s(r.createKeyLoadError(t,R.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),i))},onAbort:function(e,n,i){r.resetLoader(n),s(r.createKeyLoadError(t,R.INTERNAL_ABORTED,new Error("key loading aborted"),i))}};i.load(o,u,d)})},t.resetLoader=function(e){var t=e.frag,r=e.keyInfo,n=e.url,i=r.loader;t.keyLoader===i&&(t.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[n],i&&i.destroy()},e}();function rl(e){switch(e.type){case D:return P;case C:return x;default:return I}}function nl(e,t){var r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r}var il=function(){function e(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}var t=e.prototype;return t.startLoad=function(e){},t.stopLoad=function(){this.destroyInternalLoaders()},t.registerListeners=function(){var e=this.hls;e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.LEVEL_LOADING,this.onLevelLoading,this),e.on(L.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(L.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(L.LEVELS_UPDATED,this.onLevelsUpdated,this)},t.unregisterListeners=function(){var e=this.hls;e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.LEVEL_LOADING,this.onLevelLoading,this),e.off(L.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(L.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(L.LEVELS_UPDATED,this.onLevelsUpdated,this)},t.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,n=t.loader,i=new(r||n)(t);return this.loaders[e.type]=i,i},t.getInternalLoader=function(e){return this.loaders[e.type]},t.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},t.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},t.destroy=function(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()},t.onManifestLoading=function(e,t){var r=t.url;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:A,url:r,deliveryDirectives:null,levelOrTrack:null})},t.onLevelLoading=function(e,t){var r=t.id,n=t.level,i=t.pathwayId,a=t.url,s=t.deliveryDirectives,o=t.levelInfo;this.load({id:r,level:n,pathwayId:i,responseType:"text",type:_,url:a,deliveryDirectives:s,levelOrTrack:o})},t.onAudioTrackLoading=function(e,t){var r=t.id,n=t.groupId,i=t.url,a=t.deliveryDirectives,s=t.track;this.load({id:r,groupId:n,level:null,responseType:"text",type:D,url:i,deliveryDirectives:a,levelOrTrack:s})},t.onSubtitleTrackLoading=function(e,t){var r=t.id,n=t.groupId,i=t.url,a=t.deliveryDirectives,s=t.track;this.load({id:r,groupId:n,level:null,responseType:"text",type:C,url:i,deliveryDirectives:a,levelOrTrack:s})},t.onLevelsUpdated=function(e,t){var r=this.loaders[_];if(r){var n=r.context;n&&!t.levels.some(function(e){return e===n.levelOrTrack})&&(r.abort(),delete this.loaders[_])}},t.load=function(e){var t,r,n,i=this,s=this.hls.config,o=this.getInternalLoader(e);if(o){var l=this.hls.logger,u=o.context;if(u&&u.levelOrTrack===e.levelOrTrack&&(u.url===e.url||u.deliveryDirectives&&!e.deliveryDirectives))return void(u.url===e.url?l.log("[playlist-loader]: ignore "+e.url+" ongoing request"):l.log("[playlist-loader]: ignore "+e.url+" in favor of "+u.url));l.log("[playlist-loader]: aborting previous loader for type: "+e.type),o.abort()}if(r=e.type===A?s.manifestLoadPolicy.default:a({},s.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),o=this.createInternalLoader(e),S(null==(t=e.deliveryDirectives)?void 0:t.part)&&(e.type===_&&null!==e.level?n=this.hls.levels[e.level].details:e.type===D&&null!==e.id?n=this.hls.audioTracks[e.id].details:e.type===C&&null!==e.id&&(n=this.hls.subtitleTracks[e.id].details),n)){var c=n.partTarget,d=n.targetduration;if(c&&d){var f=1e3*Math.max(3*c,.8*d);r=a({},r,{maxTimeToFirstByteMs:Math.min(f,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(f,r.maxTimeToFirstByteMs)})}}var h=r.errorRetry||r.timeoutRetry||{},p={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:h.maxNumRetry||0,retryDelay:h.retryDelayMs||0,maxRetryDelay:h.maxRetryDelayMs||0},m={onSuccess:function(e,t,r,n){var a=i.getInternalLoader(r);i.resetInternalLoader(r.type);var s=e.data;0===s.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),Ur.isMediaPlaylist(s)||r.type!==A?i.handleTrackOrLevelPlaylist(e,t,r,n||null,a):i.handleMasterPlaylist(e,t,r,n)):i.handleManifestParsingError(e,r,new Error("no EXTM3U delimiter"),n||null,t)},onError:function(e,t,r,n){i.handleNetworkError(t,r,!1,e,n)},onTimeout:function(e,t,r){i.handleNetworkError(t,r,!0,void 0,e)}};o.load(e,p,m)},t.checkAutostartLoad=function(){if(this.hls){var e=this.hls,t=e.config,r=t.autoStartLoad,n=t.startPosition,i=e.forceStartLoad;(r||i)&&(this.hls.logger.log((r?"auto":"force")+" startLoad with configured startPosition "+n),this.hls.startLoad(n))}},t.handleMasterPlaylist=function(e,t,r,n){var i=this.hls,a=e.data,s=nl(e,r),o=Ur.parseMasterPlaylist(a,s);if(o.playlistParsingError)this.handleManifestParsingError(e,r,o.playlistParsingError,n,t);else{var l=o.contentSteering,u=o.levels,c=o.sessionData,d=o.sessionKeys,f=o.startTimeOffset,h=o.variableList;this.variableList=h;var p=Ur.parseMasterPlaylistMedia(a,s,o),m=p.AUDIO,g=void 0===m?[]:m,v=p.SUBTITLES,y=p["CLOSED-CAPTIONS"];g.length&&(g.some(function(e){return!e.url})||!u[0].audioCodec||u[0].attrs.AUDIO||(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new cr({}),bitrate:0,url:""}))),i.trigger(L.MANIFEST_LOADED,{levels:u,audioTracks:g,subtitles:v,captions:y,contentSteering:l,url:s,stats:t,networkDetails:n,sessionData:c,sessionKeys:d,startTimeOffset:f,variableList:h})}},t.handleTrackOrLevelPlaylist=function(e,t,r,n,i){var a=this.hls,s=r.id,o=r.level,l=r.type,u=nl(e,r),c=S(o)?o:S(s)?s:0,d=rl(r),f=Ur.parseLevelPlaylist(e.data,u,c,d,0,this.variableList);if(l===A){var h={attrs:new cr({}),bitrate:0,details:f,name:"",url:u};f.requestScheduled=t.loading.start+rn(f,0),a.trigger(L.MANIFEST_LOADED,{levels:[h],audioTracks:[],url:u,stats:t,networkDetails:n,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),r.levelDetails=f,this.handlePlaylistLoaded(f,e,t,r,n,i)},t.handleManifestParsingError=function(e,t,r,n,i){this.hls.trigger(L.ERROR,{type:k.NETWORK_ERROR,details:R.MANIFEST_PARSING_ERROR,fatal:t.type===A,url:e.url,err:r,error:r,reason:r.message,response:e,context:t,networkDetails:n,stats:i})},t.handleNetworkError=function(e,t,r,n,i){void 0===r&&(r=!1);var a="A network "+(r?"timeout":"error"+(n?" (status "+n.code+")":""))+" occurred while loading "+e.type;e.type===_?a+=": "+e.level+" id: "+e.id:e.type!==D&&e.type!==C||(a+=" id: "+e.id+' group-id: "'+e.groupId+'"');var s=new Error(a);this.hls.logger.warn("[playlist-loader]: "+a);var o=R.UNKNOWN,l=!1,u=this.getInternalLoader(e);switch(e.type){case A:o=r?R.MANIFEST_LOAD_TIMEOUT:R.MANIFEST_LOAD_ERROR,l=!0;break;case _:o=r?R.LEVEL_LOAD_TIMEOUT:R.LEVEL_LOAD_ERROR,l=!1;break;case D:o=r?R.AUDIO_TRACK_LOAD_TIMEOUT:R.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case C:o=r?R.SUBTITLE_TRACK_LOAD_TIMEOUT:R.SUBTITLE_LOAD_ERROR,l=!1}u&&this.resetInternalLoader(e.type);var d={type:k.NETWORK_ERROR,details:o,fatal:l,url:e.url,loader:u,context:e,error:s,networkDetails:t,stats:i};if(n){var f=(null==t?void 0:t.url)||e.url;d.response=c({url:f,data:void 0},n)}this.hls.trigger(L.ERROR,d)},t.handlePlaylistLoaded=function(e,t,r,n,i,a){var s=this.hls,o=n.type,l=n.level,u=n.id,c=n.groupId,d=n.deliveryDirectives,f=nl(t,n),h=rl(n),p="number"==typeof n.level&&h===I?l:void 0;if(e.fragments.length){e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));var m=e.playlistParsingError;if(m){if(this.hls.logger.warn(m),!s.config.ignorePlaylistParsingErrors)return void s.trigger(L.ERROR,{type:k.NETWORK_ERROR,details:R.LEVEL_PARSING_ERROR,fatal:!1,url:f,error:m,reason:m.message,response:t,context:n,level:p,parent:h,networkDetails:i,stats:r});e.playlistParsingError=null}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),a.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),o){case A:case _:s.trigger(L.LEVEL_LOADED,{details:e,levelInfo:n.levelOrTrack||s.levels[0],level:p||0,id:u||0,stats:r,networkDetails:i,deliveryDirectives:d,withoutMultiVariant:o===A});break;case D:s.trigger(L.AUDIO_TRACK_LOADED,{details:e,track:n.levelOrTrack,id:u||0,groupId:c||"",stats:r,networkDetails:i,deliveryDirectives:d});break;case C:s.trigger(L.SUBTITLE_TRACK_LOADED,{details:e,track:n.levelOrTrack,id:u||0,groupId:c||"",stats:r,networkDetails:i,deliveryDirectives:d})}}else{var g=e.playlistParsingError=new Error("No Segments found in Playlist");s.trigger(L.ERROR,{type:k.NETWORK_ERROR,details:R.LEVEL_EMPTY_ERROR,fatal:!1,url:f,error:g,reason:g.message,response:t,context:n,level:p,parent:h,networkDetails:i,stats:r})}},e}(),al=function(){function e(t){void 0===t&&(t={}),this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new y,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;var r=this.logger=G(t.debug||!1,"Hls instance",t.assetPlayerId),n=this.config=function(e,t,r){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');var n=jo(e),i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach(function(e){var a=("level"===e?"playlist":e)+"LoadPolicy",s=void 0===t[a],o=[];i.forEach(function(r){var i=e+"Loading"+r,l=t[i];if(void 0!==l&&s){o.push(i);var u=n[a].default;switch(t[a]={default:u},r){case"TimeOut":u.maxLoadTimeMs=l,u.maxTimeToFirstByteMs=l;break;case"MaxRetry":u.errorRetry.maxNumRetry=l,u.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":u.errorRetry.retryDelayMs=l,u.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":u.errorRetry.maxRetryDelayMs=l,u.timeoutRetry.maxRetryDelayMs=l}}}),o.length&&r.warn('hls.js config: "'+o.join('", "')+'" setting(s) are deprecated, use "'+a+'": '+at(t[a]))}),c(c({},n),t)}(e.DefaultConfig,t,r);this.userConfig=t,n.progressive&&Ho(n,r);var i=n.abrController,a=n.bufferController,s=n.capLevelController,o=n.errorController,l=n.fpsController,u=new o(this),d=this.abrController=new i(this),f=new Ut(this),h=n.interstitialsController,p=h?this.interstitialsController=new h(this,e):null,m=this.bufferController=new a(this,f),g=this.capLevelController=new s(this),v=new l(this),E=new il(this),b=n.contentSteeringController,S=b?new b(this):null,T=this.levelController=new Xo(this,S),w=new Wo(this),k=new tl(this.config),R=this.streamController=new el(this,f,k),A=this.gapController=new Go(this,f);g.setStreamController(R),v.setStreamController(R);var _=[E,T,R];p&&_.splice(1,0,p),S&&_.splice(1,0,S),this.networkControllers=_;var D=[d,m,A,g,v,w,f];this.audioTrackController=this.createController(n.audioTrackController,_);var C=n.audioStreamController;C&&_.push(this.audioStreamController=new C(this,f,k)),this.subtitleTrackController=this.createController(n.subtitleTrackController,_);var I=n.subtitleStreamController;I&&_.push(this.subtititleStreamController=new I(this,f,k)),this.createController(n.timelineController,D),k.emeController=this.emeController=this.createController(n.emeController,D),this.cmcdController=this.createController(n.cmcdController,D),this.latencyController=this.createController(Yo,D),this.coreComponents=D,_.push(u);var P=u.onErrorOut;"function"==typeof P&&this.on(L.ERROR,P,u),this.on(L.MANIFEST_LOADED,E.onManifestLoaded,E)}e.isMSESupported=function(){return Zo()},e.isSupported=function(){return function(){if(!Zo())return!1;var e=V();return"function"==typeof(null==e?void 0:e.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(function(t){return e.isTypeSupported(xe(t,"video"))})||["mp4a.40.2","fLaC"].some(function(t){return e.isTypeSupported(xe(t,"audio"))}))}()},e.getMediaSource=function(){return V()};var t=e.prototype;return t.createController=function(e,t){if(e){var r=new e(this);return t&&t.push(r),r}return null},t.on=function(e,t,r){void 0===r&&(r=this),this._emitter.on(e,t,r)},t.once=function(e,t,r){void 0===r&&(r=this),this._emitter.once(e,t,r)},t.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},t.off=function(e,t,r,n){void 0===r&&(r=this),this._emitter.off(e,t,r,n)},t.listeners=function(e){return this._emitter.listeners(e)},t.emit=function(e,t,r){return this._emitter.emit(e,t,r)},t.trigger=function(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),!this.triggeringException){this.triggeringException=!0;var r=e===L.ERROR;this.trigger(L.ERROR,{type:k.OTHER_ERROR,details:R.INTERNAL_EXCEPTION,fatal:r,event:e,error:t}),this.triggeringException=!1}}return!1},t.listenerCount=function(e){return this._emitter.listenerCount(e)},t.destroy=function(){this.logger.log("destroy"),this.trigger(L.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(function(e){return e.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(e){return e.destroy()}),this.coreComponents.length=0;var e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null},t.attachMedia=function(e){if(!e||"media"in e&&!e.media){var t=new Error("attachMedia failed: invalid argument ("+e+")");this.trigger(L.ERROR,{type:k.OTHER_ERROR,details:R.ATTACH_MEDIA_ERROR,fatal:!0,error:t})}else{this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());var r="media"in e,n=r?e.media:e,i=r?e:{media:n};this._media=n,this.trigger(L.MEDIA_ATTACHING,i)}},t.detachMedia=function(){this.logger.log("detachMedia"),this.trigger(L.MEDIA_DETACHING,{}),this._media=null},t.transferMedia=function(){this._media=null;var e=this.bufferController.transferMedia();return this.trigger(L.MEDIA_DETACHING,{transferMedia:e}),e},t.loadSource=function(e){this.stopLoad();var t=this.media,r=this._url,n=this._url=b.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log("loadSource:"+n),t&&r&&(r!==n||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(L.MANIFEST_LOADING,{url:e})},t.startLoad=function(e,t){void 0===e&&(e=-1),this.logger.log("startLoad("+e+(t?", <skip seek to start>":"")+")"),this.started=!0,this.resumeBuffering();for(var r=0;r<this.networkControllers.length&&(this.networkControllers[r].startLoad(e,t),this.started&&this.networkControllers);r++);},t.stopLoad=function(){this.logger.log("stopLoad"),this.started=!1;for(var e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!this.started&&this.networkControllers);e++);},t.resumeBuffering=function(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(function(e){e.resumeBuffering&&e.resumeBuffering()}))},t.pauseBuffering=function(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(function(e){e.pauseBuffering&&e.pauseBuffering()}))},t.swapAudioCodec=function(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.recoverMediaError=function(){this.logger.log("recoverMediaError");var e=this._media,t=null==e?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))},t.removeLevel=function(e){this.levelController.removeLevel(e)},t.setAudioOption=function(e){var t;return(null==(t=this.audioTrackController)?void 0:t.setAudioOption(e))||null},t.setSubtitleOption=function(e){var t;return(null==(t=this.subtitleTrackController)?void 0:t.setSubtitleOption(e))||null},t.getMediaDecodingInfo=function(e,t){return void 0===t&&(t=this.allAudioTracks),$e(e,ot(t),navigator.mediaCapabilities)},n(e,[{key:"url",get:function(){return this._url}},{key:"hasEnoughToStart",get:function(){return this.streamController.hasEnoughToStart}},{key:"startPosition",get:function(){return this.streamController.startPositionValue}},{key:"loadingEnabled",get:function(){return this.started}},{key:"bufferingEnabled",get:function(){return this.streamController.bufferingEnabled}},{key:"inFlightFragments",get:function(){var e,t=((e={})[I]=this.streamController.inFlightFrag,e);return this.audioStreamController&&(t[P]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(t[x]=this.subtititleStreamController.inFlightFrag),t}},{key:"sessionId",get:function(){var e=this._sessionId;return e||(e=this._sessionId=function(){try{return crypto.randomUUID()}catch(n){try{var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch(e){var r=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(r+16*Math.random())%16|0;return r=Math.floor(r/16),("x"==e?t:3&t|8).toString(16)})}}}()),e}},{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"latestLevelDetails",get:function(){return this.streamController.getLevelDetails()||null}},{key:"loadLevelObj",get:function(){return this.levelController.loadLevelObj}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){this.logger.log("set currentLevel:"+e),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){this.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){this.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){this.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){var e=this.levelController.startLevel;return-1===e&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e},set:function(e){this.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping!==e&&(this.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}},{key:"bandwidthEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN},set:function(e){this.abrController.resetEstimator(e)}},{key:"abrEwmaDefaultEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.defaultEstimate:NaN}},{key:"ttfbEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimateTTFB():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(e){(function(e){return Ye.indexOf(e)>-1})(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var e=this.levels,t=this.config.minAutoBitrate;if(!e)return 0;for(var r=e.length,n=0;n<r;n++)if(e[n].maxBitrate>=t)return n;return 0}},{key:"maxAutoLevel",get:function(){var e,t=this.levels,r=this.autoLevelCapping,n=this.maxHdcpLevel;if(e=-1===r&&null!=t&&t.length?t.length-1:r,n)for(var i=e;i--;){var a=t[i].attrs["HDCP-LEVEL"];if(a&&a<=n)return i}return e}},{key:"firstAutoLevel",get:function(){return this.abrController.firstAutoLevel}},{key:"nextAutoLevel",get:function(){return this.abrController.nextAutoLevel},set:function(e){this.abrController.nextAutoLevel=e}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"maxBufferLength",get:function(){return this.streamController.maxBufferLength}},{key:"allAudioTracks",get:function(){var e=this.audioTrackController;return e?e.allAudioTracks:[]}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"allSubtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(e){this.config.lowLatencyMode=e}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency},set:function(e){this.latencyController.targetLatency=e}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}},{key:"pathways",get:function(){return this.levelController.pathways}},{key:"pathwayPriority",get:function(){return this.levelController.pathwayPriority},set:function(e){this.levelController.pathwayPriority=e}},{key:"bufferedToEnd",get:function(){var e;return!(null==(e=this.bufferController)||!e.bufferedToEnd)}},{key:"interstitialsManager",get:function(){var e;return(null==(e=this.interstitialsController)?void 0:e.interstitialsManager)||null}}],[{key:"version",get:function(){return ia}},{key:"Events",get:function(){return L}},{key:"MetadataSchema",get:function(){return Xn}},{key:"ErrorTypes",get:function(){return k}},{key:"ErrorDetails",get:function(){return R}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:Bo},set:function(t){e.defaultConfig=t}}])}();return al.defaultConfig=void 0,al}()}(!1)},477:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,i=e[n];if(!(0<a(i,t)))break e;e[n]=t,e[r]=i,r=n}}function n(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length,s=i>>>1;n<s;){var o=2*(n+1)-1,l=e[o],u=o+1,c=e[u];if(0>a(l,r))u<i&&0>a(c,l)?(e[n]=c,e[u]=r,n=u):(e[n]=l,e[o]=r,n=o);else{if(!(u<i&&0>a(c,r)))break e;e[n]=c,e[u]=r,n=u}}}return t}function a(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if(t.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],d=1,f=null,h=3,p=!1,m=!1,g=!1,v=!1,y="function"==typeof setTimeout?setTimeout:null,E="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function S(e){for(var t=n(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,r(u,t)}t=n(c)}}function T(e){if(g=!1,S(e),!m)if(null!==n(u))m=!0,k||(k=!0,w());else{var t=n(c);null!==t&&P(T,t.startTime-e)}}var w,k=!1,R=-1,L=5,A=-1;function _(){return!(!v&&t.unstable_now()-A<L)}function D(){if(v=!1,k){var e=t.unstable_now();A=e;var r=!0;try{e:{m=!1,g&&(g=!1,E(R),R=-1),p=!0;var a=h;try{t:{for(S(e),f=n(u);null!==f&&!(f.expirationTime>e&&_());){var s=f.callback;if("function"==typeof s){f.callback=null,h=f.priorityLevel;var o=s(f.expirationTime<=e);if(e=t.unstable_now(),"function"==typeof o){f.callback=o,S(e),r=!0;break t}f===n(u)&&i(u),S(e)}else i(u);f=n(u)}if(null!==f)r=!0;else{var l=n(c);null!==l&&P(T,l.startTime-e),r=!1}}break e}finally{f=null,h=a,p=!1}r=void 0}}finally{r?w():k=!1}}}if("function"==typeof b)w=function(){b(D)};else if("undefined"!=typeof MessageChannel){var C=new MessageChannel,I=C.port2;C.port1.onmessage=D,w=function(){I.postMessage(null)}}else w=function(){y(D,0)};function P(e,r){R=y(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var r=h;h=t;try{return e()}finally{h=r}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=h;h=e;try{return t()}finally{h=r}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?s+a:s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,r(c,e),null===n(u)&&e===n(c)&&(g?(E(R),R=-1):g=!0,P(T,a-s))):(e.sortIndex=o,r(u,e),m||p||(m=!0,k||(k=!0,w()))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=h;return function(){var r=h;h=t;try{return e.apply(this,arguments)}finally{h=r}}}},501:function(e,t,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&i(t,e,r[s]);return a(t,e),t});Object.defineProperty(t,"__esModule",{value:!0});const o=r(848),l=s(r(506)),u=r(949),c=r(540),d=r(595),f=r(154);t.default=function({video:e}){let t=(0,u.useNavigate)();const{id:r,title:n,imgUrl:i,durationSeconds:a}=e,s=(0,c.useContext)(d.VideoContext),h=(0,f.parseDurationToFormat)(a);return(0,o.jsxs)("div",{onClick:()=>function(e,t,r){r(`/watch?q=${e.id}`),t(e)}(e,s.changeVideoContext,t),className:l.videoCard_wrapper,children:[(0,o.jsxs)("div",{className:l.videoCard_preview_container,children:[(0,o.jsx)("div",{className:l.videoCard_img_wrapper,children:(0,o.jsx)("img",{className:l.videoCard_preview_img,src:i,alt:"Preview not found"})}),(0,o.jsx)("span",{className:l.videoCard_duration,children:h})]}),(0,o.jsx)("div",{className:l.videoCard_description_container,children:(0,o.jsx)("p",{title:n,className:l.videoCard_title,children:n})})]})}},506:(e,t,r)=>{"use strict";r.r(t),r.d(t,{videoCard_description_container:()=>n,videoCard_duration:()=>i,videoCard_img_wrapper:()=>a,videoCard_preview_container:()=>s,videoCard_preview_img:()=>o,videoCard_title:()=>l,videoCard_wrapper:()=>u,wrapper:()=>c});var n="syjKf",i="P0EaZ",a="bTLET",s="dGwW3",o="uSwx3",l="_uz1k",u="hEtfg",c="hV7RZ"},532:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(848);t.default=function(){return(0,n.jsx)("div",{children:"404: Page Not Found"})}},540:(e,t,r)=>{"use strict";e.exports=r(869)},564:(e,t,r)=>{"use strict";e.exports=r.p+"b6a7394851841a2a3b00.svg"},577:function(e,t,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&i(t,e,r[s]);return a(t,e),t}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=r(848),u=s(r(731)),c=o(r(921)),d=r(595);t.default=function(){return(0,l.jsx)("div",{className:u.wrapper,children:(0,l.jsx)(d.VideoContextProvider,{children:(0,l.jsx)(c.default,{})})})}},590:function(e,t,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&i(t,e,r[s]);return a(t,e),t}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=r(848),u=s(r(802)),c=r(540),d=o(r(473)),f=o(r(820)),h=o(r(564)),p=o(r(165)),m=o(r(8)),g=o(r(195)),v=o(r(822)),y=o(r(602)),E=r(154);function b(e,t){e&&(t?e.pause():e.play())}function S(e,t){0==e?t(0):e<.5?t(1):e>=.5&&t(2)}function T(e,t,r){e&&(e.volume=r.currentVolume),localStorage.setItem("video-volume",JSON.stringify(r)),S(parseFloat(r.currentVolume),t)}t.default=function({videoUrl:e}){const t=(0,c.useRef)(null),r=(0,c.useRef)(null),n=(0,c.useRef)(null),[i,a]=(0,c.useState)(!1),[s,o]=(0,c.useState)(!1),[w,k]=(0,c.useState)(localStorage.getItem("video-volume")?JSON.parse(localStorage.getItem("video-volume")):{currentVolume:0,lastBeforeMuteVolume:.5}),[R,L]=(0,c.useState)(0),[A,_]=(0,c.useState)(0),[D,C]=(0,c.useState)(0),[I,P]=(0,c.useState)(!1),x={0:g.default,1:v.default,2:y.default};return(0,c.useEffect)(()=>{if(!t.current)return;if(!n.current)return;if(!r.current)return;const i=t.current,a=n.current,l=r.current;if(a.volume=w.currentVolume,S(w.currentVolume,L),d.default.isSupported()){console.log("Hls.isSupported");const t=new d.default;t.on(d.default.Events.ERROR,(e,t)=>{console.log(t)}),t.on(d.default.Events.LEVEL_LOADED,(e,t)=>{l.max=t.details.totalduration.toString(),_(t.details.totalduration)}),t.loadSource(e),t.attachMedia(a)}else a.canPlayType("application/vnd.apple.mpegurl")&&(a.src=e);let u=null;const c=()=>{P(!1),i.style.cursor="initial",u&&clearTimeout(u),u=setTimeout(()=>{i.style.cursor="none",P(!0)},3e3)};i.addEventListener("mousemove",c),i.addEventListener("mouseleave",()=>{P(!1),i.style.cursor="initial",u&&clearTimeout(u),i.removeEventListener("mousemove",c),u=setTimeout(()=>{P(!0)},3e3)}),i.addEventListener("mouseenter",()=>{i.addEventListener("mousemove",c)});const f=()=>{l.value=a.currentTime.toString(),C(parseInt(a.currentTime.toFixed(0)))};a.addEventListener("timeupdate",f),a.addEventListener("play",()=>{o(!0)}),a.addEventListener("pause",()=>{o(!1)}),a.addEventListener("ended",()=>{console.log("Last value:",l.value),console.log("Video ended:",a.currentTime)}),l.addEventListener("mousedown",e=>{a.removeEventListener("timeupdate",f)}),l.addEventListener("mouseup",e=>{a.addEventListener("timeupdate",f)}),l.addEventListener("change",e=>{a.currentTime=parseFloat(e.target.value),a.currentTime<parseFloat(l.max)&&s&&a.play()})},[]),(0,l.jsxs)("div",{ref:t,className:u.video_container,children:[(0,l.jsx)("video",{autoPlay:!0,className:u.video_player,ref:n}),(0,l.jsxs)("div",{className:u.controls_wrapper,children:[(0,l.jsx)("div",{onClick:()=>b(n.current,s),className:u.controls_top_wrapper}),(0,l.jsxs)("div",{style:{opacity:I?0:1},className:u.controls_bottom_wrapper,children:[(0,l.jsx)("div",{className:u.video_timeline,children:(0,l.jsx)("input",{ref:r,className:u.video_controls__input,type:"range",min:0,max:0,step:.05,defaultValue:0})}),(0,l.jsxs)("div",{className:u.controls_panel,children:[(0,l.jsxs)("div",{className:u.controls_left,children:[(0,l.jsx)("div",{onClick:()=>b(n.current,s),className:u.controls__play_pause,children:(0,l.jsx)("img",{className:u.controls__svg,src:s?h.default:f.default})}),(0,l.jsxs)("div",{className:u.controls__volume,children:[(0,l.jsx)("img",{onClick:()=>function(e,t,r){t(t=>{const n=0==t.currentVolume?{lastBeforeMuteVolume:t.lastBeforeMuteVolume,currentVolume:t.lastBeforeMuteVolume}:{currentVolume:0,lastBeforeMuteVolume:t.currentVolume};return T(e,r,n),n})}(n.current,k,L),className:u.controls__svg,src:x[R]}),(0,l.jsx)("span",{className:u.volume_slider__container,children:(0,l.jsx)("input",{className:u.volume_slider,onChange:e=>function(e,t,r,n){r(r=>{const i=Object.assign(Object.assign({},r),{currentVolume:parseFloat(e.target.value)});return T(t,n,i),i})}(e,n.current,k,L),type:"range",value:w.currentVolume,min:0,max:1,step:.05})})]}),(0,l.jsx)("div",{className:u.controls__duration_info,children:(0,l.jsxs)("span",{className:u.duration_info,children:[(0,E.parseDurationToFormat)(D)," / ",(0,E.parseDurationToFormat)(A)]})})]}),(0,l.jsx)("div",{className:u.controls_right,children:(0,l.jsx)("div",{onClick:()=>{var e;(e=t.current)&&a(t=>(console.log(t),t?document.exitFullscreen():e.requestFullscreen(),!t))},className:u.controls__fullscreen,children:(0,l.jsx)("img",{className:u.controls__svg,src:i?m.default:p.default})})})]})]})]})]})}},595:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoContextProvider=t.VideoContext=void 0;const n=r(848),i=r(540),a=r(540);t.VideoContext=(0,i.createContext)({}),t.VideoContextProvider=({children:e})=>{const[r,i]=(0,a.useState)(void 0);return(0,n.jsx)(t.VideoContext.Provider,{value:{videoContext:r,changeVideoContext:e=>{i(e)}},children:e})}},600:(e,t,r)=>{"use strict";r.r(t),r.d(t,{HydratedRouter:()=>c,RouterProvider:()=>o});var n=r(39),i=r(362),a=r(540),s=r(961);function o(e){return a.createElement(i.pg,{flushSync:s.flushSync,...e})}var l=null,u=null;function c(e){u||(u=function({unstable_getContext:e}){if(function(){if(!l&&window.__reactRouterContext&&window.__reactRouterManifest&&window.__reactRouterRouteModules){if(!0===window.__reactRouterManifest.sri){const e=document.querySelector("script[rr-importmap]");if(e?.textContent)try{window.__reactRouterManifest.sri=JSON.parse(e.textContent).integrity}catch(e){console.error("Failed to parse import map",e)}}l={context:window.__reactRouterContext,manifest:window.__reactRouterManifest,routeModules:window.__reactRouterRouteModules,stateDecodingPromise:void 0,router:void 0,routerInitialized:!1}}}(),!l)throw new Error("You must be using the SSR features of React Router in order to skip passing a `router` prop to `<RouterProvider>`");let t=l;if(!l.stateDecodingPromise){let e=l.context.stream;(0,i.V1)(e,"No stream found for single fetch decoding"),l.context.stream=void 0,l.stateDecodingPromise=(0,i.ht)(e,window).then(e=>{l.context.state=e.value,t.stateDecodingPromise.value=!0}).catch(e=>{t.stateDecodingPromise.error=e})}if(l.stateDecodingPromise.error)throw l.stateDecodingPromise.error;if(!l.stateDecodingPromise.value)throw l.stateDecodingPromise;let r,a=(0,i.qI)(l.manifest.routes,l.routeModules,l.context.state,l.context.ssr,l.context.isSpaMode);if(l.context.isSpaMode){let{loaderData:e}=l.context.state;l.manifest.routes.root?.hasLoader&&e&&"root"in e&&(r={loaderData:{root:e.root}})}else r=(0,n.Zd)(l.context.state,a,e=>({clientLoader:l.routeModules[e]?.clientLoader,hasLoader:!0===l.manifest.routes[e]?.hasLoader,hasHydrateFallback:null!=l.routeModules[e]?.HydrateFallback}),window.location,window.__reactRouterContext?.basename,l.context.isSpaMode),r&&r.errors&&(r.errors=(0,n.lR)(r.errors));let s=(0,i.aE)({routes:a,history:(0,i.zR)(),basename:l.context.basename,unstable_getContext:e,hydrationData:r,hydrationRouteProperties:i.jC,mapRouteProperties:i.nW,future:{unstable_middleware:l.context.future.unstable_middleware},dataStrategy:(0,i.aD)(()=>s,l.manifest,l.routeModules,l.context.ssr,l.context.basename),patchRoutesOnNavigation:(0,i.Wj)(l.manifest,l.routeModules,l.context.ssr,l.context.routeDiscovery,l.context.isSpaMode,l.context.basename)});return l.router=s,s.state.initialized&&(l.routerInitialized=!0,s.initialize()),s.createRoutesForHMR=i.ou,window.__reactRouterDataRouter=s,s}({unstable_getContext:e.unstable_getContext}));let[t,r]=a.useState(void 0);a.useEffect(()=>{},[]),a.useEffect(()=>{},[t]);let[s,c]=a.useState(u.state.location);return a.useLayoutEffect(()=>{l&&l.router&&!l.routerInitialized&&(l.routerInitialized=!0,l.router.initialize())},[]),a.useLayoutEffect(()=>{if(l&&l.router)return l.router.subscribe(e=>{e.location!==s&&c(e.location)})},[s]),(0,i.V1)(l,"ssrInfo unavailable for HydratedRouter"),(0,i.p4)(u,l.manifest,l.routeModules,l.context.ssr,l.context.routeDiscovery,l.context.isSpaMode),a.createElement(a.Fragment,null,a.createElement(i.yL.Provider,{value:{manifest:l.manifest,routeModules:l.routeModules,future:l.context.future,criticalCss:t,ssr:l.context.ssr,isSpaMode:l.context.isSpaMode,routeDiscovery:l.context.routeDiscovery}},a.createElement(i.aJ,{location:s},a.createElement(o,{router:u}))),a.createElement(a.Fragment,null))}},602:(e,t,r)=>{"use strict";e.exports=r.p+"83b6af204cb00f8e7dd9.svg"},635:e=>{"use strict";var t={decodeValues:!0,map:!1,silent:!1};function r(e){return"string"==typeof e&&!!e.trim()}function n(e,n){var i=e.split(";").filter(r),a=function(e){var t="",r="",n=e.split("=");return n.length>1?(t=n.shift(),r=n.join("=")):r=e,{name:t,value:r}}(i.shift()),s=a.name,o=a.value;n=n?Object.assign({},t,n):t;try{o=n.decodeValues?decodeURIComponent(o):o}catch(e){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+o+"'. Set options.decodeValues to false to disable this feature.",e)}var l={name:s,value:o};return i.forEach(function(e){var t=e.split("="),r=t.shift().trimLeft().toLowerCase(),n=t.join("=");"expires"===r?l.expires=new Date(n):"max-age"===r?l.maxAge=parseInt(n,10):"secure"===r?l.secure=!0:"httponly"===r?l.httpOnly=!0:"samesite"===r?l.sameSite=n:"partitioned"===r?l.partitioned=!0:l[r]=n}),l}function i(e,i){if(i=i?Object.assign({},t,i):t,!e)return i.map?{}:[];if(e.headers)if("function"==typeof e.headers.getSetCookie)e=e.headers.getSetCookie();else if(e.headers["set-cookie"])e=e.headers["set-cookie"];else{var a=e.headers[Object.keys(e.headers).find(function(e){return"set-cookie"===e.toLowerCase()})];a||!e.headers.cookie||i.silent||console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),e=a}return Array.isArray(e)||(e=[e]),i.map?e.filter(r).reduce(function(e,t){var r=n(t,i);return e[r.name]=r,e},{}):e.filter(r).map(function(e){return n(e,i)})}e.exports=i,e.exports.parse=i,e.exports.parseString=n,e.exports.splitCookiesString=function(e){if(Array.isArray(e))return e;if("string"!=typeof e)return[];var t,r,n,i,a,s=[],o=0;function l(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}function u(){return"="!==(r=e.charAt(o))&&";"!==r&&","!==r}for(;o<e.length;){for(t=o,a=!1;l();)if(","===(r=e.charAt(o))){for(n=o,o+=1,l(),i=o;o<e.length&&u();)o+=1;o<e.length&&"="===e.charAt(o)?(a=!0,o=i,s.push(e.substring(t,n)),t=o):o=n+1}else o+=1;(!a||o>=e.length)&&s.push(e.substring(t,e.length))}return s}},698:(e,t)=>{"use strict";var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(e,t,n){var i=null;if(void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),"key"in t)for(var a in n={},t)"key"!==a&&(n[a]=t[a]);else n=t;return t=n.ref,{$$typeof:r,type:e,key:i,ref:void 0!==t?t:null,props:n}}t.Fragment=n,t.jsx=i,t.jsxs=i},723:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(164));t.default=i.default},731:(e,t,r)=>{"use strict";r.r(t),r.d(t,{wrapper:()=>n});var n="_2K1x"},785:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;const i=n(r(800));t.Header=i.default},800:function(e,t,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&i(t,e,r[s]);return a(t,e),t});Object.defineProperty(t,"__esModule",{value:!0});const o=r(848),l=s(r(305)),u=r(976);t.default=function(){return(0,o.jsxs)("div",{className:l.header_container,children:[(0,o.jsx)("div",{className:l.header_logo_container,children:(0,o.jsx)("span",{className:l.logo,children:(0,o.jsx)(u.Link,{style:{textDecoration:"none"},to:"/",children:"Mtube"})})}),(0,o.jsx)("div",{className:l.header_search,children:(0,o.jsx)("input",{})}),(0,o.jsx)("div",{className:l.header_menu})]})}},802:(e,t,r)=>{"use strict";r.r(t),r.d(t,{controls__duration_info:()=>n,controls__fullscreen:()=>i,controls__play_pause:()=>a,controls__svg:()=>s,controls__volume:()=>o,controls_bottom_wrapper:()=>l,controls_left:()=>u,controls_panel:()=>c,controls_right:()=>d,controls_top_wrapper:()=>f,controls_wrapper:()=>h,duration_info:()=>p,video_container:()=>m,video_controls__input:()=>g,video_player:()=>v,video_timeline:()=>y,volume_slider:()=>E,volume_slider__container:()=>b});var n="WKL27",i="rIgOs",a="pFhxA",s="fNfaT",o="Vc5tp",l="he1Uo",u="aBmYi",c="VBB0u",d="brXvj",f="dkyF0",h="UZlCl",p="fUDeD",m="eTiYP",g="NmU2e",v="h1COk",y="KoNdA",E="Ep_NJ",b="gzcq7"},820:(e,t,r)=>{"use strict";e.exports=r.p+"b890f6dbf094065cad48.svg"},822:(e,t,r)=>{"use strict";e.exports=r.p+"225ec2aa3d0519807082.svg"},848:(e,t,r)=>{"use strict";e.exports=r(698)},869:(e,t)=>{"use strict";var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||p}function y(){}function E(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=E.prototype=new y;b.constructor=E,m(b,v.prototype),b.isPureReactComponent=!0;var S=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},w=Object.prototype.hasOwnProperty;function k(e,t,n,i,a,s){return n=s.ref,{$$typeof:r,type:e,key:t,ref:void 0!==n?n:null,props:s}}function R(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var L=/\/+/g;function A(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(r=""+e.key,n={"=":"=0",":":"=2"},"$"+r.replace(/[=:]/g,function(e){return n[e]})):t.toString(36);var r,n}function _(){}function D(e,t,i,a,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,u,c=!1;if(null===e)c=!0;else switch(o){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case r:case n:c=!0;break;case f:return D((c=e._init)(e._payload),t,i,a,s)}}if(c)return s=s(e),c=""===a?"."+A(e,0):a,S(s)?(i="",null!=c&&(i=c.replace(L,"$&/")+"/"),D(s,t,i,"",function(e){return e})):null!=s&&(R(s)&&(l=s,u=i+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(L,"$&/")+"/")+c,s=k(l.type,u,void 0,0,0,l.props)),t.push(s)),1;c=0;var d,p=""===a?".":a+":";if(S(e))for(var m=0;m<e.length;m++)c+=D(a=e[m],t,i,o=p+A(a,m),s);else if("function"==typeof(m=null===(d=e)||"object"!=typeof d?null:"function"==typeof(d=h&&d[h]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(a=e.next()).done;)c+=D(a=a.value,t,i,o=p+A(a,m++),s);else if("object"===o){if("function"==typeof e.then)return D(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(_,_):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,a,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function C(e,t,r){if(null==e)return e;var n=[],i=0;return D(e,n,"","",function(e){return t.call(r,e,i++)}),n}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function x(){}t.Children={map:C,forEach:function(e,t,r){C(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return C(e,function(){t++}),t},toArray:function(e){return C(e,function(e){return e})||[]},only:function(e){if(!R(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=E,t.StrictMode=a,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return T.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,r){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var n=m({},e.props),i=e.key;if(null!=t)for(a in t.ref,void 0!==t.key&&(i=""+t.key),t)!w.call(t,a)||"key"===a||"__self"===a||"__source"===a||"ref"===a&&void 0===t.ref||(n[a]=t[a]);var a=arguments.length-2;if(1===a)n.children=r;else if(1<a){for(var s=Array(a),o=0;o<a;o++)s[o]=arguments[o+2];n.children=s}return k(e.type,i,void 0,0,0,n)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,r){var n,i={},a=null;if(null!=t)for(n in void 0!==t.key&&(a=""+t.key),t)w.call(t,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&(i[n]=t[n]);var s=arguments.length-2;if(1===s)i.children=r;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];i.children=o}if(e&&e.defaultProps)for(n in s=e.defaultProps)void 0===i[n]&&(i[n]=s[n]);return k(e,a,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=R,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=T.T,r={};T.T=r;try{var n=e(),i=T.S;null!==i&&i(r,n),"object"==typeof n&&null!==n&&"function"==typeof n.then&&n.then(x,P)}catch(e){P(e)}finally{T.T=t}},t.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},t.use=function(e){return T.H.use(e)},t.useActionState=function(e,t,r){return T.H.useActionState(e,t,r)},t.useCallback=function(e,t){return T.H.useCallback(e,t)},t.useContext=function(e){return T.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return T.H.useDeferredValue(e,t)},t.useEffect=function(e,t,r){var n=T.H;if("function"==typeof r)throw Error("useEffect CRUD overload is not enabled in this build of React.");return n.useEffect(e,t)},t.useId=function(){return T.H.useId()},t.useImperativeHandle=function(e,t,r){return T.H.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return T.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.H.useMemo(e,t)},t.useOptimistic=function(e,t){return T.H.useOptimistic(e,t)},t.useReducer=function(e,t,r){return T.H.useReducer(e,t,r)},t.useRef=function(e){return T.H.useRef(e)},t.useState=function(e){return T.H.useState(e)},t.useSyncExternalStore=function(e,t,r){return T.H.useSyncExternalStore(e,t,r)},t.useTransition=function(){return T.H.useTransition()},t.version="19.1.0"},900:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(848),a=r(338),s=n(r(577)),o=document.getElementById("root");(0,a.createRoot)(o).render((0,i.jsx)(s.default,{}))},921:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(848),a=r(976),s=r(785),o=n(r(5)),l=n(r(943)),u=n(r(142)),c=n(r(723));t.default=()=>(0,i.jsxs)(a.BrowserRouter,{children:[(0,i.jsx)(s.Header,{}),(0,i.jsxs)(a.Routes,{children:[(0,i.jsx)(a.Route,{path:"/",element:(0,i.jsx)(o.default,{})}),(0,i.jsx)(a.Route,{path:"/account/:accountId",element:(0,i.jsx)(l.default,{})}),(0,i.jsx)(a.Route,{path:"/watch",element:(0,i.jsx)(c.default,{})}),(0,i.jsx)(a.Route,{path:"*",element:(0,i.jsx)(u.default,{})})]})]})},943:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(308));t.default=i.default},949:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Await:()=>i.jD,BrowserRouter:()=>i.Kd,Form:()=>i.lV,HashRouter:()=>i.I9,IDLE_BLOCKER:()=>i.G3,IDLE_FETCHER:()=>i.HW,IDLE_NAVIGATION:()=>i.uD,Link:()=>i.N_,Links:()=>i.qF,MemoryRouter:()=>i.fS,Meta:()=>i.W8,NavLink:()=>i.k2,Navigate:()=>i.C5,NavigationType:()=>i.rc,Outlet:()=>i.sv,PrefetchPageLinks:()=>i.cM,Route:()=>i.qh,Router:()=>i.Ix,RouterProvider:()=>i.pg,Routes:()=>i.BV,Scripts:()=>i.Tw,ScrollRestoration:()=>i.OA,ServerRouter:()=>n.Zz,StaticRouter:()=>i.kO,StaticRouterProvider:()=>i.je,UNSAFE_DataRouterContext:()=>i.hf,UNSAFE_DataRouterStateContext:()=>i.ay,UNSAFE_ErrorResponseImpl:()=>i.cj,UNSAFE_FetchersContext:()=>i.QH,UNSAFE_FrameworkContext:()=>i.yL,UNSAFE_LocationContext:()=>i.di,UNSAFE_NavigationContext:()=>i._3,UNSAFE_RSCDefaultRootErrorBoundary:()=>n.yq,UNSAFE_RemixErrorBoundary:()=>i.aJ,UNSAFE_RouteContext:()=>i.Pl,UNSAFE_ServerMode:()=>n.dC,UNSAFE_SingleFetchRedirectSymbol:()=>i.lR,UNSAFE_ViewTransitionContext:()=>i.KZ,UNSAFE_WithComponentProps:()=>i.Q2,UNSAFE_WithErrorBoundaryProps:()=>i.pp,UNSAFE_WithHydrateFallbackProps:()=>i.EB,UNSAFE_createBrowserHistory:()=>i.zR,UNSAFE_createClientRoutes:()=>i.qI,UNSAFE_createClientRoutesWithHMRRevalidationOptOut:()=>i.ou,UNSAFE_createRouter:()=>i.aE,UNSAFE_decodeViaTurboStream:()=>i.ht,UNSAFE_deserializeErrors:()=>n.lR,UNSAFE_getHydrationData:()=>n.Zd,UNSAFE_getPatchRoutesOnNavigationFunction:()=>i.Wj,UNSAFE_getTurboStreamSingleFetchDataStrategy:()=>i.aD,UNSAFE_hydrationRouteProperties:()=>i.jC,UNSAFE_invariant:()=>i.V1,UNSAFE_mapRouteProperties:()=>i.nW,UNSAFE_shouldHydrateRouteLoader:()=>i.vB,UNSAFE_useFogOFWarDiscovery:()=>i.p4,UNSAFE_useScrollRestoration:()=>i.RV,UNSAFE_withComponentProps:()=>i.ux,UNSAFE_withErrorBoundaryProps:()=>i.Vp,UNSAFE_withHydrateFallbackProps:()=>i.AX,createBrowserRouter:()=>i.Ys,createCookie:()=>n.n0,createCookieSessionStorage:()=>n.Y6,createHashRouter:()=>i.Ge,createMemoryRouter:()=>i.bg,createMemorySessionStorage:()=>n.Nb,createPath:()=>i.AO,createRequestHandler:()=>n.KB,createRoutesFromChildren:()=>i.AV,createRoutesFromElements:()=>i.Eu,createRoutesStub:()=>n.PY,createSearchParams:()=>i.PI,createSession:()=>n.jw,createSessionStorage:()=>n.yM,createStaticHandler:()=>i.xu,createStaticRouter:()=>i.KD,data:()=>i.p,generatePath:()=>i.tW,href:()=>n.UF,isCookie:()=>n.fm,isRouteErrorResponse:()=>i.pX,isSession:()=>n.lV,matchPath:()=>i.B6,matchRoutes:()=>i.ue,parsePath:()=>i.Rr,redirect:()=>i.V2,redirectDocument:()=>i.Sk,renderMatches:()=>i.KT,replace:()=>i.HC,resolvePath:()=>i.o1,unstable_HistoryRouter:()=>i.ks,unstable_RSCHydratedRouter:()=>n.Jt,unstable_RSCStaticRouter:()=>n.E3,unstable_RouterContextProvider:()=>i.$Y,unstable_createCallServer:()=>n.Y4,unstable_createContext:()=>i.Ni,unstable_getRSCStream:()=>n.t6,unstable_routeRSCServerRequest:()=>n.C3,unstable_setDevServerHooks:()=>n.LQ,unstable_usePrompt:()=>i.kc,useActionData:()=>i.mP,useAsyncError:()=>i.oI,useAsyncValue:()=>i.J8,useBeforeUnload:()=>i.K,useBlocker:()=>i.KP,useFetcher:()=>i.Ls,useFetchers:()=>i.SI,useFormAction:()=>i.g$,useHref:()=>i.$P,useInRouterContext:()=>i.Ri,useLinkClickHandler:()=>i.Gy,useLoaderData:()=>i.LG,useLocation:()=>i.zy,useMatch:()=>i.RQ,useMatches:()=>i.FE,useNavigate:()=>i.Zp,useNavigation:()=>i.cq,useNavigationType:()=>i.wQ,useOutlet:()=>i.P1,useOutletContext:()=>i.KC,useParams:()=>i.g,useResolvedPath:()=>i.x$,useRevalidator:()=>i.vL,useRouteError:()=>i.r5,useRouteLoaderData:()=>i.Ew,useRoutes:()=>i.Ye,useSearchParams:()=>i.ok,useSubmit:()=>i.of,useViewTransitionState:()=>i.PM});var n=r(39),i=r(362)},961:(e,t,r)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=r(221)},975:(e,t,r)=>{"use strict";r.r(t),r.d(t,{otherContent:()=>n,videoContent:()=>i,wrapper:()=>a});var n="RKKyz",i="N76_p",a="IOFmR"},976:(e,t,r)=>{"use strict";var n,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,l=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of s(t))o.call(e,l)||l===r||i(e,l,{get:()=>t[l],enumerable:!(n=a(t,l))||n.enumerable});return e},u={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(u,{HydratedRouter:()=>c.HydratedRouter,RouterProvider:()=>c.RouterProvider}),e.exports=(n=u,l(i({},"__esModule",{value:!0}),n));var c=r(600);((e,t,r)=>{l(e,t,"default"),r&&l(r,t,"default")})(u,r(949),e.exports)},982:(e,t,r)=>{"use strict";e.exports=r(477)}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var i=n.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=n[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),r(900)})();